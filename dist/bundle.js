/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={167:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"a {\n\tdisplay: flex;\n\talign-items: center; /* Alinea verticalmente los elementos */\n\ttext-decoration: none; /* Quita el subrayado del enlace */\n}\n\np {\n\tmargin-right: 10px; /* Ajusta el margen derecho según sea necesario */\n}\n\n",""]);const a=o},989:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#cards {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmy-moviecardadd {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n",""]);const a=o},925:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos para el componente de banner */\n#allbanner {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tbackground-size: cover;\n\tbackground-position: center top 30%;\n\tmargin: 0;\n\tpadding: 10%;\n\theight: 43vh;\n}\n\n#allbanner::before {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.3); /* Color de fondo con opacidad */\n\tz-index: 1; /* Colócalo encima del contenido */\n}\n\n:host {\n\tcolor: white;\n}\n\nsection {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tposition: relative;\n\tz-index: 2;\n}\n\n/* Estilos para el componente personalizado de la barra de navegación */\ncustom-navbar {\n\twidth: 100%; /* Ocupar el 100% del banner */\n\tposition: absolute; /* Para posicionarlo */\n\ttop: 0; /* En la parte superior */\n\tz-index: 3; /* Z-index para estar por encima de otros elementos */\n}\n\nh1 {\n\twidth: 45%;\n\theight: auto; /* Cambia la altura a automática */\n\tmargin-top: 30%;\n\tmargin-bottom: 3vh; /* Espacio entre el mensaje y el botón */\n\tfont-size: 200%;\n\ttext-align: center; /* Centrar horizontalmente */\n\tfont-family: 'Domine', serif;\n}\n\nbutton {\n\twidth: 20%; /* Modifica el ancho del botón */\n\theight: 50px;\n\tbackground-color: rgba(251, 149, 60, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 10px;\n\tfont-size: 80%;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\nbutton:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n\tcursor: pointer;\n}\n\nbutton span {\n\tdisplay: inline-block;\n\twidth: 100%;\n\ttext-align: center;\n}\n\n/* Media queries para dispositivos móviles */\n@media screen and (max-width: 767px) {\n\t:host {\n\t\theight: auto; /* Altura automática para adaptarse a dispositivos móviles */\n\t}\n\n\th1 {\n\t\twidth: 80%;\n\t\tmargin-top: 40%;\n\t\tmargin-bottom: 3vh;\n\t\tfont-size: 6vw;\n\t}\n\n\tbutton {\n\t\twidth: 60%;\n\t\theight: 10vw;\n\t\tfont-size: 4vw;\n\t}\n}\n",""]);const a=o},682:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Reset de estilos */\n* {\n\tmargin: 0;\n\tpadding: 0;\n\tbox-sizing: border-box;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\n/* Estilos generales de la barra de navegación */\nnav {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 3%;\n\tjustify-content: space-between;\n\talign-items: center;\n\tbackground: none;\n}\n\n/* Estilos para la sección de búsqueda */\nnav .search-bar,\nnav .pages {\n\tflex: 1;\n}\n\n/* Agrega un espacio del 5% entre .search-bar y .pages */\nnav .search-bar {\n\tmargin-right: 5%;\n}\n\n/* Ajustes adicionales para la barra de búsqueda */\n.search-bar {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 30px;\n\tbox-sizing: border-box;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tborder-radius: 5px;\n\tmax-width: 30%;\n\twidth: 50%;\n}\n\n.search-bar input {\n\tflex: 1;\n\tpadding: 2px 5px;\n\theight: 100%;\n\tborder: none;\n\toutline: none;\n\tbackground-color: transparent;\n\tcolor: white;\n}\n\n.icon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.icon img {\n\twidth: 20px;\n\tpadding: 0 10px;\n}\n\n/* Estilos para la sección de páginas */\n.pages {\n\tdisplay: flex;\n\tjustify-content: center;\n\tgap: 13%;\n}\n\n.pages a {\n\t/* margin-right: 12%; */\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n\tcolor: white;\n\tfont-size: 14px;\n\tpadding: 5px 0;\n}\n\n.pages a:hover {\n\tcolor: rgba(251, 149, 60, 1);\n\tcursor: pointer;\n\ttransition: color 0.1s ease;\n}\n\n.pages {\n\tposition: relative;\n}\n\n/* Estilos para el menú desplegable */\n.pages .menu-desplegable {\n\tdisplay: none;\n\tposition: absolute;\n\ttop: 100%;\n\tleft: 0;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tpadding: 10px;\n\tborder-radius: 5px;\n\tlist-style-type: none;\n}\n\n.pages .menu-desplegable a {\n\ttext-transform: none;\n\tdisplay: block;\n\tpadding: 5px 0;\n}\n\n.pages .menu-desplegable a:hover {\n\tcolor: rgba(233, 13, 90, 1);\n}\n\n.menu-desplegableDisplayed {\n\tdisplay: block !important;\n}\n\n/* media queries */\n@media screen and (max-width: 767px) {\n\tnav {\n\t\tflex-direction: column;\n\t}\n\n\tnav .search-bar {\n\t\twidth: 100%;\n\t\tmargin-right: 0;\n\t}\n\n\t.pages {\n\t\tjustify-content: space-around;\n\t}\n\n\t.pages a {\n\t\tmargin-right: 0;\n\t\tfont-size: 13px;\n\t\tpadding: 5px;\n\t}\n}\n",""]);const a=o},679:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"button {\n\twidth: 20%; /* Modifica el ancho del botón */\n\theight: 50px;\n\tbackground-color: rgba(251, 149, 60, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 10px;\n\tfont-size: 80%;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\nbutton:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\nbutton span {\n\tdisplay: inline-block;\n\twidth: 100%;\n\ttext-align: center;\n}\n\n@media screen and (max-width: 767px) {\n\tbutton {\n\t\twidth: 100%;\n\t\tmargin-bottom: 10px;\n\t\tfont-size: 1rem;\n\t\tpadding: 0.5rem;\n\t}\n}\n",""]);const a=o},14:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#listMovies {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmy-moviecardadd {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n",""]);const a=o},721:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"* {\n\tmargin: 0;\n\tpadding: 0;\n\tbox-sizing: border-box;\n}\n\n.comment-section {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 20px;\n\tgap: 30px;\n\tborder-top: 1px solid white;\n\tmargin-bottom: 20px;\n}\n\n.info-user {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: flex-start;\n\tgap: 20px;\n}\n\n.user-image {\n\twidth: 70px;\n\theight: 70px;\n}\n\n.user-image img {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n\tborder-radius: 50%;\n}\n\n.info-user .rating {\n\tcolor: rgba(229, 39, 97, 1);\n}\n\n.info-user span h3 {\n\tdisplay: inline-block;\n}\n\n.right-side {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 10px;\n}\n\n@media screen and (max-width: 767px) {\n\t.user-image {\n\t\twidth: 40px;\n\t\theight: 40px;\n\t}\n\n\t.info-user h3 {\n\t\tfont-size: 12px;\n\t}\n\n\t.info-comment p {\n\t\tfont-size: 12px;\n\t}\n}\n",""]);const a=o},191:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"h2 {\n\tfont-weight: normal; /* Quita el negrita */\n\tcolor: rgba(233, 13, 90, 1); /* Cambia el color a rosa */\n\tmargin-bottom: 6px;\n}\n\nhr {\n\tborder-color: rgba(233, 13, 90, 1); /* Cambia el color del hr a rosa */\n\tmargin-top: 0px;\n\tmargin-bottom: 5%;\n}\n\np {\n\tmargin-bottom: 10%;\n}\n\n@media screen and (max-width: 767px) {\n\th2 {\n\t\tfont-size: 1.5rem;\n\t}\n\n\thr {\n\t\tmargin-bottom: 3%;\n\t}\n\n\tp {\n\t\tfont-size: 1rem;\n\t}\n}\n",""]);const a=o},267:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#favoriteMovies {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmovie-card {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n",""]);const a=o},83:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"#figure {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\ttext-align: center;\n}\n\n#figure img {\n\twidth: 400px;\n\theight: auto;\n}\n\n#directoanddate {\n\tmargin-top: 1px; /* Ajusta el margen superior según sea necesario */\n}\n\nh1 {\n\tfont-size: 200%;\n\tmargin: 1%;\n}\n\n#directoranddate {\n\tmargin: 1%;\n\tdisplay: flex; /* Hace que los elementos se alineen en una línea */\n\tjustify-content: center; /* Los elementos se alinearán al centro horizontalmente */\n\tgap: 10px; /* Espacio entre los elementos */\n}\n\np {\n\tmargin: 1%;\n\twhite-space: nowrap; /* Hace que el texto dentro del párrafo se muestre en una sola línea */\n}\n\n/* Estilos para pantallas más pequeñas */\n@media screen and (max-width: 767px) {\n\t#figure {\n\t\tmargin-top: 50%; /* Ajusta el margen superior para posicionarlo más abajo */\n\t}\n\n\t#figure img {\n\t\twidth: 100%; /* Hace que la imagen ocupe todo el ancho disponible */\n\t}\n\n\t#directoranddate {\n\t\tflex-direction: column; /* Cambia la dirección del flexbox a columna */\n\t\talign-items: center; /* Centra los elementos horizontalmente */\n\t\tmargin-top: 5px; /* Ajusta el margen superior */\n\t}\n\n\th1 {\n\t\tfont-size: 120%;\n\t}\n\tp {\n\t\twhite-space: normal;\n\t\tfont-size: 90%;\n\t}\n}\n",""]);const a=o},909:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"",""]);const a=o},675:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"* {\n\tmargin: 0;\n\tpadding: 0;\n\tbox-sizing: border-box;\n\tfont-family: Arial, Helvetica, sans-serif;\n}\n\n.modal-new-list {\n\tbackground-color: orange;\n\tborder-radius: 30px;\n\tpadding: 10px 40px;\n\tpadding-bottom: 40px;\n\twidth: 500px;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: fixed; /* Cambiamos position: relative; a position: fixed; */\n\ttop: 50%; /* Agregamos top: 50%; */\n\tleft: 50%; /* Agregamos left: 50%; */\n\ttransform: translate(-50%, -50%); /* Agregamos transform: translate(-50%, -50%); */\n}\n\n.close {\n\tposition: absolute;\n\ttop: 20px;\n\tright: 20px;\n\tcursor: pointer;\n}\n\n.title-list {\n\tmargin-top: 15px;\n\tmargin-bottom: 30px;\n}\n\n.info-list {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n.info-list label {\n\tmargin-bottom: 10px;\n}\n\n.info-list input[type='text'] {\n\twidth: 80%;\n\tpadding: 5px;\n\tmargin-bottom: 20px;\n\tborder-radius: 5px;\n\tborder: 1px solid #3e3e3e;\n}\n\n.info-list button[type='submit'] {\n\tbackground-color: black;\n\tcolor: white;\n\tpadding: 10px 20px;\n\tborder-radius: 10px;\n\tborder: none;\n\tcursor: pointer;\n\tmargin-top: 20px;\n}\n\n.info-list button[type='submit']:hover {\n\tbackground-color: #555;\n}\n.modal-new-list {\n\tz-index: 1000;\n}\n\n@media screen and (max-width: 767px) {\n\t.modal-new-list {\n\t\twidth: 80%;\n\t}\n}\n",""]);const a=o},163:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos para el contenedor de la tarjeta de película */\n.container {\n\tposition: relative;\n\tobject-fit: cover;\n\tdisplay: flex;\n\theight: 100%;\n\twidth: 100%;\n}\n\n/* Estilos para el póster/imagen principal de la película */\n.poster {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n/* Estilos para el contenido */\n.content {\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.6); /* Fondo semitransparente */\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-direction: column;\n\topacity: 0; /* Inicialmente oculto */\n\ttransition: opacity 0.6s; /* Transición suave al mostrar */\n\tobject-fit: cover;\n}\n\n.container:hover .content {\n\topacity: 1; /* Mostrar contenido al pasar el mouse por encima de .container */\n}\n\np {\n\tcolor: white;\n\tfont-size: 100%;\n}\n\n.content button {\n\tbackground-color: transparent;\n\tborder: none;\n\tcolor: white;\n\tfont-size: 2rem;\n\tcursor: pointer;\n}\n\n/* Estilos para el botón de añadir */\nbutton#AddButton {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 80px;\n\theight: 80px;\n\tborder-radius: 50%;\n\tborder: 2px solid white;\n\ttransition: transform 0.3s ease-in-out;\n}\n\nbutton#AddButton:hover {\n\ttransform: scale(1.1);\n}\n\n@media screen and (max-width: 767px) {\n\t.content button {\n\t\tfont-size: 1.5rem;\n\t}\n}\n",""]);const a=o},931:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos globales del componente */\n* {\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\n/* Estilos para el contenedor de la tarjeta de película */\n.container {\n\tposition: relative;\n\tobject-fit: cover;\n\tdisplay: flex;\n\theight: 100%;\n\twidth: 100%;\n}\n\n/* Estilos para el póster/imagen principal de la película */\n.poster {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n.viewdetails {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-direction: column;\n}\n/* Añade estilos para el contenido */\n.content {\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.6); /* Fondo semitransparente */\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-direction: column;\n\topacity: 0; /* Inicialmente oculto */\n\ttransition: opacity 0.6s; /* Transición suave al mostrar */\n\tobject-fit: cover;\n}\n\n.container:hover .content {\n\topacity: 1; /* Mostrar contenido al pasar el mouse por encima de .container */\n}\n\np {\n\tcolor: white;\n\tfont-size: 100%;\n}\n\n.content img,\n.content p {\n\tmargin: 5px; /* Ajusta el margen entre elementos */\n\ttext-align: center;\n}\n\n.content img {\n\twidth: 28%;\n\theight: auto;\n\tcursor: pointer; /* Cambia el cursor al pasar sobre el botón */\n}\n\nimg.details {\n\theight: auto;\n\twidth: 50%;\n}\n\n.link {\n\tdisplay: flex;\n\twidth: 100%; /* Ancho del 50% */\n\theight: 25%;\n\tjustify-content: center; /* Centra horizontalmente */\n\talign-items: center; /* Centra verticalmente */\n\tmargin: 5px;\n\tpadding: 0px;\n}\n\n.dislike,\n.like {\n\tdisplay: none; /* Inicialmente oculto */\n}\n\n@media screen and (max-width: 767px) {\n\t.content img,\n\t.content p {\n\t\tmargin: 3px;\n\t}\n\n\t.content img {\n\t\twidth: 35%;\n\t}\n\n\timg.details {\n\t\twidth: 80%;\n\t}\n\n\t.link {\n\t\twidth: 70%;\n\t}\n}\n",""]);const a=o},779:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"* {\n\tbox-sizing: border-box;\n}\n/* Agrega estas reglas CSS a tu archivo ProfileInfo.css */\n\n.profile-image {\n\tposition: relative;\n}\n\n.profile-image::before {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.5); /* Agrega un velo semitransparente */\n\topacity: 0; /* Inicialmente invisible */\n\ttransition: opacity 0.3s ease;\n\tborder-radius: 50%; /* Coincide con la imagen */\n}\n\n.profile-image:hover::before {\n\topacity: 1; /* Mostrar el velo al pasar el ratón */\n}\n\n.overlay {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tcolor: white;\n\tfont-size: 1.2rem;\n\ttext-align: center;\n\topacity: 0; /* Inicialmente invisible */\n\ttransition: opacity 0.3s ease;\n}\n\n.profile-image:hover .overlay {\n\topacity: 1; /* Mostrar el texto al pasar el ratón */\n}\n\n.container {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tcolor: white;\n\tfont-family: 'Cairo', sans-serif;\n\tpadding: 30px;\n\tbox-sizing: border-box;\n}\n\n.profile {\n\twidth: 200px;\n\theight: 200px;\n}\n\n.profile-image img {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n\tborder-radius: 50%;\n}\n\n.form {\n\twidth: 250px;\n}\n\n.form-group input {\n\tborder: 2px solid white;\n\tbackground-color: lightgray;\n\tborder-radius: 10px;\n\tpadding: 5px;\n\twidth: 100%;\n}\n\n.form-actions button {\n\tbackground-color: rgba(250, 149, 59, 1);\n\tborder-radius: 10px;\n\tpadding: 5px 10px;\n\tmargin: 5px 0;\n\tmin-width: 170px;\n\tcursor: pointer;\n\tcolor: white;\n\twidth: 100%;\n}\n@media screen and (max-width: 767px) {\n\t.container {\n\t\talign-items: center;\n\t}\n\n\t.profile {\n\t\twidth: 150px;\n\t\theight: 150px;\n\t}\n\n\t.form-actions button {\n\t\tmin-width: auto;\n\t\twidth: 100%;\n\t}\n}\n",""]);const a=o},791:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"input {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-bottom: 0;\n\tborder: none;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #fff;\n\tborder-radius: 5px;\n\tbox-sizing: border-box; /* Modelo de caja */\n}\n\n::placeholder {\n\tcolor: rgba(30, 21, 22, 1);\n}\n\n#header .close {\n\tfloat: right; /* Se alinea a la derecha */\n\tcursor: pointer;\n}\n\nh1 {\n\tfont-size: 200%;\n\tmargin-top: 0;\n}\n\nlabel {\n\tfont-size: 15px;\n}\n@media screen and (max-width: 767px) {\n\tinput {\n\t\tfont-size: 14px; /* Reduce el tamaño de fuente en dispositivos más pequeños */\n\t}\n\n\th1 {\n\t\tfont-size: 2rem; /* Reduce el tamaño de fuente del título en dispositivos más pequeños */\n\t}\n}\n",""]);const a=o},633:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"a {\n\tcolor: rgba(250, 149, 59, 1);\n\tfont-size: 15px;\n}\n\nbutton {\n\twidth: 100%;\n\tpadding: 10px;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tcursor: pointer; /* Cambio de cursor */\n\tfont-family: 'Noto Traditional Nushu', serif;\n\tfont-size: 110%;\n}\n\nbutton:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\np {\n\tfont-size: 15px;\n}\n",""]);const a=o},695:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"* {\n\tbox-sizing: border-box;\n}\n\n:host {\n\tdisplay: block;\n\t/* padding: 5%; */\n}\n\n#favoriteMovies {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start;\n\tgap: 2%;\n}\n\nmovie-card:host {\n\twidth: calc((100% / 6) - 2%);\n\tmargin-bottom: 20px;\n\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%);\n\t\tmargin-bottom: 4%;\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n\nh1 {\n\ttext-transform: uppercase;\n\tcolor: white;\n\tfont-family: 'Cairo', sans-serif;\n\tmargin-bottom: 40px;\n\n\t@media (max-width: 767px) {\n\t\th1 {\n\t\t\tfont-size: 5vw; /* Tamaño de fuente más grande para pantallas pequeñas */\n\t\t}\n\n\t\tmovie-card {\n\t\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t\t}\n\t}\n}\n",""]);const a=o},583:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos para el botón flotante de abrir el modal */\n#ButtonModal {\n\tposition: fixed;\n\tz-index: 1; /* Se coloca por encima de otros elementos */\n\tbottom: 20px;\n\tright: 20px;\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: white;\n\tfont-size: 35px;\n\twidth: 55px;\n\theight: 55px;\n\tborder-radius: 50%;\n\tborder: 0px;\n\tcursor: pointer;\n}\n\n/* Estilos para el botón de cerrar el modal */\n.modalContainer .close {\n\tfloat: right; /* Se alinea a la derecha */\n\tcursor: pointer;\n}\n\n::placeholder {\n\tcolor: rgba(30, 21, 22, 1);\n}\n/* Estilos del formulario dentro del modal */\n.my-form {\n\tposition: fixed; /* Se fija el formulario en una posición específica */\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%); /* Centrado horizontal y vertical */\n\tbackground-color: rgba(30, 21, 22, 1);\n\tz-index: 2; /* Colocado por encima del modal */\n\tpadding: 20px;\n\tbox-shadow: 0 0 20px #000000; /* Sombra */\n\tborder-radius: 2rem;\n\theight: 80vh; /* Altura del 80% de la ventana */\n\twidth: 50%; /* Ancho del 50% de la ventana */\n\toverflow-x: hidden; /* Oculta el desbordamiento horizontal */\n\toverflow-y: auto; /* Habilita el desplazamiento vertical */\n}\n\n/*oculta la scrollbar */\n.my-form::-webkit-scrollbar {\n\tdisplay: none;\n}\n\n.modalContainer {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 9999;\n}\n\n/* Crea el velo detras del modal*/\n.modal-overlay {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.7);\n\tz-index: -1;\n}\n\n/*Responsive */\n@media screen and (max-width: 767px) {\n\t#ButtonModal {\n\t\twidth: 60px;\n\t\theight: 60px;\n\t\tfont-size: 40px;\n\t}\n\n\t.modal-content {\n\t\tpadding: 10px;\n\t}\n\n\t.my-form {\n\t\tpadding: 10px;\n\t}\n\n\t.my-form input[type='text'],\n\t.my-form input[type='date'] {\n\t\tpadding: 8px;\n\t\tfont-size: 14px;\n\t}\n\n\t.my-form button {\n\t\tpadding: 8px;\n\t\tfont-size: 14px;\n\t}\n}\n\n/* Estilos del contenido del modal */\n.modal-content {\n\tcolor: #fff;\n\tpadding: 20px;\n\tborder-radius: 10px;\n\tposition: relative;\n\tz-index: 10000; /* Colocado por encima de todos los elementos */\n\toverflow: hidden; /* Oculta el desbordamiento */\n\tdisplay: flex;\n\tjustify-content: center; /* Centrado horizontal */\n\talign-items: center; /* Centrado vertical */\n\tfont-family: 'Cairo', sans-serif;\n\tfont-size: 80%;\n\theight: 80vh; /* Altura del 80% de la ventana */\n}\n\n.my-form label {\n\tcolor: #fff;\n}\n\n/* Estilos para los campos de entrada de texto y fecha */\n.my-form input[type='text'],\n.my-form input[type='date'] {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-bottom: 0;\n\tborder: none;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #fff;\n\tborder-radius: 5px;\n\tbox-sizing: border-box; /* Modelo de caja */\n}\n\n/* Estilos para los checkboxes */\n.my-form input[type='checkbox'] {\n\tmargin-right: 5px;\n}\n\n/* Estilos para el botón de submit */\n.my-form button {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-top: 20px;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tcursor: pointer; /* Cambio de cursor */\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\n/* Estilos cuando se pasa el cursor sobre el botón */\n.my-form button:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\n/* Estilos para los checkboxes de género */\n#checkboxes label {\n\tmargin-right: 10px;\n}\n\n#checkboxes {\n\tdisplay: grid; /* Se muestra como grid */\n\tgrid-template-rows: repeat(2, 1fr); /* Se repite la plantilla de filas */\n\tgrid-auto-flow: column; /* Se muestran en columnas */\n}\n\n/* Estilos para la imagen de cerrar el modal, el icono de x */\n.close img {\n\twidth: 70%;\n\theight: auto;\n\tcursor: pointer; /* Cambia el cursor al pasar sobre el botón */\n}\n",""]);const a=o},775:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"b {\n\ttext-transform: uppercase; /* Convierte el texto a mayúsculas */\n\topacity: 70%;\n}\n\np {\n\tdisplay: block; /* Hace que el párrafo sea un bloque de texto */\n\twidth: 100%; /* Establece un ancho del 100% */\n}\n\n#description {\n\tmargin-bottom: 10%;\n}\n@media screen and (max-width: 767px) {\n\tb {\n\t\tfont-size: 1.2rem; /* Reduce el tamaño de fuente en dispositivos más pequeños */\n\t}\n\n\tp {\n\t\tfont-size: 1rem; /* Reduce el tamaño de fuente en dispositivos más pequeños */\n\t}\n\n\t#description {\n\t\tmargin-bottom: 5%; /* Reduce el margen inferior en dispositivos más pequeños */\n\t}\n}\n",""]);const a=o},213:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#cards {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmovie-card {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\nh1 {\n\ttext-transform: uppercase;\n\tcolor: white;\n\tfont-family: 'Cairo', sans-serif;\n\t@media (max-width: 576px) {\n\t\tfont-size: 5vw; /* Tamaño de fuente más grande para pantallas pequeñas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n\nh1:hover {\n\tcolor: rgba(233, 13, 90, 1);\n}\n",""]);const a=o},891:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#favoriteMovies {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmovie-card {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n",""]);const a=o},809:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},9:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},466:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},207:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n\tfont-family: 'Noto Traditional Nushu', serif;\n\tcolor: white;\n\t/* position: relative; */\n}\n\n#banner {\n\tposition: relative;\n\tz-index: 1;\n}\n\n#figure {\n\tposition: absolute;\n\ttop: -60%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tz-index: 2; /* Para asegurarse de que figure esté encima del banner */\n}\n\n#content {\n\tmargin-top: 20%;\n\tdisplay: flex;\n\tposition: relative;\n\tmargin-left: 10%;\n\tmargin-right: 10%;\n}\n\n#info {\n\tflex: 2; /* Para que ocupe 2/3 del espacio */\n\tborder-right-color: white;\n\tborder-right-width: 20px;\n\tpadding-right: 20%;\n}\n\n/* #content::after {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: calc(4 / 5 * 100%);\n\twidth: 1px;\n\tbackground-color: white;\n} */\n\n#actions {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-end; /* Centra los elementos horizontalmente */\n\tflex: 1; /* Para que ocupe 1/3 del espacio */\n}\n\n/* Estilos para pantallas más pequeñas */\n@media screen and (max-width: 767px) {\n\t#content {\n\t\tmargin-top: 40%;\n\t\tflex-direction: column; /* Cambiar la dirección del flex para columnas */\n\t}\n\n\t#info {\n\t\tborder-right: none; /* Eliminar el borde derecho en pantallas pequeñas */\n\t\tpadding-right: 0; /* Eliminar el relleno derecho */\n\t}\n\n\t#content::after {\n\t\tleft: 0; /* Colocar la línea vertical al principio */\n\t\ttop: calc(2 / 3 * 100%); /* Colocar la línea al cuarto 4/5 de la pantalla */\n\t\twidth: 100%; /* Ancho completo */\n\t\theight: 1px; /* Altura de la línea */\n\t}\n\n\t#actions {\n\t\torder: -1; /* Cambiar el orden para que aparezca arriba */\n\t\talign-items: center; /* Alinear los elementos horizontalmente */\n\t\tpadding-top: 10px; /* Añadir espacio arriba */\n\t\tdisplay: grid; /* Usar grid layout para organizar los elementos */\n\t\tgrid-template-columns: repeat(2, 1fr); /* Crear 2 columnas de igual tamaño */\n\t\tgrid-gap: 10px; /* Espacio entre las celdas */\n\t\tmargin-bottom: 20px;\n\t}\n\n\t/* Alinear elementos de la segunda columna hacia la derecha */\n\t#actions my-actionandicon:nth-child(even) {\n\t\tjustify-self: end;\n\t}\n\n\t#content::after {\n\t\tdisplay: none;\n\t}\n}\n",""]);const a=o},858:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(601),r=n.n(i),s=n(314),o=n.n(s),a=n(417),c=n.n(a),l=new URL(n(528),n.b),u=o()(r()),h=c()(l);u.push([t.id,`* {\n\tcolor: #fff;\n\tfont-family: 'Cairo', sans-serif;\n}\n\n#form {\n\tposition: fixed;\n\ttop: 40%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%); /* Centrado horizontal y vertical */\n\tbackground-color: rgba(30, 21, 22, 1);\n\tpadding: 3%;\n\tbox-shadow: 0 0 20px #000000; /* Sombra */\n\tborder-radius: 2rem;\n\theight: auto;\n\twidth: auto;\n\toverflow-x: hidden; /* Oculta el desbordamiento horizontal */\n\toverflow-y: auto; /* Habilita el desplazamiento vertical */\n\tcolor: #fff;\n\tfont-family: 'Cairo', sans-serif;\n\tz-index: 2;\n}\n\na {\n\tcolor: rgba(250, 149, 59, 1);\n}\n\n#extrainfo {\n\tposition: fixed;\n\tbottom: 5%; /* Ajusta esta cantidad para colocar la sección más abajo */\n\tleft: 50%;\n\ttransform: translate(-50%, 0); /* Ajusta la transformación vertical a 0 */\n\twidth: 100%;\n\ttext-align: center; /* Alinea el contenido al centro */\n\tz-index: 3; /* Asegura que #extrainfo esté por encima del formulario */\n}\n\n#extrainfo-content {\n\twidth: 100%;\n}\n\n#extrainfo-content hr {\n\tdisplay: inline-block;\n\twidth: 30%; /* Ajusta este valor según el ancho deseado */\n\tmargin: 0 10px; /* Espacio entre elementos */\n\tborder-top: 1px solid rgba(255, 255, 255, 0.5); /* Cambia el color y estilo según lo necesario */\n\tvertical-align: middle; /* Alinea verticalmente */\n}\n\n#extrainfo-content p {\n\tdisplay: inline-block;\n\tmargin: 0 10px; /* Espacio entre elementos */\n}\n\nbutton {\n\tdisplay: inline-block;\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tpadding: 10px 20px;\n\tcursor: pointer;\n\tfont-size: 16px;\n\tmargin: 10px;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\nbutton:hover {\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\n:host {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tbackground-image: url(${h});\n\tbackground-size: cover;\n\tbackground-position: center top 30%;\n\tmargin: 0;\n\tpadding: 10%;\n\tcolor: white;\n\theight: 100%;\n\tz-index: 1;\n}\n@media screen and (max-width: 767px) {\n\t#extrainfo {\n\t\tbottom: 10%;\n\t}\n\n\t#extrainfo-content hr {\n\t\twidth: 10%;\n\t}\n}\n\n#my-sessionform input {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-bottom: 0;\n\tborder: none;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #fff;\n\tborder-radius: 5px;\n\tbox-sizing: border-box; /* Modelo de caja */\n}\n\n#my-sessionform ::placeholder {\n\tcolor: rgba(30, 21, 22, 1);\n}\n\n#my-sessionform #header .close {\n\tfloat: right; /* Se alinea a la derecha */\n\tcursor: pointer;\n}\n\n#my-sessionform h1 {\n\tfont-size: 200%;\n\tmargin-top: 0;\n}\n\n#my-sessionform label {\n\tfont-size: 15px;\n}\n@media screen and (max-width: 767px) {\n\t#my-sessionform input {\n\t\tfont-size: 14px; /* Reduce el tamaño de fuente en dispositivos más pequeños */\n\t}\n\n\t#my-sessionform h1 {\n\t\tfont-size: 2rem; /* Reduce el tamaño de fuente del título en dispositivos más pequeños */\n\t}\n}\n\n#my-submitandterms a {\n\tcolor: rgba(250, 149, 59, 1);\n\tfont-size: 15px;\n}\n\n#my-submitandterms button {\n\twidth: 90%;\n\tbox-sizing: border-box;\n\tpadding: 10px;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tcursor: pointer; /* Cambio de cursor */\n\tfont-family: 'Noto Traditional Nushu', serif;\n\tfont-size: 110%;\n}\n\n#my-submitandterms button:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\n#my-submitandterms p {\n\tfont-size: 15px;\n}\n`,""]);const d=u},868:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(601),r=n.n(i),s=n(314),o=n.n(s),a=n(417),c=n.n(a),l=new URL(n(473),n.b),u=o()(r()),h=c()(l);u.push([t.id,`:host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n\n#modal-button,\n#favorites {\n\twidth: 70%;\n\theight: 200px;\n\tmargin: 30px auto;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 2rem;\n\ttext-transform: uppercase;\n\tborder-radius: 30px;\n\tcolor: white;\n\tbackground-image: url(${h});\n\tbackground-position: center;\n}\n\n#lists button {\n\tposition: relative; /* Asegura que el botón sea relativo para que se pueda posicionar el velo */\n\toverflow: hidden; /* Evita que el velo se salga del botón */\n\twidth: 70%;\n\theight: 200px;\n\tmargin: 30px auto;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 2rem;\n\ttext-transform: uppercase;\n\tborder-radius: 30px;\n\tcolor: white;\n\tbackground-position: center;\n\tbackground-size: cover; /* La imagen de fondo se ajustará para cubrir todo el botón */\n\tposition: relative; /* Asegura que el botón sea relativo para que se pueda posicionar el velo */\n}\n\n#lists button::before {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.5); /* Color negro con opacidad del 50% */\n\tz-index: 1; /* Coloca el velo sobre la imagen de fondo */\n}\n\n#lists button img {\n\tposition: relative; /* Asegura que la imagen esté por encima del velo */\n\tz-index: 2; /* Coloca la imagen por encima del velo */\n}\n`,""]);const d=u},375:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},82:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n\n.profile-container {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: space-between;\n\tpadding: 30px;\n\tbox-sizing: border-box;\n\tcolor: white;\n\tfont-family: 'Cairo', sans-serif;\n}\n\nmy-profile,\nmy-yourcontributions {\n\tflex: 1;\n\tmin-width: 300px;\n\tmargin: 10px;\n}\n\n.logout-button {\n\tmargin-bottom: 80px;\n\tdisplay: block;\n\tmargin: 20px auto; /* Centrar el botón */\n\tbackground-color: rgba(250, 149, 59, 1);\n\tborder-radius: 10px;\n\tpadding: 10px 20px; /* Tamaño ajustado */\n\tmin-width: 200px; /* Ancho ajustado */\n\tcursor: pointer;\n\tcolor: white;\n\tfont-size: 1.1em; /* Tamaño de fuente ajustado */\n}\n\n@media screen and (max-width: 767px) {\n\t.profile-container {\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tpadding: 20px; /* Ajusta el padding para que quede mejor centrado */\n\t}\n\n\tmy-profile,\n\tmy-yourcontributions {\n\t\twidth: 100%;\n\t\tmax-width: 400px;\n\t\tmargin: 10px auto;\n\t}\n}\n",""]);const a=o},307:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(601),r=n.n(i),s=n(314),o=n.n(s),a=n(417),c=n.n(a),l=new URL(n(528),n.b),u=o()(r()),h=c()(l);u.push([t.id,`#main {\n\tposition: fixed;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tbackground-color: rgba(30, 21, 22, 1);\n\tpadding: 3%;\n\tbox-shadow: 0 0 20px #000000;\n\tborder-radius: 2rem;\n\theight: auto;\n\twidth: auto;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\tcolor: #fff;\n\tfont-family: 'Cairo', sans-serif;\n\tz-index: 2;\n\tmargin-top: 10px;\n\twidth: 60%; /* Ajustar el ancho del contenedor */\n\tmax-width: 500px; /* Establecer un ancho máximo */\n}\n\na {\n\tcolor: rgba(250, 149, 59, 1);\n\tcursor: pointer;\n}\n\n#my-sessionform {\n\tmargin-bottom: 20px; /* Agregar espacio entre el formulario y el botón */\n}\n\n#my-submitandterms {\n\tmargin-bottom: 10px; /* Agregar espacio entre el botón y el enlace */\n}\n\ninput {\n\tfont-size: 16px; /* Mantener el tamaño de fuente predeterminado */\n\tmargin-bottom: 10px; /* Agregar espacio entre los campos de entrada */\n}\n:host {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tbackground-image: url(${h});\n\tbackground-size: cover;\n\tbackground-position: center top 30%;\n\tmargin: 0;\n\tpadding: 10%;\n\tcolor: white;\n\theight: 100%;\n}\n\n@media screen and (max-width: 767px) {\n\tsection {\n\t\theight: 90%;\n\t}\n}\n\n#my-sessionform input {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-bottom: 0;\n\tborder: none;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #fff;\n\tborder-radius: 5px;\n\tbox-sizing: border-box; /* Modelo de caja */\n}\n\n#my-sessionform ::placeholder {\n\tcolor: rgba(30, 21, 22, 1);\n}\n\n#my-sessionform #header .close {\n\tfloat: right; /* Se alinea a la derecha */\n\tcursor: pointer;\n}\n\n#my-sessionform h1 {\n\tfont-size: 200%;\n\tmargin-top: 0;\n}\n\n#my-sessionform label {\n\tfont-size: 15px;\n}\n\n@media screen and (max-width: 767px) {\n\t#my-sessionform input {\n\t\tfont-size: 14px;\n\t}\n\n\t#my-sessionform h1 {\n\t\tfont-size: 2rem;\n\t}\n}\n\n#my-submitandterms a {\n\tcolor: rgba(250, 149, 59, 1);\n\tfont-size: 15px;\n}\n\n#my-submitandterms button {\n\twidth: 100%;\n\tpadding: 10px;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tcursor: pointer; /* Cambio de cursor */\n\tfont-family: 'Noto Traditional Nushu', serif;\n\tfont-size: 110%;\n}\n\n#my-submitandterms button:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\n#my-submitandterms p {\n\tfont-size: 15px;\n}\n`,""]);const d=u},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);i&&o[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),e.push(u))}},e}},417:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{t.exports=function(t){return t[1]}},473:(t,e,n)=>{t.exports=n.p+"b9ed50904b789d681f2b.png"},528:(t,e,n)=>{t.exports=n.p+"5fa3712916bc3774d951.png"}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,exports:{}};return t[i](s,s.exports,n),s.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,(()=>{var t,e,i,r,s,o;!function(t){t.GET="GET"}(t||(t={})),function(t){t.GET2="GET2"}(e||(e={})),function(t){t.GET3="GET3"}(i||(i={})),function(t){t.GET4="GET4"}(r||(r={})),function(t){t.NAVIGATE="NAVIGATE"}(s||(s={})),function(t){t.GET5="GET5"}(o||(o={}));const a=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=r>>2,u=(3&r)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const r=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==r||null==s||null==o||null==a)throw new l;const c=r<<2|s>>4;if(i.push(c),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u=function(t){return function(t){const e=a(t);return c.encodeByteArray(e,!0)}(t).replace(/\./g,"")},h=function(t){try{return c.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},d=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&h(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},p=t=>{var e,n;return null===(n=null===(e=d())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},f=t=>{const e=p(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]},m=()=>{var t;return null===(t=d())||void 0===t?void 0:t.config},g=t=>{var e;return null===(e=d())||void 0===e?void 0:e[`_${t}`]};class v{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function y(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}function w(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function b(){try{return"object"==typeof indexedDB}catch(t){return!1}}class _ extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E.prototype.create)}}class E{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(T,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new _(i,o,n)}}const T=/\{\$([^}]+)}/g;function I(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(C(n)&&C(s)){if(!I(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function C(t){return null!==t&&"object"==typeof t}function S(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function k(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function x(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class A{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=R),void 0===i.error&&(i.error=R),void 0===i.complete&&(i.complete=R);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function R(){}function N(t){return t&&t._delegate?t._delegate:t}class D{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const L="[DEFAULT]";class O{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new v;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:L})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=L){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=L){return this.instances.has(t)}getOptions(t=L){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===L?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=L){return this.component?this.component.multipleInstances?t:L:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class P{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new O(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const M=[];var U;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(U||(U={}));const F={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},V=U.INFO,j={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},$=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=j[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class q{constructor(t){this.name=t,this._logLevel=V,this._logHandler=$,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in U))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?F[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...t),this._logHandler(this,U.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...t),this._logHandler(this,U.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,U.INFO,...t),this._logHandler(this,U.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,U.WARN,...t),this._logHandler(this,U.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...t),this._logHandler(this,U.ERROR,...t)}}const B=(t,e)=>e.some((e=>t instanceof e));let z,H;const G=new WeakMap,K=new WeakMap,W=new WeakMap,Q=new WeakMap,J=new WeakMap;let X={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return K.get(t);if("objectStoreNames"===e)return t.objectStoreNames||W.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Z(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Y(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(tt(this),t),Z(G.get(this))}:function(...t){return Z(e.apply(tt(this),t))}:function(t,...n){const i=e.call(tt(this),t,...n);return W.set(i,t.sort?t.sort():[t]),Z(i)}:(t instanceof IDBTransaction&&function(t){if(K.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));K.set(t,e)}(t),B(t,z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,X):t);var e}function Z(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(Z(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&G.set(e,t)})).catch((()=>{})),J.set(e,t),e}(t);if(Q.has(t))return Q.get(t);const e=Y(t);return e!==t&&(Q.set(t,e),J.set(e,t)),e}const tt=t=>J.get(t),et=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],it=new Map;function rt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(it.get(e))return it.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=nt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!et.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return it.set(e,s),s}var st;st=X,X={...st,get:(t,e,n)=>rt(t,e)||st.get(t,e,n),has:(t,e)=>!!rt(t,e)||st.has(t,e)};class ot{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const at="@firebase/app",ct="0.9.29",lt=new q("@firebase/app"),ut="[DEFAULT]",ht={[at]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dt=new Map,pt=new Map;function ft(t,e){try{t.container.addComponent(e)}catch(n){lt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mt(t){const e=t.name;if(pt.has(e))return lt.debug(`There were multiple attempts to register component ${e}.`),!1;pt.set(e,t);for(const e of dt.values())ft(e,t);return!0}function gt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const vt=new E("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new D("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw vt.create("app-deleted",{appName:this._name})}}const wt="10.9.0";function bt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:ut,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw vt.create("bad-app-name",{appName:String(r)});if(n||(n=m()),!n)throw vt.create("no-options");const s=dt.get(r);if(s){if(I(n,s.options)&&I(i,s.config))return s;throw vt.create("duplicate-app",{appName:r})}const o=new P(r);for(const t of pt.values())o.addComponent(t);const a=new yt(n,i,o);return dt.set(r,a),a}function _t(t=ut){const e=dt.get(t);if(!e&&t===ut&&m())return bt();if(!e)throw vt.create("no-app",{appName:t});return e}function Et(t,e,n){var i;let r=null!==(i=ht[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void lt.warn(t.join(" "))}mt(new D(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const Tt="firebase-heartbeat-database",It=1,Ct="firebase-heartbeat-store";let St=null;function kt(){return St||(St=function(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Z(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(Z(o.result),t.oldVersion,t.newVersion,Z(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(Tt,It,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Ct)}catch(t){console.warn(t)}}}).catch((t=>{throw vt.create("idb-open",{originalErrorMessage:t.message})}))),St}async function xt(t,e){try{const n=(await kt()).transaction(Ct,"readwrite"),i=n.objectStore(Ct);await i.put(e,At(t)),await n.done}catch(t){if(t instanceof _)lt.warn(t.message);else{const e=vt.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});lt.warn(e.message)}}}function At(t){return`${t.name}!${t.options.appId}`}class Rt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Dt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Nt();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Nt(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Lt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Lt(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=u(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Nt(){return(new Date).toISOString().substring(0,10)}class Dt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!b()&&new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await kt()).transaction(Ct),n=await e.objectStore(Ct).get(At(t));return await e.done,n}catch(t){if(t instanceof _)lt.warn(t.message);else{const e=vt.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});lt.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return xt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return xt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Lt(t){return u(JSON.stringify({version:2,heartbeats:t})).length}function Ot(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}mt(new D("platform-logger",(t=>new ot(t)),"PRIVATE")),mt(new D("heartbeat",(t=>new Rt(t)),"PRIVATE")),Et(at,ct,""),Et(at,ct,"esm2017"),Et("fire-js",""),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const Pt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Mt=new E("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ut=new q("@firebase/auth");function Ft(t,...e){Ut.logLevel<=U.ERROR&&Ut.error(`Auth (${wt}): ${t}`,...e)}function Vt(t,...e){throw $t(t,...e)}function jt(t,...e){return $t(t,...e)}function $t(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Mt.create(t,...e)}function qt(t,e,...n){if(!t)throw $t(e,...n)}function Bt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ft(e),new Error(e)}function zt(t,e){t||Bt(e)}function Ht(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Gt(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Kt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Gt()||"https:"===Gt()||function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Wt{constructor(t,e){this.shortDelay=t,this.longDelay=e,zt(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(w())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Kt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Qt(t,e){zt(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Jt{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Yt=new Wt(3e4,6e4);function Zt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function te(t,e,n,i,r={}){return ee(t,r,(async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=S(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),Jt.fetch()(ie(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},r))}))}async function ee(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Xt),e);try{const e=new se(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw oe(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw oe(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw oe(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw oe(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(t,e,n){const i=Object.assign(Object.assign({},Pt()),{[e]:n});return new E("auth","Firebase",i).create(e,{appName:t.name})}(t,a,o);Vt(t,a)}}catch(e){if(e instanceof _)throw e;Vt(t,"network-request-failed",{message:String(e)})}}async function ne(t,e,n,i,r={}){const s=await te(t,e,n,i,r);return"mfaPendingCredential"in s&&Vt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function ie(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Qt(t.config,r):`${t.config.apiScheme}://${r}`}function re(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class se{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(jt(this.auth,"network-request-failed"))),Yt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function oe(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=jt(t,e,i);return r.customData._tokenResponse=n,r}function ae(t){return void 0!==t&&void 0!==t.enterprise}class ce{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return re(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}}function le(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function ue(t){return 1e3*Number(t)}function he(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return Ft("JWT malformed, contained fewer than 3 sections"),null;try{const t=h(n);return t?JSON.parse(t):(Ft("Failed to decode base64 JWT payload"),null)}catch(t){return Ft("Caught error parsing JWT payload as JSON",null==t?void 0:t.toString()),null}}async function de(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof _&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class pe{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class fe{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=le(this.lastLoginAt),this.creationTime=le(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function me(t){var e;const n=t.auth,i=await t.getIdToken(),r=await de(t,async function(t,e){return te(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));qt(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=Ot(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=t.providerData,l=o,[...c.filter((t=>!l.some((e=>e.providerId===t.providerId)))),...l]);var c,l;const u=t.isAnonymous,h=!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fe(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}class ge{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){qt(t.idToken,"internal-error"),qt(void 0!==t.idToken,"internal-error"),qt(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=he(t);return qt(e,"internal-error"),qt(void 0!==e.exp,"internal-error"),qt(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return qt(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await ee(t,{},(async()=>{const n=S({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=ie(t,i,"/v1/token",`key=${r}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Jt.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new ge;return n&&(qt("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(qt("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(qt("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ge,this.toJSON())}_performRefresh(){return Bt("not implemented")}}function ve(t,e){qt("string"==typeof t||void 0===t,"internal-error",{appName:e})}class ye{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=Ot(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new fe(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await de(this,this.stsTokenManager.getToken(this.auth,t));return qt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=N(t),i=await n.getIdToken(e),r=he(i);qt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:le(ue(r.auth_time)),issuedAtTime:le(ue(r.iat)),expirationTime:le(ue(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=N(t);await me(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(qt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ye(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){qt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await me(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await de(this,async function(t,e){return te(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,c,l;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=e.photoURL)&&void 0!==s?s:void 0,f=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=e.createdAt)&&void 0!==c?c:void 0,v=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=e;qt(y&&E,t,"internal-error");const T=ge.fromJSON(this.name,E);qt("string"==typeof y,t,"internal-error"),ve(u,t.name),ve(h,t.name),qt("boolean"==typeof w,t,"internal-error"),qt("boolean"==typeof b,t,"internal-error"),ve(d,t.name),ve(p,t.name),ve(f,t.name),ve(m,t.name),ve(g,t.name),ve(v,t.name);const I=new ye({uid:y,auth:t,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:T,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(I.providerData=_.map((t=>Object.assign({},t)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(t,e,n=!1){const i=new ge;i.updateFromServerResponse(e);const r=new ye({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await me(r),r}}const we=new Map;function be(t){zt(t instanceof Function,"Expected a class definition");let e=we.get(t);return e?(zt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,we.set(t,e),e)}class _e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}_e.type="NONE";const Ee=_e;function Te(t,e,n){return`firebase:${t}:${e}:${n}`}class Ie{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Te(this.userKey,i.apiKey,r),this.fullPersistenceKey=Te("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?ye._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new Ie(be(Ee),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||be(Ee);const s=Te(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const i=ye._fromJSON(t,e);n!==r&&(o=i),r=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(t){}}))),new Ie(r,t,n)):new Ie(r,t,n)}}function Ce(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ae(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Se(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ne(e))return"Blackberry";if(De(e))return"Webos";if(ke(e))return"Safari";if((e.includes("chrome/")||xe(e))&&!e.includes("edge/"))return"Chrome";if(Re(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Se(t=w()){return/firefox\//i.test(t)}function ke(t=w()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xe(t=w()){return/crios\//i.test(t)}function Ae(t=w()){return/iemobile/i.test(t)}function Re(t=w()){return/android/i.test(t)}function Ne(t=w()){return/blackberry/i.test(t)}function De(t=w()){return/webos/i.test(t)}function Le(t=w()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Oe(t=w()){return Le(t)||Re(t)||De(t)||Ne(t)||/windows phone/i.test(t)||Ae(t)}function Pe(t,e=[]){let n;switch(t){case"Browser":n=Ce(w());break;case"Worker":n=`${Ce(w())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wt}/${i}`}class Me{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(t){i(t)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(t){e.reverse();for(const t of e)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==t?void 0:t.message})}}}class Ue{constructor(t){var e,n,i,r;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=s.minPasswordLength)&&void 0!==e?e:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=t.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=t.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}class Fe{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new je(this),this.idTokenSubscription=new je(this),this.beforeStateQueue=new Me(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=be(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Ie.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(t){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await me(t)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?N(t):null;return e&&qt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&qt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(be(t))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await async function(t,e={}){return te(t,"GET","/v2/passwordPolicy",Zt(t,e))}(this),e=new Ue(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new E("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise(((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged((()=>{n(),t()}),e)}}))}async revokeAccessToken(t){if(this.currentUser){const e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(e.tenantId=this.tenantId),await async function(t,e){return te(t,"POST","/v2/accounts:revokeToken",Zt(t,e))}(this,e)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&be(t)||this._popupRedirectResolver;qt(e,this,"argument-error"),this.redirectPersistenceManager=await Ie.create(this,[be(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(qt(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"==typeof e){const r=t.addObserver(e,n,i);return()=>{s=!0,r()}}{const n=t.addObserver(e);return()=>{s=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return qt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Pe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null==e?void 0:e.error)&&function(t,...e){Ut.logLevel<=U.WARN&&Ut.warn(`Auth (${wt}): ${t}`,...e)}(`Error while retrieving App Check token: ${e.error}`),null==e?void 0:e.token}}function Ve(t){return N(t)}class je{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new A(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return qt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $e={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qe(t){return $e.loadJS(t)}function Be(t){return`__${t}${Math.floor(1e6*Math.random())}`}class ze{constructor(t){this.type="recaptcha-enterprise",this.auth=Ve(t)}async verify(t="verify",e=!1){function n(e,n,i){const r=window.grecaptcha;ae(r)?r.enterprise.ready((()=>{r.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((t,i)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{(async function(t,e){return te(t,"GET","/v2/recaptchaConfig",Zt(t,e))})(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new ce(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))})(this.auth).then((r=>{if(!e&&ae(window.grecaptcha))n(r,t,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let e=$e.recaptchaEnterpriseScript;0!==e.length&&(e+=r),qe(e).then((()=>{n(r,t,i)})).catch((t=>{i(t)}))}})).catch((t=>{i(t)}))}))}}async function He(t,e,n,i=!1){const r=new ze(t);let s;try{s=await r.verify(n)}catch(t){s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ge(t,e,n,i){var r;if(null===(r=t._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await He(t,e,n,"getOobCode"===n);return i(t,r)}return i(t,e).catch((async r=>{if("auth/missing-recaptcha-token"===r.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const r=await He(t,e,n,"getOobCode"===n);return i(t,r)}return Promise.reject(r)}))}function Ke(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function We(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Qe{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Bt("not implemented")}_getIdTokenResponse(t){return Bt("not implemented")}_linkToIdToken(t,e){return Bt("not implemented")}_getReauthenticationResolver(t){return Bt("not implemented")}}async function Je(t,e){return te(t,"POST","/v1/accounts:signUp",e)}async function Xe(t,e){return ne(t,"POST","/v1/accounts:signInWithPassword",Zt(t,e))}class Ye extends Qe{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Ye(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Ye(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return Ge(t,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Xe);case"emailLink":return async function(t,e){return ne(t,"POST","/v1/accounts:signInWithEmailLink",Zt(t,e))}(t,{email:this._email,oobCode:this._password});default:Vt(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Ge(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Je);case"emailLink":return async function(t,e){return ne(t,"POST","/v1/accounts:signInWithEmailLink",Zt(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:Vt(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Ze(t,e){return ne(t,"POST","/v1/accounts:signInWithIdp",Zt(t,e))}class tn extends Qe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new tn(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Vt("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=Ot(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new tn(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return Ze(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Ze(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ze(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=S(e)}return t}}const en={USER_NOT_FOUND:"user-not-found"};class nn extends Qe{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new nn({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new nn({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return ne(t,"POST","/v1/accounts:signInWithPhoneNumber",Zt(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await ne(t,"POST","/v1/accounts:signInWithPhoneNumber",Zt(t,e));if(n.temporaryProof)throw oe(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return ne(t,"POST","/v1/accounts:signInWithPhoneNumber",Zt(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),en)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new nn({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class rn{constructor(t){var e,n,i,r,s,o;const a=k(x(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);qt(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=k(x(t)).link,n=e?k(x(e)).deep_link_id:null,i=k(x(t)).deep_link_id;return(i?k(x(i)).link:null)||i||n||e||t}(t);try{return new rn(e)}catch(t){return null}}}class sn{constructor(){this.providerId=sn.PROVIDER_ID}static credential(t,e){return Ye._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=rn.parseLink(e);return qt(n,"argument-error"),Ye._fromEmailAndCode(t,n.code,n.tenantId)}}sn.PROVIDER_ID="password",sn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",sn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class on{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class an extends on{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class cn extends an{constructor(){super("facebook.com")}static credential(t){return tn._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return cn.credentialFromTaggedObject(t)}static credentialFromError(t){return cn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return cn.credential(t.oauthAccessToken)}catch(t){return null}}}cn.FACEBOOK_SIGN_IN_METHOD="facebook.com",cn.PROVIDER_ID="facebook.com";class ln extends an{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return tn._fromParams({providerId:ln.PROVIDER_ID,signInMethod:ln.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ln.credentialFromTaggedObject(t)}static credentialFromError(t){return ln.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return ln.credential(e,n)}catch(t){return null}}}ln.GOOGLE_SIGN_IN_METHOD="google.com",ln.PROVIDER_ID="google.com";class un extends an{constructor(){super("github.com")}static credential(t){return tn._fromParams({providerId:un.PROVIDER_ID,signInMethod:un.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return un.credentialFromTaggedObject(t)}static credentialFromError(t){return un.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return un.credential(t.oauthAccessToken)}catch(t){return null}}}un.GITHUB_SIGN_IN_METHOD="github.com",un.PROVIDER_ID="github.com";class hn extends an{constructor(){super("twitter.com")}static credential(t,e){return tn._fromParams({providerId:hn.PROVIDER_ID,signInMethod:hn.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return hn.credentialFromTaggedObject(t)}static credentialFromError(t){return hn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return hn.credential(e,n)}catch(t){return null}}}async function dn(t,e){return ne(t,"POST","/v1/accounts:signUp",Zt(t,e))}hn.TWITTER_SIGN_IN_METHOD="twitter.com",hn.PROVIDER_ID="twitter.com";class pn{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await ye._fromIdTokenResponse(t,n,i),s=fn(n);return new pn({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=fn(n);return new pn({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function fn(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class mn extends _{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,mn.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new mn(t,e,n,i)}}function gn(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw mn._fromErrorAndOperation(t,n,e,i);throw n}))}async function vn(t,e,n=!1){const i="signIn",r=await gn(t,i,e),s=await pn._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function yn(t){const e=Ve(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function wn(t,e,n,i){return N(t).onAuthStateChanged(e,n,i)}new WeakMap;const bn="__sak";class _n{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(bn,"1"),this.storage.removeItem(bn),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class En extends _n{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=w();return ke(t)||Le(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Oe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);!function(){const t=w();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||10!==document.documentMode||r===t.newValue||t.newValue===t.oldValue?i():setTimeout(i,10)}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}En.type="LOCAL";const Tn=En;class In extends _n{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}In.type="SESSION";const Cn=In;class Sn{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Sn(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function kn(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}Sn.receivers=[];class xn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=kn("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function An(){return window}function Rn(){return void 0!==An().WorkerGlobalScope&&"function"==typeof An().importScripts}const Nn="firebaseLocalStorageDb",Dn="firebaseLocalStorage",Ln="fbase_key";class On{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function Pn(t,e){return t.transaction([Dn],e?"readwrite":"readonly").objectStore(Dn)}function Mn(){const t=indexedDB.open(Nn,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(Dn,{keyPath:Ln})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(Dn)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(Nn);return new On(t).toPromise()}(),e(await Mn()))}))}))}async function Un(t,e,n){const i=Pn(t,!0).put({[Ln]:e,value:n});return new On(i).toPromise()}function Fn(t,e){const n=Pn(t,!0).delete(e);return new On(n).toPromise()}class Vn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Mn()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sn._getInstance(Rn()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new xn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Mn();return await Un(t,bn,"1"),await Fn(t,bn),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>Un(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=Pn(t,!1).get(e),i=await new On(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>Fn(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=Pn(t,!1).getAll();return new On(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Vn.type="LOCAL";const jn=Vn;Be("rcb"),new Wt(3e4,6e4);class $n{constructor(t){this.providerId=$n.PROVIDER_ID,this.auth=Ve(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var i;const r=await n.verify();try{let s;if(qt("string"==typeof r,t,"argument-error"),qt("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){qt("enroll"===e.type,t,"internal-error");const n=await function(t,e){return te(t,"POST","/v2/accounts/mfaEnrollment:start",Zt(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{qt("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;qt(n,t,"missing-multi-factor-info");const o=await function(t,e){return te(t,"POST","/v2/accounts/mfaSignIn:start",Zt(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return te(t,"POST","/v1/accounts:sendVerificationCode",Zt(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}(this.auth,t,N(e))}static credential(t,e){return nn._fromVerification(t,e)}static credentialFromResult(t){const e=t;return $n.credentialFromTaggedObject(e)}static credentialFromError(t){return $n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?nn._fromTokenResponse(e,n):null}}$n.PROVIDER_ID="phone",$n.PHONE_SIGN_IN_METHOD="phone";class qn extends Qe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ze(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Ze(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Ze(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Bn(t){return vn(t.auth,new qn(t),t.bypassAuthState)}function zn(t){const{auth:e,user:n}=t;return qt(n,e,"internal-error"),async function(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await de(t,gn(i,r,e,t),n);qt(s.idToken,i,"internal-error");const o=he(s.idToken);qt(o,i,"internal-error");const{sub:a}=o;return qt(t.uid===a,i,"user-mismatch"),pn._forOperation(t,r,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&Vt(i,"user-mismatch"),t}}(n,new qn(t),t.bypassAuthState)}async function Hn(t){const{auth:e,user:n}=t;return qt(n,e,"internal-error"),async function(t,e,n=!1){const i=await de(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pn._forOperation(t,"link",i)}(n,new qn(t),t.bypassAuthState)}class Gn{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Bn;case"linkViaPopup":case"linkViaRedirect":return Hn;case"reauthViaPopup":case"reauthViaRedirect":return zn;default:Vt(this.auth,"internal-error")}}resolve(t){zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Kn=new Wt(2e3,1e4);class Wn extends Gn{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Wn.currentPopupAction&&Wn.currentPopupAction.cancel(),Wn.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return qt(t,this.auth,"internal-error"),t}async onExecution(){zt(1===this.filter.length,"Popup operations only handle one event");const t=kn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(jt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wn.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,Kn.get())};t()}}Wn.currentPopupAction=null;const Qn="pendingRedirect",Jn=new Map;class Xn extends Gn{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Jn.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return Te(Qn,t.config.apiKey,t.name)}(e),i=function(t){return be(t._redirectPersistence)}(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Jn.set(this.auth._key(),t)}return this.bypassAuthState||Jn.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Yn(t,e){Jn.set(t._key(),e)}async function Zn(t,e,n=!1){const i=Ve(t),r=function(t,e){return e?be(e):(qt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(i,e),s=new Xn(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class ti{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ni(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!ni(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(jt(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ei(t))}saveEventToCache(t){this.cachedEventUids.add(ei(t)),this.lastProcessedEventTime=Date.now()}}function ei(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function ni({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const ii=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ri=/^https?/;function si(t){const e=Ht(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!ri.test(n))return!1;if(ii.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const oi=new Wt(3e4,6e4);function ai(){const t=An().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}function ci(t){return new Promise(((e,n)=>{var i,r,s;function o(){ai(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ai(),n(jt(t,"network-request-failed"))},timeout:oi.get()})}if(null===(r=null===(i=An().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=An().gapi)||void 0===s?void 0:s.load)){const e=Be("iframefcb");return An()[e]=()=>{gapi.load?o():n(jt(t,"network-request-failed"))},qe(`${$e.gapiScript}?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw li=null,t}))}let li=null;const ui=new Wt(5e3,15e3),hi="__/auth/iframe",di="emulator/auth/iframe",pi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mi(t){const e=t.config;qt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qt(e,di):`https://${t.config.authDomain}/${hi}`,i={apiKey:e.apiKey,appName:t.name,v:wt},r=fi.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${S(i).slice(1)}`}const gi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vi{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}const yi=encodeURIComponent("fac");async function wi(t,e,n,i,r,s){qt(t.config.authDomain,t,"auth-domain-config-required"),qt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:wt,eventId:r};if(e instanceof on){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof an){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];const c=await t._getAppCheckToken(),l=c?`#${yi}=${encodeURIComponent(c)}`:"";return`${function({config:t}){return t.emulator?Qt(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${S(a).slice(1)}${l}`}const bi="webStorageSupport",_i=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cn,this._completeRedirectFn=Zn,this._overrideRedirectResult=Yn}async _openPopup(t,e,n,i){var r;return zt(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(t,e,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},gi),{width:i.toString(),height:r.toString(),top:s,left:o}),l=w().toLowerCase();n&&(a=xe(l)?"_blank":n),Se(l)&&(e=e||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=w()){var e;return Le(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",a),new vi(null);const h=window.open(e||"",a,u);qt(h,t,"popup-blocked");try{h.focus()}catch(t){}return new vi(h)}(t,await wi(t,e,n,Ht(),i),kn())}async _openRedirect(t,e,n,i){return await this._originValidation(t),r=await wi(t,e,n,Ht(),i),An().location.href=r,new Promise((()=>{}));var r}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(zt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await function(t){return li=li||ci(t),li}(t),n=An().gapi;return qt(n,t,"internal-error"),e.open({where:document.body,url:mi(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pi,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=jt(t,"network-request-failed"),s=An().setTimeout((()=>{i(r)}),ui.get());function o(){An().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}(t),n=new ti(t);return e.register("authEvent",(e=>(qt(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(bi,{type:bi},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[bi];void 0!==r&&e(!!r),Vt(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return te(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(si(t))return}catch(t){}Vt(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Oe()||ke()||Le()}};var Ei="@firebase/auth",Ti="1.6.2";class Ii{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){qt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ci=g("authIdTokenMaxAge")||300;let Si=null;function ki(t=_t()){const e=gt(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=gt(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(I(n.getOptions(),null!=e?e:{}))return t;Vt(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:_i,persistence:[jn,Tn,Cn]}),i=g("authTokenSyncURL");if(i&&i.match(/^\/[^\/].*/)){const t=(r=i,async t=>{const e=t&&await t.getIdTokenResult(),n=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>Ci)return;const i=null==e?void 0:e.token;Si!==i&&(Si=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(t,e,n){N(t).beforeAuthStateChanged(e,n)}(n,t,(()=>t(n.currentUser))),function(e,n,i,r){N(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}var r;const s=p("auth");return s&&function(t,e,n){const i=Ve(t);qt(i._canInitEmulator,i,"emulator-config-failed"),qt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=Ke(e),{host:o,port:a}=function(t){const e=Ke(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:We(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:We(e)}}}(e),c=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${s}`),n}var xi;!function(t){$e=t}({loadJS:t=>new Promise(((e,n)=>{const i=document.createElement("script");var r,s;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=jt("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",(null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:document).appendChild(i)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),xi="Browser",mt(new D("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;qt(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:xi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pe(xi)},c=new Fe(n,i,r,a);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(be);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(c,e),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),mt(new D("auth-internal",(t=>(t=>new Ii(t))(Ve(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Et(Ei,Ti,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(xi)),Et(Ei,Ti,"esm2017"),Et("firebase","10.9.0","app");var Ai,Ri="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ni={},Di=Di||{},Li=Ri||self;function Oi(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Pi(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Mi="closure_uid_"+(1e9*Math.random()>>>0),Ui=0;function Fi(t,e,n){return t.call.apply(t.bind,arguments)}function Vi(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ji(t,e,n){return(ji=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fi:Vi).apply(null,arguments)}function $i(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function qi(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function Bi(){this.s=this.s,this.o=this.o}Bi.prototype.s=!1,Bi.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Mi)&&t[Mi]||(t[Mi]=++Ui))},Bi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zi=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Hi(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Gi(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(Oi(n)){const e=t.length||0,i=n.length||0;t.length=e+i;for(let r=0;r<i;r++)t[e+r]=n[r]}else t.push(n)}}function Ki(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ki.prototype.h=function(){this.defaultPrevented=!0};var Wi=function(){if(!Li.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};Li.addEventListener("test",t,e),Li.removeEventListener("test",t,e)}catch(t){}return t}();function Qi(t){return/^[\s\xa0]*$/.test(t)}function Ji(){var t=Li.navigator;return t&&(t=t.userAgent)?t:""}function Xi(t){return-1!=Ji().indexOf(t)}function Yi(t){return Yi[" "](t),t}Yi[" "]=function(){};var Zi,tr,er,nr=Xi("Opera"),ir=Xi("Trident")||Xi("MSIE"),rr=Xi("Edge"),sr=rr||ir,or=Xi("Gecko")&&!(-1!=Ji().toLowerCase().indexOf("webkit")&&!Xi("Edge"))&&!(Xi("Trident")||Xi("MSIE"))&&!Xi("Edge"),ar=-1!=Ji().toLowerCase().indexOf("webkit")&&!Xi("Edge");function cr(){var t=Li.document;return t?t.documentMode:void 0}t:{var lr="",ur=(tr=Ji(),or?/rv:([^\);]+)(\)|;)/.exec(tr):rr?/Edge\/([\d\.]+)/.exec(tr):ir?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(tr):ar?/WebKit\/(\S+)/.exec(tr):nr?/(?:Version)[ \/]?(\S+)/.exec(tr):void 0);if(ur&&(lr=ur?ur[1]:""),ir){var hr=cr();if(null!=hr&&hr>parseFloat(lr)){Zi=String(hr);break t}}Zi=lr}Li.document&&ir?er=cr()||parseInt(Zi,10)||void 0:er=void 0;var dr=er;function pr(t,e){if(Ki.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(or){t:{try{Yi(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:fr[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&pr.$.h.call(this)}}qi(pr,Ki);var fr={2:"touch",3:"pen",4:"mouse"};pr.prototype.h=function(){pr.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var mr="closure_listenable_"+(1e6*Math.random()|0),gr=0;function vr(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++gr,this.fa=this.ia=!1}function yr(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function wr(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function br(t){const e={};for(const n in t)e[n]=t[n];return e}const _r="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Er(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<_r.length;e++)n=_r[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Tr(t){this.src=t,this.g={},this.h=0}function Ir(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=zi(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(yr(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Cr(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}Tr.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Cr(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new vr(e,this.src,s,!!i,r)).ia=n,t.push(e)),e};var Sr="closure_lm_"+(1e6*Math.random()|0),kr={};function xr(t,e,n,i,r){if(i&&i.once)return Rr(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)xr(t,e[s],n,i,r);return null}return n=Ur(n),t&&t[mr]?t.O(e,n,Pi(i)?!!i.capture:!!i,r):Ar(t,e,n,!1,i,r)}function Ar(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=Pi(r)?!!r.capture:!!r,a=Pr(t);if(a||(t[Sr]=a=new Tr(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){const t=Or;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Wi||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Lr(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Rr(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Rr(t,e[s],n,i,r);return null}return n=Ur(n),t&&t[mr]?t.P(e,n,Pi(i)?!!i.capture:!!i,r):Ar(t,e,n,!0,i,r)}function Nr(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Nr(t,e[s],n,i,r);else i=Pi(i)?!!i.capture:!!i,n=Ur(n),t&&t[mr]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Cr(s=t.g[e],n,i,r))&&(yr(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Pr(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Cr(e,n,i,r)),(n=-1<t?e[t]:null)&&Dr(n))}function Dr(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[mr])Ir(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Lr(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Pr(e))?(Ir(n,t),0==n.h&&(n.src=null,e[Sr]=null)):yr(t)}}}function Lr(t){return t in kr?kr[t]:kr[t]="on"+t}function Or(t,e){if(t.fa)t=!0;else{e=new pr(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Dr(t),t=n.call(i,e)}return t}function Pr(t){return(t=t[Sr])instanceof Tr?t:null}var Mr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ur(t){return"function"==typeof t?t:(t[Mr]||(t[Mr]=function(e){return t.handleEvent(e)}),t[Mr])}function Fr(){Bi.call(this),this.i=new Tr(this),this.S=this,this.J=null}function Vr(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"==typeof e)e=new Ki(e,t);else if(e instanceof Ki)e.target=e.target||t;else{var r=e;Er(e=new Ki(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=jr(o,i,!0,e)&&r}if(r=jr(o=e.g=t,i,!0,e)&&r,r=jr(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=jr(o=e.g=n[s],i,!1,e)&&r}function jr(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Ir(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}qi(Fr,Bi),Fr.prototype[mr]=!0,Fr.prototype.removeEventListener=function(t,e,n,i){Nr(this,t,e,n,i)},Fr.prototype.N=function(){if(Fr.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)yr(n[i]);delete e.g[t],e.h--}}this.J=null},Fr.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Fr.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var $r=Li.JSON.stringify;function qr(){var t=Qr;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Br=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new zr),(t=>t.reset()));class zr{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Hr(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Gr(t){Li.setTimeout((()=>{throw t}),0)}let Kr,Wr=!1,Qr=new class{constructor(){this.h=this.g=null}add(t,e){const n=Br.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},Jr=()=>{const t=Li.Promise.resolve(void 0);Kr=()=>{t.then(Xr)}};var Xr=()=>{for(var t;t=qr();){try{t.h.call(t.g)}catch(t){Gr(t)}var e=Br;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Wr=!1};function Yr(t,e){Fr.call(this),this.h=t||1,this.g=e||Li,this.j=ji(this.qb,this),this.l=Date.now()}function Zr(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function ts(t,e,n){if("function"==typeof t)n&&(t=ji(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ji(t.handleEvent,t)}return 2147483647<Number(e)?-1:Li.setTimeout(t,e||0)}function es(t){t.g=ts((()=>{t.g=null,t.i&&(t.i=!1,es(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}qi(Yr,Fr),(Ai=Yr.prototype).ga=!1,Ai.T=null,Ai.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Vr(this,"tick"),this.ga&&(Zr(this),this.start()))}},Ai.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ai.N=function(){Yr.$.N.call(this),Zr(this),delete this.g};class ns extends Bi{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:es(this)}N(){super.N(),this.g&&(Li.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(t){Bi.call(this),this.h=t,this.g={}}qi(is,Bi);var rs=[];function ss(t,e,n,i){Array.isArray(n)||(n&&(rs[0]=n.toString()),n=rs);for(var r=0;r<n.length;r++){var s=xr(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function os(t){wr(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Dr(t)}),t),t.g={}}function as(){this.g=!0}function cs(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return $r(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}is.prototype.N=function(){is.$.N.call(this),os(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},as.prototype.Ea=function(){this.g=!1},as.prototype.info=function(){};var ls={},us=null;function hs(){return us=us||new Fr}function ds(t){Ki.call(this,ls.Ta,t)}function ps(t){const e=hs();Vr(e,new ds(e))}function fs(t,e){Ki.call(this,ls.STAT_EVENT,t),this.stat=e}function ms(t){const e=hs();Vr(e,new fs(e,t))}function gs(t,e){Ki.call(this,ls.Ua,t),this.size=e}function vs(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Li.setTimeout((function(){t()}),e)}ls.Ta="serverreachability",qi(ds,Ki),ls.STAT_EVENT="statevent",qi(fs,Ki),ls.Ua="timingevent",qi(gs,Ki);var ys={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ws={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function bs(){}function _s(t){return t.h||(t.h=t.i())}function Es(){}bs.prototype.h=null;var Ts,Is={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Cs(){Ki.call(this,"d")}function Ss(){Ki.call(this,"c")}function ks(){}function xs(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new is(this),this.P=Rs,t=sr?125:void 0,this.V=new Yr(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new As}function As(){this.i=null,this.g="",this.h=!1}qi(Cs,Ki),qi(Ss,Ki),qi(ks,bs),ks.prototype.g=function(){return new XMLHttpRequest},ks.prototype.i=function(){return{}},Ts=new ks;var Rs=45e3,Ns={},Ds={};function Ls(t,e,n){t.L=1,t.A=Ys(Ks(e)),t.u=n,t.S=!0,Os(t,null)}function Os(t,e){t.G=Date.now(),Fs(t),t.B=Ks(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),ho(n.i,"t",i),t.o=0,n=t.l.J,t.h=new As,t.g=da(t.l,n?e:null,!t.u),0<t.O&&(t.M=new ns(ji(t.Pa,t,t.g),t.O)),ss(t.U,t.g,"readystatechange",t.nb),e=t.I?br(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ps(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function Ps(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function Ms(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=Us(t,n),i==Ds){4==e&&(t.s=4,ms(14),r=!1),cs(t.j,t.m,null,"[Incomplete Response]");break}if(i==Ns){t.s=4,ms(15),cs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}cs(t.j,t.m,i,null),Bs(t,i)}Ps(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,ms(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ra(e),e.M=!0,ms(11))):(cs(t.j,t.m,n,"[Invalid Chunked Response]"),qs(t),$s(t))}function Us(t,e){var n=t.o,i=e.indexOf("\n",n);return-1==i?Ds:(n=Number(e.substring(n,i)),isNaN(n)?Ns:(i+=1)+n>e.length?Ds:(e=e.slice(i,i+n),t.o=i+n,e))}function Fs(t){t.Y=Date.now()+t.P,Vs(t,t.P)}function Vs(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=vs(ji(t.lb,t),e)}function js(t){t.C&&(Li.clearTimeout(t.C),t.C=null)}function $s(t){0==t.l.H||t.J||aa(t.l,t)}function qs(t){js(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Zr(t.V),os(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Bs(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||wo(n.i,t)))if(!t.K&&wo(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;oa(n),Jo(n)}ia(n),ms(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=vs(ji(n.ib,n),6e3));if(1>=yo(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else la(n,11)}else if((t.K||n.g==t)&&oa(n),!Qi(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const e=l[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=l[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(bo(s,s.h),s.h=null))}if(i.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,Xs(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((i=n).wa=ha(i,i.J?i.pa:null,i.Y),o.K){_o(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(js(a),Fs(a)),i.g=o}else na(i);0<n.j.length&&Yo(n)}else"stop"!=l[0]&&"close"!=l[0]||la(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?la(n,7):Qo(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}ps()}catch(t){}}function zs(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Oi(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(Oi(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Oi(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(Ai=xs.prototype).setTimeout=function(t){this.P=t},Ai.nb=function(t){t=t.target;const e=this.M;e&&3==Bo(t)?e.l():this.Pa(t)},Ai.Pa=function(t){try{if(t==this.g)t:{const u=Bo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||sr||this.g&&(this.h.h||this.g.ja()||zo(this.g)))){this.J||4!=u||7==e||ps(),js(this);var n=this.g.da();this.ca=n;e:if(Ps(this)){var i=zo(this.g);t="";var r=i.length,s=4==Bo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){qs(this),$s(this);var o="";break e}this.h.i=new Li.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qi(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.s=3,ms(12),qs(this),$s(this);break t}cs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bs(this,n)}this.S?(Ms(this,u,o),sr&&this.i&&3==u&&(ss(this.U,this.V,"tick",this.mb),this.V.start())):(cs(this.j,this.m,o,null),Bs(this,o)),4==u&&qs(this),this.i&&!this.J&&(4==u?aa(this.l,this):(this.i=!1,Fs(this)))}else(function(t){const e={};t=(t.g&&2<=Bo(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(Qi(t[i]))continue;var n=Hr(t[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,ms(12)):(this.s=0,ms(13)),qs(this),$s(this)}}}catch(t){}},Ai.mb=function(){if(this.g){var t=Bo(this.g),e=this.g.ja();this.o<e.length&&(js(this),Ms(this,t,e),this.i&&4!=t&&Fs(this))}},Ai.cancel=function(){this.J=!0,qs(this)},Ai.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(ps(),ms(17)),qs(this),this.s=2,$s(this)):Vs(this,this.Y-t)};var Hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Gs){this.h=t.h,Ws(this,t.j),this.s=t.s,this.g=t.g,Qs(this,t.m),this.l=t.l;var e=t.i,n=new ao;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Js(this,n),this.o=t.o}else t&&(e=String(t).match(Hs))?(this.h=!1,Ws(this,e[1]||"",!0),this.s=Zs(e[2]||""),this.g=Zs(e[3]||"",!0),Qs(this,e[4]),this.l=Zs(e[5]||"",!0),Js(this,e[6]||"",!0),this.o=Zs(e[7]||"")):(this.h=!1,this.i=new ao(null,this.h))}function Ks(t){return new Gs(t)}function Ws(t,e,n){t.j=n?Zs(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Qs(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Js(t,e,n){e instanceof ao?(t.i=e,function(t,e){e&&!t.j&&(co(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(lo(this,e),ho(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=to(e,so)),t.i=new ao(e,t.h))}function Xs(t,e,n){t.i.set(e,n)}function Ys(t){return Xs(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Zs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function to(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,eo),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function eo(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Gs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(to(e,no,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(to(e,no,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(to(n,"/"==n.charAt(0)?ro:io,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",to(n,oo)),t.join("")};var no=/[#\/\?@]/g,io=/[#\?:]/g,ro=/[#\?]/g,so=/[#\?@]/g,oo=/#/g;function ao(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function co(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function lo(t,e){co(t),e=po(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function uo(t,e){return co(t),e=po(t,e),t.g.has(e)}function ho(t,e,n){lo(t,e),0<n.length&&(t.i=null,t.g.set(po(t,e),Hi(n)),t.h+=n.length)}function po(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Ai=ao.prototype).add=function(t,e){co(this),this.i=null,t=po(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Ai.forEach=function(t,e){co(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},Ai.ta=function(){co(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},Ai.Z=function(t){co(this);let e=[];if("string"==typeof t)uo(this,t)&&(e=e.concat(this.g.get(po(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Ai.set=function(t,e){return co(this),this.i=null,uo(this,t=po(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ai.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Ai.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var fo=class{constructor(t,e){this.g=t,this.map=e}};function mo(t){this.l=t||go,t=Li.PerformanceNavigationTiming?0<(t=Li.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Li.g&&Li.g.Ka&&Li.g.Ka()&&Li.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var go=10;function vo(t){return!!t.h||!!t.g&&t.g.size>=t.j}function yo(t){return t.h?1:t.g?t.g.size:0}function wo(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function bo(t,e){t.g?t.g.add(e):t.h=e}function _o(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Eo(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Hi(t.i)}mo.prototype.cancel=function(){if(this.i=Eo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var To=class{stringify(t){return Li.JSON.stringify(t,void 0)}parse(t){return Li.JSON.parse(t,void 0)}};function Io(){this.g=new To}function Co(t,e,n){const i=n||"";try{zs(t,(function(t,n){let r=t;Pi(t)&&(r=$r(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function So(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function ko(t){this.l=t.ec||null,this.j=t.ob||!1}function xo(t,e){Fr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ao,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qi(ko,bs),ko.prototype.g=function(){return new xo(this.l,this.j)},ko.prototype.i=function(t){return function(){return t}}({}),qi(xo,Fr);var Ao=0;function Ro(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function No(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Do(t)}function Do(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ai=xo.prototype).open=function(t,e){if(this.readyState!=Ao)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Do(this)},Ai.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Li).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ai.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,No(this)),this.readyState=Ao},Ai.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Do(this)),this.g&&(this.readyState=3,Do(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Li.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ro(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Ai.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?No(this):Do(this),3==this.readyState&&Ro(this)}},Ai.Za=function(t){this.g&&(this.response=this.responseText=t,No(this))},Ai.Ya=function(t){this.g&&(this.response=t,No(this))},Ai.ka=function(){this.g&&No(this)},Ai.setRequestHeader=function(t,e){this.v.append(t,e)},Ai.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ai.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(xo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Lo=Li.JSON.parse;function Oo(t){Fr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Po,this.L=this.M=!1}qi(Oo,Fr);var Po="",Mo=/^https?$/i,Uo=["POST","PUT"];function Fo(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Vo(t),$o(t)}function Vo(t){t.F||(t.F=!0,Vr(t,"complete"),Vr(t,"error"))}function jo(t){if(t.h&&void 0!==Di&&(!t.C[1]||4!=Bo(t)||2!=t.da()))if(t.v&&4==Bo(t))ts(t.La,0,t);else if(Vr(t,"readystatechange"),4==Bo(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===o){var r=String(t.I).match(Hs)[1]||null;!r&&Li.self&&Li.self.location&&(r=Li.self.location.protocol.slice(0,-1)),i=!Mo.test(r?r.toLowerCase():"")}n=i}if(n)Vr(t,"complete"),Vr(t,"success");else{t.m=6;try{var s=2<Bo(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",Vo(t)}}finally{$o(t)}}}function $o(t,e){if(t.g){qo(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Vr(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function qo(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Li.clearTimeout(t.A),t.A=null)}function Bo(t){return t.g?t.g.readyState:0}function zo(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Po:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ho(t){let e="";return wr(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Go(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Ho(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Xs(t,e,n))}function Ko(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Wo(t){this.Ga=0,this.j=[],this.l=new as,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ko("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ko("baseRetryDelayMs",5e3,t),this.hb=Ko("retryDelaySeedMs",1e4,t),this.eb=Ko("forwardChannelMaxRetries",2,t),this.xa=Ko("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new mo(t&&t.concurrentRequestLimit),this.Ja=new Io,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Qo(t){if(Xo(t),3==t.H){var e=t.W++,n=Ks(t.I);if(Xs(n,"SID",t.K),Xs(n,"RID",e),Xs(n,"TYPE","terminate"),ta(t,n),(e=new xs(t,t.l,e)).L=2,e.A=Ys(Ks(n)),n=!1,Li.navigator&&Li.navigator.sendBeacon)try{n=Li.navigator.sendBeacon(e.A.toString(),"")}catch(t){}!n&&Li.Image&&((new Image).src=e.A,n=!0),n||(e.g=da(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Fs(e)}ua(t)}function Jo(t){t.g&&(ra(t),t.g.cancel(),t.g=null)}function Xo(t){Jo(t),t.u&&(Li.clearTimeout(t.u),t.u=null),oa(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Li.clearTimeout(t.m),t.m=null)}function Yo(t){if(!vo(t.i)&&!t.m){t.m=!0;var e=t.Na;Kr||Jr(),Wr||(Kr(),Wr=!0),Qr.add(e,t),t.C=0}}function Zo(t,e){var n;n=e?e.m:t.W++;const i=Ks(t.I);Xs(i,"SID",t.K),Xs(i,"RID",n),Xs(i,"AID",t.V),ta(t,i),t.o&&t.s&&Go(i,t.o,t.s),n=new xs(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=ea(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),bo(t.i,n),Ls(n,i,e)}function ta(t,e){t.na&&wr(t.na,(function(t,n){Xs(e,n,t)})),t.h&&zs({},(function(t,n){Xs(e,n,t)}))}function ea(t,e,n){n=Math.min(t.j.length,n);var i=t.h?ji(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=e,0>n)e=Math.max(0,r[o].g-100),s=!1;else try{Co(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function na(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Kr||Jr(),Wr||(Kr(),Wr=!0),Qr.add(e,t),t.A=0}}function ia(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=vs(ji(t.Ma,t),ca(t,t.A)),t.A++,0))}function ra(t){null!=t.B&&(Li.clearTimeout(t.B),t.B=null)}function sa(t){t.g=new xs(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ks(t.wa);Xs(e,"RID","rpc"),Xs(e,"SID",t.K),Xs(e,"AID",t.V),Xs(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Xs(e,"TO",t.qa),Xs(e,"TYPE","xmlhttp"),ta(t,e),t.o&&t.s&&Go(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Ys(Ks(e)),n.u=null,n.S=!0,Os(n,t)}function oa(t){null!=t.v&&(Li.clearTimeout(t.v),t.v=null)}function aa(t,e){var n=null;if(t.g==e){oa(t),ra(t),t.g=null;var i=2}else{if(!wo(t.i,e))return;n=e.F,_o(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;Vr(i=hs(),new gs(i,n)),Yo(t)}else na(t);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function(t,e){return!(yo(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=vs(ji(t.Na,t,e),ca(t,t.C)),t.C++,0)))}(t,e)||2==i&&ia(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:la(t,5);break;case 4:la(t,10);break;case 3:la(t,6);break;default:la(t,2)}}function ca(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function la(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=ji(t.pb,t);n||(n=new Gs("//www.google.com/images/cleardot.gif"),Li.location&&"http"==Li.location.protocol||Ws(n,"https"),Ys(n)),function(t,e){const n=new as;if(Li.Image){const i=new Image;i.onload=$i(So,n,i,"TestLoadImage: loaded",!0,e),i.onerror=$i(So,n,i,"TestLoadImage: error",!1,e),i.onabort=$i(So,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=$i(So,n,i,"TestLoadImage: timeout",!1,e),Li.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else ms(2);t.H=0,t.h&&t.h.za(e),ua(t),Xo(t)}function ua(t){if(t.H=0,t.ma=[],t.h){const e=Eo(t.i);0==e.length&&0==t.j.length||(Gi(t.ma,e),Gi(t.ma,t.j),t.i.i.length=0,Hi(t.j),t.j.length=0),t.h.ya()}}function ha(t,e,n){var i=n instanceof Gs?Ks(n):new Gs(n);if(""!=i.g)e&&(i.g=e+"."+i.g),Qs(i,i.m);else{var r=Li.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Gs(null);i&&Ws(s,i),e&&(s.g=e),r&&Qs(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Xs(i,n,e),Xs(i,"VER",t.ra),ta(t,i),i}function da(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new Oo(new ko({ob:n})):new Oo(t.va)).Oa(t.J),e}function pa(){}function fa(){if(ir&&!(10<=Number(dr)))throw Error("Environmental error: no available transport.")}function ma(t,e){Fr.call(this),this.g=new Wo(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Qi(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qi(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ya(this)}function ga(t){Cs.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function va(){Ss.call(this),this.status=1}function ya(t){this.g=t}function wa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ba(t,e,n){n||(n=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function _a(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}(Ai=Oo.prototype).Oa=function(t){this.M=t},Ai.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ts.g(),this.C=this.u?_s(this.u):_s(Ts),this.g.onreadystatechange=ji(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void Fo(this,t)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=Li.FormData&&t instanceof Li.FormData,!(0<=zi(Uo,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{qo(this),0<this.B&&((this.L=function(t){return ir&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ji(this.ua,this)):this.A=ts(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Fo(this,t)}},Ai.ua=function(){void 0!==Di&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vr(this,"timeout"),this.abort(8))},Ai.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Vr(this,"complete"),Vr(this,"abort"),$o(this))},Ai.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$o(this,!0)),Oo.$.N.call(this)},Ai.La=function(){this.s||(this.G||this.v||this.l?jo(this):this.kb())},Ai.kb=function(){jo(this)},Ai.isActive=function(){return!!this.g},Ai.da=function(){try{return 2<Bo(this)?this.g.status:-1}catch(t){return-1}},Ai.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Ai.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Lo(e)}},Ai.Ia=function(){return this.m},Ai.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ai=Wo.prototype).ra=8,Ai.H=1,Ai.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new xs(this,this.l,t);let s=this.s;if(this.U&&(s?(s=br(s),Er(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=ea(this,r,e),Xs(n=Ks(this.I),"RID",t),Xs(n,"CVER",22),this.F&&Xs(n,"X-HTTP-Session-Id",this.F),ta(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Ho(s)))+"&"+e:this.o&&Go(n,this.o,s)),bo(this.i,r),this.bb&&Xs(n,"TYPE","init"),this.P?(Xs(n,"$req",e),Xs(n,"SID","null"),r.aa=!0,Ls(r,n,null)):Ls(r,n,e),this.H=2}}else 3==this.H&&(t?Zo(this,t):0==this.j.length||vo(this.i)||Zo(this))},Ai.Ma=function(){if(this.u=null,sa(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=vs(ji(this.jb,this),t)}},Ai.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ms(10),Jo(this),sa(this))},Ai.ib=function(){null!=this.v&&(this.v=null,Jo(this),ia(this),ms(19))},Ai.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ms(2)):(this.l.info("Failed to ping google.com"),ms(1))},Ai.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ai=pa.prototype).Ba=function(){},Ai.Aa=function(){},Ai.za=function(){},Ai.ya=function(){},Ai.isActive=function(){return!0},Ai.Va=function(){},fa.prototype.g=function(t,e){return new ma(t,e)},qi(ma,Fr),ma.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ms(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=ha(t,null,t.Y),Yo(t)},ma.prototype.close=function(){Qo(this.g)},ma.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=$r(t),t=n);e.j.push(new fo(e.fb++,t)),3==e.H&&Yo(e)},ma.prototype.N=function(){this.g.h=null,delete this.j,Qo(this.g),delete this.g,ma.$.N.call(this)},qi(ga,Cs),qi(va,Ss),qi(ya,pa),ya.prototype.Ba=function(){Vr(this.g,"a")},ya.prototype.Aa=function(t){Vr(this.g,new ga(t))},ya.prototype.za=function(t){Vr(this.g,new va)},ya.prototype.ya=function(){Vr(this.g,"b")},qi(wa,(function(){this.blockSize=-1})),wa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},wa.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)ba(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){ba(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){ba(this,i),r=0;break}}this.h=r,this.i+=e},wa.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var Ea={};function Ta(t){return-128<=t&&128>t?function(t,e){var n=Ea;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new _a([0|t],0>t?-1:0)}(t)}(t):new _a([0|t],0>t?-1:0)}function Ia(t){if(isNaN(t)||!isFinite(t))return Sa;if(0>t)return Na(Ia(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Ca;return new _a(e,0)}var Ca=4294967296,Sa=Ta(0),ka=Ta(1),xa=Ta(16777216);function Aa(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Ra(t){return-1==t.h}function Na(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new _a(n,~t.h).add(ka)}function Da(t,e){return t.add(Na(e))}function La(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Oa(t,e){this.g=t,this.h=e}function Pa(t,e){if(Aa(e))throw Error("division by zero");if(Aa(t))return new Oa(Sa,Sa);if(Ra(t))return e=Pa(Na(t),e),new Oa(Na(e.g),Na(e.h));if(Ra(e))return e=Pa(t,Na(e)),new Oa(Na(e.g),e.h);if(30<t.g.length){if(Ra(t)||Ra(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ka,i=e;0>=i.X(t);)n=Ma(n),i=Ma(i);var r=Ua(n,1),s=Ua(i,1);for(i=Ua(i,2),n=Ua(n,2);!Aa(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Ua(i,1),n=Ua(n,1)}return e=Da(t,r.R(e)),new Oa(r,e)}for(r=Sa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=Ia(n)).R(e);Ra(o)||0<o.X(t);)o=(s=Ia(n-=i)).R(e);Aa(s)&&(s=ka),r=r.add(s),t=Da(t,o)}return new Oa(r,t)}function Ma(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new _a(n,t.h)}function Ua(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new _a(r,t.h)}(Ai=_a.prototype).ea=function(){if(Ra(this))return-Na(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Ca+i)*e,e*=Ca}return t},Ai.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Aa(this))return"0";if(Ra(this))return"-"+Na(this).toString(t);for(var e=Ia(Math.pow(t,6)),n=this,i="";;){var r=Pa(n,e).g,s=((0<(n=Da(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Aa(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Ai.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Ai.X=function(t){return Ra(t=Da(this,t))?-1:Aa(t)?0:1},Ai.abs=function(){return Ra(this)?Na(this):this},Ai.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new _a(n,-2147483648&n[n.length-1]?-1:0)},Ai.R=function(t){if(Aa(this)||Aa(t))return Sa;if(Ra(this))return Ra(t)?Na(this).R(Na(t)):Na(Na(this).R(t));if(Ra(t))return Na(this.R(Na(t)));if(0>this.X(xa)&&0>t.X(xa))return Ia(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,c=65535&t.D(r);n[2*i+2*r]+=o*c,La(n,2*i+2*r),n[2*i+2*r+1]+=s*c,La(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,La(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,La(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new _a(n,0)},Ai.gb=function(t){return Pa(this,t).h},Ai.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new _a(n,this.h&t.h)},Ai.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new _a(n,this.h|t.h)},Ai.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new _a(n,this.h^t.h)},fa.prototype.createWebChannel=fa.prototype.g,ma.prototype.send=ma.prototype.u,ma.prototype.open=ma.prototype.m,ma.prototype.close=ma.prototype.close,ys.NO_ERROR=0,ys.TIMEOUT=8,ys.HTTP_ERROR=6,ws.COMPLETE="complete",Es.EventType=Is,Is.OPEN="a",Is.CLOSE="b",Is.ERROR="c",Is.MESSAGE="d",Fr.prototype.listen=Fr.prototype.O,Oo.prototype.listenOnce=Oo.prototype.P,Oo.prototype.getLastError=Oo.prototype.Sa,Oo.prototype.getLastErrorCode=Oo.prototype.Ia,Oo.prototype.getStatus=Oo.prototype.da,Oo.prototype.getResponseJson=Oo.prototype.Wa,Oo.prototype.getResponseText=Oo.prototype.ja,Oo.prototype.send=Oo.prototype.ha,Oo.prototype.setWithCredentials=Oo.prototype.Oa,wa.prototype.digest=wa.prototype.l,wa.prototype.reset=wa.prototype.reset,wa.prototype.update=wa.prototype.j,_a.prototype.add=_a.prototype.add,_a.prototype.multiply=_a.prototype.R,_a.prototype.modulo=_a.prototype.gb,_a.prototype.compare=_a.prototype.X,_a.prototype.toNumber=_a.prototype.ea,_a.prototype.toString=_a.prototype.toString,_a.prototype.getBits=_a.prototype.D,_a.fromNumber=Ia,_a.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return Na(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=Ia(Math.pow(n,8)),r=Sa,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=Ia(Math.pow(n,o)),r=r.R(o).add(Ia(a))):r=(r=r.R(i)).add(Ia(a))}return r};var Fa=Ni.createWebChannelTransport=function(){return new fa},Va=Ni.getStatEventTarget=function(){return hs()},ja=Ni.ErrorCode=ys,$a=Ni.EventType=ws,qa=Ni.Event=ls,Ba=Ni.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},za=(Ni.FetchXmlHttpFactory=ko,Ni.WebChannel=Es),Ha=Ni.XhrIo=Oo,Ga=Ni.Md5=wa,Ka=Ni.Integer=_a;const Wa="@firebase/firestore";class Qa{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Qa.UNAUTHENTICATED=new Qa(null),Qa.GOOGLE_CREDENTIALS=new Qa("google-credentials-uid"),Qa.FIRST_PARTY=new Qa("first-party-uid"),Qa.MOCK_USER=new Qa("mock-user");let Ja="10.9.0";const Xa=new q("@firebase/firestore");function Ya(){return Xa.logLevel}function Za(t,...e){if(Xa.logLevel<=U.DEBUG){const n=e.map(nc);Xa.debug(`Firestore (${Ja}): ${t}`,...n)}}function tc(t,...e){if(Xa.logLevel<=U.ERROR){const n=e.map(nc);Xa.error(`Firestore (${Ja}): ${t}`,...n)}}function ec(t,...e){if(Xa.logLevel<=U.WARN){const n=e.map(nc);Xa.warn(`Firestore (${Ja}): ${t}`,...n)}}function nc(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function ic(t="Unexpected state"){const e=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: `+t;throw tc(e),new Error(e)}function rc(t,e){t||ic()}function sc(t,e){return t}const oc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ac extends _{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cc{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class lc{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class uc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Qa.UNAUTHENTICATED)))}shutdown(){}}class hc{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class dc{constructor(t){this.t=t,this.currentUser=Qa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new cc;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new cc,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{Za("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Za("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new cc)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Za("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(rc("string"==typeof e.accessToken),new lc(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return rc(null===t||"string"==typeof t),new Qa(t)}}class pc{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=Qa.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fc{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new pc(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(Qa.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mc{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gc{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Za("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,Za("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{Za("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):Za("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(rc("string"==typeof t.token),this.R=t.token,new mc(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vc(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class yc{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=vc(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function wc(t,e){return t<e?-1:t>e?1:0}function bc(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class _c{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ac(oc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ac(oc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ac(oc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ac(oc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return _c.fromMillis(Date.now())}static fromDate(t){return _c.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new _c(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?wc(this.nanoseconds,t.nanoseconds):wc(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ec{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ec(t)}static min(){return new Ec(new _c(0,0))}static max(){return new Ec(new _c(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Tc{constructor(t,e,n){void 0===e?e=0:e>t.length&&ic(),void 0===n?n=t.length-e:n>t.length-e&&ic(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Tc.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Tc?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Ic extends Tc{construct(t,e,n){return new Ic(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new ac(oc.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Ic(e)}static emptyPath(){return new Ic([])}}const Cc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sc extends Tc{construct(t,e,n){return new Sc(t,e,n)}static isValidIdentifier(t){return Cc.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sc.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sc(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new ac(oc.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new ac(oc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new ac(oc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new ac(oc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Sc(e)}static emptyPath(){return new Sc([])}}class kc{constructor(t){this.path=t}static fromPath(t){return new kc(Ic.fromString(t))}static fromName(t){return new kc(Ic.fromString(t).popFirst(5))}static empty(){return new kc(Ic.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Ic.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Ic.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new kc(new Ic(t.slice()))}}function xc(t){return new Ac(t.readTime,t.key,-1)}class Ac{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Ac(Ec.min(),kc.empty(),-1)}static max(){return new Ac(Ec.max(),kc.empty(),-1)}}function Rc(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=kc.comparator(t.documentKey,e.documentKey),0!==n?n:wc(t.largestBatchId,e.largestBatchId))}const Nc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Lc(t){if(t.code!==oc.FAILED_PRECONDITION||t.message!==Nc)throw t;Za("LocalStore","Unexpectedly lost primary lease")}class Oc{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ic(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Oc(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Oc?e:Oc.resolve(e)}catch(t){return Oc.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Oc.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Oc.reject(e)}static resolve(t){return new Oc(((e,n)=>{e(t)}))}static reject(t){return new Oc(((e,n)=>{n(t)}))}static waitFor(t){return new Oc(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=Oc.resolve(!1);for(const n of t)e=e.next((t=>t?Oc.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Oc(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new Oc(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}class Pc{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new cc,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Fc(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=Bc(e.target.error);this.V.reject(new Fc(t,n))}}static open(t,e,n,i){try{return new Pc(e,t.transaction(i,n))}catch(t){throw new Fc(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(Za("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new jc(e)}}class Mc{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===Mc.S(w())&&tc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Za("SimpleDb","Removing database:",t),$c(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!b())return!1;if(Mc.C())return!0;const t=w(),e=Mc.S(t),n=0<e&&e<10,i=Mc.v(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||(Za("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new Fc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new ac(oc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new ac(oc.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Fc(t,i))},i.onupgradeneeded=t=>{Za("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,i.transaction,t.oldVersion,this.version).next((()=>{Za("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}B(t){this.L=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.O(t);const e=Pc.open(this.db,t,r?"readonly":"readwrite",n),s=i(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),Oc.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(Za("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Uc{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return $c(this.k.delete())}}class Fc extends ac{constructor(t,e){super(oc.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Vc(t){return"IndexedDbTransactionError"===t.name}class jc{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(Za("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Za("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),$c(n)}add(t){return Za("SimpleDb","ADD",this.store.name,t,t),$c(this.store.add(t))}get(t){return $c(this.store.get(t)).next((e=>(void 0===e&&(e=null),Za("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return Za("SimpleDb","DELETE",this.store.name,t),$c(this.store.delete(t))}count(){return Za("SimpleDb","COUNT",this.store.name),$c(this.store.count())}W(t,e){const n=this.options(t,e),i=n.index?this.store.index(n.index):this.store;if("function"==typeof i.getAll){const t=i.getAll(n.range);return new Oc(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new Oc(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){Za("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const i=this.cursor(n);return this.G(i,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.G(i,e)}Z(t){const e=this.cursor({});return new Oc(((n,i)=>{e.onerror=t=>{const e=Bc(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}G(t,e){const n=[];return new Oc(((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new Uc(r),o=e(r.primaryKey,r.value,s);if(o instanceof Oc){const t=o.catch((t=>(s.done(),Oc.reject(t))));n.push(t)}s.isDone?i():null===s.$?r.continue():r.continue(s.$)}})).next((()=>Oc.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function $c(t){return new Oc(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=Bc(t.target.error);n(e)}}))}let qc=!1;function Bc(t){const e=Mc.S(w());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new ac("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qc||(qc=!0,setTimeout((()=>{throw t}),0)),t}}return t}class zc{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function Hc(t){return null==t}function Gc(t){return 0===t&&1/t==-1/0}zc._e=-1;function Kc(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qc(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Jc{constructor(t,e){this.comparator=t,this.root=e||Yc.EMPTY}insert(t,e){return new Jc(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Yc.BLACK,null,null))}remove(t){return new Jc(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Yc.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Xc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Xc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Xc(this.root,t,this.comparator,!0)}}class Xc{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Yc{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Yc.RED,this.left=null!=i?i:Yc.EMPTY,this.right=null!=r?r:Yc.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new Yc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yc.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return Yc.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Yc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Yc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ic();if(this.right.isRed())throw ic();const t=this.left.check();if(t!==this.right.check())throw ic();return t+(this.isRed()?0:1)}}Yc.EMPTY=null,Yc.RED=!0,Yc.BLACK=!1,Yc.EMPTY=new class{constructor(){this.size=0}get key(){throw ic()}get value(){throw ic()}get color(){throw ic()}get left(){throw ic()}get right(){throw ic()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Yc(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zc{constructor(t){this.comparator=t,this.data=new Jc(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new tl(this.data.getIterator())}getIteratorFrom(t){return new tl(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Zc))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Zc(this.comparator);return e.data=t,e}}class tl{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class el{constructor(t){this.fields=t,t.sort(Sc.comparator)}static empty(){return new el([])}unionWith(t){let e=new Zc(Sc.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new el(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return bc(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class nl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class il{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new nl("Invalid base64 string: "+t):t}}(t);return new il(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new il(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return wc(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}il.EMPTY_BYTE_STRING=new il("");const rl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sl(t){if(rc(!!t),"string"==typeof t){let e=0;const n=rl.exec(t);if(rc(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ol(t.seconds),nanos:ol(t.nanos)}}function ol(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function al(t){return"string"==typeof t?il.fromBase64String(t):il.fromUint8Array(t)}function cl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ll(t){const e=t.mapValue.fields.__previous_value__;return cl(e)?ll(e):e}function ul(t){const e=sl(t.mapValue.fields.__local_write_time__.timestampValue);return new _c(e.seconds,e.nanos)}class hl{constructor(t,e,n,i,r,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class dl{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new dl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof dl&&t.projectId===this.projectId&&t.database===this.database}}const pl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function fl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cl(t)?4:xl(t)?9007199254740991:10:ic()}function ml(t,e){if(t===e)return!0;const n=fl(t);if(n!==fl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ul(t).isEqual(ul(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=sl(t.timestampValue),i=sl(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return al(t.bytesValue).isEqual(al(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ol(t.geoPointValue.latitude)===ol(e.geoPointValue.latitude)&&ol(t.geoPointValue.longitude)===ol(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ol(t.integerValue)===ol(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=ol(t.doubleValue),i=ol(e.doubleValue);return n===i?Gc(n)===Gc(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return bc(t.arrayValue.values||[],e.arrayValue.values||[],ml);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Kc(n)!==Kc(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!ml(n[t],i[t])))return!1;return!0}(t,e);default:return ic()}}function gl(t,e){return void 0!==(t.values||[]).find((t=>ml(t,e)))}function vl(t,e){if(t===e)return 0;const n=fl(t),i=fl(e);if(n!==i)return wc(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return wc(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=ol(t.integerValue||t.doubleValue),i=ol(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return yl(t.timestampValue,e.timestampValue);case 4:return yl(ul(t),ul(e));case 5:return wc(t.stringValue,e.stringValue);case 6:return function(t,e){const n=al(t),i=al(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=wc(n[t],i[t]);if(0!==e)return e}return wc(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=wc(ol(t.latitude),ol(e.latitude));return 0!==n?n:wc(ol(t.longitude),ol(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=vl(n[t],i[t]);if(e)return e}return wc(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===pl.mapValue&&e===pl.mapValue)return 0;if(t===pl.mapValue)return 1;if(e===pl.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let t=0;t<i.length&&t<s.length;++t){const e=wc(i[t],s[t]);if(0!==e)return e;const o=vl(n[i[t]],r[s[t]]);if(0!==o)return o}return wc(i.length,s.length)}(t.mapValue,e.mapValue);default:throw ic()}}function yl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return wc(t,e);const n=sl(t),i=sl(e),r=wc(n.seconds,i.seconds);return 0!==r?r:wc(n.nanos,i.nanos)}function wl(t){return bl(t)}function bl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=sl(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return al(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return kc.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=bl(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${bl(t.fields[r])}`;return n+"}"}(t.mapValue):ic()}function _l(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function El(t){return!!t&&"integerValue"in t}function Tl(t){return!!t&&"arrayValue"in t}function Il(t){return!!t&&"nullValue"in t}function Cl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sl(t){return!!t&&"mapValue"in t}function kl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wc(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=kl(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xl(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Al{constructor(t){this.value=t}static empty(){return new Al({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Sl(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=kl(e)}setAll(t){let e=Sc.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=kl(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());Sl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ml(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Sl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Wc(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new Al(kl(this.value))}}function Rl(t){const e=[];return Wc(t.fields,((t,n)=>{const i=new Sc([t]);if(Sl(n)){const t=Rl(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new el(e)}class Nl{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Nl(t,0,Ec.min(),Ec.min(),Ec.min(),Al.empty(),0)}static newFoundDocument(t,e,n,i){return new Nl(t,1,e,Ec.min(),n,i,0)}static newNoDocument(t,e){return new Nl(t,2,e,Ec.min(),Ec.min(),Al.empty(),0)}static newUnknownDocument(t,e){return new Nl(t,3,e,Ec.min(),Ec.min(),Al.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ec.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Al.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Al.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ec.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Nl&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Nl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dl{constructor(t,e){this.position=t,this.inclusive=e}}function Ll(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?kc.comparator(kc.fromName(o.referenceValue),n.key):vl(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Ol(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ml(t.position[n],e.position[n]))return!1;return!0}class Pl{constructor(t,e="asc"){this.field=t,this.dir=e}}function Ml(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Ul{}class Fl extends Ul{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Hl(t,e,n):"array-contains"===e?new Ql(t,n):"in"===e?new Jl(t,n):"not-in"===e?new Xl(t,n):"array-contains-any"===e?new Yl(t,n):new Fl(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Gl(t,n):new Kl(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(vl(e,this.value)):null!==e&&fl(this.value)===fl(e)&&this.matchesComparison(vl(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ic()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vl extends Ul{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new Vl(t,e)}matches(t){return jl(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function jl(t){return"and"===t.op}function $l(t){return function(t){for(const e of t.filters)if(e instanceof Vl)return!1;return!0}(t)&&jl(t)}function ql(t){if(t instanceof Fl)return t.field.canonicalString()+t.op.toString()+wl(t.value);if($l(t))return t.filters.map((t=>ql(t))).join(",");{const e=t.filters.map((t=>ql(t))).join(",");return`${t.op}(${e})`}}function Bl(t,e){return t instanceof Fl?function(t,e){return e instanceof Fl&&t.op===e.op&&t.field.isEqual(e.field)&&ml(t.value,e.value)}(t,e):t instanceof Vl?function(t,e){return e instanceof Vl&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Bl(n,e.filters[i])),!0)}(t,e):void ic()}function zl(t){return t instanceof Fl?function(t){return`${t.field.canonicalString()} ${t.op} ${wl(t.value)}`}(t):t instanceof Vl?function(t){return t.op.toString()+" {"+t.getFilters().map(zl).join(" ,")+"}"}(t):"Filter"}class Hl extends Fl{constructor(t,e,n){super(t,e,n),this.key=kc.fromName(n.referenceValue)}matches(t){const e=kc.comparator(t.key,this.key);return this.matchesComparison(e)}}class Gl extends Fl{constructor(t,e){super(t,"in",e),this.keys=Wl(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Kl extends Fl{constructor(t,e){super(t,"not-in",e),this.keys=Wl(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Wl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>kc.fromName(t.referenceValue)))}class Ql extends Fl{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Tl(e)&&gl(e.arrayValue,this.value)}}class Jl extends Fl{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&gl(this.value.arrayValue,e)}}class Xl extends Fl{constructor(t,e){super(t,"not-in",e)}matches(t){if(gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!gl(this.value.arrayValue,e)}}class Yl extends Fl{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Tl(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>gl(this.value.arrayValue,t)))}}class Zl{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function tu(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Zl(t,e,n,i,r,s,o)}function eu(t){const e=sc(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>ql(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Hc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>wl(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>wl(t))).join(",")),e.ce=t}return e.ce}function nu(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ml(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Bl(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ol(t.startAt,e.startAt)&&Ol(t.endAt,e.endAt)}function iu(t){return kc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class ru{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function su(t){return new ru(t)}function ou(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function au(t){return null!==t.collectionGroup}function cu(t){const e=sc(t);if(null===e.le){e.le=[];const t=new Set;for(const n of e.explicitOrderBy)e.le.push(n),t.add(n.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new Zc(Sc.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new Pl(i,n))})),t.has(Sc.keyField().canonicalString())||e.le.push(new Pl(Sc.keyField(),n))}return e.le}function lu(t){const e=sc(t);return e.he||(e.he=function(t,e){if("F"===t.limitType)return tu(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new Pl(t.field,e)}));const n=t.endAt?new Dl(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Dl(t.startAt.position,t.startAt.inclusive):null;return tu(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}(e,cu(t))),e.he}function uu(t,e){const n=t.filters.concat([e]);return new ru(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hu(t,e,n){return new ru(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function du(t,e){return nu(lu(t),lu(e))&&t.limitType===e.limitType}function pu(t){return`${eu(lu(t))}|lt:${t.limitType}`}function fu(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>zl(t))).join(", ")}]`),Hc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>wl(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>wl(t))).join(",")),`Target(${e})`}(lu(t))}; limitType=${t.limitType})`}function mu(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):kc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of cu(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=Ll(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,cu(t),e)||t.endAt&&!function(t,e,n){const i=Ll(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,cu(t),e))}(t,e)}function gu(t){return(e,n)=>{let i=!1;for(const r of cu(t)){const t=vu(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function vu(t,e,n){const i=t.field.isKeyField()?kc.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?vl(i,r):ic()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ic()}}class yu{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Wc(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return Qc(this.inner)}size(){return this.innerSize}}const wu=new Jc(kc.comparator);function bu(){return wu}const _u=new Jc(kc.comparator);function Eu(...t){let e=_u;for(const n of t)e=e.insert(n.key,n);return e}function Tu(t){let e=_u;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Iu(){return Su()}function Cu(){return Su()}function Su(){return new yu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const ku=new Jc(kc.comparator),xu=new Zc(kc.comparator);function Au(...t){let e=xu;for(const n of t)e=e.add(n);return e}const Ru=new Zc(wc);function Nu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gc(e)?"-0":e}}function Du(t){return{integerValue:""+t}}function Lu(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Gc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Du(e):Nu(t,e)}class Ou{constructor(){this._=void 0}}function Pu(t,e,n){return t instanceof Fu?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&cl(e)&&(e=ll(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Vu?ju(t,e):t instanceof $u?qu(t,e):function(t,e){const n=Uu(t,e),i=zu(n)+zu(t.Ie);return El(n)&&El(t.Ie)?Du(i):Nu(t.serializer,i)}(t,e)}function Mu(t,e,n){return t instanceof Vu?ju(t,e):t instanceof $u?qu(t,e):n}function Uu(t,e){return t instanceof Bu?function(t){return El(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class Fu extends Ou{}class Vu extends Ou{constructor(t){super(),this.elements=t}}function ju(t,e){const n=Hu(e);for(const e of t.elements)n.some((t=>ml(t,e)))||n.push(e);return{arrayValue:{values:n}}}class $u extends Ou{constructor(t){super(),this.elements=t}}function qu(t,e){let n=Hu(e);for(const e of t.elements)n=n.filter((t=>!ml(t,e)));return{arrayValue:{values:n}}}class Bu extends Ou{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function zu(t){return ol(t.integerValue||t.doubleValue)}function Hu(t){return Tl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Gu{constructor(t,e){this.version=t,this.transformResults=e}}class Ku{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ku}static exists(t){return new Ku(void 0,t)}static updateTime(t){return new Ku(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Wu(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Qu{}function Ju(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new oh(t.key,Ku.none()):new eh(t.key,t.data,Ku.none());{const n=t.data,i=Al.empty();let r=new Zc(Sc.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new nh(t.key,i,new el(r.toArray()),Ku.none())}}function Xu(t,e,n){t instanceof eh?function(t,e,n){const i=t.value.clone(),r=rh(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof nh?function(t,e,n){if(!Wu(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=rh(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(ih(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Yu(t,e,n,i){return t instanceof eh?function(t,e,n,i){if(!Wu(t.precondition,e))return n;const r=t.value.clone(),s=sh(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof nh?function(t,e,n,i){if(!Wu(t.precondition,e))return n;const r=sh(t.fieldTransforms,i,e),s=e.data;return s.setAll(ih(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return Wu(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Zu(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Uu(i.transform,t||null);null!=r&&(null===n&&(n=Al.empty()),n.set(i.field,r))}return n||null}function th(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&bc(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Vu&&e instanceof Vu||t instanceof $u&&e instanceof $u?bc(t.elements,e.elements,ml):t instanceof Bu&&e instanceof Bu?ml(t.Ie,e.Ie):t instanceof Fu&&e instanceof Fu}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class eh extends Qu{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class nh extends Qu{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function ih(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function rh(t,e,n){const i=new Map;rc(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Mu(o,a,n[r]))}return i}function sh(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Pu(t,s,e))}return i}class oh extends Qu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ah extends Qu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ch{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&Xu(i,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Yu(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Yu(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Cu();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=Ju(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Ec.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Au())}isEqual(t){return this.batchId===t.batchId&&bc(this.mutations,t.mutations,((t,e)=>th(t,e)))&&bc(this.baseMutations,t.baseMutations,((t,e)=>th(t,e)))}}class lh{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){rc(t.mutations.length===n.length);let i=ku;const r=t.mutations;for(let t=0;t<r.length;t++)i=i.insert(r[t].key,n[t].version);return new lh(t,e,n,i)}}class uh{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class hh{constructor(t,e){this.count=t,this.unchangedNames=e}}var dh,ph;function fh(t){if(void 0===t)return tc("GRPC error has no .code"),oc.UNKNOWN;switch(t){case dh.OK:return oc.OK;case dh.CANCELLED:return oc.CANCELLED;case dh.UNKNOWN:return oc.UNKNOWN;case dh.DEADLINE_EXCEEDED:return oc.DEADLINE_EXCEEDED;case dh.RESOURCE_EXHAUSTED:return oc.RESOURCE_EXHAUSTED;case dh.INTERNAL:return oc.INTERNAL;case dh.UNAVAILABLE:return oc.UNAVAILABLE;case dh.UNAUTHENTICATED:return oc.UNAUTHENTICATED;case dh.INVALID_ARGUMENT:return oc.INVALID_ARGUMENT;case dh.NOT_FOUND:return oc.NOT_FOUND;case dh.ALREADY_EXISTS:return oc.ALREADY_EXISTS;case dh.PERMISSION_DENIED:return oc.PERMISSION_DENIED;case dh.FAILED_PRECONDITION:return oc.FAILED_PRECONDITION;case dh.ABORTED:return oc.ABORTED;case dh.OUT_OF_RANGE:return oc.OUT_OF_RANGE;case dh.UNIMPLEMENTED:return oc.UNIMPLEMENTED;case dh.DATA_LOSS:return oc.DATA_LOSS;default:return ic()}}(ph=dh||(dh={}))[ph.OK=0]="OK",ph[ph.CANCELLED=1]="CANCELLED",ph[ph.UNKNOWN=2]="UNKNOWN",ph[ph.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ph[ph.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ph[ph.NOT_FOUND=5]="NOT_FOUND",ph[ph.ALREADY_EXISTS=6]="ALREADY_EXISTS",ph[ph.PERMISSION_DENIED=7]="PERMISSION_DENIED",ph[ph.UNAUTHENTICATED=16]="UNAUTHENTICATED",ph[ph.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ph[ph.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ph[ph.ABORTED=10]="ABORTED",ph[ph.OUT_OF_RANGE=11]="OUT_OF_RANGE",ph[ph.UNIMPLEMENTED=12]="UNIMPLEMENTED",ph[ph.INTERNAL=13]="INTERNAL",ph[ph.UNAVAILABLE=14]="UNAVAILABLE",ph[ph.DATA_LOSS=15]="DATA_LOSS";const mh=new Ka([4294967295,4294967295],0);function gh(t){const e=(new TextEncoder).encode(t),n=new Ga;return n.update(e),new Uint8Array(n.digest())}function vh(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ka([n,i],0),new Ka([r,s],0)]}class yh{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new wh(`Invalid padding: ${e}`);if(n<0)throw new wh(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new wh(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new wh(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ee=Ka.fromNumber(this.Te)}de(t,e,n){let i=t.add(e.multiply(Ka.fromNumber(n)));return 1===i.compare(mh)&&(i=new Ka([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=gh(t),[n,i]=vh(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,i,t);if(!this.Ae(e))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),s=new yh(r,i,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Te)return;const e=gh(t),[n,i]=vh(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,i,t);this.Re(e)}}Re(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class wh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bh{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,_h.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new bh(Ec.min(),i,new Jc(wc),bu(),Au())}}class _h{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new _h(n,e,Au(),Au(),Au())}}class Eh{constructor(t,e,n,i){this.Ve=t,this.removedTargetIds=e,this.key=n,this.me=i}}class Th{constructor(t,e){this.targetId=t,this.fe=e}}class Ih{constructor(t,e,n=il.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Ch{constructor(){this.ge=0,this.pe=xh(),this.ye=il.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=Au(),e=Au(),n=Au();return this.pe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:ic()}})),new _h(this.ye,this.we,t,e,n)}Fe(){this.Se=!1,this.pe=xh()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,rc(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class Sh{constructor(t){this.Be=t,this.ke=new Map,this.qe=bu(),this.Qe=kh(),this.Ke=new Jc(wc)}$e(t){for(const e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(const e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,(e=>{const n=this.ze(e);switch(t.state){case 0:this.je(e)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(e);break;case 3:this.je(e)&&(n.Le(),n.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),n.Ce(t.resumeToken));break;default:ic()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach(((t,n)=>{this.je(n)&&e(n)}))}Je(t){const e=t.targetId,n=t.fe.count,i=this.Ye(e);if(i){const r=i.target;if(iu(r))if(0===n){const t=new kc(r.path);this.We(e,t,Nl.newNoDocument(t,Ec.min()))}else rc(1===n);else{const i=this.Ze(e);if(i!==n){const n=this.Xe(t),r=n?this.et(n,t,i):1;if(0!==r){this.He(e);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,t)}}}}}Xe(t){const e=t.fe.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=e;let s,o;try{s=al(n).toUint8Array()}catch(t){if(t instanceof nl)return ec("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new yh(s,i,r)}catch(t){return ec(t instanceof wh?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Te?null:o}et(t,e,n){return e.fe.count===n-this.rt(t,e.targetId)?0:2}rt(t,e){const n=this.Be.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const r=this.Be.nt(),s=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;t.mightContain(s)||(this.We(e,n,null),i++)})),i}it(t){const e=new Map;this.ke.forEach(((n,i)=>{const r=this.Ye(i);if(r){if(n.current&&iu(r.target)){const e=new kc(r.target.path);null!==this.qe.get(e)||this.st(i,e)||this.We(i,e,Nl.newNoDocument(e,t))}n.De&&(e.set(i,n.ve()),n.Fe())}}));let n=Au();this.Qe.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.Ye(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.qe.forEach(((e,n)=>n.setReadTime(t)));const i=new bh(t,e,this.Ke,this.qe,n);return this.qe=bu(),this.Qe=kh(),this.Ke=new Jc(wc),i}Ue(t,e){if(!this.je(t))return;const n=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,n),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,n){if(!this.je(t))return;const i=this.ze(t);this.st(t,e)?i.Me(e,1):i.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),n&&(this.qe=this.qe.insert(e,n))}removeTarget(t){this.ke.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new Ch,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new Zc(wc),this.Qe=this.Qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||Za("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.ke.get(t);return e&&e.be?null:this.Be._t(t)}He(t){this.ke.set(t,new Ch),this.Be.getRemoteKeysForTarget(t).forEach((e=>{this.We(t,e,null)}))}st(t,e){return this.Be.getRemoteKeysForTarget(t).has(e)}}function kh(){return new Jc(kc.comparator)}function xh(){return new Jc(kc.comparator)}const Ah={asc:"ASCENDING",desc:"DESCENDING"},Rh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nh={and:"AND",or:"OR"};class Dh{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Lh(t,e){return t.useProto3Json||Hc(e)?e:{value:e}}function Oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ph(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Mh(t,e){return Oh(t,e.toTimestamp())}function Uh(t){return rc(!!t),Ec.fromTimestamp(function(t){const e=sl(t);return new _c(e.seconds,e.nanos)}(t))}function Fh(t,e){return Vh(t,e).canonicalString()}function Vh(t,e){const n=function(t){return new Ic(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function jh(t){const e=Ic.fromString(t);return rc(rd(e)),e}function $h(t,e){return Fh(t.databaseId,e.path)}function qh(t,e){const n=jh(e);if(n.get(1)!==t.databaseId.projectId)throw new ac(oc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ac(oc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new kc(Hh(n))}function Bh(t,e){return Fh(t.databaseId,e)}function zh(t){return new Ic(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Hh(t){return rc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Gh(t,e,n){return{name:$h(t,e),fields:n.value.mapValue.fields}}function Kh(t,e){return{documents:[Bh(t,e.path)]}}function Wh(t,e){const n={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Bh(t,r);const s=function(t){if(0!==t.length)return nd(Vl.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:td(t.field),direction:Xh(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Lh(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ut:n,parent:r}}function Qh(t){let e=function(t){const e=jh(t);return 4===e.length?Ic.emptyPath():Hh(e)}(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){rc(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Jh(t);return e instanceof Vl&&$l(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new Pl(ed(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Hc(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Dl(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new Dl(n,e)}(n.endAt)),function(t,e,n,i,r,s,o,a){return new ru(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function Jh(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=ed(t.unaryFilter.field);return Fl.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=ed(t.unaryFilter.field);return Fl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ed(t.unaryFilter.field);return Fl.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=ed(t.unaryFilter.field);return Fl.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ic()}}(t):void 0!==t.fieldFilter?function(t){return Fl.create(ed(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ic()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Vl.create(t.compositeFilter.filters.map((t=>Jh(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ic()}}(t.compositeFilter.op))}(t):ic()}function Xh(t){return Ah[t]}function Yh(t){return Rh[t]}function Zh(t){return Nh[t]}function td(t){return{fieldPath:t.canonicalString()}}function ed(t){return Sc.fromServerFormat(t.fieldPath)}function nd(t){return t instanceof Fl?function(t){if("=="===t.op){if(Cl(t.value))return{unaryFilter:{field:td(t.field),op:"IS_NAN"}};if(Il(t.value))return{unaryFilter:{field:td(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Cl(t.value))return{unaryFilter:{field:td(t.field),op:"IS_NOT_NAN"}};if(Il(t.value))return{unaryFilter:{field:td(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:td(t.field),op:Yh(t.op),value:t.value}}}(t):t instanceof Vl?function(t){const e=t.getFilters().map((t=>nd(t)));return 1===e.length?e[0]:{compositeFilter:{op:Zh(t.op),filters:e}}}(t):ic()}function id(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function rd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class sd{constructor(t,e,n,i,r=Ec.min(),s=Ec.min(),o=il.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new sd(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class od{constructor(t){this.ct=t}}function ad(t){const e=Qh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?hu(e,e.limit,"L"):e}class cd{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(ol(t.integerValue));else if("doubleValue"in t){const n=ol(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),Gc(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At(`${n.seconds||""}`),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(al(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?xl(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):ic()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const t of Object.keys(n))this.Rt(t,e),this.It(n[t],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const t of n)this.It(t,e)}gt(t,e){this.Et(e,37),kc.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}cd.bt=new cd;class ld{constructor(){this._n=new ud}addToCollectionParentIndex(t,e){return this._n.add(e),Oc.resolve()}getCollectionParents(t,e){return Oc.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return Oc.resolve()}deleteFieldIndex(t,e){return Oc.resolve()}deleteAllFieldIndexes(t){return Oc.resolve()}createTargetIndexes(t,e){return Oc.resolve()}getDocumentsMatchingTarget(t,e){return Oc.resolve(null)}getIndexType(t,e){return Oc.resolve(0)}getFieldIndexes(t,e){return Oc.resolve([])}getNextCollectionGroupToUpdate(t){return Oc.resolve(null)}getMinOffset(t,e){return Oc.resolve(Ac.min())}getMinOffsetFromCollectionGroup(t,e){return Oc.resolve(Ac.min())}updateCollectionGroup(t,e,n){return Oc.resolve()}updateIndexEntries(t,e){return Oc.resolve()}}class ud{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Zc(Ic.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Zc(Ic.comparator)).toArray()}}new Uint8Array(0);class hd{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new hd(t,hd.DEFAULT_COLLECTION_PERCENTILE,hd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}hd.DEFAULT_COLLECTION_PERCENTILE=10,hd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hd.DEFAULT=new hd(41943040,hd.DEFAULT_COLLECTION_PERCENTILE,hd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hd.DISABLED=new hd(-1,0,0);class dd{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new dd(0)}static Ln(){return new dd(-1)}}class pd{constructor(){this.changes=new yu((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Nl.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Oc.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class fd{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class md{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Yu(n.mutation,t,el.empty(),_c.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Au()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Au()){const i=Iu();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Eu();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Iu();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Au())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=bu();const s=Su(),o=Su();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof nh)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Yu(o.mutation,e,o.mutation.getFieldMask(),_c.now())):s.set(e.key,el.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new fd(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=Su();let i=new Jc(((t,e)=>t-e)),r=Au();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||el.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Au()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Cu();c.forEach((t=>{if(!r.has(t)){const i=Ju(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return Oc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return kc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):au(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):Oc.resolve(Iu());let o=-1,a=r;return s.next((e=>Oc.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?Oc.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,Au()))).next((t=>({batchId:o,changes:Tu(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new kc(e)).next((t=>{let e=Eu();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=Eu();return this.indexManager.getCollectionParents(t,r).next((o=>Oc.forEach(o,(o=>{const a=function(t,e){return new ru(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Nl.newInvalidDocument(i)))}));let n=Eu();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&Yu(s.mutation,i,el.empty(),_c.now()),mu(e,i)&&(n=n.insert(t,i))})),n}))}}class gd{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return Oc.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Uh(t.createTime)}}(e)),Oc.resolve()}getNamedQuery(t,e){return Oc.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:ad(t.bundledQuery),readTime:Uh(t.readTime)}}(e)),Oc.resolve()}}class vd{constructor(){this.overlays=new Jc(kc.comparator),this.hr=new Map}getOverlay(t,e){return Oc.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Iu();return Oc.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ht(t,e,i)})),Oc.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),Oc.resolve()}getOverlaysForCollection(t,e,n){const i=Iu(),r=e.length+1,s=new kc(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Oc.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new Jc(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=Iu(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Iu(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return Oc.resolve(o)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new uh(e,n));let r=this.hr.get(e);void 0===r&&(r=Au(),this.hr.set(e,r)),this.hr.set(e,r.add(n.key))}}class yd{constructor(){this.Pr=new Zc(wd.Ir),this.Tr=new Zc(wd.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new wd(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new wd(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new kc(new Ic([])),n=new wd(e,t),i=new wd(e,t+1),r=[];return this.Tr.forEachInRange([n,i],(t=>{this.Ar(t),r.push(t.key)})),r}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new kc(new Ic([])),n=new wd(e,t),i=new wd(e,t+1);let r=Au();return this.Tr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new wd(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class wd{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return kc.comparator(t.key,e.key)||wc(t.pr,e.pr)}static Er(t,e){return wc(t.pr,e.pr)||kc.comparator(t.key,e.key)}}class bd{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Zc(wd.Ir)}checkEmpty(t){return Oc.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ch(r,e,n,i);this.mutationQueue.push(s);for(const e of i)this.wr=this.wr.add(new wd(e.key,r)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Oc.resolve(s)}lookupMutationBatch(t,e){return Oc.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.br(n),r=i<0?0:i;return Oc.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Oc.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return Oc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new wd(e,0),i=new wd(e,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(t=>{const e=this.Sr(t.pr);r.push(e)})),Oc.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Zc(wc);return e.forEach((t=>{const e=new wd(t,0),i=new wd(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,i],(t=>{n=n.add(t.pr)}))})),Oc.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;kc.isDocumentKey(r)||(r=r.child(""));const s=new wd(new kc(r),0);let o=new Zc(wc);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.pr)),!0)}),s),Oc.resolve(this.Dr(o))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){rc(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Oc.forEach(e.mutations,(i=>{const r=new wd(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new wd(e,0),i=this.wr.firstAfterOrEqual(n);return Oc.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Oc.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class _d{constructor(t){this.vr=t,this.docs=new Jc(kc.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Oc.resolve(n?n.document.mutableCopy():Nl.newInvalidDocument(e))}getEntries(t,e){let n=bu();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Nl.newInvalidDocument(t))})),Oc.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=bu();const s=e.path,o=new kc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||Rc(xc(o),n)<=0||(i.has(o.key)||mu(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Oc.resolve(r)}getAllFromCollectionGroup(t,e,n,i){ic()}Fr(t,e){return Oc.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Ed(this)}getSize(t){return Oc.resolve(this.size)}}class Ed extends pd{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.ar.addEntry(t,i)):this.ar.removeEntry(n)})),Oc.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class Td{constructor(t){this.persistence=t,this.Mr=new yu((t=>eu(t)),nu),this.lastRemoteSnapshotVersion=Ec.min(),this.highestTargetId=0,this.Or=0,this.Nr=new yd,this.targetCount=0,this.Lr=dd.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),Oc.resolve()}getLastRemoteSnapshotVersion(t){return Oc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Oc.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Oc.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),Oc.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new dd(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,Oc.resolve()}updateTargetData(t,e){return this.qn(e),Oc.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,Oc.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Oc.waitFor(r).next((()=>i))}getTargetCount(t){return Oc.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return Oc.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),Oc.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),Oc.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),Oc.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return Oc.resolve(n)}containsKey(t,e){return Oc.resolve(this.Nr.containsKey(e))}}class Id{constructor(t,e){this.Br={},this.overlays={},this.kr=new zc(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Td(this),this.indexManager=new ld,this.remoteDocumentCache=function(t){return new _d(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new od(e),this.$r=new gd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new vd,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new bd(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){Za("MemoryPersistence","Starting transaction:",t);const i=new Cd(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((t=>this.referenceDelegate.Wr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gr(t,e){return Oc.or(Object.values(this.Br).map((n=>()=>n.containsKey(t,e))))}}class Cd extends Dc{constructor(t){super(),this.currentSequenceNumber=t}}class Sd{constructor(t){this.persistence=t,this.zr=new yd,this.jr=null}static Hr(t){return new Sd(t)}get Jr(){if(this.jr)return this.jr;throw ic()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),Oc.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),Oc.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),Oc.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oc.forEach(this.Jr,(n=>{const i=kc.fromPath(n);return this.Yr(t,i).next((t=>{t||e.removeEntry(i,Ec.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return Oc.or([()=>Oc.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class kd{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=i}static Ki(t,e){let n=Au(),i=Au();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new kd(t,e.fromCache,n,i)}}class xd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Ad{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=!function(){var t;const e=null===(t=d())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:Mc.v(w())>0?6:4}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ji(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.Hi(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new xd;return this.Ji(t,e,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(t,e,n,i.size)}))})).next((()=>r.result))}Yi(t,e,n,i){return n.documentReadCount<this.Wi?(Ya()<=U.DEBUG&&Za("QueryEngine","SDK will not create cache indexes for query:",fu(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Oc.resolve()):(Ya()<=U.DEBUG&&Za("QueryEngine","Query:",fu(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Ya()<=U.DEBUG&&Za("QueryEngine","The SDK decides to create cache indexes for query:",fu(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,lu(e))):Oc.resolve())}ji(t,e){if(ou(e))return Oc.resolve(null);let n=lu(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=hu(e,null,"F"),n=lu(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=Au(...i);return this.zi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Zi(e,i);return this.Xi(e,s,r,n.readTime)?this.ji(t,hu(e,null,"F")):this.es(t,s,e,n)}))))})))))}Hi(t,e,n,i){return ou(e)||i.isEqual(Ec.min())?Oc.resolve(null):this.zi.getDocuments(t,n).next((r=>{const s=this.Zi(e,r);return this.Xi(e,s,n,i)?Oc.resolve(null):(Ya()<=U.DEBUG&&Za("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fu(e)),this.es(t,s,e,function(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Ec.fromTimestamp(1e9===i?new _c(n+1,0):new _c(n,i));return new Ac(r,kc.empty(),e)}(i,-1)).next((t=>t)))}))}Zi(t,e){let n=new Zc(gu(t));return e.forEach(((e,i)=>{mu(t,i)&&(n=n.add(i))})),n}Xi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(t,e,n){return Ya()<=U.DEBUG&&Za("QueryEngine","Using full collection scan to execute query:",fu(e)),this.zi.getDocumentsMatchingQuery(t,e,Ac.min(),n)}es(t,e,n,i){return this.zi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Rd{constructor(t,e,n,i){this.persistence=t,this.ts=e,this.serializer=i,this.ns=new Jc(wc),this.rs=new yu((t=>eu(t)),nu),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new md(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}async function Nd(t,e){const n=sc(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=Au();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({us:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function Dd(t){const e=sc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}function Ld(t,e){const n=sc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function Od(t,e,n){const i=sc(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!Vc(t))throw t;Za("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)}function Pd(t,e,n){const i=sc(t);let r=Ec.min(),s=Au();return i.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const i=sc(t),r=i.rs.get(n);return void 0!==r?Oc.resolve(i.ns.get(r)):i.Qr.getTargetData(e,n)}(i,t,lu(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.ts.getDocumentsMatchingQuery(t,e,n?r:Ec.min(),n?s:Au()))).next((t=>(function(t,e,n){let i=t.ss.get(e)||Ec.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.ss.set(e,i)}(i,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,hs:s})))))}class Md{constructor(){this.activeTargetIds=Ru}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ud{constructor(){this.no=new Md,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Md,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Fd{io(t){}shutdown(){}}class Vd{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Za("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Za("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let jd=null;function $d(){return null===jd?jd=268435456+Math.round(2147483648*Math.random()):jd++,"0x"+jd.toString(16)}const qd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bd{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}const zd="WebChannelConnection";class Hd extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po=`projects/${n}/databases/${i}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get wo(){return!1}So(t,e,n,i,r){const s=$d(),o=this.bo(t,e.toUriEncodedString());Za("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,i,r),this.Co(t,o,a,n).then((e=>(Za("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw ec("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,i,r,s){return this.So(t,e,n,i,r)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Ja,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=qd[t];return`${this.fo}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,i){const r=$d();return new Promise(((s,o)=>{const a=new Ha;a.setWithCredentials(!0),a.listenOnce($a.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ja.NO_ERROR:const e=a.getResponseJson();Za(zd,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case ja.TIMEOUT:Za(zd,`RPC '${t}' ${r} timed out`),o(new ac(oc.DEADLINE_EXCEEDED,"Request time out"));break;case ja.HTTP_ERROR:const n=a.getStatus();if(Za(zd,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(oc).indexOf(e)>=0?e:oc.UNKNOWN}(e.status);o(new ac(t,e.message))}else o(new ac(oc.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ac(oc.UNAVAILABLE,"Connection failed."));break;default:ic()}}finally{Za(zd,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(i);Za(zd,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",c,n,15)}))}Fo(t,e,n){const i=$d(),r=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Fa(),o=Va(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");Za(zd,`Creating RPC '${t}' stream ${i}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const p=new Bd({lo:e=>{d?Za(zd,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(Za(zd,`Opening RPC '${t}' stream ${i} transport.`),u.open(),h=!0),Za(zd,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},ho:()=>u.close()}),f=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return f(u,za.EventType.OPEN,(()=>{d||Za(zd,`RPC '${t}' stream ${i} transport opened.`)})),f(u,za.EventType.CLOSE,(()=>{d||(d=!0,Za(zd,`RPC '${t}' stream ${i} transport closed`),p.Vo())})),f(u,za.EventType.ERROR,(e=>{d||(d=!0,ec(zd,`RPC '${t}' stream ${i} transport errored:`,e),p.Vo(new ac(oc.UNAVAILABLE,"The operation could not be completed")))})),f(u,za.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];rc(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Za(zd,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=dh[t];if(void 0!==e)return fh(e)}(e),r=o.message;void 0===n&&(n=oc.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,p.Vo(new ac(n,r)),u.close()}else Za(zd,`RPC '${t}' stream ${i} received:`,r),p.mo(r)}})),f(o,qa.STAT_EVENT,(e=>{e.stat===Ba.PROXY?Za(zd,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===Ba.NOPROXY&&Za(zd,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{p.Ro()}),0),p}}function Gd(){return"undefined"!=typeof document?document:null}function Kd(t){return new Dh(t,!0)}class Wd{constructor(t,e,n=1e3,i=1.5,r=6e4){this.oi=t,this.timerId=e,this.Mo=n,this.xo=i,this.Oo=r,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),i=Math.max(0,e-n);i>0&&Za("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Bo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class Qd{constructor(t,e,n,i,r,s,o,a){this.oi=t,this.$o=n,this.Uo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Wd(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===oc.RESOURCE_EXHAUSTED?(tc(e.toString()),tc("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===oc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Wo===e&&this.o_(t,n)}),(e=>{t((()=>{const t=new ac(oc.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return Za("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():(Za("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Jd extends Qd{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}a_(t,e){return this.connection.Fo("Listen",t,e)}onMessage(t){this.jo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ic()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(rc(void 0===e||"string"==typeof e),il.fromBase64String(e||"")):(rc(void 0===e||e instanceof Uint8Array),il.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?oc.UNKNOWN:fh(t.code);return new ac(e,t.message||"")}(o);n=new Ih(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=qh(t,i.document.name),s=Uh(i.document.updateTime),o=i.document.createTime?Uh(i.document.createTime):Ec.min(),a=new Al({mapValue:{fields:i.document.fields}}),c=Nl.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new Eh(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=qh(t,i.document),s=i.readTime?Uh(i.readTime):Ec.min(),o=Nl.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Eh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=qh(t,i.document),s=i.removedTargetIds||[];n=new Eh([],s,r,null)}else{if(!("filter"in e))return ic();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,s=new hh(i,r),o=t.targetId;n=new Th(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Ec.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Ec.min():e.readTime?Uh(e.readTime):Ec.min()}(t);return this.listener.u_(e,n)}c_(t){const e={};e.database=zh(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=iu(i)?{documents:Kh(t,i)}:{query:Wh(t,i).ut},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Ph(t,e.resumeToken);const i=Lh(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(Ec.min())>0){n.readTime=Oh(t,e.snapshotVersion.toTimestamp());const i=Lh(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ic()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.t_(e)}l_(t){const e={};e.database=zh(this.serializer),e.removeTarget=t,this.t_(e)}}class Xd extends Qd{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(rc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=function(t,e){return t&&t.length>0?(rc(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Uh(t.updateTime):Uh(e);return n.isEqual(Ec.min())&&(n=Uh(e)),new Gu(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Uh(t.commitTime);return this.listener.T_(n,e)}return rc(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=zh(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof eh)n={update:Gh(t,e.key,e.value)};else if(e instanceof oh)n={delete:$h(t,e.key)};else if(e instanceof nh)n={update:Gh(t,e.key,e.data),updateMask:id(e.fieldMask)};else{if(!(e instanceof ah))return ic();n={verify:$h(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Fu)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Vu)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $u)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bu)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw ic()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Mh(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ic()}(t,e.precondition)),n}(this.serializer,t)))};this.t_(e)}}class Yd extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new ac(oc.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.So(t,Vh(e,n),i,r,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===oc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ac(oc.UNKNOWN,t.toString())}))}vo(t,e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(t,Vh(e,n),i,s,o,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===oc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ac(oc.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Zd{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(tc(e),this.g_=!1):Za("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class tp{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io((t=>{n.enqueueAndForget((async()=>{lp(this)&&(Za("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=sc(t);e.v_.add(4),await np(e),e.x_.set("Unknown"),e.v_.delete(4),await ep(e)}(this))}))})),this.x_=new Zd(n,i)}}async function ep(t){if(lp(t))for(const e of t.F_)await e(!0)}async function np(t){for(const e of t.F_)await e(!1)}function ip(t,e){const n=sc(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),cp(n)?ap(n):Sp(n).Jo()&&sp(n,e))}function rp(t,e){const n=sc(t),i=Sp(n);n.C_.delete(e),i.Jo()&&op(n,e),0===n.C_.size&&(i.Jo()?i.Xo():lp(n)&&n.x_.set("Unknown"))}function sp(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ec.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sp(t).c_(e)}function op(t,e){t.O_.Oe(e),Sp(t).l_(e)}function ap(t){t.O_=new Sh({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Sp(t).start(),t.x_.p_()}function cp(t){return lp(t)&&!Sp(t).Ho()&&t.C_.size>0}function lp(t){return 0===sc(t).v_.size}function up(t){t.O_=void 0}async function hp(t){t.C_.forEach(((e,n)=>{sp(t,e)}))}async function dp(t,e){up(t),cp(t)?(t.x_.S_(e),ap(t)):t.x_.set("Unknown")}async function pp(t,e,n){if(t.x_.set("Online"),e instanceof Ih&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.C_.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.C_.delete(i),t.O_.removeTarget(i))}(t,e)}catch(n){Za("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await fp(t,n)}else if(e instanceof Eh?t.O_.$e(e):e instanceof Th?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Ec.min()))try{const e=await Dd(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.O_.it(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.C_.get(i);r&&t.C_.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t.C_.get(e);if(!i)return;t.C_.set(e,i.withResumeToken(il.EMPTY_BYTE_STRING,i.snapshotVersion)),op(t,e);const r=new sd(i.target,e,n,i.sequenceNumber);sp(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Za("RemoteStore","Failed to raise snapshot:",e),await fp(t,e)}}async function fp(t,e,n){if(!Vc(e))throw e;t.v_.add(1),await np(t),t.x_.set("Offline"),n||(n=()=>Dd(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Za("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await ep(t)}))}function mp(t,e){return e().catch((n=>fp(t,n,e)))}async function gp(t){const e=sc(t),n=kp(e);let i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;vp(e);)try{const t=await Ld(e.localStore,i);if(null===t){0===e.D_.length&&n.Xo();break}i=t.batchId,yp(e,t)}catch(t){await fp(e,t)}wp(e)&&bp(e)}function vp(t){return lp(t)&&t.D_.length<10}function yp(t,e){t.D_.push(e);const n=kp(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function wp(t){return lp(t)&&!kp(t).Ho()&&t.D_.length>0}function bp(t){kp(t).start()}async function _p(t){kp(t).d_()}async function Ep(t){const e=kp(t);for(const n of t.D_)e.I_(n.mutations)}async function Tp(t,e,n){const i=t.D_.shift(),r=lh.from(i,e,n);await mp(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await gp(t)}async function Ip(t,e){e&&kp(t).P_&&await async function(t,e){if(function(t){return function(t){switch(t){default:return ic();case oc.CANCELLED:case oc.UNKNOWN:case oc.DEADLINE_EXCEEDED:case oc.RESOURCE_EXHAUSTED:case oc.INTERNAL:case oc.UNAVAILABLE:case oc.UNAUTHENTICATED:return!1;case oc.INVALID_ARGUMENT:case oc.NOT_FOUND:case oc.ALREADY_EXISTS:case oc.PERMISSION_DENIED:case oc.FAILED_PRECONDITION:case oc.ABORTED:case oc.OUT_OF_RANGE:case oc.UNIMPLEMENTED:case oc.DATA_LOSS:return!0}}(t)&&t!==oc.ABORTED}(e.code)){const n=t.D_.shift();kp(t).Zo(),await mp(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await gp(t)}}(t,e),wp(t)&&bp(t)}async function Cp(t,e){const n=sc(t);n.asyncQueue.verifyOperationInProgress(),Za("RemoteStore","RemoteStore received new credentials");const i=lp(n);n.v_.add(3),await np(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await ep(n)}function Sp(t){return t.N_||(t.N_=function(t,e,n){const i=sc(t);return i.R_(),new Jd(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:hp.bind(null,t),To:dp.bind(null,t),u_:pp.bind(null,t)}),t.F_.push((async e=>{e?(t.N_.Zo(),cp(t)?ap(t):t.x_.set("Unknown")):(await t.N_.stop(),up(t))}))),t.N_}function kp(t){return t.L_||(t.L_=function(t,e,n){const i=sc(t);return i.R_(),new Xd(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:_p.bind(null,t),To:Ip.bind(null,t),E_:Ep.bind(null,t),T_:Tp.bind(null,t)}),t.F_.push((async e=>{e?(t.L_.Zo(),await gp(t)):(await t.L_.stop(),t.D_.length>0&&(Za("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}class xp{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new cc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new xp(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ac(oc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ap(t,e){if(tc("AsyncQueue",`${e}: ${t}`),Vc(t))return new ac(oc.UNAVAILABLE,`${e}: ${t}`);throw t}class Rp{constructor(t){this.comparator=t?(e,n)=>t(e,n)||kc.comparator(e.key,n.key):(t,e)=>kc.comparator(t.key,e.key),this.keyedMap=Eu(),this.sortedSet=new Jc(this.comparator)}static emptySet(t){return new Rp(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Rp))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Rp;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Np{constructor(){this.B_=new Jc(kc.comparator)}track(t){const e=t.doc.key,n=this.B_.get(e);n?0!==t.type&&3===n.type?this.B_=this.B_.insert(e,t):3===t.type&&1!==n.type?this.B_=this.B_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.B_=this.B_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.B_=this.B_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.B_=this.B_.remove(e):1===t.type&&2===n.type?this.B_=this.B_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.B_=this.B_.insert(e,{type:2,doc:t.doc}):ic():this.B_=this.B_.insert(e,t)}k_(){const t=[];return this.B_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Dp{constructor(t,e,n,i,r,s,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Dp(t,e,Rp.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&du(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class Lp{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((t=>t.U_()))}}class Op{constructor(){this.queries=new yu((t=>pu(t)),du),this.onlineState="Unknown",this.W_=new Set}}async function Pp(t,e){const n=sc(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.K_()&&e.U_()&&(i=2):(s=new Lp,i=e.U_()?0:1);try{switch(i){case 0:s.q_=await n.onListen(r,!0);break;case 1:s.q_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(t){const n=Ap(t,`Initialization of query '${fu(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&Vp(n)}async function Mp(t,e){const n=sc(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const t=s.Q_.indexOf(e);t>=0&&(s.Q_.splice(t,1),0===s.Q_.length?r=e.U_()?0:1:!s.K_()&&e.U_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Up(t,e){const n=sc(t);let i=!1;for(const t of e){const e=t.query,r=n.queries.get(e);if(r){for(const e of r.Q_)e.z_(t)&&(i=!0);r.q_=t}}i&&Vp(n)}function Fp(t,e,n){const i=sc(t),r=i.queries.get(e);if(r)for(const t of r.Q_)t.onError(n);i.queries.delete(e)}function Vp(t){t.W_.forEach((t=>{t.next()}))}var jp,$p;($p=jp||(jp={})).j_="default",$p.Cache="cache";class qp{constructor(t,e,n){this.query=t,this.H_=e,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Dp(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.J_?this.Z_(t)&&(this.H_.next(t),e=!0):this.X_(t,this.onlineState)&&(this.ea(t),e=!0),this.Y_=t,e}onError(t){this.H_.error(t)}G_(t){this.onlineState=t;let e=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,t)&&(this.ea(this.Y_),e=!0),e}X_(t,e){if(!t.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==e;return(!this.options.ta||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Z_(t){if(t.docChanges.length>0)return!0;const e=this.Y_&&this.Y_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}ea(t){t=Dp.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.J_=!0,this.H_.next(t)}U_(){return this.options.source!==jp.Cache}}class Bp{constructor(t){this.key=t}}class zp{constructor(t){this.key=t}}class Hp{constructor(t,e){this.query=t,this.ua=e,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Au(),this.mutatedKeys=Au(),this.ha=gu(t),this.Pa=new Rp(this.ha)}get Ia(){return this.ua}Ta(t,e){const n=e?e.Ea:new Np,i=e?e.Pa:this.Pa;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const l=i.get(t),u=mu(this.query,e)?e:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.da(l,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.ha(u,a)>0||c&&this.ha(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(a||c)&&(o=!0)),p&&(u?(s=s.add(u),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{Pa:s,Ea:n,Xi:o,mutatedKeys:r}}da(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const r=this.Pa;this.Pa=t.Pa,this.mutatedKeys=t.mutatedKeys;const s=t.Ea.k_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ic()}};return n(t)-n(e)}(t.type,e.type)||this.ha(t.doc,e.doc))),this.Aa(n),i=null!=i&&i;const o=e&&!i?this.Ra():[],a=0===this.la.size&&this.current&&!i?1:0,c=a!==this.ca;return this.ca=a,0!==s.length||c?{snapshot:new Dp(this.query,t.Pa,r,s,t.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:o}:{Va:o}}G_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Np,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(t){return!this.ua.has(t)&&!!this.Pa.has(t)&&!this.Pa.get(t).hasLocalMutations}Aa(t){t&&(t.addedDocuments.forEach((t=>this.ua=this.ua.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.ua=this.ua.delete(t))),this.current=t.current)}Ra(){if(!this.current)return[];const t=this.la;this.la=Au(),this.Pa.forEach((t=>{this.ma(t.key)&&(this.la=this.la.add(t.key))}));const e=[];return t.forEach((t=>{this.la.has(t)||e.push(new zp(t))})),this.la.forEach((n=>{t.has(n)||e.push(new Bp(n))})),e}fa(t){this.ua=t.hs,this.la=Au();const e=this.Ta(t.documents);return this.applyChanges(e,!0)}ga(){return Dp.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class Gp{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Kp{constructor(t){this.key=t,this.pa=!1}}class Wp{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new yu((t=>pu(t)),du),this.Sa=new Map,this.ba=new Set,this.Da=new Jc(kc.comparator),this.Ca=new Map,this.va=new yd,this.Fa={},this.Ma=new Map,this.xa=dd.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function Qp(t,e,n=!0){const i=gf(t);let r;const s=i.wa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ga()):r=await Xp(i,e,n,!0),r}async function Jp(t,e){const n=gf(t);await Xp(n,e,!0,!1)}async function Xp(t,e,n,i){const r=await function(t,e){const n=sc(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Qr.getTargetData(t,e).next((r=>r?(i=r,Oc.resolve(i)):n.Qr.allocateTargetId(t).next((r=>(i=new sd(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Qr.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.ns.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(t.targetId,t),n.rs.set(e,t.targetId)),t}))}(t.localStore,lu(e)),s=r.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return i&&(a=await async function(t,e,n,i,r){t.Na=(e,n,i)=>async function(t,e,n,i){let r=e.view.Ta(n);r.Xi&&(r=await Pd(t.localStore,e.query,!1).then((({documents:t})=>e.view.Ta(t,r))));const s=i&&i.targetChanges.get(e.targetId),o=i&&null!=i.targetMismatches.get(e.targetId),a=e.view.applyChanges(r,t.isPrimaryClient,s,o);return uf(t,e.targetId,a.Va),a.snapshot}(t,e,n,i);const s=await Pd(t.localStore,e,!0),o=new Hp(e,s.hs),a=o.Ta(s.documents),c=_h.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),l=o.applyChanges(a,t.isPrimaryClient,c);uf(t,n,l.Va);const u=new Gp(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),l.snapshot}(t,e,s,"current"===o,r.resumeToken)),t.isPrimaryClient&&n&&ip(t.remoteStore,r),a}async function Yp(t,e,n){const i=sc(t),r=i.wa.get(e),s=i.Sa.get(r.targetId);if(s.length>1)return i.Sa.set(r.targetId,s.filter((t=>!du(t,e)))),void i.wa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Od(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&rp(i.remoteStore,r.targetId),cf(i,r.targetId)})).catch(Lc)):(cf(i,r.targetId),await Od(i.localStore,r.targetId,!0))}async function Zp(t,e){const n=sc(t),i=n.wa.get(e),r=n.Sa.get(i.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),rp(n.remoteStore,i.targetId))}async function tf(t,e){const n=sc(t);try{const t=await function(t,e){const n=sc(t),i=e.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const o=[];e.targetChanges.forEach(((s,a)=>{const c=r.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(t,s.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?l=l.withResumeToken(il.EMPTY_BYTE_STRING,Ec.min()).withLastLimboFreeSnapshotVersion(Ec.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,i)),r=r.insert(a,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(t,l))}));let a=bu(),c=Au();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(function(t,e,n){let i=Au(),r=Au();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=bu();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(Ec.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):Za("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:i,ls:r}}))}(t,s,e.documentUpdates).next((t=>{a=t.cs,c=t.ls}))),!i.isEqual(Ec.min())){const e=n.Qr.getLastRemoteSnapshotVersion(t).next((e=>n.Qr.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return Oc.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.ns=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.Ca.get(e);i&&(rc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.pa=!0:t.modifiedDocuments.size>0?rc(i.pa):t.removedDocuments.size>0&&(rc(i.pa),i.pa=!1))})),await pf(n,t,e)}catch(t){await Lc(t)}}function ef(t,e,n){const i=sc(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.wa.forEach(((n,i)=>{const r=i.view.G_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=sc(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.Q_)t.G_(e)&&(i=!0)})),i&&Vp(n)}(i.eventManager,e),t.length&&i.ya.u_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function nf(t,e,n){const i=sc(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Ca.get(e),s=r&&r.key;if(s){let t=new Jc(kc.comparator);t=t.insert(s,Nl.newNoDocument(s,Ec.min()));const n=Au().add(s),r=new bh(Ec.min(),new Map,new Jc(wc),t,n);await tf(i,r),i.Da=i.Da.remove(s),i.Ca.delete(e),df(i)}else await Od(i.localStore,e,!1).then((()=>cf(i,e,n))).catch(Lc)}async function rf(t,e){const n=sc(t),i=e.batch.batchId;try{const t=await function(t,e){const n=sc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Oc.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);rc(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Au();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);af(n,i,null),of(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await pf(n,t)}catch(t){await Lc(t)}}async function sf(t,e,n){const i=sc(t);try{const t=await function(t,e){const n=sc(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(rc(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);af(i,e,n),of(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await pf(i,t)}catch(n){await Lc(n)}}function of(t,e){(t.Ma.get(e)||[]).forEach((t=>{t.resolve()})),t.Ma.delete(e)}function af(t,e,n){const i=sc(t);let r=i.Fa[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Fa[i.currentUser.toKey()]=r}}function cf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Sa.get(e))t.wa.delete(i),n&&t.ya.La(i,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach((e=>{t.va.containsKey(e)||lf(t,e)}))}function lf(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);null!==n&&(rp(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),df(t))}function uf(t,e,n){for(const i of n)i instanceof Bp?(t.va.addReference(i.key,e),hf(t,i)):i instanceof zp?(Za("SyncEngine","Document no longer in limbo: "+i.key),t.va.removeReference(i.key,e),t.va.containsKey(i.key)||lf(t,i.key)):ic()}function hf(t,e){const n=e.key,i=n.path.canonicalString();t.Da.get(n)||t.ba.has(i)||(Za("SyncEngine","New document in limbo: "+n),t.ba.add(i),df(t))}function df(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new kc(Ic.fromString(e)),i=t.xa.next();t.Ca.set(i,new Kp(n)),t.Da=t.Da.insert(n,i),ip(t.remoteStore,new sd(lu(su(n.path)),i,"TargetPurposeLimboResolution",zc._e))}}async function pf(t,e,n){const i=sc(t),r=[],s=[],o=[];i.wa.isEmpty()||(i.wa.forEach(((t,a)=>{o.push(i.Na(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=kd.Ki(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.ya.u_(r),await async function(t,e){const n=sc(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Oc.forEach(e,(e=>Oc.forEach(e.qi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Oc.forEach(e.Qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Vc(t))throw t;Za("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.ns.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(e,r)}}}(i.localStore,s))}async function ff(t,e){const n=sc(t);if(!n.currentUser.isEqual(e)){Za("SyncEngine","User change. New user:",e.toKey());const t=await Nd(n.localStore,e);n.currentUser=e,function(t,e){t.Ma.forEach((t=>{t.forEach((t=>{t.reject(new ac(oc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ma.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await pf(n,t.us)}}function mf(t,e){const n=sc(t),i=n.Ca.get(e);if(i&&i.pa)return Au().add(i.key);{let t=Au();const i=n.Sa.get(e);if(!i)return t;for(const e of i){const i=n.wa.get(e);t=t.unionWith(i.view.Ia)}return t}}function gf(t){const e=sc(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nf.bind(null,e),e.ya.u_=Up.bind(null,e.eventManager),e.ya.La=Fp.bind(null,e.eventManager),e}function vf(t){const e=sc(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sf.bind(null,e),e}class yf{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Kd(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,i){return new Rd(t,e,n,i)}(this.persistence,new Ad,t.initialUser,this.serializer)}createPersistence(t){return new Id(Sd.Hr,this.serializer)}createSharedClientState(t){return new Ud}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class wf{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>ef(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=ff.bind(null,this.syncEngine),await async function(t,e){const n=sc(t);e?(n.v_.delete(2),await ep(n)):e||(n.v_.add(2),await np(n),n.x_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Op}createDatastore(t){const e=Kd(t.databaseInfo.databaseId),n=function(t){return new Hd(t)}(t.databaseInfo);return function(t,e,n,i){return new Yd(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new tp(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>ef(this.syncEngine,t,0)),Vd.D()?new Vd:new Fd)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new Wp(t,e,n,i,r,s);return o&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=sc(t);Za("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await np(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}class bf{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.qa(this.observer.next,t)}error(t){this.observer.error?this.qa(this.observer.error,t):tc("Uncaught Error in snapshot listener:",t.toString())}Qa(){this.muted=!0}qa(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class _f{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=Qa.UNAUTHENTICATED,this.clientId=yc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Za("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Za("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ac(oc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new cc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Ap(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Ef(t,e){t.asyncQueue.verifyOperationInProgress(),Za("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await Nd(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Tf(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Za("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ef(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===oc.FAILED_PRECONDITION||t.code===oc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;ec("Error using user provided cache. Falling back to memory cache: "+n),await Ef(t,new yf)}}else Za("FirestoreClient","Using default OfflineComponentProvider"),await Ef(t,new yf);return t._offlineComponents}(t);Za("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>Cp(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Cp(e.remoteStore,n))),t._onlineComponents=e}async function If(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Za("FirestoreClient","Using user provided OnlineComponentProvider"),await Tf(t,t._uninitializedComponentsProvider._online)):(Za("FirestoreClient","Using default OnlineComponentProvider"),await Tf(t,new wf))),t._onlineComponents}async function Cf(t){const e=await If(t),n=e.eventManager;return n.onListen=Qp.bind(null,e.syncEngine),n.onUnlisten=Yp.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Jp.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Zp.bind(null,e.syncEngine),n}function Sf(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const kf=new Map;function xf(t,e,n){if(!n)throw new ac(oc.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Af(t){if(!kc.isDocumentKey(t))throw new ac(oc.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rf(t){if(kc.isDocumentKey(t))throw new ac(oc.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":ic()}function Df(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ac(oc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nf(t);throw new ac(oc.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Lf{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new ac(oc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ac(oc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new ac(oc.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sf(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new ac(oc.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new ac(oc.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new ac(oc.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Of{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ac(oc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new ac(oc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lf(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new uc;switch(t.type){case"firstParty":return new fc(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ac(oc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=kf.get(t);e&&(Za("ComponentProvider","Removing Datastore"),kf.delete(t),e.terminate())}(this),Promise.resolve()}}class Pf{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Pf(this.firestore,t,this._query)}}class Mf{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uf(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Mf(this.firestore,t,this._key)}}class Uf extends Pf{constructor(t,e,n){super(t,e,su(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Mf(this.firestore,null,new kc(t))}withConverter(t){return new Uf(this.firestore,t,this._path)}}function Ff(t,e,...n){if(t=N(t),xf("collection","path",e),t instanceof Of){const i=Ic.fromString(e,...n);return Rf(i),new Uf(t,null,i)}{if(!(t instanceof Mf||t instanceof Uf))throw new ac(oc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ic.fromString(e,...n));return Rf(i),new Uf(t.firestore,null,i)}}function Vf(t,e,...n){if(t=N(t),1===arguments.length&&(e=yc.newId()),xf("doc","path",e),t instanceof Of){const i=Ic.fromString(e,...n);return Af(i),new Mf(t,null,new kc(i))}{if(!(t instanceof Mf||t instanceof Uf))throw new ac(oc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ic.fromString(e,...n));return Af(i),new Mf(t.firestore,t instanceof Uf?t.converter:null,new kc(i))}}class jf{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Wd(this,"async_queue_retry"),this.cu=()=>{const t=Gd();t&&Za("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=Gd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.lu(),this.hu(t)}enterRestrictedMode(t){if(!this.iu){this.iu=!0,this.au=t||!1;const e=Gd();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.cu)}}enqueue(t){if(this.lu(),this.iu)return new Promise((()=>{}));const e=new cc;return this.hu((()=>this.iu&&this.au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.ru.push(t),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(t){if(!Vc(t))throw t;Za("AsyncQueue","Operation failed with retryable error: "+t)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(t){const e=this.nu.then((()=>(this._u=!0,t().catch((t=>{this.ou=t,this._u=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw tc("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this._u=!1,t))))));return this.nu=e,e}enqueueAfterDelay(t,e,n){this.lu(),this.uu.indexOf(t)>-1&&(e=0);const i=xp.createAndSchedule(this,t,e,n,(t=>this.Iu(t)));return this.su.push(i),i}lu(){this.ou&&ic()}verifyOperationInProgress(){}async Tu(){let t;do{t=this.nu,await t}while(t!==this.nu)}Eu(t){for(const e of this.su)if(e.timerId===t)return!0;return!1}du(t){return this.Tu().then((()=>{this.su.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.su)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Tu()}))}Au(t){this.uu.push(t)}Iu(t){const e=this.su.indexOf(t);this.su.splice(e,1)}}class $f extends Of{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new jf,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||zf(this),this._firestoreClient.terminate()}}function qf(t,e){const n="string"==typeof t?t:e||"(default)",i=gt("object"==typeof t?t:_t(),"firestore").getImmediate({identifier:n});if(!i._initialized){const t=f("firestore");t&&function(t,e,n,i={}){var r;const s=(t=Df(t,Of))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ec("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=Qa.MOCK_USER;else{e=y(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new ac(oc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Qa(s)}t._authCredentials=new hc(new lc(e,n))}}(i,...t)}return i}function Bf(t){return t._firestoreClient||zf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function zf(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new hl(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Sf(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new _f(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class Hf{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Hf(il.fromBase64String(t))}catch(t){throw new ac(oc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Hf(il.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Gf{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new ac(oc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sc(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Kf{constructor(t){this._methodName=t}}class Wf{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ac(oc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ac(oc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return wc(this._lat,t._lat)||wc(this._long,t._long)}}const Qf=/^__.*__$/;class Jf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new nh(t,this.data,this.fieldMask,e,this.fieldTransforms):new eh(t,this.data,e,this.fieldTransforms)}}class Xf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new nh(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Yf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ic()}}class Zf{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Ru(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(t){return new Zf(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.mu({path:n,gu:!1});return i.pu(t),i}yu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.mu({path:n,gu:!1});return i.Ru(),i}wu(t){return this.mu({path:void 0,gu:!0})}Su(t){return hm(t,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Ru(){if(this.path)for(let t=0;t<this.path.length;t++)this.pu(this.path.get(t))}pu(t){if(0===t.length)throw this.Su("Document fields must not be empty");if(Yf(this.Vu)&&Qf.test(t))throw this.Su('Document fields cannot begin and end with "__"')}}class tm{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Kd(t)}Cu(t,e,n,i=!1){return new Zf({Vu:t,methodName:e,Du:n,path:Sc.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function em(t){const e=t._freezeSettings(),n=Kd(t._databaseId);return new tm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nm(t,e,n,i,r,s={}){const o=t.Cu(s.merge||s.mergeFields?2:0,e,n,r);am("Data must be an object, but it was:",o,i);const a=sm(i,o);let c,l;if(s.merge)c=new el(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=cm(e,i,n);if(!o.contains(r))throw new ac(oc.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);dm(t,r)||t.push(r)}c=new el(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new Jf(new Al(a),c,l)}class im extends Kf{_toFieldTransform(t){if(2!==t.Vu)throw 1===t.Vu?t.Su(`${this._methodName}() can only appear at the top level of your update data`):t.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof im}}function rm(t,e){if(om(t=N(t)))return am("Unsupported field value:",e,t),sm(t,e);if(t instanceof Kf)return function(t,e){if(!Yf(e.Vu))throw e.Su(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Su(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&4!==e.Vu)throw e.Su("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=rm(r,e.wu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=N(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Lu(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=_c.fromDate(t);return{timestampValue:Oh(e.serializer,n)}}if(t instanceof _c){const n=new _c(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Oh(e.serializer,n)}}if(t instanceof Wf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hf)return{bytesValue:Ph(e.serializer,t._byteString)};if(t instanceof Mf){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Su(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Fh(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Su(`Unsupported field value: ${Nf(t)}`)}(t,e)}function sm(t,e){const n={};return Qc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wc(t,((t,i)=>{const r=rm(i,e.fu(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function om(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _c||t instanceof Wf||t instanceof Hf||t instanceof Mf||t instanceof Kf)}function am(t,e,n){if(!om(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=Nf(n);throw"an object"===i?e.Su(t+" a custom object"):e.Su(t+" "+i)}}function cm(t,e,n){if((e=N(e))instanceof Gf)return e._internalPath;if("string"==typeof e)return um(t,e);throw hm("Field path arguments must be of type string or ",t,!1,void 0,n)}const lm=new RegExp("[~\\*/\\[\\]]");function um(t,e,n){if(e.search(lm)>=0)throw hm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gf(...e.split("."))._internalPath}catch(i){throw hm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hm(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new ac(oc.INVALID_ARGUMENT,a+t+c)}function dm(t,e){return t.some((t=>t.isEqual(e)))}class pm{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Mf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new fm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(mm("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class fm extends pm{data(){return super.data()}}function mm(t,e){return"string"==typeof e?um(t,e):e instanceof Gf?e._internalPath:e._delegate._internalPath}class gm{}class vm extends gm{}class ym extends vm{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new ym(t,e,n)}_apply(t){const e=this._parse(t);return Em(t._query,e),new Pf(t.firestore,t.converter,uu(t._query,e))}_parse(t){const e=em(t.firestore),n=function(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ac(oc.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){_m(o,s);const e=[];for(const n of o)e.push(bm(i,t,n));a={arrayValue:{values:e}}}else a=bm(i,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||_m(o,s),a=function(t,e,n,i=!1){return rm(n,t.Cu(i?4:3,e))}(n,"where",o,"in"===s||"not-in"===s);return Fl.create(r,s,a)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value);return n}}class wm extends gm{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new wm(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:Vl.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const t of i)Em(n,t),n=uu(n,t)}(t._query,e),new Pf(t.firestore,t.converter,uu(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function bm(t,e,n){if("string"==typeof(n=N(n))){if(""===n)throw new ac(oc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!au(e)&&-1!==n.indexOf("/"))throw new ac(oc.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ic.fromString(n));if(!kc.isDocumentKey(i))throw new ac(oc.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return _l(t,new kc(i))}if(n instanceof Mf)return _l(t,n._key);throw new ac(oc.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nf(n)}.`)}function _m(t,e){if(!Array.isArray(t)||0===t.length)throw new ac(oc.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Em(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new ac(oc.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ac(oc.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Tm{convertValue(t,e="none"){switch(fl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ol(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(al(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ic()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Wc(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new Wf(ol(t.latitude),ol(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=ll(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ul(t));default:return null}}convertTimestamp(t){const e=sl(t);return new _c(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Ic.fromString(t);rc(rd(n));const i=new dl(n.get(1),n.get(3)),r=new kc(n.popFirst(5));return i.isEqual(e)||tc(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}function Im(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Cm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Sm extends pm{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new km(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(mm("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class km extends Sm{data(t={}){return super.data(t)}}class xm{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Cm(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new km(this._firestore,this._userDataWriter,n.key,n,new Cm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ac(oc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new km(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Cm(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new km(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Cm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:Am(e.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Am(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ic()}}class Rm extends Tm{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hf(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Mf(this.firestore,null,e)}}function Nm(t){t=Df(t,Pf);const e=Df(t.firestore,$f),n=Bf(e),i=new Rm(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new ac(oc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function(t,e,n={}){const i=new cc;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new bf({next:n=>{e.enqueueAndForget((()=>Mp(t,o))),n.fromCache&&"server"===i.source?r.reject(new ac(oc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new qp(n,s,{includeMetadataChanges:!0,ta:!0});return Pp(t,o)}(await Cf(t),t.asyncQueue,e,n,i))),i.promise}(n,t._query).then((n=>new xm(e,i,t,n)))}function Dm(t,e,n){t=Df(t,Mf);const i=Df(t.firestore,$f),r=Im(t.converter,e,n);return Om(i,[nm(em(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,Ku.none())])}function Lm(t,e){const n=Df(t.firestore,$f),i=Vf(t),r=Im(t.converter,e);return Om(n,[nm(em(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,Ku.exists(!1))]).then((()=>i))}function Om(t,e){return function(t,e){const n=new cc;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=vf(t);try{const t=await function(t,e){const n=sc(t),i=_c.now(),r=e.reduce(((t,e)=>t.add(e.key)),Au());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=bu(),c=Au();return n.os.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=Zu(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new nh(t.key,e,Rl(e.value.mapValue),Ku.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Tu(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Fa[t.currentUser.toKey()];i||(i=new Jc(wc)),i=i.insert(e,n),t.Fa[t.currentUser.toKey()]=i}(i,t.batchId,n),await pf(i,t.changes),await gp(i.remoteStore)}catch(t){const e=Ap(t,"Failed to persist write");n.reject(e)}}(await function(t){return If(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(Bf(t),e)}new WeakMap,function(t,e=!0){!function(t){Ja=t}(wt),mt(new D("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new $f(new dc(t.getProvider("auth-internal")),new gc(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ac(oc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dl(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Et(Wa,"4.5.0",t),Et(Wa,"4.5.0","esm2017")}();const Pm="firebasestorage.googleapis.com",Mm="storageBucket";class Um extends _{constructor(t,e,n=0){super(jm(t),`Firebase Storage: ${e} (${jm(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Um.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return jm(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fm,Vm;function jm(t){return"storage/"+t}function $m(){return new Um(Fm.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function qm(t){return new Um(Fm.INVALID_ARGUMENT,t)}function Bm(){return new Um(Fm.APP_DELETED,"The Firebase app was deleted.")}function zm(t,e){return new Um(Fm.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Hm(t){throw new Um(Fm.INTERNAL_ERROR,"Internal error: "+t)}!function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Fm||(Fm={}));class Gm{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=Gm.makeFromUrl(t,e)}catch(e){return new Gm(t,"")}if(""===n.path)return n;throw i=t,new Um(Fm.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(t,e){let n=null;const i="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}const o=e.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${e===Pm?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let e=0;e<a.length;e++){const i=a[e],r=i.regex.exec(t);if(r){const t=r[i.indices.bucket];let e=r[i.indices.path];e||(e=""),n=new Gm(t,e),i.postModify(n);break}}if(null==n)throw function(t){return new Um(Fm.INVALID_URL,"Invalid URL '"+t+"'.")}(t);return n}}class Km{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function Wm(t){return"string"==typeof t||t instanceof String}function Qm(t){return Jm()&&t instanceof Blob}function Jm(){return"undefined"!=typeof Blob}function Xm(t,e,n,i){if(i<e)throw qm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw qm(`Invalid value for '${t}'. Expected ${n} or less.`)}function Ym(t,e,n){let i=e;return null==n&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function Zm(t){const e=encodeURIComponent;let n="?";for(const i in t)t.hasOwnProperty(i)&&(n=n+(e(i)+"=")+e(t[i])+"&");return n=n.slice(0,-1),n}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Vm||(Vm={}));class tg{constructor(t,e,n,i,r,s,o,a,c,l,u,h=!0){this.url_=t,this.method_=e,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()}))}start_(){const t=(t,e)=>{const n=this.resolve_,i=this.reject_,r=e.connection;if(e.wasSuccessCode)try{const t=this.callback_(r,r.getResponse());!function(t){return void 0!==t}(t)?n():n(t)}catch(t){i(t)}else if(null!==r){const t=$m();t.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,t)):i(t)}else e.canceled?i(this.appDelete_?Bm():new Um(Fm.CANCELED,"User canceled the upload/download.")):i(new Um(Fm.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new eg(!1,null,!0)):this.backoffId_=function(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(...t){l||(l=!0,e.apply(null,t))}function h(e){r=setTimeout((()=>{r=null,t(p,c())}),e)}function d(){s&&clearTimeout(s)}function p(t,...e){if(l)return void d();if(t)return d(),void u.call(null,t,...e);if(c()||o)return d(),void u.call(null,t,...e);let n;i<64&&(i*=2),1===a?(a=2,n=0):n=1e3*(i+Math.random()),h(n)}let f=!1;function m(t){f||(f=!0,d(),l||(null!==r?(t||(a=2),clearTimeout(r),h(0)):t||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(((t,e)=>{if(e)return void t(!1,new eg(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=t=>{const e=t.loaded,n=t.lengthComputable?t.total:-1;null!==this.progressCallback_&&this.progressCallback_(e,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const e=n.getErrorCode()===Vm.NO_ERROR,r=n.getStatus();if(!e||function(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),r=-1!==e.indexOf(t);return n||i||r}(r,this.additionalRetryCodes_)&&this.retry){const e=n.getErrorCode()===Vm.ABORT;return void t(!1,new eg(!1,null,e))}const s=-1!==this.successCodes_.indexOf(r);t(!0,new eg(s,n))}))}),t,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class eg{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function ng(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ig(...t){const e=ng();if(void 0!==e){const n=new e;for(let e=0;e<t.length;e++)n.append(t[e]);return n.getBlob()}if(Jm())return new Blob(t);throw new Um(Fm.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const rg={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sg{constructor(t,e){this.data=t,this.contentType=e||null}}function og(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(i=65536|(1023&i)<<10|1023&t.charCodeAt(++n),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function ag(t,e){switch(t){case rg.BASE64:{const n=-1!==e.indexOf("-"),i=-1!==e.indexOf("_");if(n||i)throw zm(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case rg.BASE64URL:{const n=-1!==e.indexOf("+"),i=-1!==e.indexOf("/");if(n||i)throw zm(t,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function(t){if("undefined"==typeof atob)throw new Um(Fm.UNSUPPORTED_ENVIRONMENT,"base-64 is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.");return atob(t)}(e)}catch(e){if(e.message.includes("polyfill"))throw e;throw zm(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let t=0;t<n.length;t++)i[t]=n.charCodeAt(t);return i}class cg{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw zm(rg.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=e[1]||null;var i,r;null!=n&&(this.base64=(r=";base64",(i=n).length>=7&&i.substring(i.length-7)===r),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}class lg{constructor(t,e){let n=0,i="";Qm(t)?(this.data_=t,n=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(Qm(this.data_)){const s=(n=this.data_,i=t,r=e,n.webkitSlice?n.webkitSlice(i,r):n.mozSlice?n.mozSlice(i,r):n.slice?n.slice(i,r):null);return null===s?null:new lg(s)}var n,i,r;{const n=new Uint8Array(this.data_.buffer,t,e-t);return new lg(n,!0)}}static getBlob(...t){if(Jm()){const e=t.map((t=>t instanceof lg?t.data_:t));return new lg(ig.apply(null,e))}{const e=t.map((t=>Wm(t)?function(t,e){switch(t){case rg.RAW:return new sg(og(e));case rg.BASE64:case rg.BASE64URL:return new sg(ag(t,e));case rg.DATA_URL:return new sg(function(t){const e=new cg(t);return e.base64?ag(rg.BASE64,e.rest):function(t){let e;try{e=decodeURIComponent(t)}catch(t){throw zm(rg.DATA_URL,"Malformed data URL.")}return og(e)}(e.rest)}(e),new cg(e).contentType)}throw $m()}(rg.RAW,t).data:t.data_));let n=0;e.forEach((t=>{n+=t.byteLength}));const i=new Uint8Array(n);let r=0;return e.forEach((t=>{for(let e=0;e<t.length;e++)i[r++]=t[e]})),new lg(i,!0)}}uploadData(){return this.data_}}function ug(t){let e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function hg(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function dg(t,e){return e}class pg{constructor(t,e,n,i){this.server=t,this.local=e||t,this.writable=!!n,this.xform=i||dg}}let fg=null;function mg(){if(fg)return fg;const t=[];t.push(new pg("bucket")),t.push(new pg("generation")),t.push(new pg("metageneration")),t.push(new pg("name","fullPath",!0));const e=new pg("name");e.xform=function(t,e){return function(t){return!Wm(t)||t.length<2?t:hg(t)}(e)},t.push(e);const n=new pg("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new pg("timeCreated")),t.push(new pg("updated")),t.push(new pg("md5Hash",null,!0)),t.push(new pg("cacheControl",null,!0)),t.push(new pg("contentDisposition",null,!0)),t.push(new pg("contentEncoding",null,!0)),t.push(new pg("contentLanguage",null,!0)),t.push(new pg("contentType",null,!0)),t.push(new pg("metadata","customMetadata",!0)),fg=t,fg}function gg(t,e,n){const i=ug(e);return null===i?null:function(t,e,n){const i={type:"file"},r=n.length;for(let t=0;t<r;t++){const r=n[t];i[r.local]=r.xform(i,e[r.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){const n=t.bucket,i=t.fullPath,r=new Gm(n,i);return e._makeStorageReference(r)}})}(i,t),i}(t,i,n)}class vg{constructor(t,e,n,i){this.url=t,this.method=e,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function yg(t){if(!t)throw $m()}function wg(t){return function(e,n){let i;var r,s;return 401===e.getStatus()?i=e.getErrorText().includes("Firebase App Check token is invalid")?new Um(Fm.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Um(Fm.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(s=t.bucket,i=new Um(Fm.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(r=t.path,i=new Um(Fm.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):i=n,i.status=e.getStatus(),i.serverResponse=n.serverResponse,i}}function bg(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){let t="";for(let e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();o["Content-Type"]="multipart/related; boundary="+a;const c=function(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),i}(e,i,r),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+function(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}(c,n)+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=lg.getBlob(l,i,u);if(null===h)throw new Um(Fm.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.");const d={name:c.fullPath},p=Ym(s,t.host,t._protocol),f=t.maxUploadRetryTime,m=new vg(p,"POST",function(t,e){return function(n,i){const r=gg(t,i,e);return yg(null!==r),r}}(t,n),f);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=wg(e),m}let _g=null;class Eg{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vm.NO_ERROR,this.sendPromise_=new Promise((t=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Vm.ABORT,t()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Vm.NETWORK_ERROR,t()})),this.xhr_.addEventListener("load",(()=>{t()}))}))}send(t,e,n,i){if(this.sent_)throw Hm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const t in i)i.hasOwnProperty(t)&&this.xhr_.setRequestHeader(t,i[t].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw Hm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class Tg extends Eg{initXhr(){this.xhr_.responseType="text"}}function Ig(){return _g?_g():new Tg}class Cg{constructor(t,e){this._service=t,this._location=e instanceof Gm?e:Gm.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Cg(t,e)}get root(){const t=new Gm(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hg(this._location.path)}get storage(){return this._service}get parent(){const t=function(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;const e=new Gm(this._location.bucket,t);return new Cg(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw function(t){return new Um(Fm.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)}}function Sg(t){t._throwIfRoot("getDownloadURL");const e=function(t,e,n){const i=Ym(e.fullServerUrl(),t.host,t._protocol),r=t.maxOperationRetryTime,s=new vg(i,"GET",function(t,e){return function(n,i){const r=gg(t,i,e);return yg(null!==r),function(t,e,n,i){const r=ug(e);if(null===r)return null;if(!Wm(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((e=>{const r=t.bucket,s=t.fullPath;return Ym("/b/"+o(r)+"/o/"+o(s),n,i)+Zm({alt:"media",token:e})}))[0]}(r,i,t.host,t._protocol)}}(t,n),r);return s.errorHandler=function(t){const e=wg(t);return function(n,i){let r=e(n,i);var s;return 404===n.getStatus()&&(s=t.path,r=new Um(Fm.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),r.serverResponse=i.serverResponse,r}}(e),s}(t.storage,t._location,mg());return t.storage.makeRequestWithTokens(e,Ig).then((t=>{if(null===t)throw new Um(Fm.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t}))}function kg(t,e){if(t instanceof Ag){const n=t;if(null==n._bucket)throw new Um(Fm.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Mm+"' property when initializing the app?");const i=new Cg(n,n._bucket);return null!=e?kg(i,e):i}return void 0!==e?function(t,e){const n=function(t,e){const n=e.split("/").filter((t=>t.length>0)).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),i=new Gm(t._location.bucket,n);return new Cg(t.storage,i)}(t,e):t}function xg(t,e){const n=null==e?void 0:e[Mm];return null==n?null:Gm.makeFromBucketSpec(n,t)}class Ag{constructor(t,e,n,i,r){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=Pm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Gm.makeFromBucketSpec(i,this._host):xg(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,null!=this._url?this._bucket=Gm.makeFromBucketSpec(this._url,t):this._bucket=xg(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Xm("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Xm("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(null!==e)return e.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((t=>t.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Cg(this,t)}_makeRequest(t,e,n,i,r=!0){if(this._deleted)return new Km(Bm());{const s=function(t,e,n,i,r,s,o=!0){const a=Zm(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(l,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(l,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(l,s),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(l,i),new tg(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}(t,this._appId,n,i,e,this._firebaseVersion,r);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(t,e){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n,i).getPromise()}}const Rg="@firebase/storage",Ng="0.12.2",Dg="storage";function Lg(t,e){return function(t,e){if(e&&/^[A-Za-z]+:\/\//.test(e)){if(t instanceof Ag)return new Cg(t,e);throw qm("To use ref(service, url), the first argument must be a Storage instance.")}return kg(t,e)}(t=N(t),e)}mt(new D(Dg,(function(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Ag(n,i,r,e,wt)}),"PUBLIC").setMultipleInstances(!0)),Et(Rg,Ng,""),Et(Rg,Ng,"esm2017");var Og=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const Pg=bt({apiKey:"AIzaSyDKlhRev5ZTVC9nGqXyT4qBi0WxSqs1gHE",authDomain:"moviehub-ad4ef.firebaseapp.com",projectId:"moviehub-ad4ef",storageBucket:"moviehub-ad4ef.appspot.com",messagingSenderId:"15340906607",appId:"1:15340906607:web:3eeeaedde73256afea859a"}),Mg=qf(Pg),Ug=ki(Pg),Fg=function(t=_t(),e){const n=gt(t=N(t),Dg).getImmediate({identifier:e}),i=f("storage");return i&&function(t,e,n,i={}){!function(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken="string"==typeof r?r:y(r,t.app.options.projectId))}(t,e,n,i)}(n,...i),n}();let Vg=null;const jg=(t,e)=>Og(void 0,void 0,void 0,(function*(){const n=Vf(Mg,"users",t);try{yield function(t,e,n,...i){t=Df(t,Mf);const r=Df(t.firestore,$f),s=em(r);let o;return o="string"==typeof(e=N(e))||e instanceof Gf?function(t,e,n,i,r,s){const o=t.Cu(1,e,n),a=[cm(e,i,n)],c=[r];if(s.length%2!=0)throw new ac(oc.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<s.length;t+=2)a.push(cm(e,s[t])),c.push(s[t+1]);const l=[],u=Al.empty();for(let t=a.length-1;t>=0;--t)if(!dm(l,a[t])){const e=a[t];let n=c[t];n=N(n);const i=o.yu(e);if(n instanceof im)l.push(e);else{const t=rm(n,i);null!=t&&(l.push(e),u.set(e,t))}}const h=new el(l);return new Xf(u,h,o.fieldTransforms)}(s,"updateDoc",t._key,e,n,i):function(t,e,n,i){const r=t.Cu(1,e,n);am("Data must be an object, but it was:",r,i);const s=[],o=Al.empty();Wc(i,((t,i)=>{const a=um(e,t,n);i=N(i);const c=r.yu(a);if(i instanceof im)s.push(a);else{const t=rm(i,c);null!=t&&(s.push(a),o.set(a,t))}}));const a=new el(s);return new Xf(o,a,r.fieldTransforms)}(s,"updateDoc",t._key,e),Om(r,[o.toMutation(t._key,Ku.exists(!0))])}(n,e),alert("Información actualizada exitosamente")}catch(t){console.error("Error actualizando el usuario: ",t),alert("Hubo un error al actualizar la información. Inténtalo de nuevo.")}})),$g=t=>{(function(t,e,n){return async function(t,e){return vn(Ve(t),e)}(N(t),sn.credential(e,n)).catch((async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&yn(t),e}))})(Ug,t.email,t.password).then((t=>Og(void 0,void 0,void 0,(function*(){const e=t.user;console.log(e.uid),alert("Bienvenido de vuelta")})))).catch((t=>{const e=t.code,n=t.message;console.error(e,n),alert("Credenciales incorrectas")}))},qg=()=>Og(void 0,void 0,void 0,(function*(){const t=ev.user;if(!t)return null;try{const e=yield function(t){t=Df(t,Mf);const e=Df(t.firestore,$f);return function(t,e,n={}){const i=new cc;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new bf({next:s=>{e.enqueueAndForget((()=>Mp(t,o)));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new ac(oc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new ac(oc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:t=>r.reject(t)}),o=new qp(su(n.path),s,{includeMetadataChanges:!0,ta:!0});return Pp(t,o)}(await Cf(t),t.asyncQueue,e,n,i))),i.promise}(Bf(e),t._key).then((n=>function(t,e,n){const i=n.docs.get(e._key),r=new Rm(t);return new Sm(t,r,e._key,i,new Cm(n.hasPendingWrites,n.fromCache),e.converter)}(e,t,n)))}(Vf(Mg,"users",t));return e.exists()?e.data():null}catch(t){return console.error("Error al obtener datos del usuario:",t),null}})),Bg=(t,e)=>Og(void 0,void 0,void 0,(function*(){try{const n=Lg(Fg,"imgsProfile/"+e);yield function(t,e,n){return function(t,e,n){t._throwIfRoot("uploadBytes");const i=bg(t.storage,t._location,mg(),new lg(e,!0),n);return t.storage.makeRequestWithTokens(i,Ig).then((e=>({metadata:e,ref:t})))}(t=N(t),e,void 0)}(n,t),console.log("Foto de perfil cambiada exitosamente")}catch(t){console.error("Error al subir la foto de perfil:",t)}})),zg=t=>Og(void 0,void 0,void 0,(function*(){try{console.log("Intentando obtener la imagen de perfil para el ID de usuario:",t);const e=Lg(Fg,"imgsProfile/"+t);return yield function(t){return Sg(t=N(t))}(e)}catch(t){return console.error("Error al obtener la URL de la imagen de perfil:",t),null}}));var Hg=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const Gg=t=>({action:"navigate",payload:t}),Kg=t=>({action:"navigateCategory",payload:t}),Wg=t=>({action:"SaveTitleCategory",payload:t}),Qg=t=>({action:"SaveImageCategory",payload:t}),Jg=()=>Hg(void 0,void 0,void 0,(function*(){const e=yield function(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){try{const t=yield Og(void 0,void 0,void 0,(function*(){const t=yield Nm(Ff(Mg,"movies")),e=[];return t.forEach((t=>{const n=t.data();e.push(Object.assign({id:t.id},n))})),e}));return console.log(t),t}catch(t){console.error(t)}}))}();return{action:t.GET,payload:e}})),Xg=t=>Hg(void 0,void 0,void 0,(function*(){const n=yield function(t){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){try{const e=yield(t=>Og(void 0,void 0,void 0,(function*(){try{const e=Ff(Vf(Mg,"users",t),"Favorites"),n=yield Nm(e),i=[];return n.forEach((t=>{const e=t.data();i.push(Object.assign({id:t.id},e))})),i}catch(e){throw console.error("Error al obtener las películas favoritas del usuario",t,e),e}})))(t);return console.log(e),e}catch(t){console.error(t)}}))}(t);return{action:e.GET2,payload:n}})),Yg=t=>Hg(void 0,void 0,void 0,(function*(){const e=yield function(t){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){try{const e=yield(t=>Og(void 0,void 0,void 0,(function*(){try{const e=[],n=Ff(Vf(Mg,"users",t),"Mylists");return(yield Nm(n)).forEach((t=>{const n=t.data();e.push(Object.assign({id:t.id},n))})),console.log(e),e}catch(e){throw console.error("Error al obtener las listas de películas del usuario",t,e),e}})))(t);return console.log(e),e||[]}catch(t){return console.error(t),[]}}))}(t);return{action:i.GET3,payload:e}})),Zg=(t,e)=>Hg(void 0,void 0,void 0,(function*(){const n=yield function(t,e){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){try{const n=yield((t,e)=>Og(void 0,void 0,void 0,(function*(){try{const n=[],i=Ff(Vf(Mg,"users",t),"Mylists"),r=Ff(Vf(i,e),"content");return(yield Nm(r)).forEach((t=>{if("automaticreation123"!==t.id){const e=t.data();n.push(Object.assign({id:t.id},e))}})),n}catch(e){throw console.error("Error al obtener las listas de películas del usuario",t,e),e}})))(t,e);return console.log(n),n}catch(t){console.error("Error al obtener el contenido de la lista de películas del usuario:",t)}}))}(t,e);return{action:r.GET4,payload:n}})),tv=t=>Hg(void 0,void 0,void 0,(function*(){const e=yield function(t){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){try{const e=yield(t=>Og(void 0,void 0,void 0,(function*(){const e=function(t,e,...n){let i=[];e instanceof gm&&i.push(e),i=i.concat(n),function(t){const e=t.filter((t=>t instanceof wm)).length,n=t.filter((t=>t instanceof ym)).length;if(e>1||e>0&&n>0)throw new ac(oc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const e of i)t=e._apply(t);return t}(Ff(Mg,"movies"),function(t,e,n){const i=mm("where","idUser");return ym._create(i,"==",n)}(0,0,t)),n=yield Nm(e),i=[];return n.forEach((t=>{const e=t.data();i.push(Object.assign({id:t.id},e))})),i})))(t);return console.log(e),e}catch(t){console.error(t)}}))}(t);return{action:o.GET5,payload:e}}));wn(Ug,(t=>{t?(null!==t.uid&&iv((t=>({action:"SETUSER",payload:t}))(t.uid)),iv(Gg("DASHBOARD")),console.log(t)):(iv(Gg("LOGIN")),console.log("no hay usuario logueado"))}));let ev={screen:"LOGIN",movielist:[],currentcategory:"",titlecategory:"",imagecategory:"",movieid:"",movieimage:"",moviecategories:"",movietitle:"",moviedirector:"",moviereleasedate:"",moviecast:"",moviecrew:"",movieimagesec:"",moviedescription:"",moviecatchphrase:"",favlist:[],currentnewlistname:"",currentnewlistimage:"",currentnewlistid:"",usermovielists:[]||0,listcontent:[],user:"",movieprofile:[]},nv=[];const iv=n=>{const s=((n,s)=>{const{action:a,payload:c}=n;return"navigate"===a&&(s.screen=c),a===t.GET?Object.assign(Object.assign({},s),{movielist:c}):a===e.GET2?Object.assign(Object.assign({},s),{favlist:c}):("navigateCategory"===a&&(s.currentcategory=c),"SaveTitleCategory"===a&&(s.titlecategory=c),"SaveImageCategory"===a&&(s.imagecategory=c),"SaveMovieId"===a&&(s.movieid=c),"SaveMovieImage"===a&&(s.movieimage=c),"SaveMovieCategories"===a&&(s.moviecategories=c),"SaveMovieTitle"===a&&(s.movietitle=c),"SaveMovieDirector"===a&&(s.moviedirector=c),"SaveMovieReleaseDate"===a&&(s.moviereleasedate=c),"SaveMovieCast"===a&&(s.moviecast=c),"SaveMovieCrew"===a&&(s.moviecrew=c),"SaveMovieImageSec"===a&&(s.movieimagesec=c),"SaveMovieDescription"===a&&(s.moviedescription=c),"SaveMovieCatchPhrase"===a&&(s.moviecatchphrase=c),"SaveCurrentNewListName"===a&&(s.currentnewlistname=c),"SaveCurrentNewListImage"===a&&(s.currentnewlistimage=c),"SaveCurrentNewListId"===a&&(s.currentnewlistid=c),a===i.GET3?Object.assign(Object.assign({},s),{usermovielists:c}):a===r.GET4?Object.assign(Object.assign({},s),{listcontent:c}):("SETUSER"===a&&(s.user=c),a===o.GET5?Object.assign(Object.assign({},s),{movieprofile:c}):s))})(n,JSON.parse(JSON.stringify(ev)));ev=s,nv.forEach((t=>t.render()))},rv=t=>{nv=[...nv,t]};var sv,ov=n(925);!function(t){t.section_title="section_title",t.image="image",t.message="message",t.buttonlabel="buttonlabel"}(sv||(sv={}));class av extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({section_title:null,image:null,message:null,buttonlabel:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){let t=`\n\t\t\t<section id="allbanner" style="background-image: url('${this.image||"https://pbs.twimg.com/media/GJ331yEWQAAtUzN.jpg "}');">\n            <custom-navbar></custom-navbar>\n            <section>\n                <section>\n        `;this.section_title&&(t+=`<h1>${this.section_title}</h1>`),this.message&&(t+=`<h1>${this.message}</h1>`),t+="\n                </section>\n        ",this.buttonlabel&&(t+=`<button type="button" id="accountButton">${this.buttonlabel}</button>`),t+="\n            </section>\n        ",this.shadowRoot.innerHTML=t}const e=this.ownerDocument.createElement("style");e.innerHTML=ov.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-banner",av);var cv=n(682);const lv=[{name:"Classics",category:"classics",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/rr7E0NoGKxvbkb89eR1GwfoYjpA.jpg"},{name:"Popular",category:"popular",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/s5R6kTMfOxkGit96A8lqcDL4uVk.jpg"},{name:"On-cinema",category:"cinema",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/rron9HAuS9s7zBF8iCX1tsafxUo.jpg"},{name:"Trending",category:"trending",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/iAyr7VEFGJoHDIHIxjEb3TskQW4.jpg"},{name:"Action",category:"action",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/d9sMIwulLtwRHowmDk2INm0ugmP.jpg"},{name:"Sci-fi",category:"sci-fi",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/cNffd3wkuIYZMelbPRAZ23E5HBT.jpg"},{name:"Romance",category:"romance",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/nofXR1TN1vgGjdfnwGQwFaAWBaY.jpg"},{name:"Comedy",category:"comedy",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/qdIMHd4sEfJSckfVJfKQvisL02a.jpg"},{name:"Thriller",category:"thriller",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/bneUTWFAcVCdsb0O5UwZbJd8xqZ.jpg"},{name:"Drama",category:"drama",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/pcWxKfFNCznTKYy0E8M9nG1cwL4.jpg"},{name:"Animated",category:"animated",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/sRvXNDItGlWCqtO3j6wks52FmbD.jpg"},{name:"Documental",category:"documental",image:"https://media.vogue.es/photos/605dcd126503a651df3ce9ef/master/w_1600%2Cc_limit/Seapiracy-vogue-credit-Netflix-7.jpg"},{name:"Psychological",category:"psychological",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/fGe1ej335XbqN1j9teoDpofpbLX.jpg"}];class uv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),rv(this)}connectedCallback(){var t,e,n,i;this.render();const r=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".pages a.navigate-list");r&&r.addEventListener("click",(()=>{iv(Gg("MYLISTS"))}));const s=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#signin");s&&s.addEventListener("click",(()=>{iv(Gg("SIGNIN"))}));const o=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#login");o&&o.addEventListener("click",(()=>{iv(Gg("LOGIN"))}));const a=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#home");a&&a.addEventListener("click",(()=>{iv(Gg("DASHBOARD"))}))}render(){if(this.shadowRoot){const t=document.createElement("nav"),e=document.createElement("input");e.className="barra",e.type="text";const n=document.createElement("section");n.className="pages";const i=document.createElement("a");i.href="#",i.textContent="home",i.id="home",n.appendChild(i);const r=document.createElement("a");r.href="#",r.textContent="films",n.appendChild(r);const s=document.createElement("a");s.href="#",s.textContent="profile",n.appendChild(s),s.addEventListener("click",(()=>{iv(Gg("PROFILE"))}));const o=document.createElement("div");o.className="menu-desplegable",r.addEventListener("click",(()=>{o&&(o.classList.contains("menu-desplegableDisplayed")?o.classList.remove("menu-desplegableDisplayed"):o.classList.add("menu-desplegableDisplayed"))})),lv.forEach((t=>{const e=document.createElement("p");e.textContent=t.name,o.appendChild(e),e.addEventListener("click",(()=>{iv(Gg("CATEGORIES")),iv(Kg(t.category)),iv(Wg(t.name)),iv(Qg(t.image))}))}));const a=document.createElement("a");a.className="navigate-list",a.href="#",a.textContent="lists",n.appendChild(o),n.appendChild(a),t.appendChild(n),this.shadowRoot.innerHTML="",this.shadowRoot.appendChild(t);const c=document.createElement("style");c.innerHTML=cv.A,this.shadowRoot.appendChild(c)}}}customElements.define("custom-navbar",uv);var hv,dv=n(931),pv=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};!function(t){t.image="image",t.uid="uid",t.categories="categories",t.utitle="utitle",t.director="director",t.release_date="release_date",t.cast="cast",t.crew="crew",t.image_sec="image_sec",t.description="description",t.catch_phrase="catch_phrase",t.idUser="idUser"}(hv||(hv={}));class fv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.isLiked=!0}static get observedAttributes(){return Object.keys({image:null,uid:null,categories:null,utitle:null,director:null,release_date:null,cast:null,crew:null,image_sec:null,description:null,catch_phrase:null,idUser:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n            <div class="container" data-uid="${this.uid}" data-image="${this.image}" data-categories="${this.categories}" data-title="${this.utitle}" data-director="${this.director}" data-release="${this.release_date}" data-cast="${this.cast}" data-crew="${this.crew}" data-imgbanner="${this.image_sec}" data-description="${this.description}" data-phrase="${this.catch_phrase}">\n                <img class="poster" src="${this.image}" alt="This a poster of the movie named ${this.utitle}" ></img>\n                <section class="content">\n                    <section class="viewdetails">\n                        <a class="link">\n                            <img class="details"src="https://img.icons8.com/ios-glyphs/30/FFFFFF/visible--v1.png" alt="eye icon"/></a>\n                        <p>View details</p>\n                    </section>\n                    <img class="dislike"  src="https://img.icons8.com/ios/50/FFFFFF/like--v1.png" alt="hear icon empty"/>\n                    <img class="like"  src="https://img.icons8.com/ios-filled/50/FFFFFF/like--v1.png" alt="heart icon full"/>\n                    <p>Like</p>\n                </section>\n            </div>\n        `;const t=this.shadowRoot.querySelector(".viewdetails");null==t||t.addEventListener("click",(()=>{iv(Gg("FILMPAGE")),iv({action:"SaveMovieId",payload:this.uid}),iv({action:"SaveMovieImage",payload:this.image}),iv((t=>({action:"SaveMovieCategories",payload:this.categories}))()),iv({action:"SaveMovieTitle",payload:this.utitle}),iv({action:"SaveMovieDirector",payload:this.director}),iv({action:"SaveMovieReleaseDate",payload:this.release_date}),iv({action:"SaveMovieCast",payload:this.cast}),iv({action:"SaveMovieCrew",payload:this.crew}),iv({action:"SaveMovieImageSec",payload:this.image_sec}),iv((t=>({action:"SaveMovieDescription",payload:this.description}))()),iv({action:"SaveMovieCatchPhrase",payload:this.catch_phrase})}));const e=this.shadowRoot.querySelector(".like"),n=this.shadowRoot.querySelector(".dislike"),i=ev.favlist.some((t=>t.id===this.uid));e.style.display=i?"inline":"none",n.style.display=i?"none":"inline",e.addEventListener("click",(()=>pv(this,void 0,void 0,(function*(){const t=ev.user;try{yield((t,e)=>Og(void 0,void 0,void 0,(function*(){try{const i=Ff(Vf(qf(),"users",t),"Favorites");yield(n=Vf(i,e),Om(Df(n.firestore,$f),[new oh(n._key,Ku.none())]))}catch(t){throw t}var n})))(t,this.uid||""),console.log("Película eliminada de Favorites")}catch(t){console.error("Error al eliminar la película de Favorites",t)}e.style.display="none",n.style.display="inline"})))),n.addEventListener("click",(()=>pv(this,void 0,void 0,(function*(){const t=ev.user;try{yield((t,e,n)=>Og(void 0,void 0,void 0,(function*(){try{const i=Ff(Vf(Mg,"users",t),"Favorites");yield Dm(Vf(i,e),n),console.log('Película agregada exitosamente a la colección "Favorites" del usuario',t)}catch(e){console.error('Error al agregar película a la colección "Favorites" del usuario',t,e)}})))(t,this.uid?this.uid:"",{id:this.uid||"",image:this.image||"",categories:this.categories?this.categories.split(","):[],title:this.utitle||"",director:this.director||"",release_date:this.release_date||"",cast:this.cast||"",crew:this.crew||"",image_sec:this.image_sec||"",description:this.description||"",catch_phrase:this.catch_phrase||"",idUser:this.idUser||""}),console.log("Película guardada en Favorites")}catch(t){console.error("Error al guardar la película en Favorites",t)}e.style.display="inline",n.style.display="none"}))))}const e=this.ownerDocument.createElement("style");e.innerHTML=dv.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("movie-card",fv);var mv,gv=n(213);!function(t){t.name="name",t.category="category",t.image="image"}(mv||(mv={}));class vv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({name:null,category:null,image:null})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){this[t]=n,this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=ev.movielist.filter((t=>{var e;return null===(e=t.categories)||void 0===e?void 0:e.includes(null!=this.category?this.category:"undefined")})),e=document.createElement("style");e.textContent=gv.A,this.shadowRoot.innerHTML=`\n                <h1 id="titlecategory">${this.name||""}</h1>\n\t\t\t\t<section id="cards">\n\t\t\t\t\t${t.map((t=>`\n\t\t\t\t\t\t<movie-card image="${t.image}" uid="${t.id}" categories="${t.categories}" utitle="${t.title}" director="${t.director}" release_date="${t.release_date}" cast="${t.cast}" crew="${t.crew}" image_sec="${t.image_sec}" description="${t.description}" catch_phrase="${t.catch_phrase}"></movie-card>\n\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n            `;const n=this.shadowRoot.querySelector("#titlecategory");null==n||n.addEventListener("click",(()=>{iv(Gg("CATEGORIES")),iv(Kg(this.category)),iv(Wg(this.name)),iv(Qg(this.image))})),this.shadowRoot.appendChild(e)}}))}}customElements.define("category-section",vv);var yv=n(583),wv=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const bv={title:"",image:"",categories:[],director:"",release_date:"",cast:"",crew:"",image_sec:"",description:"",catch_phrase:"",idUser:""};class _v extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}changeTitle(t){var e;bv.title=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeImage(t){var e;bv.image=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCategories(t){var e;bv.categories=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeDirector(t){var e;bv.director=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeRelease(t){var e;bv.release_date=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCast(t){var e;bv.cast=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCrew(t){var e;bv.crew=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeImageSec(t){var e;bv.image_sec=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeDescription(t){var e;bv.description=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCatchPhrase(t){var e;bv.catch_phrase=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}render(){return wv(this,void 0,void 0,(function*(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML='\n\t\t\t\t<section class= "container">\n\n\t\t\t\t\t<button id = "ButtonModal">+</button>\n\t\t</section>\n\t\t\t\t<section class="modalContainer" style="display: none;">\n    <div class="modal-overlay">\n\t\t\t\t<section class="modal-content">\n\t\t\t\t\t<form class="my-form">\n\t\t\t\t\t<section id="header">\n\t\t\t\t\t\t<span class = "close"><img src="https://img.icons8.com/ios-filled/50/FB953C/delete-sign--v1.png" alt="delete-sign--v1"/></span>\n\t\t\t\t\t\t\t<h2>Add a movie</h2>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t<label for="fname">Name movie</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="fname" name="fname" placeholder="Pearl"><br><br>\n\t\t\t\t\t\t\t\t<label for="director">Director</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="directorMovie" name="director" placeholder="Ti West"><br><br>\n\t\t\t\t\t\t\t\t<label for="date">Release date</label><br>\n\t\t\t\t\t\t\t\t<input type="date" id="datemovie" name="date" ><br><br>\n\t\t\t\t\t\t\t\t<label for="catch">Catch-Phrase</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="catchMovie" name="catch" placeholder="An X-traordinary Origin Story"><br><br>\n\t\t\t\t\t\t\t\t<label for="description">Description</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="descriptionMovie" name="description" placeholder="Pearl (subtitled An X-traordinary Origin Story) is a 2022 American horror film directed by Ti West, co-written by West and Mia Goth, who reprises her role as the title character, and featuring David Corenswet, Tandi Wright, Matthew Sunderland and Emma Jenkins-Purro in supporting roles. A prequel to X (2022) and the second installment in the X film series, it serves as an origin story for the title villain, whose fervent aspiration to become a movie star led her to committing violent acts on her family\'s Texas homestead in 1918."><br><br>\n\t\t\t\t\t\t\t\t<label for="cast">Cast</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="castMovie" name="cast" placeholder="Mia Goth, David Corenswet, Alistair Sewell, Emma Jenkins, Matthew Sunderland, Tandi Wright"><br><br>\n\t\t\t\t\t\t\t\t<label for="crew">Crew</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="crewMovie" name="crew" placeholder="Mia Goth, David Corenswet, Alistair Sewell, Emma Jenkins, Matthew Sunderland, Tandi Wright"><br><br>\n\t\t\t\t\t\t\t\t<label for="poster">Enter movie poster url</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="movieposter" name="poster" placeholder="https://pics.filmaffinity.com/Pearl-745024740-large.jpg"><br><br>\n\t\t\t\t\t\t\t\t<label for="image">Enter secondary image url</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="movieimage" name="image" placeholder="https://pics.filmaffinity.com/Pearl-745024740-large.jpg"><br><br>\n\t\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t\t\t\t<label for="crew">Genres</label><br>\n\t\t\t\t\t\t\t\t\t\t<section id="checkboxes">\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="romance" value="romance" />\n\t\t\t\t\t\t\t\t\t\t<label for="romance">Romance</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="action" value="action" />\n\t\t\t\t\t\t\t\t\t\t<label for="action">Action</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="comedy" value="comedy" />\n\t\t\t\t\t\t\t\t\t\t<label for="comedy">Comedy</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="Thriller" value="thriller" />\n\t\t\t\t\t\t\t\t\t\t<label for="thriller">Thriller</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="sci-fi" value="sci-fi" />\n\t\t\t\t\t\t\t\t\t\t<label for="sci-fi">Sci-Fi</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="drama" value="drama" />\n\t\t\t\t\t\t\t\t\t\t<label for="drama">Drama</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="animated" value="animated" />\n\t\t\t\t\t\t\t\t\t\t<label for="animated">Animated</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="classic" value="classics" />\n\t\t\t\t\t\t\t\t\t\t<label for="classic">Classics</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="documental" value="documental" />\n\t\t\t\t\t\t\t\t\t\t<label for="documental">Documental</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="psychological" value="psychological" />\n\t\t\t\t\t\t\t\t\t\t<label for="psychological">Psychological</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t<button type="submit">Submit</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t</section>\n\t\t</section>\n      ';const e=this.ownerDocument.createElement("style");e.innerHTML=yv.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e);const n=this.shadowRoot.querySelector(".modalContainer");this.shadowRoot.querySelector(".close").addEventListener("click",(()=>{n.style.display="none"})),window.addEventListener("click",(t=>{t.target==n&&(n.style.display="none")})),this.shadowRoot.querySelector("#ButtonModal").addEventListener("click",(t=>{n.style.display="block"})),this.shadowRoot.querySelector("#fname").addEventListener("change",this.changeTitle),this.shadowRoot.querySelector("#directorMovie").addEventListener("change",this.changeDirector),this.shadowRoot.querySelector("#datemovie").addEventListener("change",this.changeRelease),this.shadowRoot.querySelector("#descriptionMovie").addEventListener("change",this.changeDescription),this.shadowRoot.querySelector("#castMovie").addEventListener("change",this.changeCast),this.shadowRoot.querySelector("#crewMovie").addEventListener("change",this.changeCrew),this.shadowRoot.querySelector("#movieposter").addEventListener("change",this.changeImage),this.shadowRoot.querySelector("#movieimage").addEventListener("change",this.changeImageSec),this.shadowRoot.querySelector("#catchMovie").addEventListener("change",this.changeCatchPhrase),this.shadowRoot.querySelectorAll('input[type="checkbox"]').forEach((t=>{t.addEventListener("change",(e=>{if(t.checked)bv.categories.push(t.value);else{const e=bv.categories.indexOf(t.value);-1!==e&&bv.categories.splice(e,1)}console.log("Arreglo de categorías actualizado:",bv.categories)}))})),this.shadowRoot.querySelector(".my-form").addEventListener("submit",(t=>wv(this,void 0,void 0,(function*(){var e,i,r,s,o,a,c,l,u,h,d,p;t.preventDefault(),n.style.display="none",bv.idUser=ev.user,yield(p=bv,Og(void 0,void 0,void 0,(function*(){try{const t=Ff(Mg,"movies");yield Lm(t,p),console.log("se añadió con éxito")}catch(t){console.error(t)}}))),(null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("fname")).value="",(null===(i=this.shadowRoot)||void 0===i?void 0:i.getElementById("directorMovie")).value="",(null===(r=this.shadowRoot)||void 0===r?void 0:r.getElementById("datemovie")).value="",(null===(s=this.shadowRoot)||void 0===s?void 0:s.getElementById("catchMovie")).value="",(null===(o=this.shadowRoot)||void 0===o?void 0:o.getElementById("descriptionMovie")).value="",(null===(a=this.shadowRoot)||void 0===a?void 0:a.getElementById("castMovie")).value="",(null===(c=this.shadowRoot)||void 0===c?void 0:c.getElementById("crewMovie")).value="",(null===(l=this.shadowRoot)||void 0===l?void 0:l.getElementById("movieposter")).value="",(null===(u=this.shadowRoot)||void 0===u?void 0:u.getElementById("movieimage")).value="",(null===(h=this.shadowRoot)||void 0===h?void 0:h.getElementById("catchMovie")).value="";const f=null===(d=this.shadowRoot)||void 0===d?void 0:d.querySelectorAll('input[type="checkbox"]');null==f||f.forEach((t=>{t.checked=!1})),bv.categories=[],console.log("Formulario enviado y campos limpiados")}))))}}))}}customElements.define("modal-movie",_v);var Ev,Tv=n(679);!function(t){t.buttonlabel="buttonlabel"}(Ev||(Ev={}));class Iv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({buttonlabel:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t      <button type="button">${this.buttonlabel}</button>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Tv.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-button",Iv);var Cv,Sv=n(167);!function(t){t.icon_url="icon_url",t.label="label",t.description_icon="description_icon"}(Cv||(Cv={}));class kv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({icon_url:null,label:null,description_icon:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n<a><p>${this.label}</p> <img src="${this.icon_url}" alt="${this.description_icon}"></a>\n      `;const e=this.ownerDocument.createElement("style");e.innerHTML=Sv.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}}customElements.define("my-actionandicon",kv);var xv,Av=n(909);!function(t){t.label="label"}(xv||(xv={}));class Rv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({label:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n      <section>\n      <label for="crew">${this.label}</label><br>\n      <section id="checkboxes">\n      <section class="label-chechbox">\n      <input type="checkbox" id="romance" value="first-checkbox" />\n      <label for="romance">Romance</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="action" value="second-checkbox" />\n      <label for="action">Action</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="comedy" value="thirth-checkbox" />\n      <label for="comedy">Comedy</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="Thriller" value="fourth-checkbox" />\n      <label for="thriller">Thriller</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="sci-fi" value="fifth-checkbox" />\n      <label for="sci-fi">Sci-Fi</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="drama" value="sixth-checkbox" />\n      <label for="drama">Drama</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="animated" value="seventh-checkbox" />\n      <label for="animated">Animated</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="classic" value="eighth-checkbox" />\n      <label for="classic">Classics</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="documental" value="ninth-checkbox" />\n      <label for="documental">Documental</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="psychological" value="second-checkbox" />\n      <label for="psychological">Psychological</label>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Av.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-filters",Rv);var Nv,Dv=n(83);!function(t){t.poster="poster",t.director="director",t.utitle="utitle",t.release_date="release_date"}(Nv||(Nv={}));class Lv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({poster:null,director:null,utitle:null,release_date:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section id="figure">\n<img src="${this.poster}" alt="This a poster of the movie named ${this.utitle} ">\n<h1>${this.utitle}</h1>\n<section id="directoranddate">\n<p>Directed by <b> ${this.director} </b></p>\n<p>Release date:<b> ${this.release_date}</b></p>\n</section>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Dv.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-figuremovie",Lv);var Ov,Pv=n(775);!function(t){t.catch_phrase="catch_phrase",t.description="description"}(Ov||(Ov={}));class Mv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({description:null,catch_phrase:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n\t\t\t<b><p>${this.catch_phrase||""}</p></b>\n<p id="description">${this.description}</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Pv.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-descriptionmovie",Mv);var Uv,Fv=n(191);!function(t){t.section_title="section_title",t.content="content"}(Uv||(Uv={}));class Vv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({section_title:null,content:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n      <h2>${this.section_title}</h2>\n      <hr></hr>\n<p>${this.content}</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Fv.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-extrainfo",Vv);var jv,$v=n(791);!function(t){t.utitle="utitle",t.your_name="your_name",t.mobile_number="mobile_number",t.email="email",t.emailornumber="emailornumber",t.password="password",t.re_password="re_password"}(jv||(jv={}));class qv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({utitle:null,your_name:null,mobile_number:null,email:null,emailornumber:null,password:null,re_password:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){var t;this.render();const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".close");e&&e.addEventListener("click",(()=>{iv(Gg("DASHBOARD"))}))}render(){var t;if(this.shadowRoot){let t=`\n              <section id="header">\n                  <span class="close"><img src="https://img.icons8.com/ios-filled/50/FB953C/delete-sign--v1.png" alt="delete-sign--v1"/></span>\n                  <h1>${this.utitle}</h1>\n              </section>\n          `;this.your_name&&(t+=`\n                  <label for="name">${this.your_name}</label><br>\n                  <input type="text" class="space" name="name" placeholder="First and last name"><br><br>\n              `),this.mobile_number&&(t+=`\n                  <label for="mobile">${this.mobile_number}</label><br>\n                  <input type="text" class="space" name="mobile" placeholder="Don't forget your country code"><br><br>\n              `),this.email&&(t+=`\n                  <label for="email">${this.email}</label><br>\n                  <input type="text" class="space" name="email" placeholder="johndoe@movie.com"><br><br>\n              `),this.emailornumber&&(t+=`\n                  <label for="emailornumber">${this.emailornumber}</label><br>\n                  <input type="text" class="space" name="emailornumber"><br><br>\n              `),this.password&&(t+=`\n                  <label for="password">${this.password}</label><br>\n                  <input type="password" class="space" name="password" placeholder="At least 8 characters"><br><br>\n              `),this.re_password&&(t+=`\n                  <label for="re_password">${this.re_password}</label><br>\n                  <input type="password" class="space" name="re_password" placeholder="Confirm your password"><br><br>\n              `),t+="</section>",this.shadowRoot.innerHTML=t}const e=this.ownerDocument.createElement("style");e.innerHTML=$v.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-sessionform",qv);var Bv,zv=n(633);!function(t){t.btn_text="btn_text",t.message="message",t.btn_type="btn_type"}(Bv||(Bv={}));class Hv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({btn_text:null,btn_type:null,message:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n      <button type="${this.btn_type}" id="send">${this.btn_text}</button>\n      <p>${this.message}<a href="https://en.wikipedia.org/wiki/Terms_of_service"> Our Conditions of Use and Privacy Notice</a>.</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=zv.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-submitandterms",Hv);var Gv,Kv=n(163);!function(t){t.image="image",t.uid="uid",t.categories="categories",t.utitle="utitle",t.director="director",t.release_date="release_date",t.cast="cast",t.crew="crew",t.image_sec="image_sec",t.description="description",t.catch_phrase="catch_phrase",t.idUser="idUser"}(Gv||(Gv={}));class Wv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.isLiked=!1}static get observedAttributes(){return Object.keys({image:null,uid:null,categories:null,utitle:null,director:null,release_date:null,cast:null,crew:null,image_sec:null,description:null,catch_phrase:null,idUser:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t,e;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n                <div class="container" data-uid="${this.uid}" data-image="${this.image}" data-categories="${this.categories}" data-title="${this.utitle}" data-director="${this.director}" data-release="${this.release_date}" data-cast="${this.cast}" data-crew="${this.crew}" data-imgbanner="${this.image_sec}" data-description="${this.description}" data-phrase="${this.catch_phrase}">\n                    <img class="poster" src="${this.image}" alt="This a poster of the movie named ${this.utitle}" ></img>\n                    <section class="content">\n                        <button id="LikeButton">${this.isLiked?"-":"+"}</button>\n                    </section>\n                </div>\n            `);const n=this.ownerDocument.createElement("style");n.innerHTML=Kv.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(n);const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#LikeButton");i.addEventListener("click",(()=>function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){this.isLiked=!this.isLiked,i.textContent=this.isLiked?"-":"+";const t={};if(this.uid&&(t.id=this.uid),this.image&&(t.image=this.image),this.categories&&(t.categories=this.categories.split(",")),this.utitle&&(t.title=this.utitle),this.director&&(t.director=this.director),this.release_date&&(t.release_date=this.release_date),this.cast&&(t.cast=this.cast),this.crew&&(t.crew=this.crew),this.image_sec&&(t.image_sec=this.image_sec),this.description&&(t.description=this.description),this.catch_phrase&&(t.catch_phrase=this.catch_phrase),this.idUser&&(t.idUser=this.idUser),!t.id)return void alert("Movie ID is required.");const e=ev.currentnewlistid;e?yield((t,e,n)=>Og(void 0,void 0,void 0,(function*(){try{const i=Ff(Vf(Mg,"users",t,"Mylists",e),"content");yield Lm(i,n),console.log("Película agregada exitosamente a la lista",e)}catch(t){throw console.error("Error al agregar la película a la lista",e,t),t}})))(ev.user,e,t):alert("Please select a list.")}))))}}customElements.define("my-moviecardadd",Wv);var Qv=n(675),Jv=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};class Xv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return Jv(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=document.createElement("section");t.classList.add("modal-new-list");const e=document.createElement("span");e.classList.add("close"),e.addEventListener("click",(()=>{this.style.display="none"}));const n=document.createElement("img");n.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0iIzAwMDAwMCIgdmlld0JveD0iMCAwIDI1NiAyNTYiPjxwYXRoIGQ9Ik0yMDUuNjYsMTk0LjM0YTgsOCwwLDAsMS0xMS4zMiwxMS4zMkwxMjgsMTM5LjMxLDYxLjY2LDIwNS42NmE4LDgsMCwwLDEtMTEuMzItMTEuMzJMMTE2LjY5LDEyOCw1MC4zNCw2MS42NkE4LDgsMCwwLDEsNjEuNjYsNTAuMzRMMTI4LDExNi42OWw2Ni4zNC02Ni4zNWE4LDgsMCwwLDEsMTEuMzIsMTEuMzJMMTM5LjMxLDEyOFoiPjwvcGF0aD48L3N2Zz4=",n.alt="Close",e.appendChild(n);const i=document.createElement("h1");i.classList.add("title-list"),i.textContent="New list";const r=document.createElement("form");r.classList.add("info-list");const s=document.createElement("label");s.htmlFor="name-list",s.textContent="Name";const o=document.createElement("input");o.type="text",o.id="name-list",o.name="name-list",o.placeholder="Enter the list name";const a=document.createElement("label");a.htmlFor="url-list",a.textContent="URL list image";const c=document.createElement("input");c.type="text",c.id="url-list",c.name="url-list",c.placeholder="Enter the URL of the image list";const l=document.createElement("section"),u=document.createElement("button");u.type="submit",u.textContent="ADD FILMS",l.appendChild(u),r.appendChild(s),r.appendChild(o),r.appendChild(a),r.appendChild(c),r.appendChild(l),t.appendChild(e),t.appendChild(i),t.appendChild(r),this.shadowRoot.appendChild(t);const h=this.ownerDocument.createElement("style");h.innerHTML=Qv.A,this.shadowRoot.appendChild(h),u.addEventListener("click",(t=>Jv(this,void 0,void 0,(function*(){var e,n,i,r;t.preventDefault(),iv(Gg("NEWLIST"));const s=(null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#name-list")).value,o=(null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#url-list")).value;if(""!==s.trim()&&""!==o.trim()){iv({action:"SaveCurrentNewListName",payload:s}),console.log("namelist",ev.currentnewlistname),iv({action:"SaveCurrentNewListImage",payload:o}),console.log("imagelist",ev.currentnewlistimage);const t=yield((t,e,n,i)=>Og(void 0,void 0,void 0,(function*(){try{const r=Ff(Vf(Mg,"users",t),"Mylists"),s=yield Lm(r,{name:e,image:n}),o=s.id;console.log("Lista agregada exitosamente para el usuario",t,"con ID:",o);const a=Ff(s,"content");return yield Dm(Vf(a,"automaticreation123"),{}),yield Promise.all(i.map((t=>Og(void 0,void 0,void 0,(function*(){yield Lm(a,t)}))))),o}catch(e){throw console.error("Error al agregar lista para el usuario",t,e),e}})))(ev.user,s,o,[]);console.log("New List ID:",t),iv({action:"SaveCurrentNewListId",payload:t}),console.log("idlist",ev.currentnewlistid),(null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#name-list")).value="",(null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector("#url-list")).value=""}else alert("Please fill in all fields.")}))))}}))}}customElements.define("my-modal-list",Xv);var Yv,Zv=n(721);!function(t){t.image_profile="image_profile",t.name_profile="name_profile",t.comment="comment"}(Yv||(Yv={}));class ty extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({image_profile:null,name_profile:null,comment:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section class = "comment-section">\n\t\t\t<div class = "user-image">\n\t\t\t\t<img src="${this.image_profile}" alt="Image profile">\n\t\t\t</div>\n\t\t\t\t<div class = "right-side">\n\t\t\t\t<div class = "info-user">\n\t\t\t\t\t<span><h3>${this.name_profile}</h3> made a review</span>\n\t\t\t\t\t<span class="rating">★★★★★</span>\n\t\t\t\t</div>\n\t\t\t\t<div class = "info-comment">\n\t\t\t\t\t<p>${this.comment}</p>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Zv.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-comment-section",ty);var ey=n(267);class ny extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=ev.favlist,e=document.createElement("style");e.textContent=ey.A,this.shadowRoot.innerHTML=`\n\t\t\t\t<section id="favoriteMovies">\n\t\t\t\t\t${t.map((t=>`\n\t\t\t\t\t\t\t\t<movie-card\n\t\t\t\t\t\t\t\t\timage="${t.image}"\n\t\t\t\t\t\t\t\t\tuid="${t.id}"\n\t\t\t\t\t\t\t\t\tcategories="${t.categories}"\n\t\t\t\t\t\t\t\t\tutitle="${t.title}"\n\t\t\t\t\t\t\t\t\tdirector="${t.director}"\n\t\t\t\t\t\t\t\t\trelease_date="${t.release_date}"\n\t\t\t\t\t\t\t\t\tcast="${t.cast}"\n\t\t\t\t\t\t\t\t\tcrew="${t.crew}"\n\t\t\t\t\t\t\t\t\timage_sec="${t.image_sec}"\n\t\t\t\t\t\t\t\t\tdescription="${t.description}"\n\t\t\t\t\t\t\t\t\tcatch_phrase="${t.catch_phrase}">\n\t\t\t\t\t\t\t\t</movie-card>\n\t\t\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\t\t\t`,this.shadowRoot.appendChild(e)}}))}}customElements.define("my-favoritemovies",ny);var iy=n(779),ry=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};class sy extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){return ry(this,void 0,void 0,(function*(){yield this.render(),this.attachEventListeners()}))}attachEventListeners(){var t,e,n,i,r;const s=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("form");null==s||s.addEventListener("submit",this.handleSubmit.bind(this));const o=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".profile-image");null==o||o.addEventListener("click",this.handleImageClick.bind(this));const a=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#profile-pic");null==a||a.addEventListener("change",this.handleFileSelect.bind(this));const c=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#name");null==c||c.addEventListener("change",this.validateName.bind(this));const l=null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector("#mobile");null==l||l.addEventListener("change",this.validateMobile.bind(this))}validateName(t){var e;const n=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value;n&&!/^[A-Za-z\s]+$/.test(n)&&alert("Name must contain only letters.")}validateMobile(t){var e;const n=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value;n&&!/^\+\d+$/.test(n)&&alert('Mobile number must start with "+" followed by country code and number.')}handleImageClick(){var t;const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#profile-pic");null==e||e.click()}handleFileSelect(t){return ry(this,void 0,void 0,(function*(){var e;const n=t.target,i=n.files?n.files[0]:null;if(i){yield Bg(i,ev.user);const t=yield zg(ev.user);if(t){const n=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".profile-image img");n&&(n.src=t)}}}))}handleSubmit(t){return ry(this,void 0,void 0,(function*(){var e,n;t.preventDefault();const i=ev.user,r=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#name"),s=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#mobile"),o={};(null==r?void 0:r.value)&&(o.username=r.value),(null==s?void 0:s.value)&&(o.mobilenumber=s.value),i&&this.isFormValid(o)&&(yield jg(i,o))}))}isFormValid(t){return t.username&&!/^[A-Za-z\s]+$/.test(t.username)?(alert("Name must contain only letters."),!1):!(t.mobilenumber&&!/^\+\d+$/.test(t.mobilenumber)&&(alert('Mobile number must start with "+" followed by country code and number.'),1))}render(){return ry(this,void 0,void 0,(function*(){var t;const e=yield qg();if(!e)return;const n=yield new Promise(((t,e)=>{wn(ki(),(e=>{t(e&&e.email||null)}),(t=>{console.error("Error al obtener el estado de autenticación del usuario:",t),e(t)}))}));if(!n)return;const i=yield zg(ev.user);if(this.shadowRoot){this.shadowRoot.innerHTML=`\n                <section class="container">\n\t\t\t\t\t<section class="profile">\n\t\t\t\t\t\t<div class="profile-image">\n\t\t\t\t\t\t\t<img src="${i||"https://as2.ftcdn.net/v2/jpg/03/49/49/79/1000_F_349497933_Ly4im8BDmHLaLzgyKg2f2yZOvJjBtlw5.jpg"}" alt="Profile Picture">\n\t\t\t\t\t\t\t<div class="overlay">\n\t\t\t\t\t\t\t\t<span>Change Photo</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input type="file" id="profile-pic" style="display:none">\n\t\t\t\t\t</section>\n\t\t\t\t\t<form class="form" method="post">\n\t\t\t\t\t\t<section class="form-group">\n\t\t\t\t\t\t\t<label for="name">Name</label>\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<input type="text" id="name" name="name" placeholder="${e.username}">\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class="form-group">\n\t\t\t\t\t\t\t<label for="mobile">Mobile Number</label>\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<input type="tel" id="mobile" name="mobile" placeholder="${e.mobilenumber}">\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class="form-group">\n\t\t\t\t\t\t\t<label for="email">Email</label>\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<input type="email" id="email" name="email" value="${n}" readonly>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class="form-group">\n\t\t\t\t\t\t\t<label for="password">Password</label>\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<input type="password" id="password" name="password" value="••••••••" readonly>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class="form-actions">\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<button type="submit" class="edit-profile">Edit</button>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</form>\n\t\t\t\t</section>\n            `;const r=this.ownerDocument.createElement("style");r.innerHTML=iy.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(r)}}))}}customElements.define("my-profile",sy);var oy=n(14);class ay extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=ev.favlist,e=document.createElement("style");e.textContent=oy.A,this.shadowRoot.innerHTML=`\n\t\t\t\t<section id="listMovies">\n\t\t\t\t\t${t.map((t=>`\n\t\t\t\t\t\t\t\t<my-moviecardadd\n\t\t\t\t\t\t\t\t\timage="${t.image}"\n\t\t\t\t\t\t\t\t\tuid="${t.id}"\n\t\t\t\t\t\t\t\t\tcategories="${t.categories}"\n\t\t\t\t\t\t\t\t\tutitle="${t.title}"\n\t\t\t\t\t\t\t\t\tdirector="${t.director}"\n\t\t\t\t\t\t\t\t\trelease_date="${t.release_date}"\n\t\t\t\t\t\t\t\t\tcast="${t.cast}"\n\t\t\t\t\t\t\t\t\tcrew="${t.crew}"\n\t\t\t\t\t\t\t\t\timage_sec="${t.image_sec}"\n\t\t\t\t\t\t\t\t\tdescription="${t.description}"\n\t\t\t\t\t\t\t\t\tcatch_phrase="${t.catch_phrase}">\n\t\t\t\t\t\t\t\t</my-moviecardadd>\n\t\t\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\t\t\t`,this.shadowRoot.appendChild(e)}}))}}customElements.define("my-cardaddsection",ay);var cy=n(989);class ly extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=ev.movielist,e=document.createElement("style");e.textContent=cy.A,this.shadowRoot.innerHTML=`\n                <section id="cards">\n                    ${t.map((t=>`\n                            <my-moviecardadd image="${t.image}" uid="${t.id}" categories="${t.categories}" utitle="${t.title}" director="${t.director}" release_date="${t.release_date}" cast="${t.cast}" crew="${t.crew}" image_sec="${t.image_sec}" description="${t.description}" catch_phrase="${t.catch_phrase}"></my-moviecardadd>\n                        `)).join("")}\n                </section>\n            `,this.shadowRoot.appendChild(e)}}))}}customElements.define("my-addmovietolist",ly);var uy=n(891);class hy extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=ev.listcontent,e=document.createElement("style");e.textContent=uy.A,this.shadowRoot.innerHTML=`\n\t\t\t\t<section id="favoriteMovies">\n\t\t\t\t\t${t.map((t=>`\n\t\t\t\t\t\t\t\t<movie-card\n\t\t\t\t\t\t\t\t\timage="${t.image}"\n\t\t\t\t\t\t\t\t\tuid="${t.id}"\n\t\t\t\t\t\t\t\t\tcategories="${t.categories}"\n\t\t\t\t\t\t\t\t\tutitle="${t.title}"\n\t\t\t\t\t\t\t\t\tdirector="${t.director}"\n\t\t\t\t\t\t\t\t\trelease_date="${t.release_date}"\n\t\t\t\t\t\t\t\t\tcast="${t.cast}"\n\t\t\t\t\t\t\t\t\tcrew="${t.crew}"\n\t\t\t\t\t\t\t\t\timage_sec="${t.image_sec}"\n\t\t\t\t\t\t\t\t\tdescription="${t.description}"\n\t\t\t\t\t\t\t\t\tcatch_phrase="${t.catch_phrase}">\n\t\t\t\t\t\t\t\t</movie-card>\n\t\t\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\t\t\t`,this.shadowRoot.appendChild(e)}}))}}customElements.define("my-listmovies",hy);var dy=n(695);class py extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=ev.movieprofile,e=document.createElement("style");e.textContent=dy.A,this.shadowRoot.innerHTML=`\n      <h1 id="titlecategory">Your Contributions</h1>\n\t\t\t\t<section id="favoriteMovies">\n\t\t\t\t\t${t.map((t=>`\n\t\t\t\t\t\t\t\t<movie-card\n\t\t\t\t\t\t\t\t\timage="${t.image}"\n\t\t\t\t\t\t\t\t\tuid="${t.id}"\n\t\t\t\t\t\t\t\t\tcategories="${t.categories}"\n\t\t\t\t\t\t\t\t\tutitle="${t.title}"\n\t\t\t\t\t\t\t\t\tdirector="${t.director}"\n\t\t\t\t\t\t\t\t\trelease_date="${t.release_date}"\n\t\t\t\t\t\t\t\t\tcast="${t.cast}"\n\t\t\t\t\t\t\t\t\tcrew="${t.crew}"\n\t\t\t\t\t\t\t\t\timage_sec="${t.image_sec}"\n\t\t\t\t\t\t\t\t\tdescription="${t.description}"\n\t\t\t\t\t\t\t\t\tcatch_phrase="${t.catch_phrase}">\n\t\t\t\t\t\t\t\t</movie-card>\n\t\t\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\t\t\t`,this.shadowRoot.appendChild(e)}}))}}customElements.define("my-yourcontributions",py);var fy=n(9);class my extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){var t,e;this.render();const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("my-banner");if(n){const t=null===(e=n.shadowRoot)||void 0===e?void 0:e.querySelector("#accountButton");null==t||t.addEventListener("click",(()=>{iv(Gg("FAVORITES"))}))}}))}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<body>\n      <my-banner message="Track films you\'ve watched. Save those you want to see. Tell your friends what\'s good."\n\t\t\tbuttonlabel="BROWSE THROUGH YOUR FAVORITES"></my-banner>\n\t\t\t<category-section name="Popular films in the community" category="popular" image="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/s5R6kTMfOxkGit96A8lqcDL4uVk.jpg"></category-section>\n\t\t\t\t<category-section name="On-cinema right now" category="cinema" image="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/rron9HAuS9s7zBF8iCX1tsafxUo.jpg"></category-section>\n\t\t\t\t<category-section name="Trending this week" category="trending" image="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/iAyr7VEFGJoHDIHIxjEb3TskQW4.jpg"></category-section>\n\t\t\t\t<category-section name="Classics" category="classics" image="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/rr7E0NoGKxvbkb89eR1GwfoYjpA.jpg"></category-section>\n\t\t\t\t<modal-movie></modal-movie>\n\t\t\t\t</body>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=fy.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-dashboard",my);var gy=n(809);class vy extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<my-banner section_title=${ev.titlecategory} image=${ev.imagecategory}></my-banner>\n\t\t\t<category-section category=${ev.currentcategory}></category-section>\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=gy.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-categories",vy);const yy=[{id:1,name:"John",image:"https://i.pinimg.com/564x/72/d6/96/72d69624326a417824f5d96e36ebf4eb.jpg",comment:"may thy racket chip and shatter"},{id:2,name:"sydney",image:"https://i.pinimg.com/736x/3a/e5/0e/3ae50eb0d74405a95fa5865988b9ba3c.jpg",comment:"god can thomas brodie sangster have more american roles"},{id:3,name:"ccaitlinnm",image:"https://i.pinimg.com/564x/5f/22/e5/5f22e519b409fe620193ca47f3724b83.jpg",comment:"ngl i thought bubba gumps came before this film and the writers spent like half the movie building up to a punchline"},{id:4,name:"DirkH",image:"https://i.pinimg.com/564x/9b/11/77/9b1177aebfc5f7ea7c3124e30e809970.jpg",comment:"nobody likes getting the most out of a vowel quite like james stewart"}];var wy=n(207);class by extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\n\t\t\t<my-banner image="${ev.movieimagesec}" id="banner"></my-banner>\n<section id="content">\n\t\t\t<my-figuremovie id="figure"  poster=${ev.movieimage} utitle="${ev.movietitle}" director="${ev.moviedirector}" release_date=${ev.moviereleasedate}></my-figuremovie>\n<section id="info">\n\t\t\t<my-descriptionmovie catch_phrase="${ev.moviecatchphrase}" description="${ev.moviedescription}"></my-descriptionmovie>\n\t\t\t<my-extrainfo section_title="Cast" content="${ev.moviecast}"></my-extrainfo>\n\t\t\t<my-extrainfo section_title="Crew" content="${ev.moviecrew}"></my-extrainfo>\n\t\t\t<my-extrainfo section_title="Genres" content="${ev.moviecategories}"></my-extrainfo>\n\t\t\t</section>\n\t\t\t\x3c!-- <section id="actions">\n\t\t\t<my-actionandicon label="Like" icon_url="https://img.icons8.com/ios/30/FFFFFF/like--v1.png" description_icon="heart icon"></my-actionandicon>\n\t\t\t<my-actionandicon label="Edit film" icon_url="https://img.icons8.com/material/24/FFFFFF/pencil--v2.png" description_icon="pencil icon"></my-actionandicon>\n\t\t\t<my-actionandicon label="Add to a list" icon_url="https://img.icons8.com/ios-glyphs/30/FFFFFF/bookmark-ribbon.png" description_icon="bookmark icon"></my-actionandicon>\n\t\t\t<my-actionandicon label="Share" icon_url="https://img.icons8.com/ios-glyphs/30/FFFFFF/share--v1.png" description_icon="share icon"></my-actionandicon>\n\t\t\t</section> --\x3e\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h1>POPULAR REVIEWS</h1>\n\t\t\t\t<section class = "comment-section">\n\t\t\t\t\t${yy.map((t=>`\n\t\t\t\t\t\t\t<my-comment-section image_profile = "${t.image}"\n\t\t\t\t\t\t\tname_profile = "${t.name}"\n\t\t\t\t\t\t\tcomment = "${t.comment}">\n\t\t\t\t\t\t\t</my-comment-section>\n\t\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\t\t\t</section>\n\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=wy.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-filmpage",by);var _y=n(858);const Ey={email:"",password:""};class Ty extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var t,e,n,i,r;this.render();const s=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#navigatetosignin");null==s||s.addEventListener("click",(()=>{iv(Gg("SIGNIN"))}));const o=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".close");o&&o.addEventListener("click",(()=>{iv(Gg("SIGNIN"))}));const a=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector('input[name="email"]');null==a||a.addEventListener("change",this.changeEmail.bind(this));const c=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector('input[name="password"]');null==c||c.addEventListener("change",this.changePassword.bind(this));const l=null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector("#send");null==l||l.addEventListener("click",this.submitForm.bind(this))}changeEmail(t){var e;Ey.email=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changePassword(t){var e;Ey.password=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}submitForm(){$g(Ey)}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<section>\n\t\t\t<section id="form">\n\t\t\t<section id="my-sessionform">\n\t\t\t<section id="header">\n                  <span class="close"><img src="https://img.icons8.com/ios-filled/50/FB953C/delete-sign--v1.png" alt="delete-sign--v1"/></span>\n                  <h1>LOG IN</h1>\n              </section>\n\t\t\t\t\t\t\t<label for="email">Email</label><br>\n\t\t\t\t\t\t\t<input type="text" class="space" name="email" placeholder="johndoe@movie.com"><br><br>\n\t\t\t\t\t\t\t<label for="password">Password</label><br>\n\t\t\t\t\t\t\t<input type="password" class="space" name="password" placeholder="At least 8 characters"><br><br>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t<section id="my-submitandterms">\n\t\t\t\t\t\t\t<button type="submit" id="send">Continue</button>\n\t\t\t\t\t\t\t<p>By using our services you agree to<a href="https://en.wikipedia.org/wiki/Terms_of_service"> Our Conditions of Use and Privacy Notice</a>.</p>\n\t\t\t\t\t\t\t</section>\n\t\t </section>\n\t\t <section id="extrainfo">\n\t\t <section id="extrainfo-content">\n\t\t <hr><p>New to this website</p><hr>\n\t\t </section>\n\t\t <button id="navigatetosignin">Create your account</button>\n\t\t </section>\n\t\t </section>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=_y.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-login",Ty);var Iy=n(868);class Cy extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t,e,n,i,r;if(this.shadowRoot){this.shadowRoot.innerHTML='\n\t\t\t\t<section class="container">\n\t\t\t\t\t<my-banner section_title="My Lists"></my-banner>\n\t\t\t\t\t<button id="modal-button">Create new list</button>\n\t\t\t\t\t<my-modal-list id="open"></my-modal-list>\n\t\t\t\t\t<button id="favorites">Favorites</button>\n\t\t\t\t\t<section id="lists"></section>\n\t\t\t\t</section>\n\t\t\t';const s=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#modal-button"),o=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#open");o.style.display="none",null==s||s.addEventListener("click",(()=>{o.style.display="flex"}));const a=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#favorites");null==a||a.addEventListener("click",(()=>{iv(Gg("FAVORITES"))}));const c=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#lists");(ev.usermovielists||[]).forEach((t=>{const e=document.createElement("button");e.textContent=t.name,e.style.backgroundImage=`url(${t.image})`;const n=e.dataset.id=t.id;e.addEventListener("click",(()=>function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){iv({action:"SaveCurrentNewListName",payload:t.name}),iv({action:"SaveCurrentNewListImage",payload:t.image}),iv({action:"SaveCurrentNewListId",payload:n}),console.log("idlist",ev.currentnewlistid),console.log("listname",ev.currentnewlistname),console.log("listimage",ev.currentnewlistimage);const e=yield Zg(ev.user,n);iv(e),console.log("contentfromclick",ev.listcontent),iv(Gg("LISTCONTENT"))})))),null==c||c.appendChild(e)}));const l=this.ownerDocument.createElement("style");l.innerHTML=Iy.A,null===(r=this.shadowRoot)||void 0===r||r.appendChild(l)}}}customElements.define("app-mylists",Cy);var Sy=n(375);class ky extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<my-banner section_title=${ev.currentnewlistname} image=${ev.currentnewlistimage}></my-banner>\n\t\t\t<my-addmovietolist></my-addmovietolist>\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=Sy.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-newlist",ky);var xy=n(82);class Ay extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}logout(){indexedDB.deleteDatabase("firebase-heartbeat-database"),indexedDB.deleteDatabase("firebaseLocalStorageDb"),window.location.reload()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){var t,e;if(this.shadowRoot){this.shadowRoot.innerHTML='\n\t\t\t\t<custom-navbar class="profile-page"></custom-navbar>\n\t\t\t\t<div class="profile-container">\n\t\t\t\t\t<my-profile></my-profile>\n\t\t\t\t\t<my-yourcontributions></my-yourcontributions>\n\t\t\t\t</div>\n\t\t\t';const e=this.ownerDocument.createElement("button");e.innerText="Logout",e.className="logout-button",e.addEventListener("click",this.logout),null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}const n=this.ownerDocument.createElement("style");n.innerHTML=xy.A,null===(e=this.shadowRoot)||void 0===e||e.appendChild(n),yield Og(void 0,void 0,void 0,(function*(){const t=yield Nm(Ff(Mg,"users")),e=[];return t.forEach((t=>{const n=t.data();e.push(Object.assign({id:t.id},n))})),e}))}))}}customElements.define("app-profile",Ay);var Ry=n(307);const Ny={email:"",password:"",name:"",mobile:""};class Dy extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var t,e,n,i,r,s,o;this.render();const a=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#loginpage");null==a||a.addEventListener("click",(()=>{iv(Gg("LOGIN"))}));const c=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".close");c&&c.addEventListener("click",(()=>{iv(Gg("LOGIN"))}));const l=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector('input[name="email"]');null==l||l.addEventListener("change",this.changeEmail.bind(this));const u=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector('input[name="password"]');null==u||u.addEventListener("change",this.changePassword.bind(this));const h=null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector('input[name="name"]');null==h||h.addEventListener("change",this.changeName.bind(this));const d=null===(s=this.shadowRoot)||void 0===s?void 0:s.querySelector('input[name="mobile"]');null==d||d.addEventListener("change",this.changeMobile.bind(this));const p=null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector("#send");null==p||p.addEventListener("click",this.submitForm.bind(this))}changeEmail(t){var e;const n=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value;/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?Ny.email=n:alert("Please enter a valid email address.")}changePassword(t){var e;const n=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value;/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*?&]{8,}$/.test(n)?Ny.password=n:alert("Password must be at least 8 characters long and contain at least one number or special character.")}changeName(t){var e;const n=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value;/^[A-Za-z\s]+$/.test(n)?Ny.name=n:alert("Name must contain only letters.")}changeMobile(t){var e;const n=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value;/^\+\d+$/.test(n)?Ny.mobile=n:alert('Mobile number must start with "+" followed by country code and number.')}submitForm(){Ny.email&&Ny.password&&Ny.name&&Ny.mobile?(t=>{(async function(t,e,n){const i=Ve(t),r=Ge(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dn),s=await r.catch((e=>{throw"auth/password-does-not-meet-requirements"===e.code&&yn(t),e})),o=await pn._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o})(Ug,t.email,t.password).then((e=>Og(void 0,void 0,void 0,(function*(){const n=e.user;Vg=n.uid,console.log(n.uid);try{const e=Vf(Mg,"users",n.uid),i={id:n.uid,username:t.name,mobilenumber:t.mobile};console.log(i),yield Dm(e,i),alert("Se creó el usuario")}catch(t){console.error(t)}})))).catch((t=>{const e=t.code,n=t.message;console.error(e,n),alert("Revisa que la información sea correcta y que el correo no esté en uso en nuestra plataforma")}))})(Ny):alert("Please fill out all fields correctly.")}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<body>\n\t\t\t<section id="main">\n\t\t\t<section id="my-sessionform">\n\t\t\t<section id="header">\n                  <span class="close"><img src="https://img.icons8.com/ios-filled/50/FB953C/delete-sign--v1.png" alt="delete-sign--v1"/></span>\n                  <h1>SIGN UP</h1>\n              </section>\n\t\t\t\t\t\t\t<label for="name">Your name</label><br>\n\t\t\t\t\t\t\t<input type="text" class="space" name="name" placeholder="First and Last name"><br><br>\n\t\t\t\t\t\t\t<label for="mobile">Mobile number</label><br>\n                  <input type="text" class="space" name="mobile" placeholder="Don\'t forget your country code"><br><br>\n\t\t\t\t\t\t\t\t\t<label for="email">Email</label><br>\n                  <input type="text" class="space" name="email" placeholder="johndoe@movie.com"><br><br>\n\t\t\t\t\t\t\t\t\t<label for="password">Password</label><br>\n                  <input type="password" class="space" name="password" placeholder="At least 8 characters"><br><br>\n\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t<section id="my-submitandterms">\n\t\t\t\t\t\t\t\t\t<button type="submit" id="send">Create account</button>\n\t\t\t\t\t\t\t\t\t<p>By creating an account, you agree to<a href="https://en.wikipedia.org/wiki/Terms_of_service"> Our Conditions of Use and Privacy Notice</a>.</p>\n\t\t\t\t\t\t\t\t\t</section>\n\t\t <hr>\n\t\t <p>Already have an account? <a id="loginpage">Log in</a></p>\n\t\t </section>\n\t\t</body>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=Ry.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-signin",Dy);var Ly=n(466);class Oy extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<my-banner section_title="Favorites"></my-banner>\n\t\t\t<my-favoritemovies></my-favoritemovies>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=Ly.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-favorites",Oy);class Py extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<my-banner section_title="${ev.currentnewlistname}" image=${ev.currentnewlistimage}></my-banner>\n\t\t\t<my-listmovies></my-listmovies>\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=Sy.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-listcontent",Py);class My extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),rv(this)}connectedCallback(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(yield new Promise((t=>{const e=setInterval((()=>{ev.user&&(clearInterval(e),t(ev.user))}),100)})),ev.user){try{const t=yield Jg();iv(t);const e=yield Xg(ev.user);iv(e),console.log("favorites",ev.favlist);const n=yield Yg(ev.user);iv(n),console.log("listas",ev.usermovielists);const i=yield tv(ev.user);iv(i),console.log("movies profile",ev.movieprofile)}catch(t){console.error("Error fetching data:",t)}console.log("id usuario",ev.user),this.render()}else console.error("No user logged in")}))}render(){var t,e,n,i,r,s,o,a,c,l;switch(this.shadowRoot&&(this.shadowRoot.innerHTML=""),ev.screen){case"LOGIN":const u=this.ownerDocument.createElement("app-login");null===(t=this.shadowRoot)||void 0===t||t.appendChild(u);break;case"DASHBOARD":const h=this.ownerDocument.createElement("app-dashboard");null===(e=this.shadowRoot)||void 0===e||e.appendChild(h);break;case"SIGNIN":const d=this.ownerDocument.createElement("app-signin");null===(n=this.shadowRoot)||void 0===n||n.appendChild(d);break;case"CATEGORIES":const p=this.ownerDocument.createElement("app-categories");null===(i=this.shadowRoot)||void 0===i||i.appendChild(p);break;case"FILMPAGE":const f=this.ownerDocument.createElement("app-filmpage");null===(r=this.shadowRoot)||void 0===r||r.appendChild(f);break;case"MYLISTS":const m=this.ownerDocument.createElement("app-mylists");null===(s=this.shadowRoot)||void 0===s||s.appendChild(m);break;case"NEWLIST":const g=this.ownerDocument.createElement("app-newlist");null===(o=this.shadowRoot)||void 0===o||o.appendChild(g);break;case"FAVORITES":const v=this.ownerDocument.createElement("app-favorites");null===(a=this.shadowRoot)||void 0===a||a.appendChild(v);break;case"PROFILE":const y=this.ownerDocument.createElement("app-profile");null===(c=this.shadowRoot)||void 0===c||c.appendChild(y);break;case"LISTCONTENT":const w=this.ownerDocument.createElement("app-listcontent");null===(l=this.shadowRoot)||void 0===l||l.appendChild(w)}}}customElements.define("app-container",My)})()})();