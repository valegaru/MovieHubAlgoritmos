/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={167:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"a {\n\tdisplay: flex;\n\talign-items: center; /* Alinea verticalmente los elementos */\n\ttext-decoration: none; /* Quita el subrayado del enlace */\n}\n\np {\n\tmargin-right: 10px; /* Ajusta el margen derecho según sea necesario */\n}\n\n",""]);const a=o},989:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#cards {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmy-moviecardadd {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n",""]);const a=o},925:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos para el componente de banner */\n#allbanner {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tbackground-size: cover;\n\tbackground-position: center top 30%;\n\tmargin: 0;\n\tpadding: 10%;\n\theight: 43vh;\n}\n\n#allbanner::before {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.3); /* Color de fondo con opacidad */\n\tz-index: 1; /* Colócalo encima del contenido */\n}\n\n:host {\n\tcolor: white;\n}\n\nsection {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tposition: relative;\n\tz-index: 2;\n}\n\n/* Estilos para el componente personalizado de la barra de navegación */\ncustom-navbar {\n\twidth: 100%; /* Ocupar el 100% del banner */\n\tposition: absolute; /* Para posicionarlo */\n\ttop: 0; /* En la parte superior */\n\tz-index: 3; /* Z-index para estar por encima de otros elementos */\n}\n\nh1 {\n\twidth: 45%;\n\theight: auto; /* Cambia la altura a automática */\n\tmargin-top: 30%;\n\tmargin-bottom: 3vh; /* Espacio entre el mensaje y el botón */\n\tfont-size: 200%;\n\ttext-align: center; /* Centrar horizontalmente */\n\tfont-family: 'Domine', serif;\n}\n\nbutton {\n\twidth: 20%; /* Modifica el ancho del botón */\n\theight: 50px;\n\tbackground-color: rgba(251, 149, 60, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 10px;\n\tfont-size: 80%;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\nbutton:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n\tcursor: pointer;\n}\n\nbutton span {\n\tdisplay: inline-block;\n\twidth: 100%;\n\ttext-align: center;\n}\n\n/* Media queries para dispositivos móviles */\n@media screen and (max-width: 767px) {\n\t:host {\n\t\theight: auto; /* Altura automática para adaptarse a dispositivos móviles */\n\t}\n\n\th1 {\n\t\twidth: 80%;\n\t\tmargin-top: 40%;\n\t\tmargin-bottom: 3vh;\n\t\tfont-size: 6vw;\n\t}\n\n\tbutton {\n\t\twidth: 60%;\n\t\theight: 10vw;\n\t\tfont-size: 4vw;\n\t}\n}\n",""]);const a=o},682:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Reset de estilos */\n* {\n\tmargin: 0;\n\tpadding: 0;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\n/* Estilos generales de la barra de navegación */\nnav {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 3%;\n\tjustify-content: space-around;\n\talign-items: center;\n\tbackground: none;\n\tjustify-content: space-between; /* Alinear elementos al centro horizontalmente */\n}\n\n/* Estilos para la sección de búsqueda */\nnav .search-bar,\nnav .pages {\n\tflex: 1; /* Distribuir el espacio disponible */\n}\n\n/* Agrega un espacio del 5% entre .search-bar y .pages */\nnav .search-bar {\n\tmargin-right: 5%;\n}\n\n/* Ajustes adicionales para la barra de búsqueda */\n.search-bar {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\theight: 30px;\n\tbox-sizing: border-box;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tborder-radius: 5px;\n\tmax-width: 30%;\n\tmargin-right: 10px;\n\tmargin-bottom: 0px;\n\twidth: 50%;\n\theight: 50%;\n}\n\n.search-bar input {\n\tflex: 1; /* Para que el input ocupe el espacio restante */\n\tpadding: 2 5px;\n\theight: 100%;\n\tborder: none;\n\toutline: none;\n\tbackground-color: transparent; /* Eliminar el color de fondo */\n\tcolor: white;\n}\n\n.icon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.icon img {\n\twidth: 20px;\n\tpadding: 0 10px;\n}\n\n/* Estilos para la sección de páginas */\n.pages {\n\tdisplay: flex;\n\tjustify-content: center; /* Centra los elementos horizontalmente */\n\tmargin-right: 0;\n}\n\n.pages a {\n\tmargin-right: 12%; /* Espacio entre los elementos */\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n\tcolor: white;\n\tfont-size: 14px;\n}\n\n.pages a:hover {\n\tcolor: rgba(251, 149, 60, 1);\n\tcursor: pointer;\n\ttransition: color 0.1s ease;\n}\n\n.pages {\n\tposition: relative;\n}\n\n/* Estilos para el menú desplegable */\n.pages .menu-desplegable {\n\tdisplay: none; /* controla que no se muestre */\n\tposition: absolute;\n\ttop: 100%;\n\tleft: 0;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tpadding: 10px;\n\tborder-radius: 5px;\n\tlist-style-type: none;\n}\n.pages .menu-desplegable a {\n\ttext-transform: none;\n\tdisplay: block;\n\tpadding: 5px 0;\n}\n\n.pages .menu-desplegable a:hover {\n\tcolor: rgba(233, 13, 90, 1);\n}\n\n.menu-desplegableDisplayed {\n\tdisplay: block !important;\n}\n\n/* media queries */\n@media screen and (max-width: 767px) {\n\tnav {\n\t\tflex-direction: row;\n\t\tpadding: 3%;\n\t}\n\n\tnav .search-bar {\n\t\tmargin-right: 10px;\n\t\tmargin-bottom: 0px;\n\t\twidth: 50%;\n\t\theight: 50%;\n\t}\n\n\t.icon {\n\t\twidth: 30%;\n\t\theight: 30%;\n\t}\n\t.pages a {\n\t\tmargin-right: 6px;\n\t\tfont-size: 10px;\n\t}\n}\n",""]);const a=o},679:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"button {\n\twidth: 20%; /* Modifica el ancho del botón */\n\theight: 50px;\n\tbackground-color: rgba(251, 149, 60, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 10px;\n\tfont-size: 80%;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\nbutton:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\nbutton span {\n\tdisplay: inline-block;\n\twidth: 100%;\n\ttext-align: center;\n}\n\n@media screen and (max-width: 767px) {\n\tbutton {\n\t\twidth: 100%;\n\t\tmargin-bottom: 10px;\n\t\tfont-size: 1rem;\n\t\tpadding: 0.5rem;\n\t}\n}\n",""]);const a=o},14:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#listMovies {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmy-moviecardadd {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n",""]);const a=o},721:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"* {\n\tmargin: 0;\n\tpadding: 0;\n\tbox-sizing: border-box;\n}\n\n.comment-section {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 20px;\n\tgap: 30px;\n\tborder-top: 1px solid white;\n\tmargin-bottom: 20px;\n}\n\n.info-user {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: flex-start;\n\tgap: 20px;\n}\n\n.user-image {\n\twidth: 70px;\n\theight: 70px;\n}\n\n.user-image img {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n\tborder-radius: 50%;\n}\n\n.info-user .rating {\n\tcolor: rgba(229, 39, 97, 1);\n}\n\n.info-user span h3 {\n\tdisplay: inline-block;\n}\n\n.right-side {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 10px;\n}\n\n@media screen and (max-width: 767px) {\n\t.user-image {\n\t\twidth: 40px;\n\t\theight: 40px;\n\t}\n\n\t.info-user h3 {\n\t\tfont-size: 12px;\n\t}\n\n\t.info-comment p {\n\t\tfont-size: 12px;\n\t}\n}\n",""]);const a=o},191:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"h2 {\n\tfont-weight: normal; /* Quita el negrita */\n\tcolor: rgba(233, 13, 90, 1); /* Cambia el color a rosa */\n\tmargin-bottom: 6px;\n}\n\nhr {\n\tborder-color: rgba(233, 13, 90, 1); /* Cambia el color del hr a rosa */\n\tmargin-top: 0px;\n\tmargin-bottom: 5%;\n}\n\np {\n\tmargin-bottom: 10%;\n}\n\n@media screen and (max-width: 767px) {\n\th2 {\n\t\tfont-size: 1.5rem;\n\t}\n\n\thr {\n\t\tmargin-bottom: 3%;\n\t}\n\n\tp {\n\t\tfont-size: 1rem;\n\t}\n}\n",""]);const a=o},267:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#favoriteMovies {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmovie-card {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n",""]);const a=o},83:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"#figure {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\ttext-align: center;\n}\n\n#figure img {\n\twidth: 400px;\n\theight: auto;\n}\n\n#directoanddate {\n\tmargin-top: 1px; /* Ajusta el margen superior según sea necesario */\n}\n\nh1 {\n\tfont-size: 200%;\n\tmargin: 1%;\n}\n\n#directoranddate {\n\tmargin: 1%;\n\tdisplay: flex; /* Hace que los elementos se alineen en una línea */\n\tjustify-content: center; /* Los elementos se alinearán al centro horizontalmente */\n\tgap: 10px; /* Espacio entre los elementos */\n}\n\np {\n\tmargin: 1%;\n\twhite-space: nowrap; /* Hace que el texto dentro del párrafo se muestre en una sola línea */\n}\n\n/* Estilos para pantallas más pequeñas */\n@media screen and (max-width: 767px) {\n\t#figure {\n\t\tmargin-top: 50%; /* Ajusta el margen superior para posicionarlo más abajo */\n\t}\n\n\t#figure img {\n\t\twidth: 100%; /* Hace que la imagen ocupe todo el ancho disponible */\n\t}\n\n\t#directoranddate {\n\t\tflex-direction: column; /* Cambia la dirección del flexbox a columna */\n\t\talign-items: center; /* Centra los elementos horizontalmente */\n\t\tmargin-top: 5px; /* Ajusta el margen superior */\n\t}\n\n\th1 {\n\t\tfont-size: 120%;\n\t}\n\tp {\n\t\twhite-space: normal;\n\t\tfont-size: 90%;\n\t}\n}\n",""]);const a=o},909:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"",""]);const a=o},675:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"* {\n\tmargin: 0;\n\tpadding: 0;\n\tbox-sizing: border-box;\n\tfont-family: Arial, Helvetica, sans-serif;\n}\n\n.modal-new-list {\n\tbackground-color: orange;\n\tborder-radius: 30px;\n\tpadding: 10px 40px;\n\tpadding-bottom: 40px;\n\twidth: 500px;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: fixed; /* Cambiamos position: relative; a position: fixed; */\n\ttop: 50%; /* Agregamos top: 50%; */\n\tleft: 50%; /* Agregamos left: 50%; */\n\ttransform: translate(-50%, -50%); /* Agregamos transform: translate(-50%, -50%); */\n}\n\n.close {\n\tposition: absolute;\n\ttop: 20px;\n\tright: 20px;\n\tcursor: pointer;\n}\n\n.title-list {\n\tmargin-top: 15px;\n\tmargin-bottom: 30px;\n}\n\n.info-list {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n.info-list label {\n\tmargin-bottom: 10px;\n}\n\n.info-list input[type='text'] {\n\twidth: 80%;\n\tpadding: 5px;\n\tmargin-bottom: 20px;\n\tborder-radius: 5px;\n\tborder: 1px solid #3e3e3e;\n}\n\n.info-list button[type='submit'] {\n\tbackground-color: black;\n\tcolor: white;\n\tpadding: 10px 20px;\n\tborder-radius: 10px;\n\tborder: none;\n\tcursor: pointer;\n\tmargin-top: 20px;\n}\n\n.info-list button[type='submit']:hover {\n\tbackground-color: #555;\n}\n.modal-new-list {\n\tz-index: 1000;\n}\n\n@media screen and (max-width: 767px) {\n\t.modal-new-list {\n\t\twidth: 80%;\n\t}\n}\n",""]);const a=o},163:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos para el contenedor de la tarjeta de película */\n.container {\n\tposition: relative;\n\tobject-fit: cover;\n\tdisplay: flex;\n\theight: 100%;\n\twidth: 100%;\n}\n\n/* Estilos para el póster/imagen principal de la película */\n.poster {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n/* Estilos para el contenido */\n.content {\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.6); /* Fondo semitransparente */\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-direction: column;\n\topacity: 0; /* Inicialmente oculto */\n\ttransition: opacity 0.6s; /* Transición suave al mostrar */\n\tobject-fit: cover;\n}\n\n.container:hover .content {\n\topacity: 1; /* Mostrar contenido al pasar el mouse por encima de .container */\n}\n\np {\n\tcolor: white;\n\tfont-size: 100%;\n}\n\n.content button {\n\tbackground-color: transparent;\n\tborder: none;\n\tcolor: white;\n\tfont-size: 2rem;\n\tcursor: pointer;\n}\n\n/* Estilos para el botón de añadir */\nbutton#AddButton {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 80px;\n\theight: 80px;\n\tborder-radius: 50%;\n\tborder: 2px solid white;\n\ttransition: transform 0.3s ease-in-out;\n}\n\nbutton#AddButton:hover {\n\ttransform: scale(1.1);\n}\n\n@media screen and (max-width: 767px) {\n\t.content button {\n\t\tfont-size: 1.5rem;\n\t}\n}\n",""]);const a=o},931:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos globales del componente */\n* {\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\n/* Estilos para el contenedor de la tarjeta de película */\n.container {\n\tposition: relative;\n\tobject-fit: cover;\n\tdisplay: flex;\n\theight: 100%;\n\twidth: 100%;\n}\n\n/* Estilos para el póster/imagen principal de la película */\n.poster {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n.viewdetails {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-direction: column;\n}\n/* Añade estilos para el contenido */\n.content {\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.6); /* Fondo semitransparente */\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-direction: column;\n\topacity: 0; /* Inicialmente oculto */\n\ttransition: opacity 0.6s; /* Transición suave al mostrar */\n\tobject-fit: cover;\n}\n\n.container:hover .content {\n\topacity: 1; /* Mostrar contenido al pasar el mouse por encima de .container */\n}\n\np {\n\tcolor: white;\n\tfont-size: 100%;\n}\n\n.content img,\n.content p {\n\tmargin: 5px; /* Ajusta el margen entre elementos */\n\ttext-align: center;\n}\n\n.content img {\n\twidth: 28%;\n\theight: auto;\n\tcursor: pointer; /* Cambia el cursor al pasar sobre el botón */\n}\n\nimg.details {\n\theight: auto;\n\twidth: 50%;\n}\n\n.link {\n\tdisplay: flex;\n\twidth: 100%; /* Ancho del 50% */\n\theight: 25%;\n\tjustify-content: center; /* Centra horizontalmente */\n\talign-items: center; /* Centra verticalmente */\n\tmargin: 5px;\n\tpadding: 0px;\n}\n\n.dislike,\n.like {\n\tdisplay: none; /* Inicialmente oculto */\n}\n\n@media screen and (max-width: 767px) {\n\t.content img,\n\t.content p {\n\t\tmargin: 3px;\n\t}\n\n\t.content img {\n\t\twidth: 35%;\n\t}\n\n\timg.details {\n\t\twidth: 80%;\n\t}\n\n\t.link {\n\t\twidth: 70%;\n\t}\n}\n",""]);const a=o},779:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,".container {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\tcolor: white;\n\tfont-family: 'Cairo', sans-serif;\n\tpadding: 30px;\n\tbox-sizing: border-box;\n}\n\n.profile {\n\twidth: 200px;\n\theight: 200px;\n}\n\n.profile-image img {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n\tborder-radius: 50%;\n}\n\n.form-group input {\n\tborder: 2px solid white;\n\tbackground-color: lightgray;\n\tborder-radius: 3px;\n}\n\n.form-actions button {\n\tborder: 2px solid white;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tborder-radius: 3px;\n\tpadding: 5px 10px;\n\tmargin: 5px 0;\n\tmin-width: 170px;\n\tcursor: pointer;\n\tcolor: white;\n}\n@media screen and (max-width: 767px) {\n\t.container {\n\t\talign-items: center;\n\t}\n\n\t.profile {\n\t\twidth: 150px;\n\t\theight: 150px;\n\t}\n\n\t.form-actions button {\n\t\tmin-width: auto;\n\t\twidth: 100%;\n\t}\n}\n",""]);const a=o},791:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"input {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-bottom: 0;\n\tborder: none;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #fff;\n\tborder-radius: 5px;\n\tbox-sizing: border-box; /* Modelo de caja */\n}\n\n::placeholder {\n\tcolor: rgba(30, 21, 22, 1);\n}\n\n#header .close {\n\tfloat: right; /* Se alinea a la derecha */\n\tcursor: pointer;\n}\n\nh1 {\n\tfont-size: 200%;\n\tmargin-top: 0;\n}\n\nlabel {\n\tfont-size: 15px;\n}\n@media screen and (max-width: 767px) {\n\tinput {\n\t\tfont-size: 14px; /* Reduce el tamaño de fuente en dispositivos más pequeños */\n\t}\n\n\th1 {\n\t\tfont-size: 2rem; /* Reduce el tamaño de fuente del título en dispositivos más pequeños */\n\t}\n}\n",""]);const a=o},633:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"a {\n\tcolor: rgba(250, 149, 59, 1);\n\tfont-size: 15px;\n}\n\nbutton {\n\twidth: 100%;\n\tpadding: 10px;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tcursor: pointer; /* Cambio de cursor */\n\tfont-family: 'Noto Traditional Nushu', serif;\n\tfont-size: 110%;\n}\n\nbutton:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\np {\n\tfont-size: 15px;\n}\n",""]);const a=o},583:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos para el botón flotante de abrir el modal */\n#ButtonModal {\n\tposition: fixed;\n\tz-index: 1; /* Se coloca por encima de otros elementos */\n\tbottom: 20px;\n\tright: 20px;\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: white;\n\tfont-size: 35px;\n\twidth: 55px;\n\theight: 55px;\n\tborder-radius: 50%;\n\tborder: 0px;\n\tcursor: pointer;\n}\n\n/* Estilos para el botón de cerrar el modal */\n.modalContainer .close {\n\tfloat: right; /* Se alinea a la derecha */\n\tcursor: pointer;\n}\n\n::placeholder {\n\tcolor: rgba(30, 21, 22, 1);\n}\n/* Estilos del formulario dentro del modal */\n.my-form {\n\tposition: fixed; /* Se fija el formulario en una posición específica */\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%); /* Centrado horizontal y vertical */\n\tbackground-color: rgba(30, 21, 22, 1);\n\tz-index: 2; /* Colocado por encima del modal */\n\tpadding: 20px;\n\tbox-shadow: 0 0 20px #000000; /* Sombra */\n\tborder-radius: 2rem;\n\theight: 80vh; /* Altura del 80% de la ventana */\n\twidth: 50%; /* Ancho del 50% de la ventana */\n\toverflow-x: hidden; /* Oculta el desbordamiento horizontal */\n\toverflow-y: auto; /* Habilita el desplazamiento vertical */\n}\n\n/*oculta la scrollbar */\n.my-form::-webkit-scrollbar {\n\tdisplay: none;\n}\n\n.modalContainer {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 9999;\n}\n\n/* Crea el velo detras del modal*/\n.modal-overlay {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.7);\n\tz-index: -1;\n}\n\n/*Responsive */\n@media screen and (max-width: 767px) {\n\t#ButtonModal {\n\t\twidth: 60px;\n\t\theight: 60px;\n\t\tfont-size: 40px;\n\t}\n\n\t.modal-content {\n\t\tpadding: 10px;\n\t}\n\n\t.my-form {\n\t\tpadding: 10px;\n\t}\n\n\t.my-form input[type='text'],\n\t.my-form input[type='date'] {\n\t\tpadding: 8px;\n\t\tfont-size: 14px;\n\t}\n\n\t.my-form button {\n\t\tpadding: 8px;\n\t\tfont-size: 14px;\n\t}\n}\n\n/* Estilos del contenido del modal */\n.modal-content {\n\tcolor: #fff;\n\tpadding: 20px;\n\tborder-radius: 10px;\n\tposition: relative;\n\tz-index: 10000; /* Colocado por encima de todos los elementos */\n\toverflow: hidden; /* Oculta el desbordamiento */\n\tdisplay: flex;\n\tjustify-content: center; /* Centrado horizontal */\n\talign-items: center; /* Centrado vertical */\n\tfont-family: 'Cairo', sans-serif;\n\tfont-size: 80%;\n\theight: 80vh; /* Altura del 80% de la ventana */\n}\n\n.my-form label {\n\tcolor: #fff;\n}\n\n/* Estilos para los campos de entrada de texto y fecha */\n.my-form input[type='text'],\n.my-form input[type='date'] {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-bottom: 0;\n\tborder: none;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #fff;\n\tborder-radius: 5px;\n\tbox-sizing: border-box; /* Modelo de caja */\n}\n\n/* Estilos para los checkboxes */\n.my-form input[type='checkbox'] {\n\tmargin-right: 5px;\n}\n\n/* Estilos para el botón de submit */\n.my-form button {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-top: 20px;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tcursor: pointer; /* Cambio de cursor */\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\n/* Estilos cuando se pasa el cursor sobre el botón */\n.my-form button:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\n/* Estilos para los checkboxes de género */\n#checkboxes label {\n\tmargin-right: 10px;\n}\n\n#checkboxes {\n\tdisplay: grid; /* Se muestra como grid */\n\tgrid-template-rows: repeat(2, 1fr); /* Se repite la plantilla de filas */\n\tgrid-auto-flow: column; /* Se muestran en columnas */\n}\n\n/* Estilos para la imagen de cerrar el modal, el icono de x */\n.close img {\n\twidth: 70%;\n\theight: auto;\n\tcursor: pointer; /* Cambia el cursor al pasar sobre el botón */\n}\n",""]);const a=o},775:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"b {\n\ttext-transform: uppercase; /* Convierte el texto a mayúsculas */\n\topacity: 70%;\n}\n\np {\n\tdisplay: block; /* Hace que el párrafo sea un bloque de texto */\n\twidth: 100%; /* Establece un ancho del 100% */\n}\n\n#description {\n\tmargin-bottom: 10%;\n}\n@media screen and (max-width: 767px) {\n\tb {\n\t\tfont-size: 1.2rem; /* Reduce el tamaño de fuente en dispositivos más pequeños */\n\t}\n\n\tp {\n\t\tfont-size: 1rem; /* Reduce el tamaño de fuente en dispositivos más pequeños */\n\t}\n\n\t#description {\n\t\tmargin-bottom: 5%; /* Reduce el margen inferior en dispositivos más pequeños */\n\t}\n}\n",""]);const a=o},213:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#cards {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmovie-card {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\nh1 {\n\ttext-transform: uppercase;\n\tcolor: white;\n\tfont-family: 'Cairo', sans-serif;\n\t@media (max-width: 576px) {\n\t\tfont-size: 5vw; /* Tamaño de fuente más grande para pantallas pequeñas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n\nh1:hover {\n\tcolor: rgba(233, 13, 90, 1);\n}\n",""]);const a=o},891:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#favoriteMovies {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmovie-card {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n",""]);const a=o},809:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},9:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},466:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},207:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n\tfont-family: 'Noto Traditional Nushu', serif;\n\tcolor: white;\n\t/* position: relative; */\n}\n\n#banner {\n\tposition: relative;\n\tz-index: 1;\n}\n\n#figure {\n\tposition: absolute;\n\ttop: -60%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tz-index: 2; /* Para asegurarse de que figure esté encima del banner */\n}\n\n#content {\n\tmargin-top: 20%;\n\tdisplay: flex;\n\tposition: relative;\n\tmargin-left: 10%;\n\tmargin-right: 10%;\n}\n\n#info {\n\tflex: 2; /* Para que ocupe 2/3 del espacio */\n\tborder-right-color: white;\n\tborder-right-width: 20px;\n\tpadding-right: 20%;\n}\n\n/* #content::after {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: calc(4 / 5 * 100%);\n\twidth: 1px;\n\tbackground-color: white;\n} */\n\n#actions {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-end; /* Centra los elementos horizontalmente */\n\tflex: 1; /* Para que ocupe 1/3 del espacio */\n}\n\n/* Estilos para pantallas más pequeñas */\n@media screen and (max-width: 767px) {\n\t#content {\n\t\tmargin-top: 40%;\n\t\tflex-direction: column; /* Cambiar la dirección del flex para columnas */\n\t}\n\n\t#info {\n\t\tborder-right: none; /* Eliminar el borde derecho en pantallas pequeñas */\n\t\tpadding-right: 0; /* Eliminar el relleno derecho */\n\t}\n\n\t#content::after {\n\t\tleft: 0; /* Colocar la línea vertical al principio */\n\t\ttop: calc(2 / 3 * 100%); /* Colocar la línea al cuarto 4/5 de la pantalla */\n\t\twidth: 100%; /* Ancho completo */\n\t\theight: 1px; /* Altura de la línea */\n\t}\n\n\t#actions {\n\t\torder: -1; /* Cambiar el orden para que aparezca arriba */\n\t\talign-items: center; /* Alinear los elementos horizontalmente */\n\t\tpadding-top: 10px; /* Añadir espacio arriba */\n\t\tdisplay: grid; /* Usar grid layout para organizar los elementos */\n\t\tgrid-template-columns: repeat(2, 1fr); /* Crear 2 columnas de igual tamaño */\n\t\tgrid-gap: 10px; /* Espacio entre las celdas */\n\t\tmargin-bottom: 20px;\n\t}\n\n\t/* Alinear elementos de la segunda columna hacia la derecha */\n\t#actions my-actionandicon:nth-child(even) {\n\t\tjustify-self: end;\n\t}\n\n\t#content::after {\n\t\tdisplay: none;\n\t}\n}\n",""]);const a=o},858:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(601),r=n.n(i),s=n(314),o=n.n(s),a=n(417),c=n.n(a),l=new URL(n(528),n.b),h=o()(r()),u=c()(l);h.push([t.id,`* {\n\tcolor: #fff;\n\tfont-family: 'Cairo', sans-serif;\n}\n\n#form {\n\tposition: fixed;\n\ttop: 40%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%); /* Centrado horizontal y vertical */\n\tbackground-color: rgba(30, 21, 22, 1);\n\tpadding: 3%;\n\tbox-shadow: 0 0 20px #000000; /* Sombra */\n\tborder-radius: 2rem;\n\theight: auto;\n\twidth: auto;\n\toverflow-x: hidden; /* Oculta el desbordamiento horizontal */\n\toverflow-y: auto; /* Habilita el desplazamiento vertical */\n\tcolor: #fff;\n\tfont-family: 'Cairo', sans-serif;\n\tz-index: 2;\n}\n\na {\n\tcolor: rgba(250, 149, 59, 1);\n}\n\n#extrainfo {\n\tposition: fixed;\n\tbottom: 5%; /* Ajusta esta cantidad para colocar la sección más abajo */\n\tleft: 50%;\n\ttransform: translate(-50%, 0); /* Ajusta la transformación vertical a 0 */\n\twidth: 100%;\n\ttext-align: center; /* Alinea el contenido al centro */\n\tz-index: 3; /* Asegura que #extrainfo esté por encima del formulario */\n}\n\n#extrainfo-content {\n\twidth: 100%;\n}\n\n#extrainfo-content hr {\n\tdisplay: inline-block;\n\twidth: 30%; /* Ajusta este valor según el ancho deseado */\n\tmargin: 0 10px; /* Espacio entre elementos */\n\tborder-top: 1px solid rgba(255, 255, 255, 0.5); /* Cambia el color y estilo según lo necesario */\n\tvertical-align: middle; /* Alinea verticalmente */\n}\n\n#extrainfo-content p {\n\tdisplay: inline-block;\n\tmargin: 0 10px; /* Espacio entre elementos */\n}\n\nbutton {\n\tdisplay: inline-block;\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tpadding: 10px 20px;\n\tcursor: pointer;\n\tfont-size: 16px;\n\tmargin: 10px;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\nbutton:hover {\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\n:host {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tbackground-image: url(${u});\n\tbackground-size: cover;\n\tbackground-position: center top 30%;\n\tmargin: 0;\n\tpadding: 10%;\n\tcolor: white;\n\theight: 100%;\n\tz-index: 1;\n}\n@media screen and (max-width: 767px) {\n\t#extrainfo {\n\t\tbottom: 10%;\n\t}\n\n\t#extrainfo-content hr {\n\t\twidth: 10%;\n\t}\n}\n\n#my-sessionform input {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-bottom: 0;\n\tborder: none;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #fff;\n\tborder-radius: 5px;\n\tbox-sizing: border-box; /* Modelo de caja */\n}\n\n#my-sessionform ::placeholder {\n\tcolor: rgba(30, 21, 22, 1);\n}\n\n#my-sessionform #header .close {\n\tfloat: right; /* Se alinea a la derecha */\n\tcursor: pointer;\n}\n\n#my-sessionform h1 {\n\tfont-size: 200%;\n\tmargin-top: 0;\n}\n\n#my-sessionform label {\n\tfont-size: 15px;\n}\n@media screen and (max-width: 767px) {\n\t#my-sessionform input {\n\t\tfont-size: 14px; /* Reduce el tamaño de fuente en dispositivos más pequeños */\n\t}\n\n\t#my-sessionform h1 {\n\t\tfont-size: 2rem; /* Reduce el tamaño de fuente del título en dispositivos más pequeños */\n\t}\n}\n\n#my-submitandterms a {\n\tcolor: rgba(250, 149, 59, 1);\n\tfont-size: 15px;\n}\n\n#my-submitandterms button {\n\twidth: 100%;\n\tpadding: 10px;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tcursor: pointer; /* Cambio de cursor */\n\tfont-family: 'Noto Traditional Nushu', serif;\n\tfont-size: 110%;\n}\n\n#my-submitandterms button:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\n#my-submitandterms p {\n\tfont-size: 15px;\n}\n`,""]);const d=h},868:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(601),r=n.n(i),s=n(314),o=n.n(s),a=n(417),c=n.n(a),l=new URL(n(473),n.b),h=o()(r()),u=c()(l);h.push([t.id,`:host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n\n#modal-button,\n#favorites {\n\twidth: 70%;\n\theight: 200px;\n\tmargin: 30px auto;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 2rem;\n\ttext-transform: uppercase;\n\tborder-radius: 30px;\n\tcolor: white;\n\tbackground-image: url(${u});\n\tbackground-position: center;\n}\n\n#lists button {\n\tposition: relative; /* Asegura que el botón sea relativo para que se pueda posicionar el velo */\n\toverflow: hidden; /* Evita que el velo se salga del botón */\n\twidth: 70%;\n\theight: 200px;\n\tmargin: 30px auto;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 2rem;\n\ttext-transform: uppercase;\n\tborder-radius: 30px;\n\tcolor: white;\n\tbackground-position: center;\n\tbackground-size: cover; /* La imagen de fondo se ajustará para cubrir todo el botón */\n\tposition: relative; /* Asegura que el botón sea relativo para que se pueda posicionar el velo */\n}\n\n#lists button::before {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.5); /* Color negro con opacidad del 50% */\n\tz-index: 1; /* Coloca el velo sobre la imagen de fondo */\n}\n\n#lists button img {\n\tposition: relative; /* Asegura que la imagen esté por encima del velo */\n\tz-index: 2; /* Coloca la imagen por encima del velo */\n}\n`,""]);const d=h},375:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},82:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},307:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(601),r=n.n(i),s=n(314),o=n.n(s),a=n(417),c=n.n(a),l=new URL(n(528),n.b),h=o()(r()),u=c()(l);h.push([t.id,`#main {\n\tposition: fixed;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tbackground-color: rgba(30, 21, 22, 1);\n\tpadding: 3%;\n\tbox-shadow: 0 0 20px #000000;\n\tborder-radius: 2rem;\n\theight: auto;\n\twidth: auto;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\tcolor: #fff;\n\tfont-family: 'Cairo', sans-serif;\n\tz-index: 2;\n\tmargin-top: 10px;\n\twidth: 50%; /* Ajustar el ancho del contenedor */\n\tmax-width: 500px; /* Establecer un ancho máximo */\n}\n\na {\n\tcolor: rgba(250, 149, 59, 1);\n\tcursor: pointer;\n}\n\n#my-sessionform {\n\tmargin-bottom: 20px; /* Agregar espacio entre el formulario y el botón */\n}\n\n#my-submitandterms {\n\tmargin-bottom: 10px; /* Agregar espacio entre el botón y el enlace */\n}\n\ninput {\n\tfont-size: 16px; /* Mantener el tamaño de fuente predeterminado */\n\tmargin-bottom: 10px; /* Agregar espacio entre los campos de entrada */\n}\n:host {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tbackground-image: url(${u});\n\tbackground-size: cover;\n\tbackground-position: center top 30%;\n\tmargin: 0;\n\tpadding: 10%;\n\tcolor: white;\n\theight: 100%;\n}\n\n@media screen and (max-width: 767px) {\n\tsection {\n\t\twidth: 70%;\n\t\theight: 90%;\n\t}\n}\n\n#my-sessionform input {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-bottom: 0;\n\tborder: none;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #fff;\n\tborder-radius: 5px;\n\tbox-sizing: border-box; /* Modelo de caja */\n}\n\n#my-sessionform ::placeholder {\n\tcolor: rgba(30, 21, 22, 1);\n}\n\n#my-sessionform #header .close {\n\tfloat: right; /* Se alinea a la derecha */\n\tcursor: pointer;\n}\n\n#my-sessionform h1 {\n\tfont-size: 200%;\n\tmargin-top: 0;\n}\n\n#my-sessionform label {\n\tfont-size: 15px;\n}\n@media screen and (max-width: 767px) {\n\t#my-sessionform input {\n\t\tfont-size: 14px; /* Reduce el tamaño de fuente en dispositivos más pequeños */\n\t}\n\n\t#my-sessionform h1 {\n\t\tfont-size: 2rem; /* Reduce el tamaño de fuente del título en dispositivos más pequeños */\n\t}\n}\n\n#my-submitandterms a {\n\tcolor: rgba(250, 149, 59, 1);\n\tfont-size: 15px;\n}\n\n#my-submitandterms button {\n\twidth: 100%;\n\tpadding: 10px;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tcursor: pointer; /* Cambio de cursor */\n\tfont-family: 'Noto Traditional Nushu', serif;\n\tfont-size: 110%;\n}\n\n#my-submitandterms button:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\n#my-submitandterms p {\n\tfont-size: 15px;\n}\n`,""]);const d=h},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);i&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),e.push(h))}},e}},417:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{t.exports=function(t){return t[1]}},473:(t,e,n)=>{t.exports=n.p+"b9ed50904b789d681f2b.png"},528:(t,e,n)=>{t.exports=n.p+"5fa3712916bc3774d951.png"}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,exports:{}};return t[i](s,s.exports,n),s.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,(()=>{var t,e,i,r,s;!function(t){t.GET="GET"}(t||(t={})),function(t){t.GET2="GET2"}(e||(e={})),function(t){t.GET3="GET3"}(i||(i={})),function(t){t.GET4="GET4"}(r||(r={})),function(t){t.NAVIGATE="NAVIGATE"}(s||(s={}));const o=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=r>>2,h=(3&r)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(u=64)),i.push(n[l],n[h],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const r=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==r||null==s||null==o||null==a)throw new c;const l=r<<2|s>>4;if(i.push(l),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class c extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(t){return function(t){const e=o(t);return a.encodeByteArray(e,!0)}(t).replace(/\./g,"")},h=function(t){try{return a.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},u=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&h(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},d=t=>{var e,n;return null===(n=null===(e=u())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},p=()=>{var t;return null===(t=u())||void 0===t?void 0:t.config},m=t=>{var e;return null===(e=u())||void 0===e?void 0:e[`_${t}`]};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function v(){try{return"object"==typeof indexedDB}catch(t){return!1}}class y extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}}class w{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(b,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new y(i,o,n)}}const b=/\{\$([^}]+)}/g;function E(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(_(n)&&_(s)){if(!E(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function _(t){return null!==t&&"object"==typeof t}function T(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function I(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function C(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class S{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=k),void 0===i.error&&(i.error=k),void 0===i.complete&&(i.complete=k);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function k(){}function x(t){return t&&t._delegate?t._delegate:t}class A{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const R="[DEFAULT]";class N{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new f;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:R})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=R){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=R){return this.instances.has(t)}getOptions(t=R){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===R?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=R){return this.component?this.component.multipleInstances?t:R:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class D{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new N(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const L=[];var O;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(O||(O={}));const M={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},P=O.INFO,F={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},U=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=F[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class j{constructor(t){this.name=t,this._logLevel=P,this._logHandler=U,this._userLogHandler=null,L.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in O))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?M[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...t),this._logHandler(this,O.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...t),this._logHandler(this,O.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,O.INFO,...t),this._logHandler(this,O.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,O.WARN,...t),this._logHandler(this,O.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...t),this._logHandler(this,O.ERROR,...t)}}const V=(t,e)=>e.some((e=>t instanceof e));let $,z;const q=new WeakMap,B=new WeakMap,H=new WeakMap,G=new WeakMap,K=new WeakMap;let W={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return B.get(t);if("objectStoreNames"===e)return t.objectStoreNames||H.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return J(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Q(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(X(this),t),J(q.get(this))}:function(...t){return J(e.apply(X(this),t))}:function(t,...n){const i=e.call(X(this),t,...n);return H.set(i,t.sort?t.sort():[t]),J(i)}:(t instanceof IDBTransaction&&function(t){if(B.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));B.set(t,e)}(t),V(t,$||($=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,W):t);var e}function J(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(J(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&q.set(e,t)})).catch((()=>{})),K.set(e,t),e}(t);if(G.has(t))return G.get(t);const e=Q(t);return e!==t&&(G.set(t,e),K.set(e,t)),e}const X=t=>K.get(t),Y=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],tt=new Map;function et(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(tt.get(e))return tt.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Z.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Y.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return tt.set(e,s),s}var nt;nt=W,W={...nt,get:(t,e,n)=>et(t,e)||nt.get(t,e,n),has:(t,e)=>!!et(t,e)||nt.has(t,e)};class it{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const rt="@firebase/app",st="0.9.26",ot=new j("@firebase/app"),at="[DEFAULT]",ct={[rt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},lt=new Map,ht=new Map;function ut(t,e){try{t.container.addComponent(e)}catch(n){ot.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function dt(t){const e=t.name;if(ht.has(e))return ot.debug(`There were multiple attempts to register component ${e}.`),!1;ht.set(e,t);for(const e of lt.values())ut(e,t);return!0}function pt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const mt=new w("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ft{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new A("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw mt.create("app-deleted",{appName:this._name})}}const gt="10.7.2";function vt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:at,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw mt.create("bad-app-name",{appName:String(r)});if(n||(n=p()),!n)throw mt.create("no-options");const s=lt.get(r);if(s){if(E(n,s.options)&&E(i,s.config))return s;throw mt.create("duplicate-app",{appName:r})}const o=new D(r);for(const t of ht.values())o.addComponent(t);const a=new ft(n,i,o);return lt.set(r,a),a}function yt(t=at){const e=lt.get(t);if(!e&&t===at&&p())return vt();if(!e)throw mt.create("no-app",{appName:t});return e}function wt(t,e,n){var i;let r=null!==(i=ct[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void ot.warn(t.join(" "))}dt(new A(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const bt="firebase-heartbeat-database",Et=1,_t="firebase-heartbeat-store";let Tt=null;function It(){return Tt||(Tt=function(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=J(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(J(o.result),t.oldVersion,t.newVersion,J(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(bt,Et,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(_t)}catch(t){console.warn(t)}}}).catch((t=>{throw mt.create("idb-open",{originalErrorMessage:t.message})}))),Tt}async function Ct(t,e){try{const n=(await It()).transaction(_t,"readwrite"),i=n.objectStore(_t);await i.put(e,St(t)),await n.done}catch(t){if(t instanceof y)ot.warn(t.message);else{const e=mt.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});ot.warn(e.message)}}}function St(t){return`${t.name}!${t.options.appId}`}class kt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new At(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xt();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=xt(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Rt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Rt(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function xt(){return(new Date).toISOString().substring(0,10)}class At{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!v()&&new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await It();return await e.transaction(_t).objectStore(_t).get(St(t))}catch(t){if(t instanceof y)ot.warn(t.message);else{const e=mt.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});ot.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ct(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ct(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Rt(t){return l(JSON.stringify({version:2,heartbeats:t})).length}function Nt(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}dt(new A("platform-logger",(t=>new it(t)),"PRIVATE")),dt(new A("heartbeat",(t=>new kt(t)),"PRIVATE")),wt(rt,st,""),wt(rt,st,"esm2017"),wt("fire-js",""),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const Dt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Lt=new w("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ot=new j("@firebase/auth");function Mt(t,...e){Ot.logLevel<=O.ERROR&&Ot.error(`Auth (${gt}): ${t}`,...e)}function Pt(t,...e){throw Ut(t,...e)}function Ft(t,...e){return Ut(t,...e)}function Ut(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Lt.create(t,...e)}function jt(t,e,...n){if(!t)throw Ut(e,...n)}function Vt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mt(e),new Error(e)}function $t(t,e){t||Vt(e)}function zt(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function qt(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Bt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===qt()||"https:"===qt()||function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Ht{constructor(t,e){this.shortDelay=t,this.longDelay=e,$t(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Bt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gt(t,e){$t(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Kt{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Wt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Qt=new Ht(3e4,6e4);function Jt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xt(t,e,n,i,r={}){return Yt(t,r,(async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=T(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),Kt.fetch()(te(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},r))}))}async function Yt(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Wt),e);try{const e=new ne(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw ie(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ie(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ie(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw ie(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(t,e,n){const i=Object.assign(Object.assign({},Dt()),{[e]:n});return new w("auth","Firebase",i).create(e,{appName:t.name})}(t,a,o);Pt(t,a)}}catch(e){if(e instanceof y)throw e;Pt(t,"network-request-failed",{message:String(e)})}}async function Zt(t,e,n,i,r={}){const s=await Xt(t,e,n,i,r);return"mfaPendingCredential"in s&&Pt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function te(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Gt(t.config,r):`${t.config.apiScheme}://${r}`}function ee(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ne{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(Ft(this.auth,"network-request-failed"))),Qt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ie(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ft(t,e,i);return r.customData._tokenResponse=n,r}function re(t){return void 0!==t&&void 0!==t.enterprise}class se{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return ee(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}}function oe(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function ae(t){return 1e3*Number(t)}function ce(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return Mt("JWT malformed, contained fewer than 3 sections"),null;try{const t=h(n);return t?JSON.parse(t):(Mt("Failed to decode base64 JWT payload"),null)}catch(t){return Mt("Caught error parsing JWT payload as JSON",null==t?void 0:t.toString()),null}}async function le(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof y&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class he{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class ue{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=oe(this.lastLoginAt),this.creationTime=oe(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function de(t){var e;const n=t.auth,i=await t.getIdToken(),r=await le(t,async function(t,e){return Xt(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));jt(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=Nt(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=t.providerData,l=o,[...c.filter((t=>!l.some((e=>e.providerId===t.providerId)))),...l]);var c,l;const h=t.isAnonymous,u=!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!h&&u,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ue(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}class pe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){jt(t.idToken,"internal-error"),jt(void 0!==t.idToken,"internal-error"),jt(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=ce(t);return jt(e,"internal-error"),jt(void 0!==e.exp,"internal-error"),jt(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return jt(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await Yt(t,{},(async()=>{const n=T({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=te(t,i,"/v1/token",`key=${r}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Kt.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new pe;return n&&(jt("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(jt("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(jt("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new pe,this.toJSON())}_performRefresh(){return Vt("not implemented")}}function me(t,e){jt("string"==typeof t||void 0===t,"internal-error",{appName:e})}class fe{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=Nt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new he(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ue(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await le(this,this.stsTokenManager.getToken(this.auth,t));return jt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=x(t),i=await n.getIdToken(e),r=ce(i);jt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:oe(ae(r.auth_time)),issuedAtTime:oe(ae(r.iat)),expirationTime:oe(ae(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=x(t);await de(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(jt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new fe(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){jt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await de(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await le(this,async function(t,e){return Xt(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,c,l;const h=null!==(n=e.displayName)&&void 0!==n?n:void 0,u=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=e.photoURL)&&void 0!==s?s:void 0,m=null!==(o=e.tenantId)&&void 0!==o?o:void 0,f=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=e.createdAt)&&void 0!==c?c:void 0,v=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:E,stsTokenManager:_}=e;jt(y&&_,t,"internal-error");const T=pe.fromJSON(this.name,_);jt("string"==typeof y,t,"internal-error"),me(h,t.name),me(u,t.name),jt("boolean"==typeof w,t,"internal-error"),jt("boolean"==typeof b,t,"internal-error"),me(d,t.name),me(p,t.name),me(m,t.name),me(f,t.name),me(g,t.name),me(v,t.name);const I=new fe({uid:y,auth:t,email:u,emailVerified:w,displayName:h,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:m,stsTokenManager:T,createdAt:g,lastLoginAt:v});return E&&Array.isArray(E)&&(I.providerData=E.map((t=>Object.assign({},t)))),f&&(I._redirectEventId=f),I}static async _fromIdTokenResponse(t,e,n=!1){const i=new pe;i.updateFromServerResponse(e);const r=new fe({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await de(r),r}}const ge=new Map;function ve(t){$t(t instanceof Function,"Expected a class definition");let e=ge.get(t);return e?($t(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ge.set(t,e),e)}class ye{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}ye.type="NONE";const we=ye;function be(t,e,n){return`firebase:${t}:${e}:${n}`}class Ee{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=be(this.userKey,i.apiKey,r),this.fullPersistenceKey=be("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?fe._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new Ee(ve(we),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||ve(we);const s=be(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const i=fe._fromJSON(t,e);n!==r&&(o=i),r=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(t){}}))),new Ee(r,t,n)):new Ee(r,t,n)}}function _e(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Se(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Te(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xe(e))return"Blackberry";if(Ae(e))return"Webos";if(Ie(e))return"Safari";if((e.includes("chrome/")||Ce(e))&&!e.includes("edge/"))return"Chrome";if(ke(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Te(t=g()){return/firefox\//i.test(t)}function Ie(t=g()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ce(t=g()){return/crios\//i.test(t)}function Se(t=g()){return/iemobile/i.test(t)}function ke(t=g()){return/android/i.test(t)}function xe(t=g()){return/blackberry/i.test(t)}function Ae(t=g()){return/webos/i.test(t)}function Re(t=g()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ne(t=g()){return Re(t)||ke(t)||Ae(t)||xe(t)||/windows phone/i.test(t)||Se(t)}function De(t,e=[]){let n;switch(t){case"Browser":n=_e(g());break;case"Worker":n=`${_e(g())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gt}/${i}`}class Le{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(t){i(t)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(t){e.reverse();for(const t of e)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==t?void 0:t.message})}}}class Oe{constructor(t){var e,n,i,r;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=s.minPasswordLength)&&void 0!==e?e:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=t.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=t.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}class Me{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fe(this),this.idTokenSubscription=new Fe(this),this.beforeStateQueue=new Le(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ve(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Ee.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(t){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return jt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await de(t)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?x(t):null;return e&&jt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&jt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(ve(t))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await async function(t,e={}){return Xt(t,"GET","/v2/passwordPolicy",Jt(t,e))}(this),e=new Oe(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new w("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise(((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged((()=>{n(),t()}),e)}}))}async revokeAccessToken(t){if(this.currentUser){const e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(e.tenantId=this.tenantId),await async function(t,e){return Xt(t,"POST","/v2/accounts:revokeToken",Jt(t,e))}(this,e)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ve(t)||this._popupRedirectResolver;jt(e,this,"argument-error"),this.redirectPersistenceManager=await Ee.create(this,[ve(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(jt(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"==typeof e){const r=t.addObserver(e,n,i);return()=>{s=!0,r()}}{const n=t.addObserver(e);return()=>{s=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return jt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=De(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null==e?void 0:e.error)&&function(t,...e){Ot.logLevel<=O.WARN&&Ot.warn(`Auth (${gt}): ${t}`,...e)}(`Error while retrieving App Check token: ${e.error}`),null==e?void 0:e.token}}function Pe(t){return x(t)}class Fe{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new S(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return jt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ue(t){return new Promise(((e,n)=>{const i=document.createElement("script");var r,s;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=Ft("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",(null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:document).appendChild(i)}))}function je(t){return`__${t}${Math.floor(1e6*Math.random())}`}class Ve{constructor(t){this.type="recaptcha-enterprise",this.auth=Pe(t)}async verify(t="verify",e=!1){function n(e,n,i){const r=window.grecaptcha;re(r)?r.enterprise.ready((()=>{r.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((t,i)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{(async function(t,e){return Xt(t,"GET","/v2/recaptchaConfig",Jt(t,e))})(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new se(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))})(this.auth).then((r=>{if(!e&&re(window.grecaptcha))n(r,t,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));Ue("https://www.google.com/recaptcha/enterprise.js?render="+r).then((()=>{n(r,t,i)})).catch((t=>{i(t)}))}})).catch((t=>{i(t)}))}))}}async function $e(t,e,n,i=!1){const r=new Ve(t);let s;try{s=await r.verify(n)}catch(t){s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ze(t,e,n,i){var r;if(null===(r=t._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await $e(t,e,n,"getOobCode"===n);return i(t,r)}return i(t,e).catch((async r=>{if("auth/missing-recaptcha-token"===r.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const r=await $e(t,e,n,"getOobCode"===n);return i(t,r)}return Promise.reject(r)}))}function qe(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Be(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class He{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Vt("not implemented")}_getIdTokenResponse(t){return Vt("not implemented")}_linkToIdToken(t,e){return Vt("not implemented")}_getReauthenticationResolver(t){return Vt("not implemented")}}async function Ge(t,e){return Xt(t,"POST","/v1/accounts:signUp",e)}async function Ke(t,e){return Zt(t,"POST","/v1/accounts:signInWithPassword",Jt(t,e))}class We extends He{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new We(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new We(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return ze(t,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ke);case"emailLink":return async function(t,e){return Zt(t,"POST","/v1/accounts:signInWithEmailLink",Jt(t,e))}(t,{email:this._email,oobCode:this._password});default:Pt(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return ze(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ge);case"emailLink":return async function(t,e){return Zt(t,"POST","/v1/accounts:signInWithEmailLink",Jt(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:Pt(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Qe(t,e){return Zt(t,"POST","/v1/accounts:signInWithIdp",Jt(t,e))}class Je extends He{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Je(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Pt("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=Nt(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Je(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return Qe(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Qe(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Qe(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=T(e)}return t}}const Xe={USER_NOT_FOUND:"user-not-found"};class Ye extends He{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Ye({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Ye({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return Zt(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await Zt(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,e));if(n.temporaryProof)throw ie(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return Zt(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Xe)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new Ye({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Ze{constructor(t){var e,n,i,r,s,o;const a=I(C(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);jt(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=I(C(t)).link,n=e?I(C(e)).deep_link_id:null,i=I(C(t)).deep_link_id;return(i?I(C(i)).link:null)||i||n||e||t}(t);try{return new Ze(e)}catch(t){return null}}}class tn{constructor(){this.providerId=tn.PROVIDER_ID}static credential(t,e){return We._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Ze.parseLink(e);return jt(n,"argument-error"),We._fromEmailAndCode(t,n.code,n.tenantId)}}tn.PROVIDER_ID="password",tn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",tn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class en{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class nn extends en{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class rn extends nn{constructor(){super("facebook.com")}static credential(t){return Je._fromParams({providerId:rn.PROVIDER_ID,signInMethod:rn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return rn.credentialFromTaggedObject(t)}static credentialFromError(t){return rn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return rn.credential(t.oauthAccessToken)}catch(t){return null}}}rn.FACEBOOK_SIGN_IN_METHOD="facebook.com",rn.PROVIDER_ID="facebook.com";class sn extends nn{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Je._fromParams({providerId:sn.PROVIDER_ID,signInMethod:sn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return sn.credentialFromTaggedObject(t)}static credentialFromError(t){return sn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return sn.credential(e,n)}catch(t){return null}}}sn.GOOGLE_SIGN_IN_METHOD="google.com",sn.PROVIDER_ID="google.com";class on extends nn{constructor(){super("github.com")}static credential(t){return Je._fromParams({providerId:on.PROVIDER_ID,signInMethod:on.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return on.credentialFromTaggedObject(t)}static credentialFromError(t){return on.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return on.credential(t.oauthAccessToken)}catch(t){return null}}}on.GITHUB_SIGN_IN_METHOD="github.com",on.PROVIDER_ID="github.com";class an extends nn{constructor(){super("twitter.com")}static credential(t,e){return Je._fromParams({providerId:an.PROVIDER_ID,signInMethod:an.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return an.credentialFromTaggedObject(t)}static credentialFromError(t){return an.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return an.credential(e,n)}catch(t){return null}}}async function cn(t,e){return Zt(t,"POST","/v1/accounts:signUp",Jt(t,e))}an.TWITTER_SIGN_IN_METHOD="twitter.com",an.PROVIDER_ID="twitter.com";class ln{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await fe._fromIdTokenResponse(t,n,i),s=hn(n);return new ln({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=hn(n);return new ln({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function hn(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class un extends y{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,un.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new un(t,e,n,i)}}function dn(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw un._fromErrorAndOperation(t,n,e,i);throw n}))}async function pn(t,e,n=!1){const i="signIn",r=await dn(t,i,e),s=await ln._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function mn(t){const e=Pe(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}new WeakMap;const fn="__sak";class gn{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(fn,"1"),this.storage.removeItem(fn),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class vn extends gn{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=g();return Ie(t)||Re(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Ne(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);!function(){const t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||10!==document.documentMode||r===t.newValue||t.newValue===t.oldValue?i():setTimeout(i,10)}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}vn.type="LOCAL";const yn=vn;class wn extends gn{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}wn.type="SESSION";const bn=wn;class En{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new En(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function _n(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}En.receivers=[];class Tn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=_n("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function In(){return window}function Cn(){return void 0!==In().WorkerGlobalScope&&"function"==typeof In().importScripts}const Sn="firebaseLocalStorageDb",kn="firebaseLocalStorage",xn="fbase_key";class An{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function Rn(t,e){return t.transaction([kn],e?"readwrite":"readonly").objectStore(kn)}function Nn(){const t=indexedDB.open(Sn,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(kn,{keyPath:xn})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(kn)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(Sn);return new An(t).toPromise()}(),e(await Nn()))}))}))}async function Dn(t,e,n){const i=Rn(t,!0).put({[xn]:e,value:n});return new An(i).toPromise()}function Ln(t,e){const n=Rn(t,!0).delete(e);return new An(n).toPromise()}class On{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Nn()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=En._getInstance(Cn()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Tn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Nn();return await Dn(t,fn,"1"),await Ln(t,fn),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>Dn(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=Rn(t,!1).get(e),i=await new An(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>Ln(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=Rn(t,!1).getAll();return new An(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}On.type="LOCAL";const Mn=On;je("rcb"),new Ht(3e4,6e4);class Pn{constructor(t){this.providerId=Pn.PROVIDER_ID,this.auth=Pe(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var i;const r=await n.verify();try{let s;if(jt("string"==typeof r,t,"argument-error"),jt("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){jt("enroll"===e.type,t,"internal-error");const n=await function(t,e){return Xt(t,"POST","/v2/accounts/mfaEnrollment:start",Jt(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{jt("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;jt(n,t,"missing-multi-factor-info");const o=await function(t,e){return Xt(t,"POST","/v2/accounts/mfaSignIn:start",Jt(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return Xt(t,"POST","/v1/accounts:sendVerificationCode",Jt(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}(this.auth,t,x(e))}static credential(t,e){return Ye._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Pn.credentialFromTaggedObject(e)}static credentialFromError(t){return Pn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?Ye._fromTokenResponse(e,n):null}}Pn.PROVIDER_ID="phone",Pn.PHONE_SIGN_IN_METHOD="phone";class Fn extends He{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Qe(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Qe(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Qe(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Un(t){return pn(t.auth,new Fn(t),t.bypassAuthState)}function jn(t){const{auth:e,user:n}=t;return jt(n,e,"internal-error"),async function(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await le(t,dn(i,r,e,t),n);jt(s.idToken,i,"internal-error");const o=ce(s.idToken);jt(o,i,"internal-error");const{sub:a}=o;return jt(t.uid===a,i,"user-mismatch"),ln._forOperation(t,r,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&Pt(i,"user-mismatch"),t}}(n,new Fn(t),t.bypassAuthState)}async function Vn(t){const{auth:e,user:n}=t;return jt(n,e,"internal-error"),async function(t,e,n=!1){const i=await le(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ln._forOperation(t,"link",i)}(n,new Fn(t),t.bypassAuthState)}class $n{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Un;case"linkViaPopup":case"linkViaRedirect":return Vn;case"reauthViaPopup":case"reauthViaRedirect":return jn;default:Pt(this.auth,"internal-error")}}resolve(t){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zn=new Ht(2e3,1e4);class qn extends $n{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,qn.currentPopupAction&&qn.currentPopupAction.cancel(),qn.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return jt(t,this.auth,"internal-error"),t}async onExecution(){$t(1===this.filter.length,"Popup operations only handle one event");const t=_n();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(Ft(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qn.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,zn.get())};t()}}qn.currentPopupAction=null;const Bn="pendingRedirect",Hn=new Map;class Gn extends $n{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Hn.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return be(Bn,t.config.apiKey,t.name)}(e),i=function(t){return ve(t._redirectPersistence)}(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Hn.set(this.auth._key(),t)}return this.bypassAuthState||Hn.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Kn(t,e){Hn.set(t._key(),e)}async function Wn(t,e,n=!1){const i=Pe(t),r=function(t,e){return e?ve(e):(jt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(i,e),s=new Gn(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class Qn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xn(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Xn(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(Ft(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jn(t))}saveEventToCache(t){this.cachedEventUids.add(Jn(t)),this.lastProcessedEventTime=Date.now()}}function Jn(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Xn({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const Yn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zn=/^https?/;function ti(t){const e=zt(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Zn.test(n))return!1;if(Yn.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const ei=new Ht(3e4,6e4);function ni(){const t=In().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let ii=null;function ri(t){return ii=ii||function(t){return new Promise(((e,n)=>{var i,r,s;function o(){ni(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ni(),n(Ft(t,"network-request-failed"))},timeout:ei.get()})}if(null===(r=null===(i=In().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=In().gapi)||void 0===s?void 0:s.load)){const e=je("iframefcb");return In()[e]=()=>{gapi.load?o():n(Ft(t,"network-request-failed"))},Ue(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw ii=null,t}))}(t),ii}const si=new Ht(5e3,15e3),oi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ai=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ci(t){const e=t.config;jt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gt(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:t.name,v:gt},r=ai.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${T(i).slice(1)}`}const li={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hi{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}const ui=encodeURIComponent("fac");async function di(t,e,n,i,r,s){jt(t.config.authDomain,t,"auth-domain-config-required"),jt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:gt,eventId:r};if(e instanceof en){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof nn){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];const c=await t._getAppCheckToken(),l=c?`#${ui}=${encodeURIComponent(c)}`:"";return`${function({config:t}){return t.emulator?Gt(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${T(a).slice(1)}${l}`}const pi="webStorageSupport",mi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bn,this._completeRedirectFn=Wn,this._overrideRedirectResult=Kn}async _openPopup(t,e,n,i){var r;return $t(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(t,e,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},li),{width:i.toString(),height:r.toString(),top:s,left:o}),l=g().toLowerCase();n&&(a=Ce(l)?"_blank":n),Te(l)&&(e=e||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=g()){var e;return Re(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",a),new hi(null);const u=window.open(e||"",a,h);jt(u,t,"popup-blocked");try{u.focus()}catch(t){}return new hi(u)}(t,await di(t,e,n,zt(),i),_n())}async _openRedirect(t,e,n,i){return await this._originValidation(t),r=await di(t,e,n,zt(),i),In().location.href=r,new Promise((()=>{}));var r}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):($t(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await ri(t),n=In().gapi;return jt(n,t,"internal-error"),e.open({where:document.body,url:ci(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oi,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=Ft(t,"network-request-failed"),s=In().setTimeout((()=>{i(r)}),si.get());function o(){In().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}(t),n=new Qn(t);return e.register("authEvent",(e=>(jt(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(pi,{type:pi},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[pi];void 0!==r&&e(!!r),Pt(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return Xt(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(ti(t))return}catch(t){}Pt(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Ne()||Ie()||Re()}};var fi="@firebase/auth",gi="1.5.1";class vi{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){jt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const yi=m("authIdTokenMaxAge")||300;let wi=null;var bi;bi="Browser",dt(new A("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;jt(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:bi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:De(bi)},c=new Me(n,i,r,a);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ve);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(c,e),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),dt(new A("auth-internal",(t=>(t=>new vi(t))(Pe(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),wt(fi,gi,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(bi)),wt(fi,gi,"esm2017"),wt("firebase","10.7.2","app");var Ei,_i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ti={},Ii=Ii||{},Ci=_i||self;function Si(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ki(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var xi="closure_uid_"+(1e9*Math.random()>>>0),Ai=0;function Ri(t,e,n){return t.call.apply(t.bind,arguments)}function Ni(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Di(t,e,n){return(Di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ri:Ni).apply(null,arguments)}function Li(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Oi(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function Mi(){this.s=this.s,this.o=this.o}Mi.prototype.s=!1,Mi.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,xi)&&t[xi]||(t[xi]=++Ai))},Mi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pi=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Fi(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Ui(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(Si(n)){const e=t.length||0,i=n.length||0;t.length=e+i;for(let r=0;r<i;r++)t[e+r]=n[r]}else t.push(n)}}function ji(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ji.prototype.h=function(){this.defaultPrevented=!0};var Vi=function(){if(!Ci.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};Ci.addEventListener("test",t,e),Ci.removeEventListener("test",t,e)}catch(t){}return t}();function $i(t){return/^[\s\xa0]*$/.test(t)}function zi(){var t=Ci.navigator;return t&&(t=t.userAgent)?t:""}function qi(t){return-1!=zi().indexOf(t)}function Bi(t){return Bi[" "](t),t}Bi[" "]=function(){};var Hi,Gi,Ki,Wi=qi("Opera"),Qi=qi("Trident")||qi("MSIE"),Ji=qi("Edge"),Xi=Ji||Qi,Yi=qi("Gecko")&&!(-1!=zi().toLowerCase().indexOf("webkit")&&!qi("Edge"))&&!(qi("Trident")||qi("MSIE"))&&!qi("Edge"),Zi=-1!=zi().toLowerCase().indexOf("webkit")&&!qi("Edge");function tr(){var t=Ci.document;return t?t.documentMode:void 0}t:{var er="",nr=(Gi=zi(),Yi?/rv:([^\);]+)(\)|;)/.exec(Gi):Ji?/Edge\/([\d\.]+)/.exec(Gi):Qi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gi):Zi?/WebKit\/(\S+)/.exec(Gi):Wi?/(?:Version)[ \/]?(\S+)/.exec(Gi):void 0);if(nr&&(er=nr?nr[1]:""),Qi){var ir=tr();if(null!=ir&&ir>parseFloat(er)){Hi=String(ir);break t}}Hi=er}Ci.document&&Qi?Ki=tr()||parseInt(Hi,10)||void 0:Ki=void 0;var rr=Ki;function sr(t,e){if(ji.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Yi){t:{try{Bi(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:or[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&sr.$.h.call(this)}}Oi(sr,ji);var or={2:"touch",3:"pen",4:"mouse"};sr.prototype.h=function(){sr.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ar="closure_listenable_"+(1e6*Math.random()|0),cr=0;function lr(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++cr,this.fa=this.ia=!1}function hr(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ur(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function dr(t){const e={};for(const n in t)e[n]=t[n];return e}const pr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mr(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<pr.length;e++)n=pr[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function fr(t){this.src=t,this.g={},this.h=0}function gr(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Pi(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(hr(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function vr(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}fr.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=vr(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new lr(e,this.src,s,!!i,r)).ia=n,t.push(e)),e};var yr="closure_lm_"+(1e6*Math.random()|0),wr={};function br(t,e,n,i,r){if(i&&i.once)return _r(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)br(t,e[s],n,i,r);return null}return n=Ar(n),t&&t[ar]?t.O(e,n,ki(i)?!!i.capture:!!i,r):Er(t,e,n,!1,i,r)}function Er(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=ki(r)?!!r.capture:!!r,a=kr(t);if(a||(t[yr]=a=new fr(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){const t=Sr;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Vi||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Cr(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function _r(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)_r(t,e[s],n,i,r);return null}return n=Ar(n),t&&t[ar]?t.P(e,n,ki(i)?!!i.capture:!!i,r):Er(t,e,n,!0,i,r)}function Tr(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Tr(t,e[s],n,i,r);else i=ki(i)?!!i.capture:!!i,n=Ar(n),t&&t[ar]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=vr(s=t.g[e],n,i,r))&&(hr(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=kr(t))&&(e=t.g[e.toString()],t=-1,e&&(t=vr(e,n,i,r)),(n=-1<t?e[t]:null)&&Ir(n))}function Ir(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[ar])gr(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Cr(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=kr(e))?(gr(n,t),0==n.h&&(n.src=null,e[yr]=null)):hr(t)}}}function Cr(t){return t in wr?wr[t]:wr[t]="on"+t}function Sr(t,e){if(t.fa)t=!0;else{e=new sr(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Ir(t),t=n.call(i,e)}return t}function kr(t){return(t=t[yr])instanceof fr?t:null}var xr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ar(t){return"function"==typeof t?t:(t[xr]||(t[xr]=function(e){return t.handleEvent(e)}),t[xr])}function Rr(){Mi.call(this),this.i=new fr(this),this.S=this,this.J=null}function Nr(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"==typeof e)e=new ji(e,t);else if(e instanceof ji)e.target=e.target||t;else{var r=e;mr(e=new ji(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Dr(o,i,!0,e)&&r}if(r=Dr(o=e.g=t,i,!0,e)&&r,r=Dr(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=Dr(o=e.g=n[s],i,!1,e)&&r}function Dr(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&gr(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}Oi(Rr,Mi),Rr.prototype[ar]=!0,Rr.prototype.removeEventListener=function(t,e,n,i){Tr(this,t,e,n,i)},Rr.prototype.N=function(){if(Rr.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)hr(n[i]);delete e.g[t],e.h--}}this.J=null},Rr.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Rr.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var Lr=Ci.JSON.stringify;function Or(){var t=$r;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Mr=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Pr),(t=>t.reset()));class Pr{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Fr(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Ur(t){Ci.setTimeout((()=>{throw t}),0)}let jr,Vr=!1,$r=new class{constructor(){this.h=this.g=null}add(t,e){const n=Mr.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},zr=()=>{const t=Ci.Promise.resolve(void 0);jr=()=>{t.then(qr)}};var qr=()=>{for(var t;t=Or();){try{t.h.call(t.g)}catch(t){Ur(t)}var e=Mr;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Vr=!1};function Br(t,e){Rr.call(this),this.h=t||1,this.g=e||Ci,this.j=Di(this.qb,this),this.l=Date.now()}function Hr(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Gr(t,e,n){if("function"==typeof t)n&&(t=Di(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Di(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ci.setTimeout(t,e||0)}function Kr(t){t.g=Gr((()=>{t.g=null,t.i&&(t.i=!1,Kr(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Oi(Br,Rr),(Ei=Br.prototype).ga=!1,Ei.T=null,Ei.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Nr(this,"tick"),this.ga&&(Hr(this),this.start()))}},Ei.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ei.N=function(){Br.$.N.call(this),Hr(this),delete this.g};class Wr extends Mi{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Kr(this)}N(){super.N(),this.g&&(Ci.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qr(t){Mi.call(this),this.h=t,this.g={}}Oi(Qr,Mi);var Jr=[];function Xr(t,e,n,i){Array.isArray(n)||(n&&(Jr[0]=n.toString()),n=Jr);for(var r=0;r<n.length;r++){var s=br(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Yr(t){ur(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Ir(t)}),t),t.g={}}function Zr(){this.g=!0}function ts(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Lr(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}Qr.prototype.N=function(){Qr.$.N.call(this),Yr(this)},Qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zr.prototype.Ea=function(){this.g=!1},Zr.prototype.info=function(){};var es={},ns=null;function is(){return ns=ns||new Rr}function rs(t){ji.call(this,es.Ta,t)}function ss(t){const e=is();Nr(e,new rs(e))}function os(t,e){ji.call(this,es.STAT_EVENT,t),this.stat=e}function as(t){const e=is();Nr(e,new os(e,t))}function cs(t,e){ji.call(this,es.Ua,t),this.size=e}function ls(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ci.setTimeout((function(){t()}),e)}es.Ta="serverreachability",Oi(rs,ji),es.STAT_EVENT="statevent",Oi(os,ji),es.Ua="timingevent",Oi(cs,ji);var hs={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},us={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ds(){}function ps(t){return t.h||(t.h=t.i())}function ms(){}ds.prototype.h=null;var fs,gs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function vs(){ji.call(this,"d")}function ys(){ji.call(this,"c")}function ws(){}function bs(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Qr(this),this.P=_s,t=Xi?125:void 0,this.V=new Br(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Es}function Es(){this.i=null,this.g="",this.h=!1}Oi(vs,ji),Oi(ys,ji),Oi(ws,ds),ws.prototype.g=function(){return new XMLHttpRequest},ws.prototype.i=function(){return{}},fs=new ws;var _s=45e3,Ts={},Is={};function Cs(t,e,n){t.L=1,t.A=Bs(js(e)),t.u=n,t.S=!0,Ss(t,null)}function Ss(t,e){t.G=Date.now(),Rs(t),t.B=js(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),io(n.i,"t",i),t.o=0,n=t.l.J,t.h=new Es,t.g=ra(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Wr(Di(t.Pa,t,t.g),t.O)),Xr(t.U,t.g,"readystatechange",t.nb),e=t.I?dr(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ss(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var h=l[0];l=l[1];var u=h.split("_");o=2<=u.length&&"type"==u[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function ks(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function xs(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=As(t,n),i==Is){4==e&&(t.s=4,as(14),r=!1),ts(t.j,t.m,null,"[Incomplete Response]");break}if(i==Ts){t.s=4,as(15),ts(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}ts(t.j,t.m,i,null),Ms(t,i)}ks(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,as(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jo(e),e.M=!0,as(11))):(ts(t.j,t.m,n,"[Invalid Chunked Response]"),Os(t),Ls(t))}function As(t,e){var n=t.o,i=e.indexOf("\n",n);return-1==i?Is:(n=Number(e.substring(n,i)),isNaN(n)?Ts:(i+=1)+n>e.length?Is:(e=e.slice(i,i+n),t.o=i+n,e))}function Rs(t){t.Y=Date.now()+t.P,Ns(t,t.P)}function Ns(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=ls(Di(t.lb,t),e)}function Ds(t){t.C&&(Ci.clearTimeout(t.C),t.C=null)}function Ls(t){0==t.l.H||t.J||Zo(t.l,t)}function Os(t){Ds(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Hr(t.V),Yr(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Ms(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||ho(n.i,t)))if(!t.K&&ho(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;Yo(n),zo(n)}Qo(n),as(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=ls(Di(n.ib,n),6e3));if(1>=lo(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else ea(n,11)}else if((t.K||n.g==t)&&Yo(n),!$i(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const e=l[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=l[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(uo(s,s.h),s.h=null))}if(i.F){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,qs(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((i=n).wa=ia(i,i.J?i.pa:null,i.Y),o.K){po(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(Ds(a),Rs(a)),i.g=o}else Wo(i);0<n.j.length&&Bo(n)}else"stop"!=l[0]&&"close"!=l[0]||ea(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?ea(n,7):$o(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}ss()}catch(t){}}function Ps(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Si(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(Si(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Si(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(Ei=bs.prototype).setTimeout=function(t){this.P=t},Ei.nb=function(t){t=t.target;const e=this.M;e&&3==Mo(t)?e.l():this.Pa(t)},Ei.Pa=function(t){try{if(t==this.g)t:{const h=Mo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||Xi||this.g&&(this.h.h||this.g.ja()||Po(this.g)))){this.J||4!=h||7==e||ss(),Ds(this);var n=this.g.da();this.ca=n;e:if(ks(this)){var i=Po(this.g);t="";var r=i.length,s=4==Mo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Os(this),Ls(this);var o="";break e}this.h.i=new Ci.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$i(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.s=3,as(12),Os(this),Ls(this);break t}ts(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ms(this,n)}this.S?(xs(this,h,o),Xi&&this.i&&3==h&&(Xr(this.U,this.V,"tick",this.mb),this.V.start())):(ts(this.j,this.m,o,null),Ms(this,o)),4==h&&Os(this),this.i&&!this.J&&(4==h?Zo(this.l,this):(this.i=!1,Rs(this)))}else(function(t){const e={};t=(t.g&&2<=Mo(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if($i(t[i]))continue;var n=Fr(t[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,as(12)):(this.s=0,as(13)),Os(this),Ls(this)}}}catch(t){}},Ei.mb=function(){if(this.g){var t=Mo(this.g),e=this.g.ja();this.o<e.length&&(Ds(this),xs(this,t,e),this.i&&4!=t&&Rs(this))}},Ei.cancel=function(){this.J=!0,Os(this)},Ei.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(ss(),as(17)),Os(this),this.s=2,Ls(this)):Ns(this,this.Y-t)};var Fs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Us(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Us){this.h=t.h,Vs(this,t.j),this.s=t.s,this.g=t.g,$s(this,t.m),this.l=t.l;var e=t.i,n=new Zs;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),zs(this,n),this.o=t.o}else t&&(e=String(t).match(Fs))?(this.h=!1,Vs(this,e[1]||"",!0),this.s=Hs(e[2]||""),this.g=Hs(e[3]||"",!0),$s(this,e[4]),this.l=Hs(e[5]||"",!0),zs(this,e[6]||"",!0),this.o=Hs(e[7]||"")):(this.h=!1,this.i=new Zs(null,this.h))}function js(t){return new Us(t)}function Vs(t,e,n){t.j=n?Hs(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function $s(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function zs(t,e,n){e instanceof Zs?(t.i=e,function(t,e){e&&!t.j&&(to(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(eo(this,e),io(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=Gs(e,Xs)),t.i=new Zs(e,t.h))}function qs(t,e,n){t.i.set(e,n)}function Bs(t){return qs(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Hs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gs(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ks),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ks(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Us.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Gs(e,Ws,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Gs(e,Ws,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gs(n,"/"==n.charAt(0)?Js:Qs,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Gs(n,Ys)),t.join("")};var Ws=/[#\/\?@]/g,Qs=/[#\?:]/g,Js=/[#\?]/g,Xs=/[#\?@]/g,Ys=/#/g;function Zs(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function to(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function eo(t,e){to(t),e=ro(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function no(t,e){return to(t),e=ro(t,e),t.g.has(e)}function io(t,e,n){eo(t,e),0<n.length&&(t.i=null,t.g.set(ro(t,e),Fi(n)),t.h+=n.length)}function ro(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Ei=Zs.prototype).add=function(t,e){to(this),this.i=null,t=ro(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Ei.forEach=function(t,e){to(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},Ei.ta=function(){to(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},Ei.Z=function(t){to(this);let e=[];if("string"==typeof t)no(this,t)&&(e=e.concat(this.g.get(ro(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Ei.set=function(t,e){return to(this),this.i=null,no(this,t=ro(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ei.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Ei.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var so=class{constructor(t,e){this.g=t,this.map=e}};function oo(t){this.l=t||ao,t=Ci.PerformanceNavigationTiming?0<(t=Ci.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ci.g&&Ci.g.Ka&&Ci.g.Ka()&&Ci.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ao=10;function co(t){return!!t.h||!!t.g&&t.g.size>=t.j}function lo(t){return t.h?1:t.g?t.g.size:0}function ho(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function uo(t,e){t.g?t.g.add(e):t.h=e}function po(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function mo(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Fi(t.i)}oo.prototype.cancel=function(){if(this.i=mo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var fo=class{stringify(t){return Ci.JSON.stringify(t,void 0)}parse(t){return Ci.JSON.parse(t,void 0)}};function go(){this.g=new fo}function vo(t,e,n){const i=n||"";try{Ps(t,(function(t,n){let r=t;ki(t)&&(r=Lr(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function yo(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function wo(t){this.l=t.ec||null,this.j=t.ob||!1}function bo(t,e){Rr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Eo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Oi(wo,ds),wo.prototype.g=function(){return new bo(this.l,this.j)},wo.prototype.i=function(t){return function(){return t}}({}),Oi(bo,Rr);var Eo=0;function _o(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function To(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Io(t)}function Io(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ei=bo.prototype).open=function(t,e){if(this.readyState!=Eo)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Io(this)},Ei.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ci).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ei.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,To(this)),this.readyState=Eo},Ei.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Io(this)),this.g&&(this.readyState=3,Io(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Ci.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_o(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Ei.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?To(this):Io(this),3==this.readyState&&_o(this)}},Ei.Za=function(t){this.g&&(this.response=this.responseText=t,To(this))},Ei.Ya=function(t){this.g&&(this.response=t,To(this))},Ei.ka=function(){this.g&&To(this)},Ei.setRequestHeader=function(t,e){this.v.append(t,e)},Ei.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ei.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Co=Ci.JSON.parse;function So(t){Rr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ko,this.L=this.M=!1}Oi(So,Rr);var ko="",xo=/^https?$/i,Ao=["POST","PUT"];function Ro(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,No(t),Lo(t)}function No(t){t.F||(t.F=!0,Nr(t,"complete"),Nr(t,"error"))}function Do(t){if(t.h&&void 0!==Ii&&(!t.C[1]||4!=Mo(t)||2!=t.da()))if(t.v&&4==Mo(t))Gr(t.La,0,t);else if(Nr(t,"readystatechange"),4==Mo(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===o){var r=String(t.I).match(Fs)[1]||null;!r&&Ci.self&&Ci.self.location&&(r=Ci.self.location.protocol.slice(0,-1)),i=!xo.test(r?r.toLowerCase():"")}n=i}if(n)Nr(t,"complete"),Nr(t,"success");else{t.m=6;try{var s=2<Mo(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",No(t)}}finally{Lo(t)}}}function Lo(t,e){if(t.g){Oo(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Nr(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function Oo(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ci.clearTimeout(t.A),t.A=null)}function Mo(t){return t.g?t.g.readyState:0}function Po(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case ko:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Fo(t){let e="";return ur(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Uo(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Fo(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):qs(t,e,n))}function jo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Vo(t){this.Ga=0,this.j=[],this.l=new Zr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=jo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=jo("baseRetryDelayMs",5e3,t),this.hb=jo("retryDelaySeedMs",1e4,t),this.eb=jo("forwardChannelMaxRetries",2,t),this.xa=jo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new oo(t&&t.concurrentRequestLimit),this.Ja=new go,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function $o(t){if(qo(t),3==t.H){var e=t.W++,n=js(t.I);if(qs(n,"SID",t.K),qs(n,"RID",e),qs(n,"TYPE","terminate"),Go(t,n),(e=new bs(t,t.l,e)).L=2,e.A=Bs(js(n)),n=!1,Ci.navigator&&Ci.navigator.sendBeacon)try{n=Ci.navigator.sendBeacon(e.A.toString(),"")}catch(t){}!n&&Ci.Image&&((new Image).src=e.A,n=!0),n||(e.g=ra(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Rs(e)}na(t)}function zo(t){t.g&&(Jo(t),t.g.cancel(),t.g=null)}function qo(t){zo(t),t.u&&(Ci.clearTimeout(t.u),t.u=null),Yo(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Ci.clearTimeout(t.m),t.m=null)}function Bo(t){if(!co(t.i)&&!t.m){t.m=!0;var e=t.Na;jr||zr(),Vr||(jr(),Vr=!0),$r.add(e,t),t.C=0}}function Ho(t,e){var n;n=e?e.m:t.W++;const i=js(t.I);qs(i,"SID",t.K),qs(i,"RID",n),qs(i,"AID",t.V),Go(t,i),t.o&&t.s&&Uo(i,t.o,t.s),n=new bs(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Ko(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),uo(t.i,n),Cs(n,i,e)}function Go(t,e){t.na&&ur(t.na,(function(t,n){qs(e,n,t)})),t.h&&Ps({},(function(t,n){qs(e,n,t)}))}function Ko(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Di(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=e,0>n)e=Math.max(0,r[o].g-100),s=!1;else try{vo(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function Wo(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;jr||zr(),Vr||(jr(),Vr=!0),$r.add(e,t),t.A=0}}function Qo(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=ls(Di(t.Ma,t),ta(t,t.A)),t.A++,0))}function Jo(t){null!=t.B&&(Ci.clearTimeout(t.B),t.B=null)}function Xo(t){t.g=new bs(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=js(t.wa);qs(e,"RID","rpc"),qs(e,"SID",t.K),qs(e,"AID",t.V),qs(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&qs(e,"TO",t.qa),qs(e,"TYPE","xmlhttp"),Go(t,e),t.o&&t.s&&Uo(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Bs(js(e)),n.u=null,n.S=!0,Ss(n,t)}function Yo(t){null!=t.v&&(Ci.clearTimeout(t.v),t.v=null)}function Zo(t,e){var n=null;if(t.g==e){Yo(t),Jo(t),t.g=null;var i=2}else{if(!ho(t.i,e))return;n=e.F,po(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;Nr(i=is(),new cs(i,n)),Bo(t)}else Wo(t);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function(t,e){return!(lo(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=ls(Di(t.Na,t,e),ta(t,t.C)),t.C++,0)))}(t,e)||2==i&&Qo(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:ea(t,5);break;case 4:ea(t,10);break;case 3:ea(t,6);break;default:ea(t,2)}}function ta(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ea(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=Di(t.pb,t);n||(n=new Us("//www.google.com/images/cleardot.gif"),Ci.location&&"http"==Ci.location.protocol||Vs(n,"https"),Bs(n)),function(t,e){const n=new Zr;if(Ci.Image){const i=new Image;i.onload=Li(yo,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Li(yo,n,i,"TestLoadImage: error",!1,e),i.onabort=Li(yo,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Li(yo,n,i,"TestLoadImage: timeout",!1,e),Ci.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else as(2);t.H=0,t.h&&t.h.za(e),na(t),qo(t)}function na(t){if(t.H=0,t.ma=[],t.h){const e=mo(t.i);0==e.length&&0==t.j.length||(Ui(t.ma,e),Ui(t.ma,t.j),t.i.i.length=0,Fi(t.j),t.j.length=0),t.h.ya()}}function ia(t,e,n){var i=n instanceof Us?js(n):new Us(n);if(""!=i.g)e&&(i.g=e+"."+i.g),$s(i,i.m);else{var r=Ci.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Us(null);i&&Vs(s,i),e&&(s.g=e),r&&$s(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&qs(i,n,e),qs(i,"VER",t.ra),Go(t,i),i}function ra(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new So(new wo({ob:n})):new So(t.va)).Oa(t.J),e}function sa(){}function oa(){if(Qi&&!(10<=Number(rr)))throw Error("Environmental error: no available transport.")}function aa(t,e){Rr.call(this),this.g=new Vo(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!$i(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$i(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ha(this)}function ca(t){vs.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function la(){ys.call(this),this.status=1}function ha(t){this.g=t}function ua(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function da(t,e,n){n||(n=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function pa(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}(Ei=So.prototype).Oa=function(t){this.M=t},Ei.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fs.g(),this.C=this.u?ps(this.u):ps(fs),this.g.onreadystatechange=Di(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void Ro(this,t)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=Ci.FormData&&t instanceof Ci.FormData,!(0<=Pi(Ao,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Oo(this),0<this.B&&((this.L=function(t){return Qi&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Di(this.ua,this)):this.A=Gr(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Ro(this,t)}},Ei.ua=function(){void 0!==Ii&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nr(this,"timeout"),this.abort(8))},Ei.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Nr(this,"complete"),Nr(this,"abort"),Lo(this))},Ei.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lo(this,!0)),So.$.N.call(this)},Ei.La=function(){this.s||(this.G||this.v||this.l?Do(this):this.kb())},Ei.kb=function(){Do(this)},Ei.isActive=function(){return!!this.g},Ei.da=function(){try{return 2<Mo(this)?this.g.status:-1}catch(t){return-1}},Ei.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Ei.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Co(e)}},Ei.Ia=function(){return this.m},Ei.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ei=Vo.prototype).ra=8,Ei.H=1,Ei.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new bs(this,this.l,t);let s=this.s;if(this.U&&(s?(s=dr(s),mr(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Ko(this,r,e),qs(n=js(this.I),"RID",t),qs(n,"CVER",22),this.F&&qs(n,"X-HTTP-Session-Id",this.F),Go(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Fo(s)))+"&"+e:this.o&&Uo(n,this.o,s)),uo(this.i,r),this.bb&&qs(n,"TYPE","init"),this.P?(qs(n,"$req",e),qs(n,"SID","null"),r.aa=!0,Cs(r,n,null)):Cs(r,n,e),this.H=2}}else 3==this.H&&(t?Ho(this,t):0==this.j.length||co(this.i)||Ho(this))},Ei.Ma=function(){if(this.u=null,Xo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ls(Di(this.jb,this),t)}},Ei.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,as(10),zo(this),Xo(this))},Ei.ib=function(){null!=this.v&&(this.v=null,zo(this),Qo(this),as(19))},Ei.pb=function(t){t?(this.l.info("Successfully pinged google.com"),as(2)):(this.l.info("Failed to ping google.com"),as(1))},Ei.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ei=sa.prototype).Ba=function(){},Ei.Aa=function(){},Ei.za=function(){},Ei.ya=function(){},Ei.isActive=function(){return!0},Ei.Va=function(){},oa.prototype.g=function(t,e){return new aa(t,e)},Oi(aa,Rr),aa.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;as(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=ia(t,null,t.Y),Bo(t)},aa.prototype.close=function(){$o(this.g)},aa.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Lr(t),t=n);e.j.push(new so(e.fb++,t)),3==e.H&&Bo(e)},aa.prototype.N=function(){this.g.h=null,delete this.j,$o(this.g),delete this.g,aa.$.N.call(this)},Oi(ca,vs),Oi(la,ys),Oi(ha,sa),ha.prototype.Ba=function(){Nr(this.g,"a")},ha.prototype.Aa=function(t){Nr(this.g,new ca(t))},ha.prototype.za=function(t){Nr(this.g,new la)},ha.prototype.ya=function(){Nr(this.g,"b")},Oi(ua,(function(){this.blockSize=-1})),ua.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ua.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)da(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){da(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){da(this,i),r=0;break}}this.h=r,this.i+=e},ua.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var ma={};function fa(t){return-128<=t&&128>t?function(t,e){var n=ma;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new pa([0|t],0>t?-1:0)}(t)}(t):new pa([0|t],0>t?-1:0)}function ga(t){if(isNaN(t)||!isFinite(t))return ya;if(0>t)return Ta(ga(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=va;return new pa(e,0)}var va=4294967296,ya=fa(0),wa=fa(1),ba=fa(16777216);function Ea(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function _a(t){return-1==t.h}function Ta(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new pa(n,~t.h).add(wa)}function Ia(t,e){return t.add(Ta(e))}function Ca(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Sa(t,e){this.g=t,this.h=e}function ka(t,e){if(Ea(e))throw Error("division by zero");if(Ea(t))return new Sa(ya,ya);if(_a(t))return e=ka(Ta(t),e),new Sa(Ta(e.g),Ta(e.h));if(_a(e))return e=ka(t,Ta(e)),new Sa(Ta(e.g),e.h);if(30<t.g.length){if(_a(t)||_a(e))throw Error("slowDivide_ only works with positive integers.");for(var n=wa,i=e;0>=i.X(t);)n=xa(n),i=xa(i);var r=Aa(n,1),s=Aa(i,1);for(i=Aa(i,2),n=Aa(n,2);!Ea(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Aa(i,1),n=Aa(n,1)}return e=Ia(t,r.R(e)),new Sa(r,e)}for(r=ya;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=ga(n)).R(e);_a(o)||0<o.X(t);)o=(s=ga(n-=i)).R(e);Ea(s)&&(s=wa),r=r.add(s),t=Ia(t,o)}return new Sa(r,t)}function xa(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new pa(n,t.h)}function Aa(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new pa(r,t.h)}(Ei=pa.prototype).ea=function(){if(_a(this))return-Ta(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:va+i)*e,e*=va}return t},Ei.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Ea(this))return"0";if(_a(this))return"-"+Ta(this).toString(t);for(var e=ga(Math.pow(t,6)),n=this,i="";;){var r=ka(n,e).g,s=((0<(n=Ia(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Ea(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Ei.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Ei.X=function(t){return _a(t=Ia(this,t))?-1:Ea(t)?0:1},Ei.abs=function(){return _a(this)?Ta(this):this},Ei.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new pa(n,-2147483648&n[n.length-1]?-1:0)},Ei.R=function(t){if(Ea(this)||Ea(t))return ya;if(_a(this))return _a(t)?Ta(this).R(Ta(t)):Ta(Ta(this).R(t));if(_a(t))return Ta(this.R(Ta(t)));if(0>this.X(ba)&&0>t.X(ba))return ga(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,c=65535&t.D(r);n[2*i+2*r]+=o*c,Ca(n,2*i+2*r),n[2*i+2*r+1]+=s*c,Ca(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Ca(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Ca(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new pa(n,0)},Ei.gb=function(t){return ka(this,t).h},Ei.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new pa(n,this.h&t.h)},Ei.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new pa(n,this.h|t.h)},Ei.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new pa(n,this.h^t.h)},oa.prototype.createWebChannel=oa.prototype.g,aa.prototype.send=aa.prototype.u,aa.prototype.open=aa.prototype.m,aa.prototype.close=aa.prototype.close,hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,us.COMPLETE="complete",ms.EventType=gs,gs.OPEN="a",gs.CLOSE="b",gs.ERROR="c",gs.MESSAGE="d",Rr.prototype.listen=Rr.prototype.O,So.prototype.listenOnce=So.prototype.P,So.prototype.getLastError=So.prototype.Sa,So.prototype.getLastErrorCode=So.prototype.Ia,So.prototype.getStatus=So.prototype.da,So.prototype.getResponseJson=So.prototype.Wa,So.prototype.getResponseText=So.prototype.ja,So.prototype.send=So.prototype.ha,So.prototype.setWithCredentials=So.prototype.Oa,ua.prototype.digest=ua.prototype.l,ua.prototype.reset=ua.prototype.reset,ua.prototype.update=ua.prototype.j,pa.prototype.add=pa.prototype.add,pa.prototype.multiply=pa.prototype.R,pa.prototype.modulo=pa.prototype.gb,pa.prototype.compare=pa.prototype.X,pa.prototype.toNumber=pa.prototype.ea,pa.prototype.toString=pa.prototype.toString,pa.prototype.getBits=pa.prototype.D,pa.fromNumber=ga,pa.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return Ta(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=ga(Math.pow(n,8)),r=ya,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=ga(Math.pow(n,o)),r=r.R(o).add(ga(a))):r=(r=r.R(i)).add(ga(a))}return r};var Ra=Ti.createWebChannelTransport=function(){return new oa},Na=Ti.getStatEventTarget=function(){return is()},Da=Ti.ErrorCode=hs,La=Ti.EventType=us,Oa=Ti.Event=es,Ma=Ti.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Pa=(Ti.FetchXmlHttpFactory=wo,Ti.WebChannel=ms),Fa=Ti.XhrIo=So,Ua=Ti.Md5=ua,ja=Ti.Integer=pa;const Va="@firebase/firestore";class $a{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}$a.UNAUTHENTICATED=new $a(null),$a.GOOGLE_CREDENTIALS=new $a("google-credentials-uid"),$a.FIRST_PARTY=new $a("first-party-uid"),$a.MOCK_USER=new $a("mock-user");let za="10.7.2";const qa=new j("@firebase/firestore");function Ba(){return qa.logLevel}function Ha(t,...e){if(qa.logLevel<=O.DEBUG){const n=e.map(Wa);qa.debug(`Firestore (${za}): ${t}`,...n)}}function Ga(t,...e){if(qa.logLevel<=O.ERROR){const n=e.map(Wa);qa.error(`Firestore (${za}): ${t}`,...n)}}function Ka(t,...e){if(qa.logLevel<=O.WARN){const n=e.map(Wa);qa.warn(`Firestore (${za}): ${t}`,...n)}}function Wa(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function Qa(t="Unexpected state"){const e=`FIRESTORE (${za}) INTERNAL ASSERTION FAILED: `+t;throw Ga(e),new Error(e)}function Ja(t,e){t||Qa()}function Xa(t,e){return t}const Ya={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Za extends y{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class tc{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class ec{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class nc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e($a.UNAUTHENTICATED)))}shutdown(){}}class ic{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class rc{constructor(t){this.t=t,this.currentUser=$a.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new tc;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new tc,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{Ha("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Ha("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new tc)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Ha("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Ja("string"==typeof e.accessToken),new ec(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ja(null===t||"string"==typeof t),new $a(t)}}class sc{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=$a.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class oc{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new sc(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e($a.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ac{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cc{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Ha("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,Ha("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{Ha("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):Ha("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Ja("string"==typeof t.token),this.R=t.token,new ac(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function lc(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class hc{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=lc(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function uc(t,e){return t<e?-1:t>e?1:0}function dc(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class pc{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Za(Ya.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Za(Ya.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Za(Ya.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Za(Ya.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return pc.fromMillis(Date.now())}static fromDate(t){return pc.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new pc(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?uc(this.nanoseconds,t.nanoseconds):uc(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mc{constructor(t){this.timestamp=t}static fromTimestamp(t){return new mc(t)}static min(){return new mc(new pc(0,0))}static max(){return new mc(new pc(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class fc{constructor(t,e,n){void 0===e?e=0:e>t.length&&Qa(),void 0===n?n=t.length-e:n>t.length-e&&Qa(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===fc.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof fc?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class gc extends fc{construct(t,e,n){return new gc(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Za(Ya.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new gc(e)}static emptyPath(){return new gc([])}}const vc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yc extends fc{construct(t,e,n){return new yc(t,e,n)}static isValidIdentifier(t){return vc.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yc.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yc(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Za(Ya.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Za(Ya.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Za(Ya.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new Za(Ya.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new yc(e)}static emptyPath(){return new yc([])}}class wc{constructor(t){this.path=t}static fromPath(t){return new wc(gc.fromString(t))}static fromName(t){return new wc(gc.fromString(t).popFirst(5))}static empty(){return new wc(gc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===gc.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return gc.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new wc(new gc(t.slice()))}}function bc(t){return new Ec(t.readTime,t.key,-1)}class Ec{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Ec(mc.min(),wc.empty(),-1)}static max(){return new Ec(mc.max(),wc.empty(),-1)}}function _c(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=wc.comparator(t.documentKey,e.documentKey),0!==n?n:uc(t.largestBatchId,e.largestBatchId))}const Tc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ic{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Cc(t){if(t.code!==Ya.FAILED_PRECONDITION||t.message!==Tc)throw t;Ha("LocalStore","Unexpectedly lost primary lease")}class Sc{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Qa(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Sc(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Sc?e:Sc.resolve(e)}catch(t){return Sc.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Sc.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Sc.reject(e)}static resolve(t){return new Sc(((e,n)=>{e(t)}))}static reject(t){return new Sc(((e,n)=>{n(t)}))}static waitFor(t){return new Sc(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=Sc.resolve(!1);for(const n of t)e=e.next((t=>t?Sc.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Sc(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new Sc(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}class kc{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new tc,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Rc(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=Mc(e.target.error);this.V.reject(new Rc(t,n))}}static open(t,e,n,i){try{return new kc(e,t.transaction(i,n))}catch(t){throw new Rc(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(Ha("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Dc(e)}}class xc{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===xc.S(g())&&Ga("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ha("SimpleDb","Removing database:",t),Lc(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!v())return!1;if(xc.C())return!0;const t=g(),e=xc.S(t),n=0<e&&e<10,i=xc.v(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||(Ha("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new Rc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new Za(Ya.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new Za(Ya.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Rc(t,i))},i.onupgradeneeded=t=>{Ha("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,i.transaction,t.oldVersion,this.version).next((()=>{Ha("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.O(t);const e=kc.open(this.db,t,r?"readonly":"readwrite",n),s=i(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),Sc.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(Ha("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Ac{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Lc(this.k.delete())}}class Rc extends Za{constructor(t,e){super(Ya.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Nc(t){return"IndexedDbTransactionError"===t.name}class Dc{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(Ha("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ha("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Lc(n)}add(t){return Ha("SimpleDb","ADD",this.store.name,t,t),Lc(this.store.add(t))}get(t){return Lc(this.store.get(t)).next((e=>(void 0===e&&(e=null),Ha("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return Ha("SimpleDb","DELETE",this.store.name,t),Lc(this.store.delete(t))}count(){return Ha("SimpleDb","COUNT",this.store.name),Lc(this.store.count())}W(t,e){const n=this.options(t,e),i=n.index?this.store.index(n.index):this.store;if("function"==typeof i.getAll){const t=i.getAll(n.range);return new Sc(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new Sc(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){Ha("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const i=this.cursor(n);return this.G(i,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.G(i,e)}Z(t){const e=this.cursor({});return new Sc(((n,i)=>{e.onerror=t=>{const e=Mc(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}G(t,e){const n=[];return new Sc(((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new Ac(r),o=e(r.primaryKey,r.value,s);if(o instanceof Sc){const t=o.catch((t=>(s.done(),Sc.reject(t))));n.push(t)}s.isDone?i():null===s.$?r.continue():r.continue(s.$)}})).next((()=>Sc.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Lc(t){return new Sc(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=Mc(t.target.error);n(e)}}))}let Oc=!1;function Mc(t){const e=xc.S(g());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new Za("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Oc||(Oc=!0,setTimeout((()=>{throw t}),0)),t}}return t}class Pc{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function Fc(t){return null==t}function Uc(t){return 0===t&&1/t==-1/0}Pc._e=-1;function jc(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $c(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class zc{constructor(t,e){this.comparator=t,this.root=e||Bc.EMPTY}insert(t,e){return new zc(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Bc.BLACK,null,null))}remove(t){return new zc(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Bc.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new qc(this.root,t,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new qc(this.root,t,this.comparator,!0)}}class qc{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Bc{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Bc.RED,this.left=null!=i?i:Bc.EMPTY,this.right=null!=r?r:Bc.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new Bc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bc.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return Bc.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Bc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Bc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qa();if(this.right.isRed())throw Qa();const t=this.left.check();if(t!==this.right.check())throw Qa();return t+(this.isRed()?0:1)}}Bc.EMPTY=null,Bc.RED=!0,Bc.BLACK=!1,Bc.EMPTY=new class{constructor(){this.size=0}get key(){throw Qa()}get value(){throw Qa()}get color(){throw Qa()}get left(){throw Qa()}get right(){throw Qa()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Bc(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hc{constructor(t){this.comparator=t,this.data=new zc(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Gc(this.data.getIterator())}getIteratorFrom(t){return new Gc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Hc))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Hc(this.comparator);return e.data=t,e}}class Gc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Kc{constructor(t){this.fields=t,t.sort(yc.comparator)}static empty(){return new Kc([])}unionWith(t){let e=new Hc(yc.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new Kc(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return dc(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Wc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qc{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Wc("Invalid base64 string: "+t):t}}(t);return new Qc(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Qc(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return uc(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Qc.EMPTY_BYTE_STRING=new Qc("");const Jc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xc(t){if(Ja(!!t),"string"==typeof t){let e=0;const n=Jc.exec(t);if(Ja(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Yc(t.seconds),nanos:Yc(t.nanos)}}function Yc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Zc(t){return"string"==typeof t?Qc.fromBase64String(t):Qc.fromUint8Array(t)}function tl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function el(t){const e=t.mapValue.fields.__previous_value__;return tl(e)?el(e):e}function nl(t){const e=Xc(t.mapValue.fields.__local_write_time__.timestampValue);return new pc(e.seconds,e.nanos)}class il{constructor(t,e,n,i,r,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class rl{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new rl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof rl&&t.projectId===this.projectId&&t.database===this.database}}const sl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ol(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tl(t)?4:wl(t)?9007199254740991:10:Qa()}function al(t,e){if(t===e)return!0;const n=ol(t);if(n!==ol(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nl(t).isEqual(nl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Xc(t.timestampValue),i=Xc(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Zc(t.bytesValue).isEqual(Zc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Yc(t.geoPointValue.latitude)===Yc(e.geoPointValue.latitude)&&Yc(t.geoPointValue.longitude)===Yc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Yc(t.integerValue)===Yc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Yc(t.doubleValue),i=Yc(e.doubleValue);return n===i?Uc(n)===Uc(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return dc(t.arrayValue.values||[],e.arrayValue.values||[],al);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(jc(n)!==jc(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!al(n[t],i[t])))return!1;return!0}(t,e);default:return Qa()}}function cl(t,e){return void 0!==(t.values||[]).find((t=>al(t,e)))}function ll(t,e){if(t===e)return 0;const n=ol(t),i=ol(e);if(n!==i)return uc(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return uc(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Yc(t.integerValue||t.doubleValue),i=Yc(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return hl(t.timestampValue,e.timestampValue);case 4:return hl(nl(t),nl(e));case 5:return uc(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Zc(t),i=Zc(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=uc(n[t],i[t]);if(0!==e)return e}return uc(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=uc(Yc(t.latitude),Yc(e.latitude));return 0!==n?n:uc(Yc(t.longitude),Yc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=ll(n[t],i[t]);if(e)return e}return uc(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===sl.mapValue&&e===sl.mapValue)return 0;if(t===sl.mapValue)return 1;if(e===sl.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let t=0;t<i.length&&t<s.length;++t){const e=uc(i[t],s[t]);if(0!==e)return e;const o=ll(n[i[t]],r[s[t]]);if(0!==o)return o}return uc(i.length,s.length)}(t.mapValue,e.mapValue);default:throw Qa()}}function hl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return uc(t,e);const n=Xc(t),i=Xc(e),r=uc(n.seconds,i.seconds);return 0!==r?r:uc(n.nanos,i.nanos)}function ul(t){return dl(t)}function dl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Xc(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Zc(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return wc.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=dl(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${dl(t.fields[r])}`;return n+"}"}(t.mapValue):Qa()}function pl(t){return!!t&&"integerValue"in t}function ml(t){return!!t&&"arrayValue"in t}function fl(t){return!!t&&"nullValue"in t}function gl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vl(t){return!!t&&"mapValue"in t}function yl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vc(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=yl(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function wl(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class bl{constructor(t){this.value=t}static empty(){return new bl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!vl(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=yl(e)}setAll(t){let e=yc.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=yl(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());vl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return al(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];vl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Vc(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new bl(yl(this.value))}}function El(t){const e=[];return Vc(t.fields,((t,n)=>{const i=new yc([t]);if(vl(n)){const t=El(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Kc(e)}class _l{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new _l(t,0,mc.min(),mc.min(),mc.min(),bl.empty(),0)}static newFoundDocument(t,e,n,i){return new _l(t,1,e,mc.min(),n,i,0)}static newNoDocument(t,e){return new _l(t,2,e,mc.min(),mc.min(),bl.empty(),0)}static newUnknownDocument(t,e){return new _l(t,3,e,mc.min(),mc.min(),bl.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(mc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=bl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=bl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mc.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof _l&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new _l(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tl{constructor(t,e){this.position=t,this.inclusive=e}}function Il(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?wc.comparator(wc.fromName(o.referenceValue),n.key):ll(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Cl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!al(t.position[n],e.position[n]))return!1;return!0}class Sl{constructor(t,e="asc"){this.field=t,this.dir=e}}function kl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class xl{}class Al extends xl{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Pl(t,e,n):"array-contains"===e?new Vl(t,n):"in"===e?new $l(t,n):"not-in"===e?new zl(t,n):"array-contains-any"===e?new ql(t,n):new Al(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Fl(t,n):new Ul(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(ll(e,this.value)):null!==e&&ol(this.value)===ol(e)&&this.matchesComparison(ll(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Qa()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rl extends xl{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new Rl(t,e)}matches(t){return Nl(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Nl(t){return"and"===t.op}function Dl(t){return function(t){for(const e of t.filters)if(e instanceof Rl)return!1;return!0}(t)&&Nl(t)}function Ll(t){if(t instanceof Al)return t.field.canonicalString()+t.op.toString()+ul(t.value);if(Dl(t))return t.filters.map((t=>Ll(t))).join(",");{const e=t.filters.map((t=>Ll(t))).join(",");return`${t.op}(${e})`}}function Ol(t,e){return t instanceof Al?function(t,e){return e instanceof Al&&t.op===e.op&&t.field.isEqual(e.field)&&al(t.value,e.value)}(t,e):t instanceof Rl?function(t,e){return e instanceof Rl&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Ol(n,e.filters[i])),!0)}(t,e):void Qa()}function Ml(t){return t instanceof Al?function(t){return`${t.field.canonicalString()} ${t.op} ${ul(t.value)}`}(t):t instanceof Rl?function(t){return t.op.toString()+" {"+t.getFilters().map(Ml).join(" ,")+"}"}(t):"Filter"}class Pl extends Al{constructor(t,e,n){super(t,e,n),this.key=wc.fromName(n.referenceValue)}matches(t){const e=wc.comparator(t.key,this.key);return this.matchesComparison(e)}}class Fl extends Al{constructor(t,e){super(t,"in",e),this.keys=jl(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Ul extends Al{constructor(t,e){super(t,"not-in",e),this.keys=jl(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function jl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>wc.fromName(t.referenceValue)))}class Vl extends Al{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ml(e)&&cl(e.arrayValue,this.value)}}class $l extends Al{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&cl(this.value.arrayValue,e)}}class zl extends Al{constructor(t,e){super(t,"not-in",e)}matches(t){if(cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!cl(this.value.arrayValue,e)}}class ql extends Al{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ml(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>cl(this.value.arrayValue,t)))}}class Bl{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function Hl(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Bl(t,e,n,i,r,s,o)}function Gl(t){const e=Xa(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Ll(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Fc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>ul(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>ul(t))).join(",")),e.ce=t}return e.ce}function Kl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ol(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cl(t.startAt,e.startAt)&&Cl(t.endAt,e.endAt)}function Wl(t){return wc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Ql{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Jl(t){return new Ql(t)}function Xl(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Yl(t){const e=Xa(t);if(null===e.le){e.le=[];const t=new Set;for(const n of e.explicitOrderBy)e.le.push(n),t.add(n.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new Hc(yc.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new Sl(i,n))})),t.has(yc.keyField().canonicalString())||e.le.push(new Sl(yc.keyField(),n))}return e.le}function Zl(t){const e=Xa(t);return e.he||(e.he=function(t,e){if("F"===t.limitType)return Hl(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new Sl(t.field,e)}));const n=t.endAt?new Tl(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Tl(t.startAt.position,t.startAt.inclusive):null;return Hl(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}(e,Yl(t))),e.he}function th(t,e,n){return new Ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function eh(t,e){return Kl(Zl(t),Zl(e))&&t.limitType===e.limitType}function nh(t){return`${Gl(Zl(t))}|lt:${t.limitType}`}function ih(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Ml(t))).join(", ")}]`),Fc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>ul(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>ul(t))).join(",")),`Target(${e})`}(Zl(t))}; limitType=${t.limitType})`}function rh(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):wc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Yl(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=Il(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,Yl(t),e)||t.endAt&&!function(t,e,n){const i=Il(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,Yl(t),e))}(t,e)}function sh(t){return(e,n)=>{let i=!1;for(const r of Yl(t)){const t=oh(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function oh(t,e,n){const i=t.field.isKeyField()?wc.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?ll(i,r):Qa()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Qa()}}class ah{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Vc(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return $c(this.inner)}size(){return this.innerSize}}const ch=new zc(wc.comparator);function lh(){return ch}const hh=new zc(wc.comparator);function uh(...t){let e=hh;for(const n of t)e=e.insert(n.key,n);return e}function dh(t){let e=hh;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ph(){return fh()}function mh(){return fh()}function fh(){return new ah((t=>t.toString()),((t,e)=>t.isEqual(e)))}const gh=new zc(wc.comparator),vh=new Hc(wc.comparator);function yh(...t){let e=vh;for(const n of t)e=e.add(n);return e}const wh=new Hc(uc);function bh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(e)?"-0":e}}function Eh(t){return{integerValue:""+t}}function _h(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Uc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Eh(e):bh(t,e)}class Th{constructor(){this._=void 0}}function Ih(t,e,n){return t instanceof kh?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&tl(e)&&(e=el(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof xh?Ah(t,e):t instanceof Rh?Nh(t,e):function(t,e){const n=Sh(t,e),i=Lh(n)+Lh(t.Ie);return pl(n)&&pl(t.Ie)?Eh(i):bh(t.serializer,i)}(t,e)}function Ch(t,e,n){return t instanceof xh?Ah(t,e):t instanceof Rh?Nh(t,e):n}function Sh(t,e){return t instanceof Dh?function(t){return pl(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class kh extends Th{}class xh extends Th{constructor(t){super(),this.elements=t}}function Ah(t,e){const n=Oh(e);for(const e of t.elements)n.some((t=>al(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Rh extends Th{constructor(t){super(),this.elements=t}}function Nh(t,e){let n=Oh(e);for(const e of t.elements)n=n.filter((t=>!al(t,e)));return{arrayValue:{values:n}}}class Dh extends Th{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Lh(t){return Yc(t.integerValue||t.doubleValue)}function Oh(t){return ml(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Mh{constructor(t,e){this.version=t,this.transformResults=e}}class Ph{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ph}static exists(t){return new Ph(void 0,t)}static updateTime(t){return new Ph(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Fh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Uh{}function jh(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Qh(t.key,Ph.none()):new Bh(t.key,t.data,Ph.none());{const n=t.data,i=bl.empty();let r=new Hc(yc.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new Hh(t.key,i,new Kc(r.toArray()),Ph.none())}}function Vh(t,e,n){t instanceof Bh?function(t,e,n){const i=t.value.clone(),r=Kh(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof Hh?function(t,e,n){if(!Fh(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=Kh(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(Gh(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function $h(t,e,n,i){return t instanceof Bh?function(t,e,n,i){if(!Fh(t.precondition,e))return n;const r=t.value.clone(),s=Wh(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof Hh?function(t,e,n,i){if(!Fh(t.precondition,e))return n;const r=Wh(t.fieldTransforms,i,e),s=e.data;return s.setAll(Gh(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return Fh(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function zh(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Sh(i.transform,t||null);null!=r&&(null===n&&(n=bl.empty()),n.set(i.field,r))}return n||null}function qh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&dc(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof xh&&e instanceof xh||t instanceof Rh&&e instanceof Rh?dc(t.elements,e.elements,al):t instanceof Dh&&e instanceof Dh?al(t.Ie,e.Ie):t instanceof kh&&e instanceof kh}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bh extends Uh{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hh extends Uh{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Gh(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Kh(t,e,n){const i=new Map;Ja(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Ch(o,a,n[r]))}return i}function Wh(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Ih(t,s,e))}return i}class Qh extends Uh{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jh extends Uh{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Xh{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&Vh(i,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=$h(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=$h(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=mh();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=jh(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(mc.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),yh())}isEqual(t){return this.batchId===t.batchId&&dc(this.mutations,t.mutations,((t,e)=>qh(t,e)))&&dc(this.baseMutations,t.baseMutations,((t,e)=>qh(t,e)))}}class Yh{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){Ja(t.mutations.length===n.length);let i=gh;const r=t.mutations;for(let t=0;t<r.length;t++)i=i.insert(r[t].key,n[t].version);return new Yh(t,e,n,i)}}class Zh{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class tu{constructor(t,e){this.count=t,this.unchangedNames=e}}var eu,nu;function iu(t){if(void 0===t)return Ga("GRPC error has no .code"),Ya.UNKNOWN;switch(t){case eu.OK:return Ya.OK;case eu.CANCELLED:return Ya.CANCELLED;case eu.UNKNOWN:return Ya.UNKNOWN;case eu.DEADLINE_EXCEEDED:return Ya.DEADLINE_EXCEEDED;case eu.RESOURCE_EXHAUSTED:return Ya.RESOURCE_EXHAUSTED;case eu.INTERNAL:return Ya.INTERNAL;case eu.UNAVAILABLE:return Ya.UNAVAILABLE;case eu.UNAUTHENTICATED:return Ya.UNAUTHENTICATED;case eu.INVALID_ARGUMENT:return Ya.INVALID_ARGUMENT;case eu.NOT_FOUND:return Ya.NOT_FOUND;case eu.ALREADY_EXISTS:return Ya.ALREADY_EXISTS;case eu.PERMISSION_DENIED:return Ya.PERMISSION_DENIED;case eu.FAILED_PRECONDITION:return Ya.FAILED_PRECONDITION;case eu.ABORTED:return Ya.ABORTED;case eu.OUT_OF_RANGE:return Ya.OUT_OF_RANGE;case eu.UNIMPLEMENTED:return Ya.UNIMPLEMENTED;case eu.DATA_LOSS:return Ya.DATA_LOSS;default:return Qa()}}(nu=eu||(eu={}))[nu.OK=0]="OK",nu[nu.CANCELLED=1]="CANCELLED",nu[nu.UNKNOWN=2]="UNKNOWN",nu[nu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nu[nu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nu[nu.NOT_FOUND=5]="NOT_FOUND",nu[nu.ALREADY_EXISTS=6]="ALREADY_EXISTS",nu[nu.PERMISSION_DENIED=7]="PERMISSION_DENIED",nu[nu.UNAUTHENTICATED=16]="UNAUTHENTICATED",nu[nu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nu[nu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nu[nu.ABORTED=10]="ABORTED",nu[nu.OUT_OF_RANGE=11]="OUT_OF_RANGE",nu[nu.UNIMPLEMENTED=12]="UNIMPLEMENTED",nu[nu.INTERNAL=13]="INTERNAL",nu[nu.UNAVAILABLE=14]="UNAVAILABLE",nu[nu.DATA_LOSS=15]="DATA_LOSS";const ru=new ja([4294967295,4294967295],0);function su(t){const e=(new TextEncoder).encode(t),n=new Ua;return n.update(e),new Uint8Array(n.digest())}function ou(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ja([n,i],0),new ja([r,s],0)]}class au{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new cu(`Invalid padding: ${e}`);if(n<0)throw new cu(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new cu(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new cu(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ee=ja.fromNumber(this.Te)}de(t,e,n){let i=t.add(e.multiply(ja.fromNumber(n)));return 1===i.compare(ru)&&(i=new ja([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=su(t),[n,i]=ou(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,i,t);if(!this.Ae(e))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),s=new au(r,i,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Te)return;const e=su(t),[n,i]=ou(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,i,t);this.Re(e)}}Re(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lu{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,hu.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new lu(mc.min(),i,new zc(uc),lh(),yh())}}class hu{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new hu(n,e,yh(),yh(),yh())}}class uu{constructor(t,e,n,i){this.Ve=t,this.removedTargetIds=e,this.key=n,this.me=i}}class du{constructor(t,e){this.targetId=t,this.fe=e}}class pu{constructor(t,e,n=Qc.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class mu{constructor(){this.ge=0,this.pe=vu(),this.ye=Qc.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=yh(),e=yh(),n=yh();return this.pe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:Qa()}})),new hu(this.ye,this.we,t,e,n)}Fe(){this.Se=!1,this.pe=vu()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ja(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class fu{constructor(t){this.Le=t,this.ke=new Map,this.qe=lh(),this.Qe=gu(),this.Ke=new zc(uc)}$e(t){for(const e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(const e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,(e=>{const n=this.ze(e);switch(t.state){case 0:this.je(e)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(e);break;case 3:this.je(e)&&(n.Be(),n.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),n.Ce(t.resumeToken));break;default:Qa()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach(((t,n)=>{this.je(n)&&e(n)}))}Je(t){const e=t.targetId,n=t.fe.count,i=this.Ye(e);if(i){const r=i.target;if(Wl(r))if(0===n){const t=new wc(r.path);this.We(e,t,_l.newNoDocument(t,mc.min()))}else Ja(1===n);else{const i=this.Ze(e);if(i!==n){const n=this.Xe(t),r=n?this.et(n,t,i):1;if(0!==r){this.He(e);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,t)}}}}}Xe(t){const e=t.fe.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=e;let s,o;try{s=Zc(n).toUint8Array()}catch(t){if(t instanceof Wc)return Ka("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new au(s,i,r)}catch(t){return Ka(t instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Te?null:o}et(t,e,n){return e.fe.count===n-this.rt(t,e.targetId)?0:2}rt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const r=this.Le.nt(),s=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;t.mightContain(s)||(this.We(e,n,null),i++)})),i}it(t){const e=new Map;this.ke.forEach(((n,i)=>{const r=this.Ye(i);if(r){if(n.current&&Wl(r.target)){const e=new wc(r.target.path);null!==this.qe.get(e)||this.st(i,e)||this.We(i,e,_l.newNoDocument(e,t))}n.De&&(e.set(i,n.ve()),n.Fe())}}));let n=yh();this.Qe.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.Ye(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.qe.forEach(((e,n)=>n.setReadTime(t)));const i=new lu(t,e,this.Ke,this.qe,n);return this.qe=lh(),this.Qe=gu(),this.Ke=new zc(uc),i}Ue(t,e){if(!this.je(t))return;const n=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,n),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,n){if(!this.je(t))return;const i=this.ze(t);this.st(t,e)?i.Me(e,1):i.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),n&&(this.qe=this.qe.insert(e,n))}removeTarget(t){this.ke.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new mu,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new Hc(uc),this.Qe=this.Qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||Ha("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.ke.get(t);return e&&e.be?null:this.Le._t(t)}He(t){this.ke.set(t,new mu),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.We(t,e,null)}))}st(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function gu(){return new zc(wc.comparator)}function vu(){return new zc(wc.comparator)}const yu={asc:"ASCENDING",desc:"DESCENDING"},wu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bu={and:"AND",or:"OR"};class Eu{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function _u(t,e){return t.useProto3Json||Fc(e)?e:{value:e}}function Tu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Iu(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Cu(t,e){return Tu(t,e.toTimestamp())}function Su(t){return Ja(!!t),mc.fromTimestamp(function(t){const e=Xc(t);return new pc(e.seconds,e.nanos)}(t))}function ku(t,e){return xu(t,e).canonicalString()}function xu(t,e){const n=function(t){return new gc(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Au(t){const e=gc.fromString(t);return Ja(Ku(e)),e}function Ru(t,e){return ku(t.databaseId,e.path)}function Nu(t,e){const n=Au(e);if(n.get(1)!==t.databaseId.projectId)throw new Za(Ya.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Za(Ya.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new wc(Ou(n))}function Du(t,e){return ku(t.databaseId,e)}function Lu(t){return new gc(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ou(t){return Ja(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Mu(t,e,n){return{name:Ru(t,e),fields:n.value.mapValue.fields}}function Pu(t,e){return{documents:[Du(t,e.path)]}}function Fu(t,e){const n={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Du(t,r);const s=function(t){if(0!==t.length)return Hu(Rl.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:qu(t.field),direction:Vu(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=_u(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ut:n,parent:r}}function Uu(t){let e=function(t){const e=Au(t);return 4===e.length?gc.emptyPath():Ou(e)}(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ja(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=ju(t);return e instanceof Rl&&Dl(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new Sl(Bu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Fc(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Tl(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new Tl(n,e)}(n.endAt)),function(t,e,n,i,r,s,o,a){return new Ql(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function ju(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Bu(t.unaryFilter.field);return Al.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Bu(t.unaryFilter.field);return Al.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bu(t.unaryFilter.field);return Al.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Bu(t.unaryFilter.field);return Al.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Qa()}}(t):void 0!==t.fieldFilter?function(t){return Al.create(Bu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qa()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Rl.create(t.compositeFilter.filters.map((t=>ju(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Qa()}}(t.compositeFilter.op))}(t):Qa()}function Vu(t){return yu[t]}function $u(t){return wu[t]}function zu(t){return bu[t]}function qu(t){return{fieldPath:t.canonicalString()}}function Bu(t){return yc.fromServerFormat(t.fieldPath)}function Hu(t){return t instanceof Al?function(t){if("=="===t.op){if(gl(t.value))return{unaryFilter:{field:qu(t.field),op:"IS_NAN"}};if(fl(t.value))return{unaryFilter:{field:qu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(gl(t.value))return{unaryFilter:{field:qu(t.field),op:"IS_NOT_NAN"}};if(fl(t.value))return{unaryFilter:{field:qu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qu(t.field),op:$u(t.op),value:t.value}}}(t):t instanceof Rl?function(t){const e=t.getFilters().map((t=>Hu(t)));return 1===e.length?e[0]:{compositeFilter:{op:zu(t.op),filters:e}}}(t):Qa()}function Gu(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Ku(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Wu{constructor(t,e,n,i,r=mc.min(),s=mc.min(),o=Qc.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Wu(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Wu(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Wu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Wu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Qu{constructor(t){this.ct=t}}function Ju(t){const e=Uu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?th(e,e.limit,"L"):e}class Xu{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(Yc(t.integerValue));else if("doubleValue"in t){const n=Yc(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),Uc(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At(`${n.seconds||""}`),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(Zc(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?wl(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):Qa()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const t of Object.keys(n))this.Rt(t,e),this.It(n[t],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const t of n)this.It(t,e)}gt(t,e){this.Et(e,37),wc.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}Xu.bt=new Xu;class Yu{constructor(){this._n=new Zu}addToCollectionParentIndex(t,e){return this._n.add(e),Sc.resolve()}getCollectionParents(t,e){return Sc.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return Sc.resolve()}deleteFieldIndex(t,e){return Sc.resolve()}deleteAllFieldIndexes(t){return Sc.resolve()}createTargetIndexes(t,e){return Sc.resolve()}getDocumentsMatchingTarget(t,e){return Sc.resolve(null)}getIndexType(t,e){return Sc.resolve(0)}getFieldIndexes(t,e){return Sc.resolve([])}getNextCollectionGroupToUpdate(t){return Sc.resolve(null)}getMinOffset(t,e){return Sc.resolve(Ec.min())}getMinOffsetFromCollectionGroup(t,e){return Sc.resolve(Ec.min())}updateCollectionGroup(t,e,n){return Sc.resolve()}updateIndexEntries(t,e){return Sc.resolve()}}class Zu{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Hc(gc.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Hc(gc.comparator)).toArray()}}new Uint8Array(0);class td{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new td(t,td.DEFAULT_COLLECTION_PERCENTILE,td.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}td.DEFAULT_COLLECTION_PERCENTILE=10,td.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,td.DEFAULT=new td(41943040,td.DEFAULT_COLLECTION_PERCENTILE,td.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),td.DISABLED=new td(-1,0,0);class ed{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new ed(0)}static Bn(){return new ed(-1)}}class nd{constructor(){this.changes=new ah((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,_l.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Sc.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class id{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class rd{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&$h(n.mutation,t,Kc.empty(),pc.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,yh()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=yh()){const i=ph();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=uh();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=ph();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,yh())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=lh();const s=fh(),o=fh();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof Hh)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),$h(o.mutation,e,o.mutation.getFieldMask(),pc.now())):s.set(e.key,Kc.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new id(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=fh();let i=new zc(((t,e)=>t-e)),r=yh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Kc.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||yh()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=mh();c.forEach((t=>{if(!r.has(t)){const i=jh(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return Sc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return wc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):Sc.resolve(ph());let o=-1,a=r;return s.next((e=>Sc.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?Sc.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,yh()))).next((t=>({batchId:o,changes:dh(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new wc(e)).next((t=>{let e=uh();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=uh();return this.indexManager.getCollectionParents(t,r).next((o=>Sc.forEach(o,(o=>{const a=function(t,e){return new Ql(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,_l.newInvalidDocument(i)))}));let n=uh();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&$h(s.mutation,i,Kc.empty(),pc.now()),rh(e,i)&&(n=n.insert(t,i))})),n}))}}class sd{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return Sc.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Su(t.createTime)}}(e)),Sc.resolve()}getNamedQuery(t,e){return Sc.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:Ju(t.bundledQuery),readTime:Su(t.readTime)}}(e)),Sc.resolve()}}class od{constructor(){this.overlays=new zc(wc.comparator),this.hr=new Map}getOverlay(t,e){return Sc.resolve(this.overlays.get(e))}getOverlays(t,e){const n=ph();return Sc.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ht(t,e,i)})),Sc.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),Sc.resolve()}getOverlaysForCollection(t,e,n){const i=ph(),r=e.length+1,s=new wc(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Sc.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new zc(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=ph(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=ph(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return Sc.resolve(o)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Zh(e,n));let r=this.hr.get(e);void 0===r&&(r=yh(),this.hr.set(e,r)),this.hr.set(e,r.add(n.key))}}class ad{constructor(){this.Pr=new Hc(cd.Ir),this.Tr=new Hc(cd.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new cd(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new cd(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new wc(new gc([])),n=new cd(e,t),i=new cd(e,t+1),r=[];return this.Tr.forEachInRange([n,i],(t=>{this.Ar(t),r.push(t.key)})),r}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new wc(new gc([])),n=new cd(e,t),i=new cd(e,t+1);let r=yh();return this.Tr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new cd(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class cd{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return wc.comparator(t.key,e.key)||uc(t.pr,e.pr)}static Er(t,e){return uc(t.pr,e.pr)||wc.comparator(t.key,e.key)}}class ld{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Hc(cd.Ir)}checkEmpty(t){return Sc.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Xh(r,e,n,i);this.mutationQueue.push(s);for(const e of i)this.wr=this.wr.add(new cd(e.key,r)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Sc.resolve(s)}lookupMutationBatch(t,e){return Sc.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.br(n),r=i<0?0:i;return Sc.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Sc.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return Sc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new cd(e,0),i=new cd(e,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(t=>{const e=this.Sr(t.pr);r.push(e)})),Sc.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Hc(uc);return e.forEach((t=>{const e=new cd(t,0),i=new cd(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,i],(t=>{n=n.add(t.pr)}))})),Sc.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;wc.isDocumentKey(r)||(r=r.child(""));const s=new cd(new wc(r),0);let o=new Hc(uc);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.pr)),!0)}),s),Sc.resolve(this.Dr(o))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Ja(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Sc.forEach(e.mutations,(i=>{const r=new cd(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new cd(e,0),i=this.wr.firstAfterOrEqual(n);return Sc.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Sc.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class hd{constructor(t){this.vr=t,this.docs=new zc(wc.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Sc.resolve(n?n.document.mutableCopy():_l.newInvalidDocument(e))}getEntries(t,e){let n=lh();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():_l.newInvalidDocument(t))})),Sc.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=lh();const s=e.path,o=new wc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||_c(bc(o),n)<=0||(i.has(o.key)||rh(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Sc.resolve(r)}getAllFromCollectionGroup(t,e,n,i){Qa()}Fr(t,e){return Sc.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new ud(this)}getSize(t){return Sc.resolve(this.size)}}class ud extends nd{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.ar.addEntry(t,i)):this.ar.removeEntry(n)})),Sc.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class dd{constructor(t){this.persistence=t,this.Mr=new ah((t=>Gl(t)),Kl),this.lastRemoteSnapshotVersion=mc.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ad,this.targetCount=0,this.Br=ed.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),Sc.resolve()}getLastRemoteSnapshotVersion(t){return Sc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Sc.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),Sc.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),Sc.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new ed(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,Sc.resolve()}updateTargetData(t,e){return this.qn(e),Sc.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,Sc.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Sc.waitFor(r).next((()=>i))}getTargetCount(t){return Sc.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return Sc.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),Sc.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),Sc.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),Sc.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return Sc.resolve(n)}containsKey(t,e){return Sc.resolve(this.Nr.containsKey(e))}}class pd{constructor(t,e){this.Lr={},this.overlays={},this.kr=new Pc(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new dd(this),this.indexManager=new Yu,this.remoteDocumentCache=function(t){return new hd(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new Qu(e),this.$r=new sd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new od,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Lr[t.toKey()];return n||(n=new ld(e,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){Ha("MemoryPersistence","Starting transaction:",t);const i=new md(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((t=>this.referenceDelegate.Wr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gr(t,e){return Sc.or(Object.values(this.Lr).map((n=>()=>n.containsKey(t,e))))}}class md extends Ic{constructor(t){super(),this.currentSequenceNumber=t}}class fd{constructor(t){this.persistence=t,this.zr=new ad,this.jr=null}static Hr(t){return new fd(t)}get Jr(){if(this.jr)return this.jr;throw Qa()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),Sc.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),Sc.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),Sc.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Sc.forEach(this.Jr,(n=>{const i=wc.fromPath(n);return this.Yr(t,i).next((t=>{t||e.removeEntry(i,mc.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return Sc.or([()=>Sc.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class gd{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=i}static Ki(t,e){let n=yh(),i=yh();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new gd(t,e.fromCache,n,i)}}class vd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class yd{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){var t;const e=null===(t=u())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()||!navigator.userAgent.includes("Safari")||navigator.userAgent.includes("Chrome")?xc.v(g())>0?6:4:8}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ji(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.Hi(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new vd;return this.Ji(t,e,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(t,e,n,i.size)}))})).next((()=>r.result))}Yi(t,e,n,i){return n.documentReadCount<this.Wi?(Ba()<=O.DEBUG&&Ha("QueryEngine","SDK will not create cache indexes for query:",ih(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Sc.resolve()):(Ba()<=O.DEBUG&&Ha("QueryEngine","Query:",ih(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Ba()<=O.DEBUG&&Ha("QueryEngine","The SDK decides to create cache indexes for query:",ih(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Zl(e))):Sc.resolve())}ji(t,e){if(Xl(e))return Sc.resolve(null);let n=Zl(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=th(e,null,"F"),n=Zl(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=yh(...i);return this.zi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Zi(e,i);return this.Xi(e,s,r,n.readTime)?this.ji(t,th(e,null,"F")):this.es(t,s,e,n)}))))})))))}Hi(t,e,n,i){return Xl(e)||i.isEqual(mc.min())?Sc.resolve(null):this.zi.getDocuments(t,n).next((r=>{const s=this.Zi(e,r);return this.Xi(e,s,n,i)?Sc.resolve(null):(Ba()<=O.DEBUG&&Ha("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ih(e)),this.es(t,s,e,function(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=mc.fromTimestamp(1e9===i?new pc(n+1,0):new pc(n,i));return new Ec(r,wc.empty(),e)}(i,-1)).next((t=>t)))}))}Zi(t,e){let n=new Hc(sh(t));return e.forEach(((e,i)=>{rh(t,i)&&(n=n.add(i))})),n}Xi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(t,e,n){return Ba()<=O.DEBUG&&Ha("QueryEngine","Using full collection scan to execute query:",ih(e)),this.zi.getDocumentsMatchingQuery(t,e,Ec.min(),n)}es(t,e,n,i){return this.zi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class wd{constructor(t,e,n,i){this.persistence=t,this.ts=e,this.serializer=i,this.ns=new zc(uc),this.rs=new ah((t=>Gl(t)),Kl),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new rd(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}async function bd(t,e){const n=Xa(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=yh();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({us:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function Ed(t){const e=Xa(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}function _d(t,e){const n=Xa(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function Td(t,e,n){const i=Xa(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!Nc(t))throw t;Ha("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)}function Id(t,e,n){const i=Xa(t);let r=mc.min(),s=yh();return i.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const i=Xa(t),r=i.rs.get(n);return void 0!==r?Sc.resolve(i.ns.get(r)):i.Qr.getTargetData(e,n)}(i,t,Zl(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.ts.getDocumentsMatchingQuery(t,e,n?r:mc.min(),n?s:yh()))).next((t=>(function(t,e,n){let i=t.ss.get(e)||mc.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.ss.set(e,i)}(i,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,hs:s})))))}class Cd{constructor(){this.activeTargetIds=wh}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Sd{constructor(){this.no=new Cd,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Cd,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class kd{io(t){}shutdown(){}}class xd{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ha("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Ha("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ad=null;function Rd(){return null===Ad?Ad=268435456+Math.round(2147483648*Math.random()):Ad++,"0x"+Ad.toString(16)}const Nd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dd{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}const Ld="WebChannelConnection";class Od extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po=`projects/${n}/databases/${i}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get wo(){return!1}So(t,e,n,i,r){const s=Rd(),o=this.bo(t,e.toUriEncodedString());Ha("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,i,r),this.Co(t,o,a,n).then((e=>(Ha("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw Ka("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,i,r,s){return this.So(t,e,n,i,r)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+za,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=Nd[t];return`${this.fo}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,i){const r=Rd();return new Promise(((s,o)=>{const a=new Fa;a.setWithCredentials(!0),a.listenOnce(La.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Da.NO_ERROR:const e=a.getResponseJson();Ha(Ld,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case Da.TIMEOUT:Ha(Ld,`RPC '${t}' ${r} timed out`),o(new Za(Ya.DEADLINE_EXCEEDED,"Request time out"));break;case Da.HTTP_ERROR:const n=a.getStatus();if(Ha(Ld,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ya).indexOf(e)>=0?e:Ya.UNKNOWN}(e.status);o(new Za(t,e.message))}else o(new Za(Ya.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Za(Ya.UNAVAILABLE,"Connection failed."));break;default:Qa()}}finally{Ha(Ld,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(i);Ha(Ld,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",c,n,15)}))}Fo(t,e,n){const i=Rd(),r=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Ra(),o=Na(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");Ha(Ld,`Creating RPC '${t}' stream ${i}: ${l}`,a);const h=s.createWebChannel(l,a);let u=!1,d=!1;const p=new Dd({lo:e=>{d?Ha(Ld,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(u||(Ha(Ld,`Opening RPC '${t}' stream ${i} transport.`),h.open(),u=!0),Ha(Ld,`RPC '${t}' stream ${i} sending:`,e),h.send(e))},ho:()=>h.close()}),m=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return m(h,Pa.EventType.OPEN,(()=>{d||Ha(Ld,`RPC '${t}' stream ${i} transport opened.`)})),m(h,Pa.EventType.CLOSE,(()=>{d||(d=!0,Ha(Ld,`RPC '${t}' stream ${i} transport closed`),p.Vo())})),m(h,Pa.EventType.ERROR,(e=>{d||(d=!0,Ka(Ld,`RPC '${t}' stream ${i} transport errored:`,e),p.Vo(new Za(Ya.UNAVAILABLE,"The operation could not be completed")))})),m(h,Pa.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];Ja(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ha(Ld,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=eu[t];if(void 0!==e)return iu(e)}(e),r=o.message;void 0===n&&(n=Ya.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,p.Vo(new Za(n,r)),h.close()}else Ha(Ld,`RPC '${t}' stream ${i} received:`,r),p.mo(r)}})),m(o,Oa.STAT_EVENT,(e=>{e.stat===Ma.PROXY?Ha(Ld,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===Ma.NOPROXY&&Ha(Ld,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{p.Ro()}),0),p}}function Md(){return"undefined"!=typeof document?document:null}function Pd(t){return new Eu(t,!0)}class Fd{constructor(t,e,n=1e3,i=1.5,r=6e4){this.oi=t,this.timerId=e,this.Mo=n,this.xo=i,this.Oo=r,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,e-n);i>0&&Ha("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Lo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Ud{constructor(t,e,n,i,r,s,o,a){this.oi=t,this.$o=n,this.Uo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Fd(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===Ya.RESOURCE_EXHAUSTED?(Ga(e.toString()),Ga("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===Ya.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Wo===e&&this.o_(t,n)}),(e=>{t((()=>{const t=new Za(Ya.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return Ha("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():(Ha("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jd extends Ud{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}a_(t,e){return this.connection.Fo("Listen",t,e)}onMessage(t){this.jo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Qa()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(Ja(void 0===e||"string"==typeof e),Qc.fromBase64String(e||"")):(Ja(void 0===e||e instanceof Uint8Array),Qc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Ya.UNKNOWN:iu(t.code);return new Za(e,t.message||"")}(o);n=new pu(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Nu(t,i.document.name),s=Su(i.document.updateTime),o=i.document.createTime?Su(i.document.createTime):mc.min(),a=new bl({mapValue:{fields:i.document.fields}}),c=_l.newFoundDocument(r,s,o,a),l=i.targetIds||[],h=i.removedTargetIds||[];n=new uu(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Nu(t,i.document),s=i.readTime?Su(i.readTime):mc.min(),o=_l.newNoDocument(r,s),a=i.removedTargetIds||[];n=new uu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Nu(t,i.document),s=i.removedTargetIds||[];n=new uu([],s,r,null)}else{if(!("filter"in e))return Qa();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,s=new tu(i,r),o=t.targetId;n=new du(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return mc.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?mc.min():e.readTime?Su(e.readTime):mc.min()}(t);return this.listener.u_(e,n)}c_(t){const e={};e.database=Lu(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=Wl(i)?{documents:Pu(t,i)}:{query:Fu(t,i).ut},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Iu(t,e.resumeToken);const i=_u(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(mc.min())>0){n.readTime=Tu(t,e.snapshotVersion.toTimestamp());const i=_u(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qa()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.t_(e)}l_(t){const e={};e.database=Lu(this.serializer),e.removeTarget=t,this.t_(e)}}class Vd extends Ud{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(Ja(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=function(t,e){return t&&t.length>0?(Ja(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Su(t.updateTime):Su(e);return n.isEqual(mc.min())&&(n=Su(e)),new Mh(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Su(t.commitTime);return this.listener.T_(n,e)}return Ja(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=Lu(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof Bh)n={update:Mu(t,e.key,e.value)};else if(e instanceof Qh)n={delete:Ru(t,e.key)};else if(e instanceof Hh)n={update:Mu(t,e.key,e.data),updateMask:Gu(e.fieldMask)};else{if(!(e instanceof Jh))return Qa();n={verify:Ru(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof kh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Dh)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw Qa()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Cu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Qa()}(t,e.precondition)),n}(this.serializer,t)))};this.t_(e)}}class $d extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new Za(Ya.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.So(t,xu(e,n),i,r,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ya.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Za(Ya.UNKNOWN,t.toString())}))}vo(t,e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(t,xu(e,n),i,s,o,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ya.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Za(Ya.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class zd{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ga(e),this.g_=!1):Ha("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class qd{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io((t=>{n.enqueueAndForget((async()=>{Yd(this)&&(Ha("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Xa(t);e.v_.add(4),await Hd(e),e.x_.set("Unknown"),e.v_.delete(4),await Bd(e)}(this))}))})),this.x_=new zd(n,i)}}async function Bd(t){if(Yd(t))for(const e of t.F_)await e(!0)}async function Hd(t){for(const e of t.F_)await e(!1)}function Gd(t,e){const n=Xa(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Xd(n)?Jd(n):fp(n).Jo()&&Wd(n,e))}function Kd(t,e){const n=Xa(t),i=fp(n);n.C_.delete(e),i.Jo()&&Qd(n,e),0===n.C_.size&&(i.Jo()?i.Xo():Yd(n)&&n.x_.set("Unknown"))}function Wd(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mc.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fp(t).c_(e)}function Qd(t,e){t.O_.Oe(e),fp(t).l_(e)}function Jd(t){t.O_=new fu({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),fp(t).start(),t.x_.p_()}function Xd(t){return Yd(t)&&!fp(t).Ho()&&t.C_.size>0}function Yd(t){return 0===Xa(t).v_.size}function Zd(t){t.O_=void 0}async function tp(t){t.C_.forEach(((e,n)=>{Wd(t,e)}))}async function ep(t,e){Zd(t),Xd(t)?(t.x_.S_(e),Jd(t)):t.x_.set("Unknown")}async function np(t,e,n){if(t.x_.set("Online"),e instanceof pu&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.C_.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.C_.delete(i),t.O_.removeTarget(i))}(t,e)}catch(n){Ha("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ip(t,n)}else if(e instanceof uu?t.O_.$e(e):e instanceof du?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(mc.min()))try{const e=await Ed(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.O_.it(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.C_.get(i);r&&t.C_.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t.C_.get(e);if(!i)return;t.C_.set(e,i.withResumeToken(Qc.EMPTY_BYTE_STRING,i.snapshotVersion)),Qd(t,e);const r=new Wu(i.target,e,n,i.sequenceNumber);Wd(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Ha("RemoteStore","Failed to raise snapshot:",e),await ip(t,e)}}async function ip(t,e,n){if(!Nc(e))throw e;t.v_.add(1),await Hd(t),t.x_.set("Offline"),n||(n=()=>Ed(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ha("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Bd(t)}))}function rp(t,e){return e().catch((n=>ip(t,n,e)))}async function sp(t){const e=Xa(t),n=gp(e);let i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;op(e);)try{const t=await _d(e.localStore,i);if(null===t){0===e.D_.length&&n.Xo();break}i=t.batchId,ap(e,t)}catch(t){await ip(e,t)}cp(e)&&lp(e)}function op(t){return Yd(t)&&t.D_.length<10}function ap(t,e){t.D_.push(e);const n=gp(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function cp(t){return Yd(t)&&!gp(t).Ho()&&t.D_.length>0}function lp(t){gp(t).start()}async function hp(t){gp(t).d_()}async function up(t){const e=gp(t);for(const n of t.D_)e.I_(n.mutations)}async function dp(t,e,n){const i=t.D_.shift(),r=Yh.from(i,e,n);await rp(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await sp(t)}async function pp(t,e){e&&gp(t).P_&&await async function(t,e){if(function(t){return function(t){switch(t){default:return Qa();case Ya.CANCELLED:case Ya.UNKNOWN:case Ya.DEADLINE_EXCEEDED:case Ya.RESOURCE_EXHAUSTED:case Ya.INTERNAL:case Ya.UNAVAILABLE:case Ya.UNAUTHENTICATED:return!1;case Ya.INVALID_ARGUMENT:case Ya.NOT_FOUND:case Ya.ALREADY_EXISTS:case Ya.PERMISSION_DENIED:case Ya.FAILED_PRECONDITION:case Ya.ABORTED:case Ya.OUT_OF_RANGE:case Ya.UNIMPLEMENTED:case Ya.DATA_LOSS:return!0}}(t)&&t!==Ya.ABORTED}(e.code)){const n=t.D_.shift();gp(t).Zo(),await rp(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await sp(t)}}(t,e),cp(t)&&lp(t)}async function mp(t,e){const n=Xa(t);n.asyncQueue.verifyOperationInProgress(),Ha("RemoteStore","RemoteStore received new credentials");const i=Yd(n);n.v_.add(3),await Hd(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Bd(n)}function fp(t){return t.N_||(t.N_=function(t,e,n){const i=Xa(t);return i.R_(),new jd(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:tp.bind(null,t),To:ep.bind(null,t),u_:np.bind(null,t)}),t.F_.push((async e=>{e?(t.N_.Zo(),Xd(t)?Jd(t):t.x_.set("Unknown")):(await t.N_.stop(),Zd(t))}))),t.N_}function gp(t){return t.B_||(t.B_=function(t,e,n){const i=Xa(t);return i.R_(),new Vd(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:hp.bind(null,t),To:pp.bind(null,t),E_:up.bind(null,t),T_:dp.bind(null,t)}),t.F_.push((async e=>{e?(t.B_.Zo(),await sp(t)):(await t.B_.stop(),t.D_.length>0&&(Ha("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}class vp{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new tc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new vp(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Za(Ya.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yp(t,e){if(Ga("AsyncQueue",`${e}: ${t}`),Nc(t))return new Za(Ya.UNAVAILABLE,`${e}: ${t}`);throw t}class wp{constructor(t){this.comparator=t?(e,n)=>t(e,n)||wc.comparator(e.key,n.key):(t,e)=>wc.comparator(t.key,e.key),this.keyedMap=uh(),this.sortedSet=new zc(this.comparator)}static emptySet(t){return new wp(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof wp))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new wp;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class bp{constructor(){this.L_=new zc(wc.comparator)}track(t){const e=t.doc.key,n=this.L_.get(e);n?0!==t.type&&3===n.type?this.L_=this.L_.insert(e,t):3===t.type&&1!==n.type?this.L_=this.L_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.L_=this.L_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.L_=this.L_.remove(e):1===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):Qa():this.L_=this.L_.insert(e,t)}k_(){const t=[];return this.L_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Ep{constructor(t,e,n,i,r,s,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Ep(t,e,wp.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&eh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class _p{constructor(){this.q_=void 0,this.Q_=[]}}class Tp{constructor(){this.queries=new ah((t=>nh(t)),eh),this.onlineState="Unknown",this.K_=new Set}}function Ip(t,e){const n=Xa(t);let i=!1;for(const t of e){const e=t.query,r=n.queries.get(e);if(r){for(const e of r.Q_)e.W_(t)&&(i=!0);r.q_=t}}i&&Sp(n)}function Cp(t,e,n){const i=Xa(t),r=i.queries.get(e);if(r)for(const t of r.Q_)t.onError(n);i.queries.delete(e)}function Sp(t){t.K_.forEach((t=>{t.next()}))}class kp{constructor(t,e,n){this.query=t,this.G_=e,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Ep(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.z_?this.H_(t)&&(this.G_.next(t),e=!0):this.J_(t,this.onlineState)&&(this.Y_(t),e=!0),this.j_=t,e}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let e=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),e=!0),e}J_(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Z_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}H_(t){if(t.docChanges.length>0)return!0;const e=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Y_(t){t=Ep.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}class xp{constructor(t){this.key=t}}class Ap{constructor(t){this.key=t}}class Rp{constructor(t,e){this.query=t,this.oa=e,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=yh(),this.mutatedKeys=yh(),this.ua=sh(t),this.ca=new wp(this.ua)}get la(){return this.oa}ha(t,e){const n=e?e.Pa:new bp,i=e?e.ca:this.ca;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const l=i.get(t),h=rh(this.query,e)?e:null,u=!!l&&this.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let p=!1;l&&h?l.data.isEqual(h.data)?u!==d&&(n.track({type:3,doc:h}),p=!0):this.Ia(l,h)||(n.track({type:2,doc:h}),p=!0,(a&&this.ua(h,a)>0||c&&this.ua(h,c)<0)&&(o=!0)):!l&&h?(n.track({type:0,doc:h}),p=!0):l&&!h&&(n.track({type:1,doc:l}),p=!0,(a||c)&&(o=!0)),p&&(h?(s=s.add(h),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{ca:s,Pa:n,Xi:o,mutatedKeys:r}}Ia(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const r=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const s=t.Pa.k_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qa()}};return n(t)-n(e)}(t.type,e.type)||this.ua(t.doc,e.doc))),this.Ta(n),i=null!=i&&i;const o=e&&!i?this.Ea():[],a=0===this.aa.size&&this.current&&!i?1:0,c=a!==this._a;return this._a=a,0!==s.length||c?{snapshot:new Ep(this.query,t.ca,r,s,t.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new bp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach((t=>this.oa=this.oa.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.oa=this.oa.delete(t))),this.current=t.current)}Ea(){if(!this.current)return[];const t=this.aa;this.aa=yh(),this.ca.forEach((t=>{this.Aa(t.key)&&(this.aa=this.aa.add(t.key))}));const e=[];return t.forEach((t=>{this.aa.has(t)||e.push(new Ap(t))})),this.aa.forEach((n=>{t.has(n)||e.push(new xp(n))})),e}Ra(t){this.oa=t.hs,this.aa=yh();const e=this.ha(t.documents);return this.applyChanges(e,!0)}Va(){return Ep.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Np{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Dp{constructor(t){this.key=t,this.ma=!1}}class Lp{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new ah((t=>nh(t)),eh),this.pa=new Map,this.ya=new Set,this.wa=new zc(wc.comparator),this.Sa=new Map,this.ba=new ad,this.Da={},this.Ca=new Map,this.va=ed.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function Op(t,e){const n=function(t){const e=Xa(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jp.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Up.bind(null,e),e.fa.u_=Ip.bind(null,e.eventManager),e.fa.xa=Cp.bind(null,e.eventManager),e}(t);let i,r;const s=n.ga.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Va();else{const t=await function(t,e){const n=Xa(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Qr.getTargetData(t,e).next((r=>r?(i=r,Sc.resolve(i)):n.Qr.allocateTargetId(t).next((r=>(i=new Wu(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Qr.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.ns.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(t.targetId,t),n.rs.set(e,t.targetId)),t}))}(n.localStore,Zl(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=await async function(t,e,n,i,r){t.Ma=(e,n,i)=>async function(t,e,n,i){let r=e.view.ha(n);r.Xi&&(r=await Id(t.localStore,e.query,!1).then((({documents:t})=>e.view.ha(t,r))));const s=i&&i.targetChanges.get(e.targetId),o=i&&null!=i.targetMismatches.get(e.targetId),a=e.view.applyChanges(r,t.isPrimaryClient,s,o);return Hp(t,e.targetId,a.da),a.snapshot}(t,e,n,i);const s=await Id(t.localStore,e,!0),o=new Rp(e,s.hs),a=o.ha(s.documents),c=hu.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),l=o.applyChanges(a,t.isPrimaryClient,c);Hp(t,n,l.da);const h=new Np(e,n,o);return t.ga.set(e,h),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot}(n,e,i,"current"===s,t.resumeToken),n.isPrimaryClient&&Gd(n.remoteStore,t)}return r}async function Mp(t,e){const n=Xa(t),i=n.ga.get(e),r=n.pa.get(i.targetId);if(r.length>1)return n.pa.set(i.targetId,r.filter((t=>!eh(t,e)))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Td(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Kd(n.remoteStore,i.targetId),qp(n,i.targetId)})).catch(Cc)):(qp(n,i.targetId),await Td(n.localStore,i.targetId,!0))}async function Pp(t,e){const n=Xa(t);try{const t=await function(t,e){const n=Xa(t),i=e.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const o=[];e.targetChanges.forEach(((s,a)=>{const c=r.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(t,s.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?l=l.withResumeToken(Qc.EMPTY_BYTE_STRING,mc.min()).withLastLimboFreeSnapshotVersion(mc.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,i)),r=r.insert(a,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(t,l))}));let a=lh(),c=yh();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(function(t,e,n){let i=yh(),r=yh();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=lh();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(mc.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):Ha("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:i,ls:r}}))}(t,s,e.documentUpdates).next((t=>{a=t.cs,c=t.ls}))),!i.isEqual(mc.min())){const e=n.Qr.getLastRemoteSnapshotVersion(t).next((e=>n.Qr.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return Sc.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.ns=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.Sa.get(e);i&&(Ja(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.ma=!0:t.modifiedDocuments.size>0?Ja(i.ma):t.removedDocuments.size>0&&(Ja(i.ma),i.ma=!1))})),await Wp(n,t,e)}catch(t){await Cc(t)}}function Fp(t,e,n){const i=Xa(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ga.forEach(((n,i)=>{const r=i.view.U_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=Xa(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.Q_)t.U_(e)&&(i=!0)})),i&&Sp(n)}(i.eventManager,e),t.length&&i.fa.u_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Up(t,e,n){const i=Xa(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Sa.get(e),s=r&&r.key;if(s){let t=new zc(wc.comparator);t=t.insert(s,_l.newNoDocument(s,mc.min()));const n=yh().add(s),r=new lu(mc.min(),new Map,new zc(uc),t,n);await Pp(i,r),i.wa=i.wa.remove(s),i.Sa.delete(e),Kp(i)}else await Td(i.localStore,e,!1).then((()=>qp(i,e,n))).catch(Cc)}async function jp(t,e){const n=Xa(t),i=e.batch.batchId;try{const t=await function(t,e){const n=Xa(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Sc.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);Ja(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=yh();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);zp(n,i,null),$p(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Wp(n,t)}catch(t){await Cc(t)}}async function Vp(t,e,n){const i=Xa(t);try{const t=await function(t,e){const n=Xa(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(Ja(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);zp(i,e,n),$p(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Wp(i,t)}catch(n){await Cc(n)}}function $p(t,e){(t.Ca.get(e)||[]).forEach((t=>{t.resolve()})),t.Ca.delete(e)}function zp(t,e,n){const i=Xa(t);let r=i.Da[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}function qp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.pa.get(e))t.ga.delete(i),n&&t.fa.xa(i,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach((e=>{t.ba.containsKey(e)||Bp(t,e)}))}function Bp(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(Kd(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Kp(t))}function Hp(t,e,n){for(const i of n)i instanceof xp?(t.ba.addReference(i.key,e),Gp(t,i)):i instanceof Ap?(Ha("SyncEngine","Document no longer in limbo: "+i.key),t.ba.removeReference(i.key,e),t.ba.containsKey(i.key)||Bp(t,i.key)):Qa()}function Gp(t,e){const n=e.key,i=n.path.canonicalString();t.wa.get(n)||t.ya.has(i)||(Ha("SyncEngine","New document in limbo: "+n),t.ya.add(i),Kp(t))}function Kp(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new wc(gc.fromString(e)),i=t.va.next();t.Sa.set(i,new Dp(n)),t.wa=t.wa.insert(n,i),Gd(t.remoteStore,new Wu(Zl(Jl(n.path)),i,"TargetPurposeLimboResolution",Pc._e))}}async function Wp(t,e,n){const i=Xa(t),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach(((t,a)=>{o.push(i.Ma(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=gd.Ki(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.fa.u_(r),await async function(t,e){const n=Xa(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Sc.forEach(e,(e=>Sc.forEach(e.qi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Sc.forEach(e.Qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Nc(t))throw t;Ha("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.ns.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(e,r)}}}(i.localStore,s))}async function Qp(t,e){const n=Xa(t);if(!n.currentUser.isEqual(e)){Ha("SyncEngine","User change. New user:",e.toKey());const t=await bd(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new Za(Ya.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ca.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Wp(n,t.us)}}function Jp(t,e){const n=Xa(t),i=n.Sa.get(e);if(i&&i.ma)return yh().add(i.key);{let t=yh();const i=n.pa.get(e);if(!i)return t;for(const e of i){const i=n.ga.get(e);t=t.unionWith(i.view.la)}return t}}function Xp(t){const e=Xa(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jp.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vp.bind(null,e),e}class Yp{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Pd(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,i){return new wd(t,e,n,i)}(this.persistence,new yd,t.initialUser,this.serializer)}createPersistence(t){return new pd(fd.Hr,this.serializer)}createSharedClientState(t){return new Sd}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Zp{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Fp(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qp.bind(null,this.syncEngine),await async function(t,e){const n=Xa(t);e?(n.v_.delete(2),await Bd(n)):e||(n.v_.add(2),await Hd(n),n.x_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Tp}createDatastore(t){const e=Pd(t.databaseInfo.databaseId),n=function(t){return new Od(t)}(t.databaseInfo);return function(t,e,n,i){return new $d(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new qd(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>Fp(this.syncEngine,t,0)),xd.D()?new xd:new kd)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new Lp(t,e,n,i,r,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=Xa(t);Ha("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await Hd(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}class tm{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):Ga("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class em{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=$a.UNAUTHENTICATED,this.clientId=hc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Ha("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Ha("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Za(Ya.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new tc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=yp(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function nm(t,e){t.asyncQueue.verifyOperationInProgress(),Ha("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await bd(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function im(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ha("FirestoreClient","Using user provided OfflineComponentProvider");try{await nm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===Ya.FAILED_PRECONDITION||t.code===Ya.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Ka("Error using user provided cache. Falling back to memory cache: "+n),await nm(t,new Yp)}}else Ha("FirestoreClient","Using default OfflineComponentProvider"),await nm(t,new Yp);return t._offlineComponents}(t);Ha("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>mp(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>mp(e.remoteStore,n))),t._onlineComponents=e}async function rm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ha("FirestoreClient","Using user provided OnlineComponentProvider"),await im(t,t._uninitializedComponentsProvider._online)):(Ha("FirestoreClient","Using default OnlineComponentProvider"),await im(t,new Zp))),t._onlineComponents}async function sm(t){const e=await rm(t),n=e.eventManager;return n.onListen=Op.bind(null,e.syncEngine),n.onUnlisten=Mp.bind(null,e.syncEngine),n}function om(t,e,n={}){const i=new tc;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new tm({next:n=>{e.enqueueAndForget((()=>async function(t,e){const n=Xa(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const t=s.Q_.indexOf(e);t>=0&&(s.Q_.splice(t,1),r=0===s.Q_.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}(t,o))),n.fromCache&&"server"===i.source?r.reject(new Za(Ya.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new kp(n,s,{includeMetadataChanges:!0,Z_:!0});return async function(t,e){const n=Xa(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new _p),r)try{s.q_=await n.onListen(i)}catch(t){const n=yp(t,`Initialization of query '${ih(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&Sp(n)}(t,o)}(await sm(t),t.asyncQueue,e,n,i))),i.promise}function am(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const cm=new Map;function lm(t,e,n){if(!n)throw new Za(Ya.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hm(t){if(!wc.isDocumentKey(t))throw new Za(Ya.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function um(t){if(wc.isDocumentKey(t))throw new Za(Ya.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Qa()}function pm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Za(Ya.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dm(t);throw new Za(Ya.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class mm{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Za(Ya.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Za(Ya.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new Za(Ya.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=am(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Za(Ya.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Za(Ya.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Za(Ya.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class fm{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Za(Ya.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Za(Ya.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mm(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new nc;switch(t.type){case"firstParty":return new oc(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Za(Ya.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=cm.get(t);e&&(Ha("ComponentProvider","Removing Datastore"),cm.delete(t),e.terminate())}(this),Promise.resolve()}}class gm{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new gm(this.firestore,t,this._query)}}class vm{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ym(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new vm(this.firestore,t,this._key)}}class ym extends gm{constructor(t,e,n){super(t,e,Jl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new vm(this.firestore,null,new wc(t))}withConverter(t){return new ym(this.firestore,t,this._path)}}function wm(t,e,...n){if(t=x(t),lm("collection","path",e),t instanceof fm){const i=gc.fromString(e,...n);return um(i),new ym(t,null,i)}{if(!(t instanceof vm||t instanceof ym))throw new Za(Ya.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(gc.fromString(e,...n));return um(i),new ym(t.firestore,null,i)}}function bm(t,e,...n){if(t=x(t),1===arguments.length&&(e=hc.newId()),lm("doc","path",e),t instanceof fm){const i=gc.fromString(e,...n);return hm(i),new vm(t,null,new wc(i))}{if(!(t instanceof vm||t instanceof ym))throw new Za(Ya.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(gc.fromString(e,...n));return hm(i),new vm(t.firestore,t instanceof ym?t.converter:null,new wc(i))}}class Em{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Fd(this,"async_queue_retry"),this._u=()=>{const t=Md();t&&Ha("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=Md();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const e=Md();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise((()=>{}));const e=new tc;return this.uu((()=>this.tu&&this.su?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.eu.push(t),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!Nc(t))throw t;Ha("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(t){const e=this.Xa.then((()=>(this.iu=!0,t().catch((t=>{this.ru=t,this.iu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Ga("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.iu=!1,t))))));return this.Xa=e,e}enqueueAfterDelay(t,e,n){this.au(),this.ou.indexOf(t)>-1&&(e=0);const i=vp.createAndSchedule(this,t,e,n,(t=>this.lu(t)));return this.nu.push(i),i}au(){this.ru&&Qa()}verifyOperationInProgress(){}async hu(){let t;do{t=this.Xa,await t}while(t!==this.Xa)}Pu(t){for(const e of this.nu)if(e.timerId===t)return!0;return!1}Iu(t){return this.hu().then((()=>{this.nu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.nu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.hu()}))}Tu(t){this.ou.push(t)}lu(t){const e=this.nu.indexOf(t);this.nu.splice(e,1)}}class _m extends fm{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new Em,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Cm(this),this._firestoreClient.terminate()}}function Tm(t,e){const n="string"==typeof t?t:e||"(default)",i=pt("object"==typeof t?t:yt(),"firestore").getImmediate({identifier:n});if(!i._initialized){const t=(t=>{const e=d("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]})();t&&function(t,e,n,i={}){var r;const s=(t=pm(t,fm))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=$a.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Za(Ya.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new $a(s)}t._authCredentials=new ic(new ec(e,n))}}(i,...t)}return i}function Im(t){return t._firestoreClient||Cm(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Cm(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new il(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,am(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new em(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class Sm{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Sm(Qc.fromBase64String(t))}catch(t){throw new Za(Ya.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Sm(Qc.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class km{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Za(Ya.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yc(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class xm{constructor(t){this._methodName=t}}class Am{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Za(Ya.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Za(Ya.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return uc(this._lat,t._lat)||uc(this._long,t._long)}}const Rm=/^__.*__$/;class Nm{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Hh(t,this.data,this.fieldMask,e,this.fieldTransforms):new Bh(t,this.data,e,this.fieldTransforms)}}function Dm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qa()}}class Lm{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Eu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new Lm(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.mu(t),i}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return Bm(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(0===t.length)throw this.pu("Document fields must not be empty");if(Dm(this.du)&&Rm.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class Om{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Pd(t)}Su(t,e,n,i=!1){return new Lm({du:t,methodName:e,wu:n,path:yc.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mm(t){const e=t._freezeSettings(),n=Pd(t._databaseId);return new Om(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Pm(t,e,n,i,r,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,r);Vm("Data must be an object, but it was:",o,i);const a=Um(i,o);let c,l;if(s.merge)c=new Kc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=$m(e,i,n);if(!o.contains(r))throw new Za(Ya.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Hm(t,r)||t.push(r)}c=new Kc(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new Nm(new bl(a),c,l)}function Fm(t,e){if(jm(t=x(t)))return Vm("Unsupported field value:",e,t),Um(t,e);if(t instanceof xm)return function(t,e){if(!Dm(e.du))throw e.pu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.pu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Fm(r,e.gu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=x(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _h(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=pc.fromDate(t);return{timestampValue:Tu(e.serializer,n)}}if(t instanceof pc){const n=new pc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tu(e.serializer,n)}}if(t instanceof Am)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sm)return{bytesValue:Iu(e.serializer,t._byteString)};if(t instanceof vm){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.pu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ku(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.pu(`Unsupported field value: ${dm(t)}`)}(t,e)}function Um(t,e){const n={};return $c(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vc(t,((t,i)=>{const r=Fm(i,e.Ru(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function jm(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof pc||t instanceof Am||t instanceof Sm||t instanceof vm||t instanceof xm)}function Vm(t,e,n){if(!jm(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=dm(n);throw"an object"===i?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function $m(t,e,n){if((e=x(e))instanceof km)return e._internalPath;if("string"==typeof e)return qm(t,e);throw Bm("Field path arguments must be of type string or ",t,!1,void 0,n)}const zm=new RegExp("[~\\*/\\[\\]]");function qm(t,e,n){if(e.search(zm)>=0)throw Bm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new km(...e.split("."))._internalPath}catch(i){throw Bm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bm(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new Za(Ya.INVALID_ARGUMENT,a+t+c)}function Hm(t,e){return t.some((t=>t.isEqual(e)))}class Gm{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new vm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Km(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Wm("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Km extends Gm{data(){return super.data()}}function Wm(t,e){return"string"==typeof e?qm(t,e):e instanceof km?e._internalPath:e._delegate._internalPath}class Qm{convertValue(t,e="none"){switch(ol(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Yc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Zc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Qa()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Vc(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new Am(Yc(t.latitude),Yc(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=el(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(nl(t));default:return null}}convertTimestamp(t){const e=Xc(t);return new pc(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=gc.fromString(t);Ja(Ku(n));const i=new rl(n.get(1),n.get(3)),r=new wc(n.popFirst(5));return i.isEqual(e)||Ga(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}function Jm(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Xm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ym extends Gm{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Zm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Wm("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Zm extends Ym{data(t={}){return super.data(t)}}class tf{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Xm(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Zm(this._firestore,this._userDataWriter,n.key,n,new Xm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Za(Ya.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new Zm(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Xm(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new Zm(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Xm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:ef(e.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ef(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qa()}}class nf extends Qm{constructor(t){super(),this.firestore=t}convertBytes(t){return new Sm(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new vm(this.firestore,null,e)}}function rf(t){t=pm(t,gm);const e=pm(t.firestore,_m),n=Im(e),i=new nf(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Za(Ya.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),om(n,t._query).then((n=>new tf(e,i,t,n)))}function sf(t,e,n){t=pm(t,vm);const i=pm(t.firestore,_m),r=Jm(t.converter,e,n);return af(i,[Pm(Mm(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,Ph.none())])}function of(t,e){const n=pm(t.firestore,_m),i=bm(t),r=Jm(t.converter,e);return af(n,[Pm(Mm(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,Ph.exists(!1))]).then((()=>i))}function af(t,e){return function(t,e){const n=new tc;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=Xp(t);try{const t=await function(t,e){const n=Xa(t),i=pc.now(),r=e.reduce(((t,e)=>t.add(e.key)),yh());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=lh(),c=yh();return n.os.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=zh(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Hh(t.key,e,El(e.value.mapValue),Ph.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:dh(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Da[t.currentUser.toKey()];i||(i=new zc(uc)),i=i.insert(e,n),t.Da[t.currentUser.toKey()]=i}(i,t.batchId,n),await Wp(i,t.changes),await sp(i.remoteStore)}catch(t){const e=yp(t,"Failed to persist write");n.reject(e)}}(await function(t){return rm(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(Im(t),e)}new WeakMap,function(t,e=!0){!function(t){za=t}(gt),dt(new A("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new _m(new rc(t.getProvider("auth-internal")),new cc(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Za(Ya.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rl(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),wt(Va,"4.4.1",t),wt(Va,"4.4.1","esm2017")}();var cf=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const lf=vt({apiKey:"AIzaSyDKlhRev5ZTVC9nGqXyT4qBi0WxSqs1gHE",authDomain:"moviehub-ad4ef.firebaseapp.com",projectId:"moviehub-ad4ef",storageBucket:"moviehub-ad4ef.appspot.com",messagingSenderId:"15340906607",appId:"1:15340906607:web:3eeeaedde73256afea859a"}),hf=Tm(lf),uf=function(t=yt()){const e=pt(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=pt(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(E(n.getOptions(),null!=e?e:{}))return t;Pt(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:mi,persistence:[Mn,yn,bn]}),i=m("authTokenSyncURL");if(i){const t=(r=i,async t=>{const e=t&&await t.getIdTokenResult(),n=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>yi)return;const i=null==e?void 0:e.token;wi!==i&&(wi=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(t,e,n){x(t).beforeAuthStateChanged(e,n)}(n,t,(()=>t(n.currentUser))),function(e,n,i,r){x(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}var r;const s=d("auth");return s&&function(t,e,n){const i=Pe(t);jt(i._canInitEmulator,i,"emulator-config-failed"),jt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=qe(e),{host:o,port:a}=function(t){const e=qe(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Be(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Be(e)}}}(e),c=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${s}`),n}(lf);let df=null;const pf=t=>{(function(t,e,n){return async function(t,e){return pn(Pe(t),e)}(x(t),tn.credential(e,n)).catch((async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&mn(t),e}))})(uf,t.email,t.password).then((t=>cf(void 0,void 0,void 0,(function*(){const e=t.user;console.log(e.uid),alert("Bienvenido de vuelta")})))).catch((t=>{const e=t.code,n=t.message;console.error(e,n),alert("Credenciales incorrectas")}))};var mf=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const ff=t=>({action:"navigate",payload:t}),gf=t=>({action:"navigateCategory",payload:t}),vf=t=>({action:"SaveTitleCategory",payload:t}),yf=t=>({action:"SaveImageCategory",payload:t}),wf=()=>mf(void 0,void 0,void 0,(function*(){const e=yield function(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){try{const t=yield cf(void 0,void 0,void 0,(function*(){const t=yield rf(wm(hf,"movies")),e=[];return t.forEach((t=>{const n=t.data();e.push(Object.assign({id:t.id},n))})),e}));return console.log(t),t}catch(t){console.error(t)}}))}();return{action:t.GET,payload:e}})),bf=t=>mf(void 0,void 0,void 0,(function*(){const n=yield function(t){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){try{const e=yield(t=>cf(void 0,void 0,void 0,(function*(){try{const e=wm(bm(hf,"users",t),"Favorites"),n=yield rf(e),i=[];return n.forEach((t=>{const e=t.data();i.push(Object.assign({id:t.id},e))})),i}catch(e){throw console.error("Error al obtener las películas favoritas del usuario",t,e),e}})))(t);return console.log(e),e}catch(t){console.error(t)}}))}(t);return{action:e.GET2,payload:n}})),Ef=t=>mf(void 0,void 0,void 0,(function*(){const e=yield function(t){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){try{const e=yield(t=>cf(void 0,void 0,void 0,(function*(){try{const e=[],n=wm(bm(hf,"users",t),"Mylists");return(yield rf(n)).forEach((t=>{const n=t.data();e.push(Object.assign({id:t.id},n))})),console.log(e),e}catch(e){throw console.error("Error al obtener las listas de películas del usuario",t,e),e}})))(t);return console.log(e),e||[]}catch(t){return console.error(t),[]}}))}(t);return{action:i.GET3,payload:e}})),_f=(t,e)=>mf(void 0,void 0,void 0,(function*(){const n=yield function(t,e){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){try{const n=yield((t,e)=>cf(void 0,void 0,void 0,(function*(){try{const n=[],i=wm(bm(hf,"users",t),"Mylists"),r=wm(bm(i,e),"content");return(yield rf(r)).forEach((t=>{if("automaticreation123"!==t.id){const e=t.data();n.push(Object.assign({id:t.id},e))}})),n}catch(e){throw console.error("Error al obtener las listas de películas del usuario",t,e),e}})))(t,e);return console.log(n),n}catch(t){console.error("Error al obtener el contenido de la lista de películas del usuario:",t)}}))}(t,e);return{action:r.GET4,payload:n}}));!function(t,e,n,i){x(t).onAuthStateChanged((t=>{t?(null!==t.uid&&Cf((t=>({action:"SETUSER",payload:t}))(t.uid)),Cf(ff("DASHBOARD")),console.log(t)):(Cf(ff("LOGIN")),console.log("no hay usuario logueado"))}),void 0,void 0)}(uf);let Tf={screen:"LOGIN",movielist:[],currentcategory:"",titlecategory:"",imagecategory:"",movieid:"",movieimage:"",moviecategories:"",movietitle:"",moviedirector:"",moviereleasedate:"",moviecast:"",moviecrew:"",movieimagesec:"",moviedescription:"",moviecatchphrase:"",favlist:[],currentnewlistname:"",currentnewlistimage:"",currentnewlistid:"",usermovielists:[]||0,listcontent:[],user:""},If=[];const Cf=n=>{const s=((n,s)=>{const{action:o,payload:a}=n;return"navigate"===o&&(s.screen=a),o===t.GET?Object.assign(Object.assign({},s),{movielist:a}):o===e.GET2?Object.assign(Object.assign({},s),{favlist:a}):("navigateCategory"===o&&(s.currentcategory=a),"SaveTitleCategory"===o&&(s.titlecategory=a),"SaveImageCategory"===o&&(s.imagecategory=a),"SaveMovieId"===o&&(s.movieid=a),"SaveMovieImage"===o&&(s.movieimage=a),"SaveMovieCategories"===o&&(s.moviecategories=a),"SaveMovieTitle"===o&&(s.movietitle=a),"SaveMovieDirector"===o&&(s.moviedirector=a),"SaveMovieReleaseDate"===o&&(s.moviereleasedate=a),"SaveMovieCast"===o&&(s.moviecast=a),"SaveMovieCrew"===o&&(s.moviecrew=a),"SaveMovieImageSec"===o&&(s.movieimagesec=a),"SaveMovieDescription"===o&&(s.moviedescription=a),"SaveMovieCatchPhrase"===o&&(s.moviecatchphrase=a),"SaveCurrentNewListName"===o&&(s.currentnewlistname=a),"SaveCurrentNewListImage"===o&&(s.currentnewlistimage=a),"SaveCurrentNewListId"===o&&(s.currentnewlistid=a),o===i.GET3?Object.assign(Object.assign({},s),{usermovielists:a}):o===r.GET4?Object.assign(Object.assign({},s),{listcontent:a}):("SETUSER"===o&&(s.user=a),s))})(n,JSON.parse(JSON.stringify(Tf)));Tf=s,If.forEach((t=>t.render()))},Sf=t=>{If=[...If,t]};var kf,xf=n(925);!function(t){t.section_title="section_title",t.image="image",t.message="message",t.buttonlabel="buttonlabel"}(kf||(kf={}));class Af extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({section_title:null,image:null,message:null,buttonlabel:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){let t=`\n\t\t\t<section id="allbanner" style="background-image: url('${this.image||"https://pbs.twimg.com/media/GJ331yEWQAAtUzN.jpg "}');">\n            <custom-navbar></custom-navbar>\n            <section>\n                <section>\n        `;this.section_title&&(t+=`<h1>${this.section_title}</h1>`),this.message&&(t+=`<h1>${this.message}</h1>`),t+="\n                </section>\n        ",this.buttonlabel&&(t+=`<button type="button" id="accountButton">${this.buttonlabel}</button>`),t+="\n            </section>\n        ",this.shadowRoot.innerHTML=t}const e=this.ownerDocument.createElement("style");e.innerHTML=xf.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-banner",Af);var Rf=n(682);const Nf=[{name:"Classics",category:"classics",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/rr7E0NoGKxvbkb89eR1GwfoYjpA.jpg"},{name:"Popular",category:"popular",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/s5R6kTMfOxkGit96A8lqcDL4uVk.jpg"},{name:"On-cinema",category:"cinema",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/rron9HAuS9s7zBF8iCX1tsafxUo.jpg"},{name:"Trending",category:"trending",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/iAyr7VEFGJoHDIHIxjEb3TskQW4.jpg"},{name:"Action",category:"action",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/d9sMIwulLtwRHowmDk2INm0ugmP.jpg"},{name:"Sci-fi",category:"sci-fi",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/cNffd3wkuIYZMelbPRAZ23E5HBT.jpg"},{name:"Romance",category:"romance",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/nofXR1TN1vgGjdfnwGQwFaAWBaY.jpg"},{name:"Comedy",category:"comedy",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/qdIMHd4sEfJSckfVJfKQvisL02a.jpg"},{name:"Thriller",category:"thriller",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/bneUTWFAcVCdsb0O5UwZbJd8xqZ.jpg"},{name:"Drama",category:"drama",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/pcWxKfFNCznTKYy0E8M9nG1cwL4.jpg"},{name:"Animated",category:"animated",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/sRvXNDItGlWCqtO3j6wks52FmbD.jpg"},{name:"Documental",category:"documental",image:"https://media.vogue.es/photos/605dcd126503a651df3ce9ef/master/w_1600%2Cc_limit/Seapiracy-vogue-credit-Netflix-7.jpg"},{name:"Psychological",category:"psychological",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/fGe1ej335XbqN1j9teoDpofpbLX.jpg"}];class Df extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),Sf(this)}connectedCallback(){var t,e,n,i;this.render();const r=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".pages a.navigate-list");r&&r.addEventListener("click",(()=>{Cf(ff("MYLISTS"))}));const s=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#signin");s&&s.addEventListener("click",(()=>{Cf(ff("SIGNIN"))}));const o=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#login");o&&o.addEventListener("click",(()=>{Cf(ff("LOGIN"))}));const a=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#home");a&&a.addEventListener("click",(()=>{Cf(ff("DASHBOARD"))}))}render(){if(this.shadowRoot){const t=document.createElement("nav"),e=document.createElement("section");e.className="search-bar";const n=document.createElement("section");n.className="icon";const i=document.createElement("img");i.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4xIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTQxNiAyMDhjMCA0NS45LTE0LjkgODguMy00MCAxMjIuN0w1MDIuNiA0NTcuNGMxMi41IDEyLjUgMTIuNSAzMi44IDAgNDUuM3MtMzIuOCAxMi41LTQ1LjMgMEwzMzAuNyAzNzZjLTM0LjQgMjUuMi03Ni44IDQwLTEyMi43IDQwQzkzLjEgNDE2IDAgMzIyLjkgMCAyMDhTOTMuMSAwIDIwOCAwUzQxNiA5My4xIDQxNiAyMDh6TTIwOCAzNTJhMTQ0IDE0NCAwIDEgMCAwLTI4OCAxNDQgMTQ0IDAgMSAwIDAgMjg4eiIvPjwvc3ZnPg==",i.alt="search logo",n.appendChild(i);const r=document.createElement("input");r.className="barra",r.type="text",e.appendChild(n),e.appendChild(r);const s=document.createElement("section");s.className="pages";const o=document.createElement("a");o.href="#",o.textContent="home",o.id="home",s.appendChild(o);const a=document.createElement("a");a.href="#",a.textContent="films",s.appendChild(a);const c=document.createElement("a");c.href="#",c.textContent="profile",s.appendChild(c),c.addEventListener("click",(()=>{Cf(ff("PROFILE"))}));const l=document.createElement("div");l.className="menu-desplegable",a.addEventListener("click",(()=>{l&&(l.classList.contains("menu-desplegableDisplayed")?l.classList.remove("menu-desplegableDisplayed"):l.classList.add("menu-desplegableDisplayed"))})),Nf.forEach((t=>{const e=document.createElement("p");e.textContent=t.name,l.appendChild(e),e.addEventListener("click",(()=>{Cf(ff("CATEGORIES")),Cf(gf(t.category)),Cf(vf(t.name)),Cf(yf(t.image))}))}));const h=document.createElement("a");h.className="navigate-list",h.href="#",h.textContent="lists";const u=document.createElement("a");u.id="login",u.href="#",u.textContent="log in";const d=document.createElement("a");d.id="signin",d.href="#",d.textContent="create account",s.appendChild(l),s.appendChild(h),s.appendChild(u),s.appendChild(d),t.appendChild(e),t.appendChild(s),this.shadowRoot.innerHTML="",this.shadowRoot.appendChild(t);const p=document.createElement("style");p.innerHTML=Rf.A,this.shadowRoot.appendChild(p)}}}customElements.define("custom-navbar",Df);var Lf,Of=n(931),Mf=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};!function(t){t.image="image",t.uid="uid",t.categories="categories",t.utitle="utitle",t.director="director",t.release_date="release_date",t.cast="cast",t.crew="crew",t.image_sec="image_sec",t.description="description",t.catch_phrase="catch_phrase"}(Lf||(Lf={}));class Pf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.isLiked=!0}static get observedAttributes(){return Object.keys({image:null,uid:null,categories:null,utitle:null,director:null,release_date:null,cast:null,crew:null,image_sec:null,description:null,catch_phrase:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n            <div class="container" data-uid="${this.uid}" data-image="${this.image}" data-categories="${this.categories}" data-title="${this.utitle}" data-director="${this.director}" data-release="${this.release_date}" data-cast="${this.cast}" data-crew="${this.crew}" data-imgbanner="${this.image_sec}" data-description="${this.description}" data-phrase="${this.catch_phrase}">\n                <img class="poster" src="${this.image}" alt="This a poster of the movie named ${this.utitle}" ></img>\n                <section class="content">\n                    <section class="viewdetails">\n                        <a class="link">\n                            <img class="details"src="https://img.icons8.com/ios-glyphs/30/FFFFFF/visible--v1.png" alt="eye icon"/></a>\n                        <p>View details</p>\n                    </section>\n                    <img class="dislike"  src="https://img.icons8.com/ios/50/FFFFFF/like--v1.png" alt="hear icon empty"/>\n                    <img class="like"  src="https://img.icons8.com/ios-filled/50/FFFFFF/like--v1.png" alt="heart icon full"/>\n                    <p>Like</p>\n                </section>\n            </div>\n        `;const t=this.shadowRoot.querySelector(".viewdetails");null==t||t.addEventListener("click",(()=>{Cf(ff("FILMPAGE")),Cf({action:"SaveMovieId",payload:this.uid}),Cf({action:"SaveMovieImage",payload:this.image}),Cf((t=>({action:"SaveMovieCategories",payload:this.categories}))()),Cf({action:"SaveMovieTitle",payload:this.utitle}),Cf({action:"SaveMovieDirector",payload:this.director}),Cf({action:"SaveMovieReleaseDate",payload:this.release_date}),Cf({action:"SaveMovieCast",payload:this.cast}),Cf({action:"SaveMovieCrew",payload:this.crew}),Cf({action:"SaveMovieImageSec",payload:this.image_sec}),Cf((t=>({action:"SaveMovieDescription",payload:this.description}))()),Cf({action:"SaveMovieCatchPhrase",payload:this.catch_phrase})}));const e=this.shadowRoot.querySelector(".like"),n=this.shadowRoot.querySelector(".dislike"),i=Tf.favlist.some((t=>t.id===this.uid));e.style.display=i?"inline":"none",n.style.display=i?"none":"inline",e.addEventListener("click",(()=>Mf(this,void 0,void 0,(function*(){const t=Tf.user;try{yield((t,e)=>cf(void 0,void 0,void 0,(function*(){try{const i=wm(bm(Tm(),"users",t),"Favorites");yield(n=bm(i,e),af(pm(n.firestore,_m),[new Qh(n._key,Ph.none())]))}catch(t){throw t}var n})))(t,this.uid||""),console.log("Película eliminada de Favorites")}catch(t){console.error("Error al eliminar la película de Favorites",t)}e.style.display="none",n.style.display="inline"})))),n.addEventListener("click",(()=>Mf(this,void 0,void 0,(function*(){const t=Tf.user;try{yield((t,e,n)=>cf(void 0,void 0,void 0,(function*(){try{const i=wm(bm(hf,"users",t),"Favorites");yield sf(bm(i,e),n),console.log('Película agregada exitosamente a la colección "Favorites" del usuario',t)}catch(e){console.error('Error al agregar película a la colección "Favorites" del usuario',t,e)}})))(t,this.uid?this.uid:"",{id:this.uid||"",image:this.image||"",categories:this.categories?this.categories.split(","):[],title:this.utitle||"",director:this.director||"",release_date:this.release_date||"",cast:this.cast||"",crew:this.crew||"",image_sec:this.image_sec||"",description:this.description||"",catch_phrase:this.catch_phrase||""}),console.log("Película guardada en Favorites")}catch(t){console.error("Error al guardar la película en Favorites",t)}e.style.display="inline",n.style.display="none"}))))}const e=this.ownerDocument.createElement("style");e.innerHTML=Of.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("movie-card",Pf);var Ff,Uf=n(213);!function(t){t.name="name",t.category="category",t.image="image"}(Ff||(Ff={}));class jf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({name:null,category:null,image:null})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){this[t]=n,this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=Tf.movielist.filter((t=>{var e;return null===(e=t.categories)||void 0===e?void 0:e.includes(null!=this.category?this.category:"undefined")})),e=document.createElement("style");e.textContent=Uf.A,this.shadowRoot.innerHTML=`\n                <h1 id="titlecategory">${this.name||""}</h1>\n\t\t\t\t<section id="cards">\n\t\t\t\t\t${t.map((t=>`\n\t\t\t\t\t\t<movie-card image="${t.image}" uid="${t.id}" categories="${t.categories}" utitle="${t.title}" director="${t.director}" release_date="${t.release_date}" cast="${t.cast}" crew="${t.crew}" image_sec="${t.image_sec}" description="${t.description}" catch_phrase="${t.catch_phrase}"></movie-card>\n\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n            `;const n=this.shadowRoot.querySelector("#titlecategory");null==n||n.addEventListener("click",(()=>{Cf(ff("CATEGORIES")),Cf(gf(this.category)),Cf(vf(this.name)),Cf(yf(this.image))})),this.shadowRoot.appendChild(e)}}))}}customElements.define("category-section",jf);var Vf=n(583),$f=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const zf={title:"",image:"",categories:[],director:"",release_date:"",cast:"",crew:"",image_sec:"",description:"",catch_phrase:""};class qf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}changeTitle(t){var e;zf.title=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeImage(t){var e;zf.image=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCategories(t){var e;zf.categories=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeDirector(t){var e;zf.director=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeRelease(t){var e;zf.release_date=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCast(t){var e;zf.cast=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCrew(t){var e;zf.crew=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeImageSec(t){var e;zf.image_sec=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeDescription(t){var e;zf.description=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCatchPhrase(t){var e;zf.catch_phrase=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}render(){return $f(this,void 0,void 0,(function*(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML='\n\t\t\t\t<section class= "container">\n\n\t\t\t\t\t<button id = "ButtonModal">+</button>\n\t\t</section>\n\t\t\t\t<section class="modalContainer" style="display: none;">\n    <div class="modal-overlay">\n\t\t\t\t<section class="modal-content">\n\t\t\t\t\t<form class="my-form">\n\t\t\t\t\t<section id="header">\n\t\t\t\t\t\t<span class = "close"><img src="https://img.icons8.com/ios-filled/50/FB953C/delete-sign--v1.png" alt="delete-sign--v1"/></span>\n\t\t\t\t\t\t\t<h2>Add a movie</h2>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t<label for="fname">Name movie</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="fname" name="fname" placeholder="Pearl"><br><br>\n\t\t\t\t\t\t\t\t<label for="director">Director</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="directorMovie" name="director" placeholder="Ti West"><br><br>\n\t\t\t\t\t\t\t\t<label for="date">Release date</label><br>\n\t\t\t\t\t\t\t\t<input type="date" id="datemovie" name="date" ><br><br>\n\t\t\t\t\t\t\t\t<label for="catch">Catch-Phrase</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="catchMovie" name="catch" placeholder="An X-traordinary Origin Story"><br><br>\n\t\t\t\t\t\t\t\t<label for="description">Description</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="descriptionMovie" name="description" placeholder="Pearl (subtitled An X-traordinary Origin Story) is a 2022 American horror film directed by Ti West, co-written by West and Mia Goth, who reprises her role as the title character, and featuring David Corenswet, Tandi Wright, Matthew Sunderland and Emma Jenkins-Purro in supporting roles. A prequel to X (2022) and the second installment in the X film series, it serves as an origin story for the title villain, whose fervent aspiration to become a movie star led her to committing violent acts on her family\'s Texas homestead in 1918."><br><br>\n\t\t\t\t\t\t\t\t<label for="cast">Cast</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="castMovie" name="cast" placeholder="Mia Goth, David Corenswet, Alistair Sewell, Emma Jenkins, Matthew Sunderland, Tandi Wright"><br><br>\n\t\t\t\t\t\t\t\t<label for="crew">Crew</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="crewMovie" name="crew" placeholder="Mia Goth, David Corenswet, Alistair Sewell, Emma Jenkins, Matthew Sunderland, Tandi Wright"><br><br>\n\t\t\t\t\t\t\t\t<label for="poster">Enter movie poster url</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="movieposter" name="poster" placeholder="https://pics.filmaffinity.com/Pearl-745024740-large.jpg"><br><br>\n\t\t\t\t\t\t\t\t<label for="image">Enter secondary image url</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="movieimage" name="image" placeholder="https://pics.filmaffinity.com/Pearl-745024740-large.jpg"><br><br>\n\t\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t\t\t\t<label for="crew">Genres</label><br>\n\t\t\t\t\t\t\t\t\t\t<section id="checkboxes">\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="romance" value="romance" />\n\t\t\t\t\t\t\t\t\t\t<label for="romance">Romance</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="action" value="action" />\n\t\t\t\t\t\t\t\t\t\t<label for="action">Action</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="comedy" value="comedy" />\n\t\t\t\t\t\t\t\t\t\t<label for="comedy">Comedy</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="Thriller" value="thriller" />\n\t\t\t\t\t\t\t\t\t\t<label for="thriller">Thriller</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="sci-fi" value="sci-fi" />\n\t\t\t\t\t\t\t\t\t\t<label for="sci-fi">Sci-Fi</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="drama" value="drama" />\n\t\t\t\t\t\t\t\t\t\t<label for="drama">Drama</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="animated" value="animated" />\n\t\t\t\t\t\t\t\t\t\t<label for="animated">Animated</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="classic" value="classics" />\n\t\t\t\t\t\t\t\t\t\t<label for="classic">Classics</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="documental" value="documental" />\n\t\t\t\t\t\t\t\t\t\t<label for="documental">Documental</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="psychological" value="psychological" />\n\t\t\t\t\t\t\t\t\t\t<label for="psychological">Psychological</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t<button type="submit">Submit</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t</section>\n\t\t</section>\n      ';const e=this.ownerDocument.createElement("style");e.innerHTML=Vf.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e);const n=this.shadowRoot.querySelector(".modalContainer");this.shadowRoot.querySelector(".close").addEventListener("click",(()=>{n.style.display="none"})),window.addEventListener("click",(t=>{t.target==n&&(n.style.display="none")})),this.shadowRoot.querySelector("#ButtonModal").addEventListener("click",(t=>{n.style.display="block"})),this.shadowRoot.querySelector("#fname").addEventListener("change",this.changeTitle),this.shadowRoot.querySelector("#directorMovie").addEventListener("change",this.changeDirector),this.shadowRoot.querySelector("#datemovie").addEventListener("change",this.changeRelease),this.shadowRoot.querySelector("#descriptionMovie").addEventListener("change",this.changeDescription),this.shadowRoot.querySelector("#castMovie").addEventListener("change",this.changeCast),this.shadowRoot.querySelector("#crewMovie").addEventListener("change",this.changeCrew),this.shadowRoot.querySelector("#movieposter").addEventListener("change",this.changeImage),this.shadowRoot.querySelector("#movieimage").addEventListener("change",this.changeImageSec),this.shadowRoot.querySelector("#catchMovie").addEventListener("change",this.changeCatchPhrase),this.shadowRoot.querySelectorAll('input[type="checkbox"]').forEach((t=>{t.addEventListener("change",(e=>{if(t.checked)zf.categories.push(t.value);else{const e=zf.categories.indexOf(t.value);-1!==e&&zf.categories.splice(e,1)}console.log("Arreglo de categorías actualizado:",zf.categories)}))})),this.shadowRoot.querySelector(".my-form").addEventListener("submit",(t=>$f(this,void 0,void 0,(function*(){var e,i,r,s,o,a,c,l,h,u,d,p;t.preventDefault(),n.style.display="none",yield(p=zf,cf(void 0,void 0,void 0,(function*(){try{const t=wm(hf,"movies");yield of(t,p),console.log("se añadió con éxito")}catch(t){console.error(t)}}))),(null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("fname")).value="",(null===(i=this.shadowRoot)||void 0===i?void 0:i.getElementById("directorMovie")).value="",(null===(r=this.shadowRoot)||void 0===r?void 0:r.getElementById("datemovie")).value="",(null===(s=this.shadowRoot)||void 0===s?void 0:s.getElementById("catchMovie")).value="",(null===(o=this.shadowRoot)||void 0===o?void 0:o.getElementById("descriptionMovie")).value="",(null===(a=this.shadowRoot)||void 0===a?void 0:a.getElementById("castMovie")).value="",(null===(c=this.shadowRoot)||void 0===c?void 0:c.getElementById("crewMovie")).value="",(null===(l=this.shadowRoot)||void 0===l?void 0:l.getElementById("movieposter")).value="",(null===(h=this.shadowRoot)||void 0===h?void 0:h.getElementById("movieimage")).value="",(null===(u=this.shadowRoot)||void 0===u?void 0:u.getElementById("catchMovie")).value="";const m=null===(d=this.shadowRoot)||void 0===d?void 0:d.querySelectorAll('input[type="checkbox"]');null==m||m.forEach((t=>{t.checked=!1})),zf.categories=[],console.log("Formulario enviado y campos limpiados")}))))}}))}}customElements.define("modal-movie",qf);var Bf,Hf=n(679);!function(t){t.buttonlabel="buttonlabel"}(Bf||(Bf={}));class Gf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({buttonlabel:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t      <button type="button">${this.buttonlabel}</button>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Hf.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-button",Gf);var Kf,Wf=n(167);!function(t){t.icon_url="icon_url",t.label="label",t.description_icon="description_icon"}(Kf||(Kf={}));class Qf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({icon_url:null,label:null,description_icon:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n<a><p>${this.label}</p> <img src="${this.icon_url}" alt="${this.description_icon}"></a>\n      `;const e=this.ownerDocument.createElement("style");e.innerHTML=Wf.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}}customElements.define("my-actionandicon",Qf);var Jf,Xf=n(909);!function(t){t.label="label"}(Jf||(Jf={}));class Yf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({label:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n      <section>\n      <label for="crew">${this.label}</label><br>\n      <section id="checkboxes">\n      <section class="label-chechbox">\n      <input type="checkbox" id="romance" value="first-checkbox" />\n      <label for="romance">Romance</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="action" value="second-checkbox" />\n      <label for="action">Action</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="comedy" value="thirth-checkbox" />\n      <label for="comedy">Comedy</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="Thriller" value="fourth-checkbox" />\n      <label for="thriller">Thriller</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="sci-fi" value="fifth-checkbox" />\n      <label for="sci-fi">Sci-Fi</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="drama" value="sixth-checkbox" />\n      <label for="drama">Drama</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="animated" value="seventh-checkbox" />\n      <label for="animated">Animated</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="classic" value="eighth-checkbox" />\n      <label for="classic">Classics</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="documental" value="ninth-checkbox" />\n      <label for="documental">Documental</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="psychological" value="second-checkbox" />\n      <label for="psychological">Psychological</label>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Xf.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-filters",Yf);var Zf,tg=n(83);!function(t){t.poster="poster",t.director="director",t.utitle="utitle",t.release_date="release_date"}(Zf||(Zf={}));class eg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({poster:null,director:null,utitle:null,release_date:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section id="figure">\n<img src="${this.poster}" alt="This a poster of the movie named ${this.utitle} ">\n<h1>${this.utitle}</h1>\n<section id="directoranddate">\n<p>Directed by <b> ${this.director} </b></p>\n<p>Release date:<b> ${this.release_date}</b></p>\n</section>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=tg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-figuremovie",eg);var ng,ig=n(775);!function(t){t.catch_phrase="catch_phrase",t.description="description"}(ng||(ng={}));class rg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({description:null,catch_phrase:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n\t\t\t<b><p>${this.catch_phrase||""}</p></b>\n<p id="description">${this.description}</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=ig.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-descriptionmovie",rg);var sg,og=n(191);!function(t){t.section_title="section_title",t.content="content"}(sg||(sg={}));class ag extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({section_title:null,content:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n      <h2>${this.section_title}</h2>\n      <hr></hr>\n<p>${this.content}</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=og.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-extrainfo",ag);var cg,lg=n(791);!function(t){t.utitle="utitle",t.your_name="your_name",t.mobile_number="mobile_number",t.email="email",t.emailornumber="emailornumber",t.password="password",t.re_password="re_password"}(cg||(cg={}));class hg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({utitle:null,your_name:null,mobile_number:null,email:null,emailornumber:null,password:null,re_password:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){var t;this.render();const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".close");e&&e.addEventListener("click",(()=>{Cf(ff("DASHBOARD"))}))}render(){var t;if(this.shadowRoot){let t=`\n              <section id="header">\n                  <span class="close"><img src="https://img.icons8.com/ios-filled/50/FB953C/delete-sign--v1.png" alt="delete-sign--v1"/></span>\n                  <h1>${this.utitle}</h1>\n              </section>\n          `;this.your_name&&(t+=`\n                  <label for="name">${this.your_name}</label><br>\n                  <input type="text" class="space" name="name" placeholder="First and last name"><br><br>\n              `),this.mobile_number&&(t+=`\n                  <label for="mobile">${this.mobile_number}</label><br>\n                  <input type="text" class="space" name="mobile" placeholder="Don't forget your country code"><br><br>\n              `),this.email&&(t+=`\n                  <label for="email">${this.email}</label><br>\n                  <input type="text" class="space" name="email" placeholder="johndoe@movie.com"><br><br>\n              `),this.emailornumber&&(t+=`\n                  <label for="emailornumber">${this.emailornumber}</label><br>\n                  <input type="text" class="space" name="emailornumber"><br><br>\n              `),this.password&&(t+=`\n                  <label for="password">${this.password}</label><br>\n                  <input type="text" class="space" name="password" placeholder="At least 8 characters"><br><br>\n              `),this.re_password&&(t+=`\n                  <label for="re_password">${this.re_password}</label><br>\n                  <input type="text" class="space" name="re_password" placeholder="Confirm your password"><br><br>\n              `),t+="</section>",this.shadowRoot.innerHTML=t}const e=this.ownerDocument.createElement("style");e.innerHTML=lg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-sessionform",hg);var ug,dg=n(633);!function(t){t.btn_text="btn_text",t.message="message",t.btn_type="btn_type"}(ug||(ug={}));class pg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({btn_text:null,btn_type:null,message:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n      <button type="${this.btn_type}" id="send">${this.btn_text}</button>\n      <p>${this.message}<a href="https://en.wikipedia.org/wiki/Terms_of_service"> Our Conditions of Use and Privacy Notice</a>.</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=dg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-submitandterms",pg);var mg,fg=n(163);!function(t){t.image="image",t.uid="uid",t.categories="categories",t.utitle="utitle",t.director="director",t.release_date="release_date",t.cast="cast",t.crew="crew",t.image_sec="image_sec",t.description="description",t.catch_phrase="catch_phrase"}(mg||(mg={}));class gg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.isLiked=!1}static get observedAttributes(){return Object.keys({image:null,uid:null,categories:null,utitle:null,director:null,release_date:null,cast:null,crew:null,image_sec:null,description:null,catch_phrase:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t,e;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n                <div class="container" data-uid="${this.uid}" data-image="${this.image}" data-categories="${this.categories}" data-title="${this.utitle}" data-director="${this.director}" data-release="${this.release_date}" data-cast="${this.cast}" data-crew="${this.crew}" data-imgbanner="${this.image_sec}" data-description="${this.description}" data-phrase="${this.catch_phrase}">\n                    <img class="poster" src="${this.image}" alt="This a poster of the movie named ${this.utitle}" ></img>\n                    <section class="content">\n                        <button id="LikeButton">${this.isLiked?"-":"+"}</button>\n                    </section>\n                </div>\n            `);const n=this.ownerDocument.createElement("style");n.innerHTML=fg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(n);const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#LikeButton");i.addEventListener("click",(()=>function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){this.isLiked=!this.isLiked,i.textContent=this.isLiked?"-":"+";const t={id:this.uid||"",image:this.image||"",categories:this.categories?this.categories.split(","):[],title:this.utitle||"",director:this.director||"",release_date:this.release_date||"",cast:this.cast||"",crew:this.crew||"",image_sec:this.image_sec||"",description:this.description||"",catch_phrase:this.catch_phrase||""},e=Tf.currentnewlistid;e&&Object.values(t).every((t=>""!==t))?yield((t,e,n)=>cf(void 0,void 0,void 0,(function*(){try{const i=wm(bm(hf,"users",t,"Mylists",e),"content");yield of(i,n),console.log("Película agregada exitosamente a la lista",e)}catch(t){throw console.error("Error al agregar la película a la lista",e,t),t}})))(Tf.user,e,t):alert("Please select a list and make sure all movie data is available.")}))))}}customElements.define("my-moviecardadd",gg);var vg=n(675),yg=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};class wg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return yg(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=document.createElement("section");t.classList.add("modal-new-list");const e=document.createElement("span");e.classList.add("close"),e.addEventListener("click",(()=>{this.style.display="none"}));const n=document.createElement("img");n.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0iIzAwMDAwMCIgdmlld0JveD0iMCAwIDI1NiAyNTYiPjxwYXRoIGQ9Ik0yMDUuNjYsMTk0LjM0YTgsOCwwLDAsMS0xMS4zMiwxMS4zMkwxMjgsMTM5LjMxLDYxLjY2LDIwNS42NmE4LDgsMCwwLDEtMTEuMzItMTEuMzJMMTE2LjY5LDEyOCw1MC4zNCw2MS42NkE4LDgsMCwwLDEsNjEuNjYsNTAuMzRMMTI4LDExNi42OWw2Ni4zNC02Ni4zNWE4LDgsMCwwLDEsMTEuMzIsMTEuMzJMMTM5LjMxLDEyOFoiPjwvcGF0aD48L3N2Zz4=",n.alt="Close",e.appendChild(n);const i=document.createElement("h1");i.classList.add("title-list"),i.textContent="New list";const r=document.createElement("form");r.classList.add("info-list");const s=document.createElement("label");s.htmlFor="name-list",s.textContent="Name";const o=document.createElement("input");o.type="text",o.id="name-list",o.name="name-list",o.placeholder="Enter the list name";const a=document.createElement("label");a.htmlFor="url-list",a.textContent="URL list image";const c=document.createElement("input");c.type="text",c.id="url-list",c.name="url-list",c.placeholder="Enter the URL of the image list";const l=document.createElement("section"),h=document.createElement("button");h.type="submit",h.textContent="ADD FILMS",l.appendChild(h),r.appendChild(s),r.appendChild(o),r.appendChild(a),r.appendChild(c),r.appendChild(l),t.appendChild(e),t.appendChild(i),t.appendChild(r),this.shadowRoot.appendChild(t);const u=this.ownerDocument.createElement("style");u.innerHTML=vg.A,this.shadowRoot.appendChild(u),h.addEventListener("click",(t=>yg(this,void 0,void 0,(function*(){var e,n,i,r;t.preventDefault(),Cf(ff("NEWLIST"));const s=(null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#name-list")).value,o=(null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#url-list")).value;if(""!==s.trim()&&""!==o.trim()){Cf({action:"SaveCurrentNewListName",payload:s}),console.log("namelist",Tf.currentnewlistname),Cf({action:"SaveCurrentNewListImage",payload:o}),console.log("imagelist",Tf.currentnewlistimage);const t=yield((t,e,n,i)=>cf(void 0,void 0,void 0,(function*(){try{const r=wm(bm(hf,"users",t),"Mylists"),s=yield of(r,{name:e,image:n}),o=s.id;console.log("Lista agregada exitosamente para el usuario",t,"con ID:",o);const a=wm(s,"content");return yield sf(bm(a,"automaticreation123"),{}),yield Promise.all(i.map((t=>cf(void 0,void 0,void 0,(function*(){yield of(a,t)}))))),o}catch(e){throw console.error("Error al agregar lista para el usuario",t,e),e}})))(Tf.user,s,o,[]);console.log("New List ID:",t),Cf({action:"SaveCurrentNewListId",payload:t}),console.log("idlist",Tf.currentnewlistid),(null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#name-list")).value="",(null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector("#url-list")).value=""}else alert("Please fill in all fields.")}))))}}))}}customElements.define("my-modal-list",wg);var bg,Eg=n(721);!function(t){t.image_profile="image_profile",t.name_profile="name_profile",t.comment="comment"}(bg||(bg={}));class _g extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({image_profile:null,name_profile:null,comment:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section class = "comment-section">\n\t\t\t<div class = "user-image">\n\t\t\t\t<img src="${this.image_profile}" alt="Image profile">\n\t\t\t</div>\n\t\t\t\t<div class = "right-side">\n\t\t\t\t<div class = "info-user">\n\t\t\t\t\t<span><h3>${this.name_profile}</h3> made a review</span>\n\t\t\t\t\t<span class="rating">★★★★★</span>\n\t\t\t\t</div>\n\t\t\t\t<div class = "info-comment">\n\t\t\t\t\t<p>${this.comment}</p>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Eg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-comment-section",_g);var Tg=n(267);class Ig extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=Tf.favlist,e=document.createElement("style");e.textContent=Tg.A,this.shadowRoot.innerHTML=`\n\t\t\t\t<section id="favoriteMovies">\n\t\t\t\t\t${t.map((t=>`\n\t\t\t\t\t\t\t\t<movie-card\n\t\t\t\t\t\t\t\t\timage="${t.image}"\n\t\t\t\t\t\t\t\t\tuid="${t.id}"\n\t\t\t\t\t\t\t\t\tcategories="${t.categories}"\n\t\t\t\t\t\t\t\t\tutitle="${t.title}"\n\t\t\t\t\t\t\t\t\tdirector="${t.director}"\n\t\t\t\t\t\t\t\t\trelease_date="${t.release_date}"\n\t\t\t\t\t\t\t\t\tcast="${t.cast}"\n\t\t\t\t\t\t\t\t\tcrew="${t.crew}"\n\t\t\t\t\t\t\t\t\timage_sec="${t.image_sec}"\n\t\t\t\t\t\t\t\t\tdescription="${t.description}"\n\t\t\t\t\t\t\t\t\tcatch_phrase="${t.catch_phrase}">\n\t\t\t\t\t\t\t\t</movie-card>\n\t\t\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\t\t\t`,this.shadowRoot.appendChild(e)}}))}}customElements.define("my-favoritemovies",Ig);var Cg=n(779);class Sg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n    <section class="container">\n      <section class="profile">\n        <div class = "profile-image">\n          <img src="https://i.pinimg.com/564x/89/c8/c5/89c8c501627cac554a35242923c33ece.jpg"  alt="Profile Picture">\n        </div>\n      </section>\n      <form class="form" method="post" action="/submit-form">\n        <section class="form-group">\n          <label for="name">Name</label>\n          <br>\n          <input type="text" id="name" name="name"  value=" John Dae" >\n        </section>\n\n        <section class="form-group">\n          <label for="mobile">Mobile Number</label>\n          <br>\n          <input type="tel" id="mobile" name="mobile" value=" +57 3015476756">\n        </section>\n\n        <section class="form-group">\n          <label for="email">Email</label>\n          <br>\n          <input type="email" id="email" name="email" value="johndoe@gmail.com">\n        </section>\n\n        <section class="form-group">\n          <label for="password">Password</label>\n          <br>\n          <input type="password" id="password" name="password" value="••••••••">\n        </section>\n\n        <section class="form-actions">\n          <br>\n          <button type="submit" class="edit-profile">Edit</button>\n        </section>\n    </form>\n  </section>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=Cg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-profile",Sg);var kg=n(14);class xg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=Tf.favlist,e=document.createElement("style");e.textContent=kg.A,this.shadowRoot.innerHTML=`\n\t\t\t\t<section id="listMovies">\n\t\t\t\t\t${t.map((t=>`\n\t\t\t\t\t\t\t\t<my-moviecardadd\n\t\t\t\t\t\t\t\t\timage="${t.image}"\n\t\t\t\t\t\t\t\t\tuid="${t.id}"\n\t\t\t\t\t\t\t\t\tcategories="${t.categories}"\n\t\t\t\t\t\t\t\t\tutitle="${t.title}"\n\t\t\t\t\t\t\t\t\tdirector="${t.director}"\n\t\t\t\t\t\t\t\t\trelease_date="${t.release_date}"\n\t\t\t\t\t\t\t\t\tcast="${t.cast}"\n\t\t\t\t\t\t\t\t\tcrew="${t.crew}"\n\t\t\t\t\t\t\t\t\timage_sec="${t.image_sec}"\n\t\t\t\t\t\t\t\t\tdescription="${t.description}"\n\t\t\t\t\t\t\t\t\tcatch_phrase="${t.catch_phrase}">\n\t\t\t\t\t\t\t\t</my-moviecardadd>\n\t\t\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\t\t\t`,this.shadowRoot.appendChild(e)}}))}}customElements.define("my-cardaddsection",xg);var Ag=n(989);class Rg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=Tf.movielist,e=document.createElement("style");e.textContent=Ag.A,this.shadowRoot.innerHTML=`\n                <section id="cards">\n                    ${t.map((t=>`\n                            <my-moviecardadd image="${t.image}" uid="${t.id}" categories="${t.categories}" utitle="${t.title}" director="${t.director}" release_date="${t.release_date}" cast="${t.cast}" crew="${t.crew}" image_sec="${t.image_sec}" description="${t.description}" catch_phrase="${t.catch_phrase}"></my-moviecardadd>\n                        `)).join("")}\n                </section>\n            `,this.shadowRoot.appendChild(e)}}))}}customElements.define("my-addmovietolist",Rg);var Ng=n(891);class Dg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=Tf.listcontent,e=document.createElement("style");e.textContent=Ng.A,this.shadowRoot.innerHTML=`\n\t\t\t\t<section id="favoriteMovies">\n\t\t\t\t\t${t.map((t=>`\n\t\t\t\t\t\t\t\t<movie-card\n\t\t\t\t\t\t\t\t\timage="${t.image}"\n\t\t\t\t\t\t\t\t\tuid="${t.id}"\n\t\t\t\t\t\t\t\t\tcategories="${t.categories}"\n\t\t\t\t\t\t\t\t\tutitle="${t.title}"\n\t\t\t\t\t\t\t\t\tdirector="${t.director}"\n\t\t\t\t\t\t\t\t\trelease_date="${t.release_date}"\n\t\t\t\t\t\t\t\t\tcast="${t.cast}"\n\t\t\t\t\t\t\t\t\tcrew="${t.crew}"\n\t\t\t\t\t\t\t\t\timage_sec="${t.image_sec}"\n\t\t\t\t\t\t\t\t\tdescription="${t.description}"\n\t\t\t\t\t\t\t\t\tcatch_phrase="${t.catch_phrase}">\n\t\t\t\t\t\t\t\t</movie-card>\n\t\t\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\t\t\t`,this.shadowRoot.appendChild(e)}}))}}customElements.define("my-listmovies",Dg);var Lg=n(9);class Og extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){var t,e;this.render();const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("my-banner");if(n){const t=null===(e=n.shadowRoot)||void 0===e?void 0:e.querySelector("#accountButton");null==t||t.addEventListener("click",(()=>{Cf(ff("SIGNIN"))}))}}))}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<body>\n      <my-banner message="Track films you\'ve watched. Save those you want to see. Tell your friends what\'s good."\n\t\t\tbuttonlabel="GET AN ACCOUNT, IT\'S FREE"></my-banner>\n\t\t\t<category-section name="Popular films in the community" category="popular" image="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/s5R6kTMfOxkGit96A8lqcDL4uVk.jpg"></category-section>\n\t\t\t\t<category-section name="On-cinema right now" category="cinema" image="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/rron9HAuS9s7zBF8iCX1tsafxUo.jpg"></category-section>\n\t\t\t\t<category-section name="Trending this week" category="trending" image="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/iAyr7VEFGJoHDIHIxjEb3TskQW4.jpg"></category-section>\n\t\t\t\t<category-section name="Classics" category="classics" image="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/rr7E0NoGKxvbkb89eR1GwfoYjpA.jpg"></category-section>\n\t\t\t\t<modal-movie></modal-movie>\n\t\t\t\t</body>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=Lg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-dashboard",Og);var Mg=n(809);class Pg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<my-banner section_title=${Tf.titlecategory} image=${Tf.imagecategory}></my-banner>\n\t\t\t<category-section category=${Tf.currentcategory}></category-section>\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=Mg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-categories",Pg);const Fg=[{id:1,name:"John",image:"https://i.pinimg.com/564x/72/d6/96/72d69624326a417824f5d96e36ebf4eb.jpg",comment:"may thy racket chip and shatter"},{id:2,name:"sydney",image:"https://i.pinimg.com/736x/3a/e5/0e/3ae50eb0d74405a95fa5865988b9ba3c.jpg",comment:"god can thomas brodie sangster have more american roles"},{id:3,name:"ccaitlinnm",image:"https://i.pinimg.com/564x/5f/22/e5/5f22e519b409fe620193ca47f3724b83.jpg",comment:"ngl i thought bubba gumps came before this film and the writers spent like half the movie building up to a punchline"},{id:4,name:"DirkH",image:"https://i.pinimg.com/564x/9b/11/77/9b1177aebfc5f7ea7c3124e30e809970.jpg",comment:"nobody likes getting the most out of a vowel quite like james stewart"}];var Ug=n(207);class jg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\n\t\t\t<my-banner image="${Tf.movieimagesec}" id="banner"></my-banner>\n<section id="content">\n\t\t\t<my-figuremovie id="figure"  poster=${Tf.movieimage} utitle="${Tf.movietitle}" director="${Tf.moviedirector}" release_date=${Tf.moviereleasedate}></my-figuremovie>\n<section id="info">\n\t\t\t<my-descriptionmovie catch_phrase="${Tf.moviecatchphrase}" description="${Tf.moviedescription}"></my-descriptionmovie>\n\t\t\t<my-extrainfo section_title="Cast" content="${Tf.moviecast}"></my-extrainfo>\n\t\t\t<my-extrainfo section_title="Crew" content="${Tf.moviecrew}"></my-extrainfo>\n\t\t\t<my-extrainfo section_title="Genres" content="${Tf.moviecategories}"></my-extrainfo>\n\t\t\t</section>\n\t\t\t\x3c!-- <section id="actions">\n\t\t\t<my-actionandicon label="Like" icon_url="https://img.icons8.com/ios/30/FFFFFF/like--v1.png" description_icon="heart icon"></my-actionandicon>\n\t\t\t<my-actionandicon label="Edit film" icon_url="https://img.icons8.com/material/24/FFFFFF/pencil--v2.png" description_icon="pencil icon"></my-actionandicon>\n\t\t\t<my-actionandicon label="Add to a list" icon_url="https://img.icons8.com/ios-glyphs/30/FFFFFF/bookmark-ribbon.png" description_icon="bookmark icon"></my-actionandicon>\n\t\t\t<my-actionandicon label="Share" icon_url="https://img.icons8.com/ios-glyphs/30/FFFFFF/share--v1.png" description_icon="share icon"></my-actionandicon>\n\t\t\t</section> --\x3e\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h1>POPULAR REVIEWS</h1>\n\t\t\t\t<section class = "comment-section">\n\t\t\t\t\t${Fg.map((t=>`\n\t\t\t\t\t\t\t<my-comment-section image_profile = "${t.image}"\n\t\t\t\t\t\t\tname_profile = "${t.name}"\n\t\t\t\t\t\t\tcomment = "${t.comment}">\n\t\t\t\t\t\t\t</my-comment-section>\n\t\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\t\t\t</section>\n\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=Ug.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-filmpage",jg);var Vg=n(858);const $g={email:"",password:""};class zg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var t,e,n,i,r;this.render();const s=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#navigatetosignin");null==s||s.addEventListener("click",(()=>{Cf(ff("SIGNIN"))}));const o=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".close");o&&o.addEventListener("click",(()=>{Cf(ff("SIGNIN"))}));const a=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector('input[name="email"]');null==a||a.addEventListener("change",this.changeEmail.bind(this));const c=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector('input[name="password"]');null==c||c.addEventListener("change",this.changePassword.bind(this));const l=null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector("#send");null==l||l.addEventListener("click",this.submitForm.bind(this))}changeEmail(t){var e;$g.email=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changePassword(t){var e;$g.password=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}submitForm(){pf($g)}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<section>\n\t\t\t<section id="form">\n\t\t\t<section id="my-sessionform">\n\t\t\t<section id="header">\n                  <span class="close"><img src="https://img.icons8.com/ios-filled/50/FB953C/delete-sign--v1.png" alt="delete-sign--v1"/></span>\n                  <h1>LOG IN</h1>\n              </section>\n\t\t\t\t\t\t\t<label for="email">Email</label><br>\n\t\t\t\t\t\t\t<input type="text" class="space" name="email" placeholder="johndoe@movie.com"><br><br>\n\t\t\t\t\t\t\t<label for="password">Password</label><br>\n\t\t\t\t\t\t\t<input type="text" class="space" name="password" placeholder="At least 8 characters"><br><br>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t<section id="my-submitandterms">\n\t\t\t\t\t\t\t<button type="submit" id="send">Continue</button>\n\t\t\t\t\t\t\t<p>By using our services you agree to<a href="https://en.wikipedia.org/wiki/Terms_of_service"> Our Conditions of Use and Privacy Notice</a>.</p>\n\t\t\t\t\t\t\t</section>\n\t\t </section>\n\t\t <section id="extrainfo">\n\t\t <section id="extrainfo-content">\n\t\t <hr><p>New to this website</p><hr>\n\t\t </section>\n\t\t <button id="navigatetosignin">Create your account</button>\n\t\t </section>\n\t\t </section>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=Vg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-login",zg);var qg=n(868);class Bg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t,e,n,i,r;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n\t\t\t\t${this}\n\t\t\t\t<section class="container">\n\t\t\t\t\t<my-banner section_title="My Lists"></my-banner>\n\t\t\t\t\t<button id="modal-button">Create new list</button>\n\t\t\t\t\t<my-modal-list id="open"></my-modal-list>\n\t\t\t\t\t<button id="favorites">Favorites</button>\n\t\t\t\t\t<section id="lists"></section>\n\t\t\t\t</section>\n\t\t\t`;const s=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#modal-button"),o=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#open");o.style.display="none",null==s||s.addEventListener("click",(()=>{o.style.display="flex"}));const a=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#favorites");null==a||a.addEventListener("click",(()=>{Cf(ff("FAVORITES"))}));const c=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#lists");(Tf.usermovielists||[]).forEach((t=>{const e=document.createElement("button");e.textContent=t.name,e.style.backgroundImage=`url(${t.image})`;const n=e.dataset.id=t.id;e.addEventListener("click",(()=>function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){Cf({action:"SaveCurrentNewListName",payload:t.name}),Cf({action:"SaveCurrentNewListImage",payload:t.image}),Cf({action:"SaveCurrentNewListId",payload:n}),console.log("idlist",Tf.currentnewlistid),console.log("listname",Tf.currentnewlistname),console.log("listimage",Tf.currentnewlistimage);const e=yield _f(Tf.user,n);Cf(e),console.log("contentfromclick",Tf.listcontent),Cf(ff("LISTCONTENT"))})))),null==c||c.appendChild(e)}));const l=this.ownerDocument.createElement("style");l.innerHTML=qg.A,null===(r=this.shadowRoot)||void 0===r||r.appendChild(l)}}}customElements.define("app-mylists",Bg);var Hg=n(375);class Gg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<my-banner section_title=${Tf.currentnewlistname} image=${Tf.currentnewlistimage}></my-banner>\n\t\t\t<my-addmovietolist></my-addmovietolist>\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=Hg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-newlist",Gg);var Kg=n(82);class Wg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML+="\n\t\t\t<custom-navbar><custom-navbar>\n\t\t\t",this.shadowRoot.innerHTML+="\n\t\t\t\t<my-profile></my-profile>\n\t\t\t");const e=this.ownerDocument.createElement("style");e.innerHTML=Kg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),yield cf(void 0,void 0,void 0,(function*(){const t=yield rf(wm(hf,"users")),e=[];return t.forEach((t=>{const n=t.data();e.push(Object.assign({id:t.id},n))})),e}))}))}}customElements.define("app-profile",Wg);var Qg=n(307);const Jg={email:"",password:"",name:"",mobile:""};class Xg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var t,e,n,i,r,s,o;this.render();const a=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#loginpage");null==a||a.addEventListener("click",(()=>{Cf(ff("LOGIN"))}));const c=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".close");c&&c.addEventListener("click",(()=>{Cf(ff("LOGIN"))}));const l=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector('input[name="email"]');null==l||l.addEventListener("change",this.changeEmail.bind(this));const h=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector('input[name="password"]');null==h||h.addEventListener("change",this.changePassword.bind(this));const u=null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector('input[name="name"]');null==u||u.addEventListener("change",this.changeName.bind(this));const d=null===(s=this.shadowRoot)||void 0===s?void 0:s.querySelector('input[name="mobile"]');null==d||d.addEventListener("change",this.changeMobile.bind(this));const p=null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector("#send");null==p||p.addEventListener("click",this.submitForm.bind(this))}changeEmail(t){var e;Jg.email=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changePassword(t){var e;Jg.password=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeName(t){var e;Jg.name=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeMobile(t){var e;Jg.mobile=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}submitForm(){(t=>{(async function(t,e,n){const i=Pe(t),r=ze(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cn),s=await r.catch((e=>{throw"auth/password-does-not-meet-requirements"===e.code&&mn(t),e})),o=await ln._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o})(uf,t.email,t.password).then((e=>cf(void 0,void 0,void 0,(function*(){const n=e.user;df=n.uid,console.log(n.uid);try{const e=bm(hf,"users",n.uid),i={id:n.uid,username:t.name,mobilenumber:t.mobile};console.log(i),yield sf(e,i),alert("Se creó el usuario")}catch(t){console.error(t)}})))).catch((t=>{const e=t.code,n=t.message;console.error(e,n),alert("Revisa que la información sea correcta y que el correo no esté en uso en nuestra plataforma")}))})(Jg)}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<body>\n\t\t\t<section id="main">\n\t\t\t<section id="my-sessionform">\n\t\t\t<section id="header">\n                  <span class="close"><img src="https://img.icons8.com/ios-filled/50/FB953C/delete-sign--v1.png" alt="delete-sign--v1"/></span>\n                  <h1>SIGN UP</h1>\n              </section>\n\t\t\t\t\t\t\t<label for="name">Your name</label><br>\n\t\t\t\t\t\t\t<input type="text" class="space" name="name" placeholder="First and last name"><br><br>\n\t\t\t\t\t\t\t<label for="mobile">Mobile number</label><br>\n                  <input type="text" class="space" name="mobile" placeholder="Don\'t forget your country code"><br><br>\n\t\t\t\t\t\t\t\t\t<label for="email">Email</label><br>\n                  <input type="text" class="space" name="email" placeholder="johndoe@movie.com"><br><br>\n\t\t\t\t\t\t\t\t\t<label for="password">Password</label><br>\n                  <input type="text" class="space" name="password" placeholder="At least 8 characters"><br><br>\n\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t<section id="my-submitandterms">\n\t\t\t\t\t\t\t\t\t<button type="submit" id="send">Create account</button>\n\t\t\t\t\t\t\t\t\t<p>By creating an account, you agree to<a href="https://en.wikipedia.org/wiki/Terms_of_service"> Our Conditions of Use and Privacy Notice</a>.</p>\n\t\t\t\t\t\t\t\t\t</section>\n\t\t <hr>\n\t\t <p>Already have an account? <a id="loginpage">Log in</a></p>\n\t\t </section>\n\t\t</body>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=Qg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-signin",Xg);var Yg=n(466);class Zg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<my-banner section_title="Favorites"></my-banner>\n\t\t\t<my-favoritemovies></my-favoritemovies>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=Yg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-favorites",Zg);class tv extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<my-banner section_title="${Tf.currentnewlistname}" image=${Tf.currentnewlistimage}></my-banner>\n\t\t\t<my-listmovies></my-listmovies>\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=Hg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-listcontent",tv);class ev extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),Sf(this)}connectedCallback(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){const t=yield wf();Cf(t);const e=yield bf(Tf.user);Cf(e),console.log("favorites",Tf.favlist),this.render();const n=yield Ef(Tf.user);Cf(n),console.log("listas",Tf.usermovielists),this.render()}))}render(){var t,e,n,i,r,s,o,a,c,l;switch(this.shadowRoot&&(this.shadowRoot.innerHTML=""),Tf.screen){case"LOGIN":const h=this.ownerDocument.createElement("app-login");null===(t=this.shadowRoot)||void 0===t||t.appendChild(h);break;case"DASHBOARD":const u=this.ownerDocument.createElement("app-dashboard");null===(e=this.shadowRoot)||void 0===e||e.appendChild(u);break;case"SIGNIN":const d=this.ownerDocument.createElement("app-signin");null===(n=this.shadowRoot)||void 0===n||n.appendChild(d);break;case"CATEGORIES":const p=this.ownerDocument.createElement("app-categories");null===(i=this.shadowRoot)||void 0===i||i.appendChild(p);break;case"FILMPAGE":const m=this.ownerDocument.createElement("app-filmpage");null===(r=this.shadowRoot)||void 0===r||r.appendChild(m);break;case"MYLISTS":const f=this.ownerDocument.createElement("app-mylists");null===(s=this.shadowRoot)||void 0===s||s.appendChild(f);break;case"NEWLIST":const g=this.ownerDocument.createElement("app-newlist");null===(o=this.shadowRoot)||void 0===o||o.appendChild(g);break;case"FAVORITES":const v=this.ownerDocument.createElement("app-favorites");null===(a=this.shadowRoot)||void 0===a||a.appendChild(v);break;case"PROFILE":const y=this.ownerDocument.createElement("app-profile");null===(c=this.shadowRoot)||void 0===c||c.appendChild(y);break;case"LISTCONTENT":const w=this.ownerDocument.createElement("app-listcontent");null===(l=this.shadowRoot)||void 0===l||l.appendChild(w)}}}customElements.define("app-container",ev)})()})();