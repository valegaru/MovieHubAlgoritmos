/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={167:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"a {\n\tdisplay: flex;\n\talign-items: center; /* Alinea verticalmente los elementos */\n\ttext-decoration: none; /* Quita el subrayado del enlace */\n}\n\np {\n\tmargin-right: 10px; /* Ajusta el margen derecho según sea necesario */\n}\n\n",""]);const a=o},989:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#cards {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmy-moviecardadd {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n",""]);const a=o},925:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos para el componente de banner */\n#allbanner {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tbackground-size: cover;\n\tbackground-position: center top 30%;\n\tmargin: 0;\n\tpadding: 10%;\n\theight: 43vh;\n}\n\n#allbanner::before {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.3); /* Color de fondo con opacidad */\n\tz-index: 1; /* Colócalo encima del contenido */\n}\n\n:host {\n\tcolor: white;\n}\n\nsection {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tposition: relative;\n\tz-index: 2;\n}\n\n/* Estilos para el componente personalizado de la barra de navegación */\ncustom-navbar {\n\twidth: 100%; /* Ocupar el 100% del banner */\n\tposition: absolute; /* Para posicionarlo */\n\ttop: 0; /* En la parte superior */\n\tz-index: 3; /* Z-index para estar por encima de otros elementos */\n}\n\nh1 {\n\twidth: 45%;\n\theight: auto; /* Cambia la altura a automática */\n\tmargin-top: 30%;\n\tmargin-bottom: 3vh; /* Espacio entre el mensaje y el botón */\n\tfont-size: 200%;\n\ttext-align: center; /* Centrar horizontalmente */\n\tfont-family: 'Domine', serif;\n}\n\nbutton {\n\twidth: 20%; /* Modifica el ancho del botón */\n\theight: 50px;\n\tbackground-color: rgba(251, 149, 60, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 10px;\n\tfont-size: 80%;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\nbutton:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n\tcursor: pointer;\n}\n\nbutton span {\n\tdisplay: inline-block;\n\twidth: 100%;\n\ttext-align: center;\n}\n\n/* Media queries para dispositivos móviles */\n@media screen and (max-width: 767px) {\n\t:host {\n\t\theight: auto; /* Altura automática para adaptarse a dispositivos móviles */\n\t}\n\n\th1 {\n\t\twidth: 80%;\n\t\tmargin-top: 40%;\n\t\tmargin-bottom: 3vh;\n\t\tfont-size: 6vw;\n\t}\n\n\tbutton {\n\t\twidth: 60%;\n\t\theight: 10vw;\n\t\tfont-size: 4vw;\n\t}\n}\n",""]);const a=o},682:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Reset de estilos */\n* {\n\tmargin: 0;\n\tpadding: 0;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\n/* Estilos generales de la barra de navegación */\nnav {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 3%;\n\tjustify-content: space-around;\n\talign-items: center;\n\tbackground: none;\n\tjustify-content: space-between; /* Alinear elementos al centro horizontalmente */\n}\n\n/* Estilos para la sección de búsqueda */\nnav .search-bar,\nnav .pages {\n\tflex: 1; /* Distribuir el espacio disponible */\n}\n\n/* Agrega un espacio del 5% entre .search-bar y .pages */\nnav .search-bar {\n\tmargin-right: 5%;\n}\n\n/* Ajustes adicionales para la barra de búsqueda */\n.search-bar {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\theight: 30px;\n\tbox-sizing: border-box;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tborder-radius: 5px;\n\tmax-width: 30%;\n\tmargin-right: 10px;\n\tmargin-bottom: 0px;\n\twidth: 50%;\n\theight: 50%;\n}\n\n.search-bar input {\n\tflex: 1; /* Para que el input ocupe el espacio restante */\n\tpadding: 2 5px;\n\theight: 100%;\n\tborder: none;\n\toutline: none;\n\tbackground-color: transparent; /* Eliminar el color de fondo */\n\tcolor: white;\n}\n\n.icon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.icon img {\n\twidth: 20px;\n\tpadding: 0 10px;\n}\n\n/* Estilos para la sección de páginas */\n.pages {\n\tdisplay: flex;\n\tjustify-content: center; /* Centra los elementos horizontalmente */\n\tmargin-right: 0;\n}\n\n.pages a {\n\tmargin-right: 12%; /* Espacio entre los elementos */\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n\tcolor: white;\n\tfont-size: 14px;\n}\n\n.pages a:hover {\n\tcolor: rgba(251, 149, 60, 1);\n\tcursor: pointer;\n\ttransition: color 0.1s ease;\n}\n\n.pages {\n\tposition: relative;\n}\n\n/* Estilos para el menú desplegable */\n.pages .menu-desplegable {\n\tdisplay: none; /* controla que no se muestre */\n\tposition: absolute;\n\ttop: 100%;\n\tleft: 0;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tpadding: 10px;\n\tborder-radius: 5px;\n\tlist-style-type: none;\n}\n.pages .menu-desplegable a {\n\ttext-transform: none;\n\tdisplay: block;\n\tpadding: 5px 0;\n}\n\n.pages .menu-desplegable a:hover {\n\tcolor: rgba(233, 13, 90, 1);\n}\n\n.menu-desplegableDisplayed {\n\tdisplay: block !important;\n}\n\n/* media queries */\n@media screen and (max-width: 767px) {\n\tnav {\n\t\tflex-direction: row;\n\t\tpadding: 3%;\n\t}\n\n\tnav .search-bar {\n\t\tmargin-right: 10px;\n\t\tmargin-bottom: 0px;\n\t\twidth: 50%;\n\t\theight: 50%;\n\t}\n\n\t.icon {\n\t\twidth: 30%;\n\t\theight: 30%;\n\t}\n\t.pages a {\n\t\tmargin-right: 6px;\n\t\tfont-size: 10px;\n\t}\n}\n",""]);const a=o},679:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"button {\n\twidth: 20%; /* Modifica el ancho del botón */\n\theight: 50px;\n\tbackground-color: rgba(251, 149, 60, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 10px;\n\tfont-size: 80%;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\nbutton:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\nbutton span {\n\tdisplay: inline-block;\n\twidth: 100%;\n\ttext-align: center;\n}\n\n@media screen and (max-width: 767px) {\n\tbutton {\n\t\twidth: 100%;\n\t\tmargin-bottom: 10px;\n\t\tfont-size: 1rem;\n\t\tpadding: 0.5rem;\n\t}\n}\n",""]);const a=o},14:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#listMovies {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmy-moviecardadd {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n",""]);const a=o},721:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"* {\n\tmargin: 0;\n\tpadding: 0;\n\tbox-sizing: border-box;\n}\n\n.comment-section {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 20px;\n\tgap: 30px;\n\tborder-top: 1px solid white;\n\tmargin-bottom: 20px;\n}\n\n.info-user {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: flex-start;\n\tgap: 20px;\n}\n\n.user-image {\n\twidth: 70px;\n\theight: 70px;\n}\n\n.user-image img {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n\tborder-radius: 50%;\n}\n\n.info-user .rating {\n\tcolor: rgba(229, 39, 97, 1);\n}\n\n.info-user span h3 {\n\tdisplay: inline-block;\n}\n\n.right-side {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 10px;\n}\n\n@media screen and (max-width: 767px) {\n\t.user-image {\n\t\twidth: 40px;\n\t\theight: 40px;\n\t}\n\n\t.info-user h3 {\n\t\tfont-size: 12px;\n\t}\n\n\t.info-comment p {\n\t\tfont-size: 12px;\n\t}\n}\n",""]);const a=o},191:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"h2 {\n\tfont-weight: normal; /* Quita el negrita */\n\tcolor: rgba(233, 13, 90, 1); /* Cambia el color a rosa */\n\tmargin-bottom: 6px;\n}\n\nhr {\n\tborder-color: rgba(233, 13, 90, 1); /* Cambia el color del hr a rosa */\n\tmargin-top: 0px;\n\tmargin-bottom: 5%;\n}\n\np {\n\tmargin-bottom: 10%;\n}\n\n@media screen and (max-width: 767px) {\n\th2 {\n\t\tfont-size: 1.5rem;\n\t}\n\n\thr {\n\t\tmargin-bottom: 3%;\n\t}\n\n\tp {\n\t\tfont-size: 1rem;\n\t}\n}\n",""]);const a=o},267:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#favoriteMovies {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmovie-card {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n",""]);const a=o},83:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"#figure {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\ttext-align: center;\n}\n\n#figure img {\n\twidth: 400px;\n\theight: auto;\n}\n\n#directoanddate {\n\tmargin-top: 1px; /* Ajusta el margen superior según sea necesario */\n}\n\nh1 {\n\tfont-size: 200%;\n\tmargin: 1%;\n}\n\n#directoranddate {\n\tmargin: 1%;\n\tdisplay: flex; /* Hace que los elementos se alineen en una línea */\n\tjustify-content: center; /* Los elementos se alinearán al centro horizontalmente */\n\tgap: 10px; /* Espacio entre los elementos */\n}\n\np {\n\tmargin: 1%;\n\twhite-space: nowrap; /* Hace que el texto dentro del párrafo se muestre en una sola línea */\n}\n\n/* Estilos para pantallas más pequeñas */\n@media screen and (max-width: 767px) {\n\t#figure {\n\t\tmargin-top: 50%; /* Ajusta el margen superior para posicionarlo más abajo */\n\t}\n\n\t#figure img {\n\t\twidth: 100%; /* Hace que la imagen ocupe todo el ancho disponible */\n\t}\n\n\t#directoranddate {\n\t\tflex-direction: column; /* Cambia la dirección del flexbox a columna */\n\t\talign-items: center; /* Centra los elementos horizontalmente */\n\t\tmargin-top: 5px; /* Ajusta el margen superior */\n\t}\n\n\th1 {\n\t\tfont-size: 120%;\n\t}\n\tp {\n\t\twhite-space: normal;\n\t\tfont-size: 90%;\n\t}\n}\n",""]);const a=o},909:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"",""]);const a=o},675:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"* {\n\tmargin: 0;\n\tpadding: 0;\n\tbox-sizing: border-box;\n\tfont-family: Arial, Helvetica, sans-serif;\n}\n\n.modal-new-list {\n\tbackground-color: orange;\n\tborder-radius: 30px;\n\tpadding: 10px 40px;\n\tpadding-bottom: 40px;\n\twidth: 500px;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: fixed; /* Cambiamos position: relative; a position: fixed; */\n\ttop: 50%; /* Agregamos top: 50%; */\n\tleft: 50%; /* Agregamos left: 50%; */\n\ttransform: translate(-50%, -50%); /* Agregamos transform: translate(-50%, -50%); */\n}\n\n.close {\n\tposition: absolute;\n\ttop: 20px;\n\tright: 20px;\n\tcursor: pointer;\n}\n\n.title-list {\n\tmargin-top: 15px;\n\tmargin-bottom: 30px;\n}\n\n.info-list {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n.info-list label {\n\tmargin-bottom: 10px;\n}\n\n.info-list input[type='text'] {\n\twidth: 80%;\n\tpadding: 5px;\n\tmargin-bottom: 20px;\n\tborder-radius: 5px;\n\tborder: 1px solid #3e3e3e;\n}\n\n.info-list button[type='submit'] {\n\tbackground-color: black;\n\tcolor: white;\n\tpadding: 10px 20px;\n\tborder-radius: 10px;\n\tborder: none;\n\tcursor: pointer;\n\tmargin-top: 20px;\n}\n\n.info-list button[type='submit']:hover {\n\tbackground-color: #555;\n}\n.modal-new-list {\n\tz-index: 1000;\n}\n\n@media screen and (max-width: 767px) {\n\t.modal-new-list {\n\t\twidth: 80%;\n\t}\n}\n",""]);const a=o},163:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos para el contenedor de la tarjeta de película */\n.container {\n\tposition: relative;\n\tobject-fit: cover;\n\tdisplay: flex;\n\theight: 100%;\n\twidth: 100%;\n}\n\n/* Estilos para el póster/imagen principal de la película */\n.poster {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n/* Estilos para el contenido */\n.content {\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.6); /* Fondo semitransparente */\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-direction: column;\n\topacity: 0; /* Inicialmente oculto */\n\ttransition: opacity 0.6s; /* Transición suave al mostrar */\n\tobject-fit: cover;\n}\n\n.container:hover .content {\n\topacity: 1; /* Mostrar contenido al pasar el mouse por encima de .container */\n}\n\np {\n\tcolor: white;\n\tfont-size: 100%;\n}\n\n.content button {\n\tbackground-color: transparent;\n\tborder: none;\n\tcolor: white;\n\tfont-size: 2rem;\n\tcursor: pointer;\n}\n\n/* Estilos para el botón de añadir */\nbutton#AddButton {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 80px;\n\theight: 80px;\n\tborder-radius: 50%;\n\tborder: 2px solid white;\n\ttransition: transform 0.3s ease-in-out;\n}\n\nbutton#AddButton:hover {\n\ttransform: scale(1.1);\n}\n\n@media screen and (max-width: 767px) {\n\t.content button {\n\t\tfont-size: 1.5rem;\n\t}\n}\n",""]);const a=o},931:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos globales del componente */\n* {\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\n/* Estilos para el contenedor de la tarjeta de película */\n.container {\n\tposition: relative;\n\tobject-fit: cover;\n\tdisplay: flex;\n\theight: 100%;\n\twidth: 100%;\n}\n\n/* Estilos para el póster/imagen principal de la película */\n.poster {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n.viewdetails {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-direction: column;\n}\n/* Añade estilos para el contenido */\n.content {\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.6); /* Fondo semitransparente */\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-direction: column;\n\topacity: 0; /* Inicialmente oculto */\n\ttransition: opacity 0.6s; /* Transición suave al mostrar */\n\tobject-fit: cover;\n}\n\n.container:hover .content {\n\topacity: 1; /* Mostrar contenido al pasar el mouse por encima de .container */\n}\n\np {\n\tcolor: white;\n\tfont-size: 100%;\n}\n\n.content img,\n.content p {\n\tmargin: 5px; /* Ajusta el margen entre elementos */\n\ttext-align: center;\n}\n\n.content img {\n\twidth: 28%;\n\theight: auto;\n\tcursor: pointer; /* Cambia el cursor al pasar sobre el botón */\n}\n\nimg.details {\n\theight: auto;\n\twidth: 50%;\n}\n\n.link {\n\tdisplay: flex;\n\twidth: 100%; /* Ancho del 50% */\n\theight: 25%;\n\tjustify-content: center; /* Centra horizontalmente */\n\talign-items: center; /* Centra verticalmente */\n\tmargin: 5px;\n\tpadding: 0px;\n}\n\n.dislike,\n.like {\n\tdisplay: none; /* Inicialmente oculto */\n}\n\n@media screen and (max-width: 767px) {\n\t.content img,\n\t.content p {\n\t\tmargin: 3px;\n\t}\n\n\t.content img {\n\t\twidth: 35%;\n\t}\n\n\timg.details {\n\t\twidth: 80%;\n\t}\n\n\t.link {\n\t\twidth: 70%;\n\t}\n}\n",""]);const a=o},779:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,".container {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\tcolor: white;\n\tfont-family: 'Cairo', sans-serif;\n\tpadding: 30px;\n\tbox-sizing: border-box;\n}\n\n.profile {\n\twidth: 200px;\n\theight: 200px;\n}\n\n.profile-image img {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n\tborder-radius: 50%;\n}\n\n.form-group input {\n\tborder: 2px solid white;\n\tbackground-color: lightgray;\n\tborder-radius: 3px;\n}\n\n.form-actions button {\n\tborder: 2px solid white;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tborder-radius: 3px;\n\tpadding: 5px 10px;\n\tmargin: 5px 0;\n\tmin-width: 170px;\n\tcursor: pointer;\n\tcolor: white;\n}\n@media screen and (max-width: 767px) {\n\t.container {\n\t\talign-items: center;\n\t}\n\n\t.profile {\n\t\twidth: 150px;\n\t\theight: 150px;\n\t}\n\n\t.form-actions button {\n\t\tmin-width: auto;\n\t\twidth: 100%;\n\t}\n}\n",""]);const a=o},791:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"input {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-bottom: 0;\n\tborder: none;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #fff;\n\tborder-radius: 5px;\n\tbox-sizing: border-box; /* Modelo de caja */\n}\n\n::placeholder {\n\tcolor: rgba(30, 21, 22, 1);\n}\n\n#header .close {\n\tfloat: right; /* Se alinea a la derecha */\n\tcursor: pointer;\n}\n\nh1 {\n\tfont-size: 200%;\n\tmargin-top: 0;\n}\n\nlabel {\n\tfont-size: 15px;\n}\n@media screen and (max-width: 767px) {\n\tinput {\n\t\tfont-size: 14px; /* Reduce el tamaño de fuente en dispositivos más pequeños */\n\t}\n\n\th1 {\n\t\tfont-size: 2rem; /* Reduce el tamaño de fuente del título en dispositivos más pequeños */\n\t}\n}\n",""]);const a=o},633:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"a {\n\tcolor: rgba(250, 149, 59, 1);\n\tfont-size: 15px;\n}\n\nbutton {\n\twidth: 100%;\n\tpadding: 10px;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tcursor: pointer; /* Cambio de cursor */\n\tfont-family: 'Noto Traditional Nushu', serif;\n\tfont-size: 110%;\n}\n\nbutton:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\np {\n\tfont-size: 15px;\n}\n",""]);const a=o},583:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos para el botón flotante de abrir el modal */\n#ButtonModal {\n\tposition: fixed;\n\tz-index: 1; /* Se coloca por encima de otros elementos */\n\tbottom: 20px;\n\tright: 20px;\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: white;\n\tfont-size: 35px;\n\twidth: 55px;\n\theight: 55px;\n\tborder-radius: 50%;\n\tborder: 0px;\n\tcursor: pointer;\n}\n\n/* Estilos para el botón de cerrar el modal */\n.modalContainer .close {\n\tfloat: right; /* Se alinea a la derecha */\n\tcursor: pointer;\n}\n\n::placeholder {\n\tcolor: rgba(30, 21, 22, 1);\n}\n/* Estilos del formulario dentro del modal */\n.my-form {\n\tposition: fixed; /* Se fija el formulario en una posición específica */\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%); /* Centrado horizontal y vertical */\n\tbackground-color: rgba(30, 21, 22, 1);\n\tz-index: 2; /* Colocado por encima del modal */\n\tpadding: 20px;\n\tbox-shadow: 0 0 20px #000000; /* Sombra */\n\tborder-radius: 2rem;\n\theight: 80vh; /* Altura del 80% de la ventana */\n\twidth: 50%; /* Ancho del 50% de la ventana */\n\toverflow-x: hidden; /* Oculta el desbordamiento horizontal */\n\toverflow-y: auto; /* Habilita el desplazamiento vertical */\n}\n\n/*oculta la scrollbar */\n.my-form::-webkit-scrollbar {\n\tdisplay: none;\n}\n\n.modalContainer {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 9999;\n}\n\n/* Crea el velo detras del modal*/\n.modal-overlay {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.7);\n\tz-index: -1;\n}\n\n/*Responsive */\n@media screen and (max-width: 767px) {\n\t#ButtonModal {\n\t\twidth: 60px;\n\t\theight: 60px;\n\t\tfont-size: 40px;\n\t}\n\n\t.modal-content {\n\t\tpadding: 10px;\n\t}\n\n\t.my-form {\n\t\tpadding: 10px;\n\t}\n\n\t.my-form input[type='text'],\n\t.my-form input[type='date'] {\n\t\tpadding: 8px;\n\t\tfont-size: 14px;\n\t}\n\n\t.my-form button {\n\t\tpadding: 8px;\n\t\tfont-size: 14px;\n\t}\n}\n\n/* Estilos del contenido del modal */\n.modal-content {\n\tcolor: #fff;\n\tpadding: 20px;\n\tborder-radius: 10px;\n\tposition: relative;\n\tz-index: 10000; /* Colocado por encima de todos los elementos */\n\toverflow: hidden; /* Oculta el desbordamiento */\n\tdisplay: flex;\n\tjustify-content: center; /* Centrado horizontal */\n\talign-items: center; /* Centrado vertical */\n\tfont-family: 'Cairo', sans-serif;\n\tfont-size: 80%;\n\theight: 80vh; /* Altura del 80% de la ventana */\n}\n\n.my-form label {\n\tcolor: #fff;\n}\n\n/* Estilos para los campos de entrada de texto y fecha */\n.my-form input[type='text'],\n.my-form input[type='date'] {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-bottom: 0;\n\tborder: none;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #fff;\n\tborder-radius: 5px;\n\tbox-sizing: border-box; /* Modelo de caja */\n}\n\n/* Estilos para los checkboxes */\n.my-form input[type='checkbox'] {\n\tmargin-right: 5px;\n}\n\n/* Estilos para el botón de submit */\n.my-form button {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-top: 20px;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tcursor: pointer; /* Cambio de cursor */\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\n/* Estilos cuando se pasa el cursor sobre el botón */\n.my-form button:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\n/* Estilos para los checkboxes de género */\n#checkboxes label {\n\tmargin-right: 10px;\n}\n\n#checkboxes {\n\tdisplay: grid; /* Se muestra como grid */\n\tgrid-template-rows: repeat(2, 1fr); /* Se repite la plantilla de filas */\n\tgrid-auto-flow: column; /* Se muestran en columnas */\n}\n\n/* Estilos para la imagen de cerrar el modal, el icono de x */\n.close img {\n\twidth: 70%;\n\theight: auto;\n\tcursor: pointer; /* Cambia el cursor al pasar sobre el botón */\n}\n",""]);const a=o},775:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"b {\n\ttext-transform: uppercase; /* Convierte el texto a mayúsculas */\n\topacity: 70%;\n}\n\np {\n\tdisplay: block; /* Hace que el párrafo sea un bloque de texto */\n\twidth: 100%; /* Establece un ancho del 100% */\n}\n\n#description {\n\tmargin-bottom: 10%;\n}\n@media screen and (max-width: 767px) {\n\tb {\n\t\tfont-size: 1.2rem; /* Reduce el tamaño de fuente en dispositivos más pequeños */\n\t}\n\n\tp {\n\t\tfont-size: 1rem; /* Reduce el tamaño de fuente en dispositivos más pequeños */\n\t}\n\n\t#description {\n\t\tmargin-bottom: 5%; /* Reduce el margen inferior en dispositivos más pequeños */\n\t}\n}\n",""]);const a=o},213:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#cards {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start; /* Alineación a la izquierda */\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmovie-card {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\nh1 {\n\ttext-transform: uppercase;\n\tcolor: white;\n\tfont-family: 'Cairo', sans-serif;\n\t@media (max-width: 576px) {\n\t\tfont-size: 5vw; /* Tamaño de fuente más grande para pantallas pequeñas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n\nh1:hover {\n\tcolor: rgba(233, 13, 90, 1);\n}\n",""]);const a=o},809:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},9:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},466:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},207:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n\tfont-family: 'Noto Traditional Nushu', serif;\n\tcolor: white;\n\t/* position: relative; */\n}\n\n#banner {\n\tposition: relative;\n\tz-index: 1;\n}\n\n#figure {\n\tposition: absolute;\n\ttop: -60%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tz-index: 2; /* Para asegurarse de que figure esté encima del banner */\n}\n\n#content {\n\tmargin-top: 20%;\n\tdisplay: flex;\n\tposition: relative;\n\tmargin-left: 10%;\n\tmargin-right: 10%;\n}\n\n#info {\n\tflex: 2; /* Para que ocupe 2/3 del espacio */\n\tborder-right-color: white;\n\tborder-right-width: 20px;\n\tpadding-right: 20%;\n}\n\n/* #content::after {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: calc(4 / 5 * 100%);\n\twidth: 1px;\n\tbackground-color: white;\n} */\n\n#actions {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-end; /* Centra los elementos horizontalmente */\n\tflex: 1; /* Para que ocupe 1/3 del espacio */\n}\n\n/* Estilos para pantallas más pequeñas */\n@media screen and (max-width: 767px) {\n\t#content {\n\t\tmargin-top: 40%;\n\t\tflex-direction: column; /* Cambiar la dirección del flex para columnas */\n\t}\n\n\t#info {\n\t\tborder-right: none; /* Eliminar el borde derecho en pantallas pequeñas */\n\t\tpadding-right: 0; /* Eliminar el relleno derecho */\n\t}\n\n\t#content::after {\n\t\tleft: 0; /* Colocar la línea vertical al principio */\n\t\ttop: calc(2 / 3 * 100%); /* Colocar la línea al cuarto 4/5 de la pantalla */\n\t\twidth: 100%; /* Ancho completo */\n\t\theight: 1px; /* Altura de la línea */\n\t}\n\n\t#actions {\n\t\torder: -1; /* Cambiar el orden para que aparezca arriba */\n\t\talign-items: center; /* Alinear los elementos horizontalmente */\n\t\tpadding-top: 10px; /* Añadir espacio arriba */\n\t\tdisplay: grid; /* Usar grid layout para organizar los elementos */\n\t\tgrid-template-columns: repeat(2, 1fr); /* Crear 2 columnas de igual tamaño */\n\t\tgrid-gap: 10px; /* Espacio entre las celdas */\n\t\tmargin-bottom: 20px;\n\t}\n\n\t/* Alinear elementos de la segunda columna hacia la derecha */\n\t#actions my-actionandicon:nth-child(even) {\n\t\tjustify-self: end;\n\t}\n\n\t#content::after {\n\t\tdisplay: none;\n\t}\n}\n",""]);const a=o},858:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(601),r=n.n(i),s=n(314),o=n.n(s),a=n(417),c=n.n(a),l=new URL(n(528),n.b),h=o()(r()),u=c()(l);h.push([t.id,`* {\n\tcolor: #fff;\n\tfont-family: 'Cairo', sans-serif;\n}\n\n#form {\n\tposition: fixed;\n\ttop: 40%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%); /* Centrado horizontal y vertical */\n\tbackground-color: rgba(30, 21, 22, 1);\n\tpadding: 3%;\n\tbox-shadow: 0 0 20px #000000; /* Sombra */\n\tborder-radius: 2rem;\n\theight: auto;\n\twidth: auto;\n\toverflow-x: hidden; /* Oculta el desbordamiento horizontal */\n\toverflow-y: auto; /* Habilita el desplazamiento vertical */\n\tcolor: #fff;\n\tfont-family: 'Cairo', sans-serif;\n\tz-index: 2;\n}\n\na {\n\tcolor: rgba(250, 149, 59, 1);\n}\n\n#extrainfo {\n\tposition: fixed;\n\tbottom: 5%; /* Ajusta esta cantidad para colocar la sección más abajo */\n\tleft: 50%;\n\ttransform: translate(-50%, 0); /* Ajusta la transformación vertical a 0 */\n\twidth: 100%;\n\ttext-align: center; /* Alinea el contenido al centro */\n\tz-index: 3; /* Asegura que #extrainfo esté por encima del formulario */\n}\n\n#extrainfo-content {\n\twidth: 100%;\n}\n\n#extrainfo-content hr {\n\tdisplay: inline-block;\n\twidth: 30%; /* Ajusta este valor según el ancho deseado */\n\tmargin: 0 10px; /* Espacio entre elementos */\n\tborder-top: 1px solid rgba(255, 255, 255, 0.5); /* Cambia el color y estilo según lo necesario */\n\tvertical-align: middle; /* Alinea verticalmente */\n}\n\n#extrainfo-content p {\n\tdisplay: inline-block;\n\tmargin: 0 10px; /* Espacio entre elementos */\n}\n\nbutton {\n\tdisplay: inline-block;\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tpadding: 10px 20px;\n\tcursor: pointer;\n\tfont-size: 16px;\n\tmargin: 10px;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\nbutton:hover {\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\n:host {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tbackground-image: url(${u});\n\tbackground-size: cover;\n\tbackground-position: center top 30%;\n\tmargin: 0;\n\tpadding: 10%;\n\tcolor: white;\n\theight: 100%;\n\tz-index: 1;\n}\n@media screen and (max-width: 767px) {\n\t#extrainfo {\n\t\tbottom: 10%;\n\t}\n\n\t#extrainfo-content hr {\n\t\twidth: 10%;\n\t}\n}\n`,""]);const d=h},868:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(601),r=n.n(i),s=n(314),o=n.n(s),a=n(417),c=n.n(a),l=new URL(n(473),n.b),h=o()(r()),u=c()(l);h.push([t.id,`:host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n\n#modal-button,\n#favorites {\n\twidth: 70%;\n\theight: 200px;\n\tmargin: 30px auto;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 2rem;\n\ttext-transform: uppercase;\n\tborder-radius: 30px;\n\tcolor: white;\n\tbackground-image: url(${u});\n\tbackground-position: center;\n}\n\n#lists button {\n\tposition: relative; /* Asegura que el botón sea relativo para que se pueda posicionar el velo */\n\toverflow: hidden; /* Evita que el velo se salga del botón */\n\twidth: 70%;\n\theight: 200px;\n\tmargin: 30px auto;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 2rem;\n\ttext-transform: uppercase;\n\tborder-radius: 30px;\n\tcolor: white;\n\tbackground-position: center;\n\tbackground-size: cover; /* La imagen de fondo se ajustará para cubrir todo el botón */\n\tposition: relative; /* Asegura que el botón sea relativo para que se pueda posicionar el velo */\n}\n\n#lists button::before {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.5); /* Color negro con opacidad del 50% */\n\tz-index: 1; /* Coloca el velo sobre la imagen de fondo */\n}\n\n#lists button img {\n\tposition: relative; /* Asegura que la imagen esté por encima del velo */\n\tz-index: 2; /* Coloca la imagen por encima del velo */\n}\n`,""]);const d=h},375:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},82:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},307:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(601),r=n.n(i),s=n(314),o=n.n(s),a=n(417),c=n.n(a),l=new URL(n(528),n.b),h=o()(r()),u=c()(l);h.push([t.id,`section {\n\tposition: fixed;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tbackground-color: rgba(30, 21, 22, 1);\n\tpadding: 3%;\n\tbox-shadow: 0 0 20px #000000;\n\tborder-radius: 2rem;\n\theight: auto;\n\twidth: auto;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\tcolor: #fff;\n\tfont-family: 'Cairo', sans-serif;\n\tz-index: 2;\n\tmargin-top: 10px;\n\twidth: 50%; /* Ajustar el ancho del contenedor */\n\tmax-width: 500px; /* Establecer un ancho máximo */\n}\n\na {\n\tcolor: rgba(250, 149, 59, 1);\n\tcursor: pointer;\n}\n\nmy-sessionform {\n\tmargin-bottom: 20px; /* Agregar espacio entre el formulario y el botón */\n}\n\nmy-submitandterms {\n\tmargin-bottom: 10px; /* Agregar espacio entre el botón y el enlace */\n}\n\ninput {\n\tfont-size: 16px; /* Mantener el tamaño de fuente predeterminado */\n\tmargin-bottom: 10px; /* Agregar espacio entre los campos de entrada */\n}\n:host {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tbackground-image: url(${u});\n\tbackground-size: cover;\n\tbackground-position: center top 30%;\n\tmargin: 0;\n\tpadding: 10%;\n\tcolor: white;\n\theight: 100%;\n}\n\n@media screen and (max-width: 767px) {\n\tsection {\n\t\twidth: 70%;\n\t\theight: 90%;\n\t}\n}\n`,""]);const d=h},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);i&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),e.push(h))}},e}},417:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{t.exports=function(t){return t[1]}},473:(t,e,n)=>{t.exports=n.p+"b9ed50904b789d681f2b.png"},528:(t,e,n)=>{t.exports=n.p+"5fa3712916bc3774d951.png"}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,exports:{}};return t[i](s,s.exports,n),s.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,(()=>{var t,e,i,r;!function(t){t.GET="GET"}(t||(t={})),function(t){t.GET2="GET2"}(e||(e={})),function(t){t.GET3="GET3"}(i||(i={})),function(t){t.NAVIGATE="NAVIGATE"}(r||(r={}));let s={screen:"DASHBOARD",movielist:[],currentcategory:"",titlecategory:"",imagecategory:"",movieid:"",movieimage:"",moviecategories:"",movietitle:"",moviedirector:"",moviereleasedate:"",moviecast:"",moviecrew:"",movieimagesec:"",moviedescription:"",moviecatchphrase:"",favlist:[],currentnewlistname:"",currentnewlistimage:"",currentnewlistid:"",usermovielists:[]||0},o=[];const a=n=>{const r=JSON.parse(JSON.stringify(s));s=((n,r)=>{const{action:s,payload:o}=n;return"navigate"===s&&(r.screen=o),s===t.GET?Object.assign(Object.assign({},r),{movielist:o}):s===e.GET2?Object.assign(Object.assign({},r),{favlist:o}):("navigateCategory"===s&&(r.currentcategory=o),"SaveTitleCategory"===s&&(r.titlecategory=o),"SaveImageCategory"===s&&(r.imagecategory=o),"SaveMovieId"===s&&(r.movieid=o),"SaveMovieImage"===s&&(r.movieimage=o),"SaveMovieCategories"===s&&(r.moviecategories=o),"SaveMovieTitle"===s&&(r.movietitle=o),"SaveMovieDirector"===s&&(r.moviedirector=o),"SaveMovieReleaseDate"===s&&(r.moviereleasedate=o),"SaveMovieCast"===s&&(r.moviecast=o),"SaveMovieCrew"===s&&(r.moviecrew=o),"SaveMovieImageSec"===s&&(r.movieimagesec=o),"SaveMovieDescription"===s&&(r.moviedescription=o),"SaveMovieCatchPhrase"===s&&(r.moviecatchphrase=o),"SaveCurrentNewListName"===s&&(r.currentnewlistname=o),"SaveCurrentNewListImage"===s&&(r.currentnewlistimage=o),"SaveCurrentNewListId"===s&&(r.currentnewlistid=o),s===i.GET3?Object.assign(Object.assign({},r),{usermovielists:o}):r)})(n,r),o.forEach((t=>t.render()))},c=t=>{o=[...o,t]},l=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=r>>2,h=(3&r)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(u=64)),i.push(n[l],n[h],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const r=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==r||null==s||null==o||null==a)throw new u;const c=r<<2|s>>4;if(i.push(c),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d=function(t){return function(t){const e=l(t);return h.encodeByteArray(e,!0)}(t).replace(/\./g,"")},p=function(t){try{return h.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},f=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&p(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},m=t=>{var e,n;return null===(n=null===(e=f())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},g=()=>{var t;return null===(t=f())||void 0===t?void 0:t.config},v=t=>{var e;return null===(e=f())||void 0===e?void 0:e[`_${t}`]};class y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function w(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function b(){try{return"object"==typeof indexedDB}catch(t){return!1}}class _ extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E.prototype.create)}}class E{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(T,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new _(i,o,n)}}const T=/\{\$([^}]+)}/g;function I(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(C(n)&&C(s)){if(!I(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function C(t){return null!==t&&"object"==typeof t}function S(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function k(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function A(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class x{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=R),void 0===i.error&&(i.error=R),void 0===i.complete&&(i.complete=R);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function R(){}function N(t){return t&&t._delegate?t._delegate:t}class D{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const L="[DEFAULT]";class O{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new y;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:L})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=L){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=L){return this.instances.has(t)}getOptions(t=L){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===L?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=L){return this.component?this.component.multipleInstances?t:L:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class M{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new O(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const P=[];var F;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(F||(F={}));const U={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},V=F.INFO,j={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},$=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=j[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class z{constructor(t){this.name=t,this._logLevel=V,this._logHandler=$,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in F))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?U[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...t),this._logHandler(this,F.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...t),this._logHandler(this,F.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,F.INFO,...t),this._logHandler(this,F.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,F.WARN,...t),this._logHandler(this,F.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...t),this._logHandler(this,F.ERROR,...t)}}const B=(t,e)=>e.some((e=>t instanceof e));let q,H;const G=new WeakMap,K=new WeakMap,W=new WeakMap,Q=new WeakMap,J=new WeakMap;let X={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return K.get(t);if("objectStoreNames"===e)return t.objectStoreNames||W.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Z(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Y(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(tt(this),t),Z(G.get(this))}:function(...t){return Z(e.apply(tt(this),t))}:function(t,...n){const i=e.call(tt(this),t,...n);return W.set(i,t.sort?t.sort():[t]),Z(i)}:(t instanceof IDBTransaction&&function(t){if(K.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));K.set(t,e)}(t),B(t,q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,X):t);var e}function Z(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(Z(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&G.set(e,t)})).catch((()=>{})),J.set(e,t),e}(t);if(Q.has(t))return Q.get(t);const e=Y(t);return e!==t&&(Q.set(t,e),J.set(e,t)),e}const tt=t=>J.get(t),et=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],it=new Map;function rt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(it.get(e))return it.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=nt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!et.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return it.set(e,s),s}var st;st=X,X={...st,get:(t,e,n)=>rt(t,e)||st.get(t,e,n),has:(t,e)=>!!rt(t,e)||st.has(t,e)};class ot{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const at="@firebase/app",ct="0.9.26",lt=new z("@firebase/app"),ht="[DEFAULT]",ut={[at]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dt=new Map,pt=new Map;function ft(t,e){try{t.container.addComponent(e)}catch(n){lt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mt(t){const e=t.name;if(pt.has(e))return lt.debug(`There were multiple attempts to register component ${e}.`),!1;pt.set(e,t);for(const e of dt.values())ft(e,t);return!0}function gt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const vt=new E("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new D("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw vt.create("app-deleted",{appName:this._name})}}const wt="10.7.2";function bt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:ht,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw vt.create("bad-app-name",{appName:String(r)});if(n||(n=g()),!n)throw vt.create("no-options");const s=dt.get(r);if(s){if(I(n,s.options)&&I(i,s.config))return s;throw vt.create("duplicate-app",{appName:r})}const o=new M(r);for(const t of pt.values())o.addComponent(t);const a=new yt(n,i,o);return dt.set(r,a),a}function _t(t=ht){const e=dt.get(t);if(!e&&t===ht&&g())return bt();if(!e)throw vt.create("no-app",{appName:t});return e}function Et(t,e,n){var i;let r=null!==(i=ut[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void lt.warn(t.join(" "))}mt(new D(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const Tt="firebase-heartbeat-database",It=1,Ct="firebase-heartbeat-store";let St=null;function kt(){return St||(St=function(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Z(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(Z(o.result),t.oldVersion,t.newVersion,Z(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(Tt,It,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Ct)}catch(t){console.warn(t)}}}).catch((t=>{throw vt.create("idb-open",{originalErrorMessage:t.message})}))),St}async function At(t,e){try{const n=(await kt()).transaction(Ct,"readwrite"),i=n.objectStore(Ct);await i.put(e,xt(t)),await n.done}catch(t){if(t instanceof _)lt.warn(t.message);else{const e=vt.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});lt.warn(e.message)}}}function xt(t){return`${t.name}!${t.options.appId}`}class Rt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Dt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Nt();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Nt(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Lt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Lt(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=d(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Nt(){return(new Date).toISOString().substring(0,10)}class Dt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!b()&&new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await kt();return await e.transaction(Ct).objectStore(Ct).get(xt(t))}catch(t){if(t instanceof _)lt.warn(t.message);else{const e=vt.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});lt.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return At(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return At(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Lt(t){return d(JSON.stringify({version:2,heartbeats:t})).length}mt(new D("platform-logger",(t=>new ot(t)),"PRIVATE")),mt(new D("heartbeat",(t=>new Rt(t)),"PRIVATE")),Et(at,ct,""),Et(at,ct,"esm2017"),Et("fire-js",""),Et("firebase","10.7.2","app");var Ot,Mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Pt={},Ft=Ft||{},Ut=Mt||self;function Vt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function jt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var $t="closure_uid_"+(1e9*Math.random()>>>0),zt=0;function Bt(t,e,n){return t.call.apply(t.bind,arguments)}function qt(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ht(t,e,n){return(Ht=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bt:qt).apply(null,arguments)}function Gt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Kt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function Wt(){this.s=this.s,this.o=this.o}Wt.prototype.s=!1,Wt.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,$t)&&t[$t]||(t[$t]=++zt))},Wt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Jt(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Xt(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(Vt(n)){const e=t.length||0,i=n.length||0;t.length=e+i;for(let r=0;r<i;r++)t[e+r]=n[r]}else t.push(n)}}function Yt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Yt.prototype.h=function(){this.defaultPrevented=!0};var Zt=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};Ut.addEventListener("test",t,e),Ut.removeEventListener("test",t,e)}catch(t){}return t}();function te(t){return/^[\s\xa0]*$/.test(t)}function ee(){var t=Ut.navigator;return t&&(t=t.userAgent)?t:""}function ne(t){return-1!=ee().indexOf(t)}function ie(t){return ie[" "](t),t}ie[" "]=function(){};var re,se,oe,ae=ne("Opera"),ce=ne("Trident")||ne("MSIE"),le=ne("Edge"),he=le||ce,ue=ne("Gecko")&&!(-1!=ee().toLowerCase().indexOf("webkit")&&!ne("Edge"))&&!(ne("Trident")||ne("MSIE"))&&!ne("Edge"),de=-1!=ee().toLowerCase().indexOf("webkit")&&!ne("Edge");function pe(){var t=Ut.document;return t?t.documentMode:void 0}t:{var fe="",me=(se=ee(),ue?/rv:([^\);]+)(\)|;)/.exec(se):le?/Edge\/([\d\.]+)/.exec(se):ce?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(se):de?/WebKit\/(\S+)/.exec(se):ae?/(?:Version)[ \/]?(\S+)/.exec(se):void 0);if(me&&(fe=me?me[1]:""),ce){var ge=pe();if(null!=ge&&ge>parseFloat(fe)){re=String(ge);break t}}re=fe}Ut.document&&ce?oe=pe()||parseInt(re,10)||void 0:oe=void 0;var ve=oe;function ye(t,e){if(Yt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ue){t:{try{ie(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:we[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ye.$.h.call(this)}}Kt(ye,Yt);var we={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ee(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++_e,this.fa=this.ia=!1}function Te(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ie(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function Ce(t){const e={};for(const n in t)e[n]=t[n];return e}const Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ke(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<Se.length;e++)n=Se[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Ae(t){this.src=t,this.g={},this.h=0}function xe(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Qt(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Te(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Re(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}Ae.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Re(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new Ee(e,this.src,s,!!i,r)).ia=n,t.push(e)),e};var Ne="closure_lm_"+(1e6*Math.random()|0),De={};function Le(t,e,n,i,r){if(i&&i.once)return Me(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Le(t,e[s],n,i,r);return null}return n=ze(n),t&&t[be]?t.O(e,n,jt(i)?!!i.capture:!!i,r):Oe(t,e,n,!1,i,r)}function Oe(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=jt(r)?!!r.capture:!!r,a=je(t);if(a||(t[Ne]=a=new Ae(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){const t=Ve;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Zt||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Ue(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Me(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Me(t,e[s],n,i,r);return null}return n=ze(n),t&&t[be]?t.P(e,n,jt(i)?!!i.capture:!!i,r):Oe(t,e,n,!0,i,r)}function Pe(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Pe(t,e[s],n,i,r);else i=jt(i)?!!i.capture:!!i,n=ze(n),t&&t[be]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Re(s=t.g[e],n,i,r))&&(Te(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=je(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Re(e,n,i,r)),(n=-1<t?e[t]:null)&&Fe(n))}function Fe(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[be])xe(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Ue(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=je(e))?(xe(n,t),0==n.h&&(n.src=null,e[Ne]=null)):Te(t)}}}function Ue(t){return t in De?De[t]:De[t]="on"+t}function Ve(t,e){if(t.fa)t=!0;else{e=new ye(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Fe(t),t=n.call(i,e)}return t}function je(t){return(t=t[Ne])instanceof Ae?t:null}var $e="__closure_events_fn_"+(1e9*Math.random()>>>0);function ze(t){return"function"==typeof t?t:(t[$e]||(t[$e]=function(e){return t.handleEvent(e)}),t[$e])}function Be(){Wt.call(this),this.i=new Ae(this),this.S=this,this.J=null}function qe(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"==typeof e)e=new Yt(e,t);else if(e instanceof Yt)e.target=e.target||t;else{var r=e;ke(e=new Yt(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=He(o,i,!0,e)&&r}if(r=He(o=e.g=t,i,!0,e)&&r,r=He(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=He(o=e.g=n[s],i,!1,e)&&r}function He(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&xe(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}Kt(Be,Wt),Be.prototype[be]=!0,Be.prototype.removeEventListener=function(t,e,n,i){Pe(this,t,e,n,i)},Be.prototype.N=function(){if(Be.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)Te(n[i]);delete e.g[t],e.h--}}this.J=null},Be.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Be.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var Ge=Ut.JSON.stringify;function Ke(){var t=tn;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var We=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Qe),(t=>t.reset()));class Qe{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Je(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Xe(t){Ut.setTimeout((()=>{throw t}),0)}let Ye,Ze=!1,tn=new class{constructor(){this.h=this.g=null}add(t,e){const n=We.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},en=()=>{const t=Ut.Promise.resolve(void 0);Ye=()=>{t.then(nn)}};var nn=()=>{for(var t;t=Ke();){try{t.h.call(t.g)}catch(t){Xe(t)}var e=We;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ze=!1};function rn(t,e){Be.call(this),this.h=t||1,this.g=e||Ut,this.j=Ht(this.qb,this),this.l=Date.now()}function sn(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function on(t,e,n){if("function"==typeof t)n&&(t=Ht(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ht(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ut.setTimeout(t,e||0)}function an(t){t.g=on((()=>{t.g=null,t.i&&(t.i=!1,an(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Kt(rn,Be),(Ot=rn.prototype).ga=!1,Ot.T=null,Ot.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),qe(this,"tick"),this.ga&&(sn(this),this.start()))}},Ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ot.N=function(){rn.$.N.call(this),sn(this),delete this.g};class cn extends Wt{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:an(this)}N(){super.N(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ln(t){Wt.call(this),this.h=t,this.g={}}Kt(ln,Wt);var hn=[];function un(t,e,n,i){Array.isArray(n)||(n&&(hn[0]=n.toString()),n=hn);for(var r=0;r<n.length;r++){var s=Le(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function dn(t){Ie(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Fe(t)}),t),t.g={}}function pn(){this.g=!0}function fn(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Ge(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}ln.prototype.N=function(){ln.$.N.call(this),dn(this)},ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},pn.prototype.Ea=function(){this.g=!1},pn.prototype.info=function(){};var mn={},gn=null;function vn(){return gn=gn||new Be}function yn(t){Yt.call(this,mn.Ta,t)}function wn(t){const e=vn();qe(e,new yn(e))}function bn(t,e){Yt.call(this,mn.STAT_EVENT,t),this.stat=e}function _n(t){const e=vn();qe(e,new bn(e,t))}function En(t,e){Yt.call(this,mn.Ua,t),this.size=e}function Tn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ut.setTimeout((function(){t()}),e)}mn.Ta="serverreachability",Kt(yn,Yt),mn.STAT_EVENT="statevent",Kt(bn,Yt),mn.Ua="timingevent",Kt(En,Yt);var In={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Cn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Sn(){}function kn(t){return t.h||(t.h=t.i())}function An(){}Sn.prototype.h=null;var xn,Rn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nn(){Yt.call(this,"d")}function Dn(){Yt.call(this,"c")}function Ln(){}function On(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new ln(this),this.P=Pn,t=he?125:void 0,this.V=new rn(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Mn}function Mn(){this.i=null,this.g="",this.h=!1}Kt(Nn,Yt),Kt(Dn,Yt),Kt(Ln,Sn),Ln.prototype.g=function(){return new XMLHttpRequest},Ln.prototype.i=function(){return{}},xn=new Ln;var Pn=45e3,Fn={},Un={};function Vn(t,e,n){t.L=1,t.A=ri(Zn(e)),t.u=n,t.S=!0,jn(t,null)}function jn(t,e){t.G=Date.now(),qn(t),t.B=Zn(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),vi(n.i,"t",i),t.o=0,n=t.l.J,t.h=new Mn,t.g=vr(t.l,n?e:null,!t.u),0<t.O&&(t.M=new cn(Ht(t.Pa,t,t.g),t.O)),un(t.U,t.g,"readystatechange",t.nb),e=t.I?Ce(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),wn(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var h=l[0];l=l[1];var u=h.split("_");o=2<=u.length&&"type"==u[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function $n(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function zn(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=Bn(t,n),i==Un){4==e&&(t.s=4,_n(14),r=!1),fn(t.j,t.m,null,"[Incomplete Response]");break}if(i==Fn){t.s=4,_n(15),fn(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}fn(t.j,t.m,i,null),Qn(t,i)}$n(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,_n(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),lr(e),e.M=!0,_n(11))):(fn(t.j,t.m,n,"[Invalid Chunked Response]"),Wn(t),Kn(t))}function Bn(t,e){var n=t.o,i=e.indexOf("\n",n);return-1==i?Un:(n=Number(e.substring(n,i)),isNaN(n)?Fn:(i+=1)+n>e.length?Un:(e=e.slice(i,i+n),t.o=i+n,e))}function qn(t){t.Y=Date.now()+t.P,Hn(t,t.P)}function Hn(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Tn(Ht(t.lb,t),e)}function Gn(t){t.C&&(Ut.clearTimeout(t.C),t.C=null)}function Kn(t){0==t.l.H||t.J||dr(t.l,t)}function Wn(t){Gn(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,sn(t.V),dn(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Qn(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Ii(n.i,t)))if(!t.K&&Ii(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;ur(n),er(n)}cr(n),_n(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=Tn(Ht(n.ib,n),6e3));if(1>=Ti(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else fr(n,11)}else if((t.K||n.g==t)&&ur(n),!te(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const e=l[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=l[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ci(s,s.h),s.h=null))}if(i.F){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,ii(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((i=n).wa=gr(i,i.J?i.pa:null,i.Y),o.K){Si(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(Gn(a),qn(a)),i.g=o}else ar(i);0<n.j.length&&ir(n)}else"stop"!=l[0]&&"close"!=l[0]||fr(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?fr(n,7):tr(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}wn()}catch(t){}}function Jn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Vt(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(Vt(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Vt(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(Ot=On.prototype).setTimeout=function(t){this.P=t},Ot.nb=function(t){t=t.target;const e=this.M;e&&3==Wi(t)?e.l():this.Pa(t)},Ot.Pa=function(t){try{if(t==this.g)t:{const h=Wi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||he||this.g&&(this.h.h||this.g.ja()||Qi(this.g)))){this.J||4!=h||7==e||wn(),Gn(this);var n=this.g.da();this.ca=n;e:if($n(this)){var i=Qi(this.g);t="";var r=i.length,s=4==Wi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Wn(this),Kn(this);var o="";break e}this.h.i=new Ut.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.s=3,_n(12),Wn(this),Kn(this);break t}fn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qn(this,n)}this.S?(zn(this,h,o),he&&this.i&&3==h&&(un(this.U,this.V,"tick",this.mb),this.V.start())):(fn(this.j,this.m,o,null),Qn(this,o)),4==h&&Wn(this),this.i&&!this.J&&(4==h?dr(this.l,this):(this.i=!1,qn(this)))}else(function(t){const e={};t=(t.g&&2<=Wi(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(te(t[i]))continue;var n=Je(t[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,_n(12)):(this.s=0,_n(13)),Wn(this),Kn(this)}}}catch(t){}},Ot.mb=function(){if(this.g){var t=Wi(this.g),e=this.g.ja();this.o<e.length&&(Gn(this),zn(this,t,e),this.i&&4!=t&&qn(this))}},Ot.cancel=function(){this.J=!0,Wn(this)},Ot.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(wn(),_n(17)),Wn(this),this.s=2,Kn(this)):Hn(this,this.Y-t)};var Xn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yn(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Yn){this.h=t.h,ti(this,t.j),this.s=t.s,this.g=t.g,ei(this,t.m),this.l=t.l;var e=t.i,n=new pi;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ni(this,n),this.o=t.o}else t&&(e=String(t).match(Xn))?(this.h=!1,ti(this,e[1]||"",!0),this.s=si(e[2]||""),this.g=si(e[3]||"",!0),ei(this,e[4]),this.l=si(e[5]||"",!0),ni(this,e[6]||"",!0),this.o=si(e[7]||"")):(this.h=!1,this.i=new pi(null,this.h))}function Zn(t){return new Yn(t)}function ti(t,e,n){t.j=n?si(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ei(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ni(t,e,n){e instanceof pi?(t.i=e,function(t,e){e&&!t.j&&(fi(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(mi(this,e),vi(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=oi(e,ui)),t.i=new pi(e,t.h))}function ii(t,e,n){t.i.set(e,n)}function ri(t){return ii(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function si(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function oi(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ai),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ai(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Yn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(oi(e,ci,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(oi(e,ci,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(oi(n,"/"==n.charAt(0)?hi:li,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",oi(n,di)),t.join("")};var ci=/[#\/\?@]/g,li=/[#\?:]/g,hi=/[#\?]/g,ui=/[#\?@]/g,di=/#/g;function pi(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function fi(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function mi(t,e){fi(t),e=yi(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function gi(t,e){return fi(t),e=yi(t,e),t.g.has(e)}function vi(t,e,n){mi(t,e),0<n.length&&(t.i=null,t.g.set(yi(t,e),Jt(n)),t.h+=n.length)}function yi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Ot=pi.prototype).add=function(t,e){fi(this),this.i=null,t=yi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Ot.forEach=function(t,e){fi(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},Ot.ta=function(){fi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},Ot.Z=function(t){fi(this);let e=[];if("string"==typeof t)gi(this,t)&&(e=e.concat(this.g.get(yi(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Ot.set=function(t,e){return fi(this),this.i=null,gi(this,t=yi(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ot.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var wi=class{constructor(t,e){this.g=t,this.map=e}};function bi(t){this.l=t||_i,t=Ut.PerformanceNavigationTiming?0<(t=Ut.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ka&&Ut.g.Ka()&&Ut.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _i=10;function Ei(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Ti(t){return t.h?1:t.g?t.g.size:0}function Ii(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Ci(t,e){t.g?t.g.add(e):t.h=e}function Si(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ki(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Jt(t.i)}bi.prototype.cancel=function(){if(this.i=ki(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Ai=class{stringify(t){return Ut.JSON.stringify(t,void 0)}parse(t){return Ut.JSON.parse(t,void 0)}};function xi(){this.g=new Ai}function Ri(t,e,n){const i=n||"";try{Jn(t,(function(t,n){let r=t;jt(t)&&(r=Ge(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function Ni(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function Di(t){this.l=t.ec||null,this.j=t.ob||!1}function Li(t,e){Be.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Oi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Kt(Di,Sn),Di.prototype.g=function(){return new Li(this.l,this.j)},Di.prototype.i=function(t){return function(){return t}}({}),Kt(Li,Be);var Oi=0;function Mi(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Pi(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Fi(t)}function Fi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ot=Li.prototype).open=function(t,e){if(this.readyState!=Oi)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Fi(this)},Ot.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ut).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pi(this)),this.readyState=Oi},Ot.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Ut.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mi(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Ot.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Pi(this):Fi(this),3==this.readyState&&Mi(this)}},Ot.Za=function(t){this.g&&(this.response=this.responseText=t,Pi(this))},Ot.Ya=function(t){this.g&&(this.response=t,Pi(this))},Ot.ka=function(){this.g&&Pi(this)},Ot.setRequestHeader=function(t,e){this.v.append(t,e)},Ot.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ot.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Li.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Ui=Ut.JSON.parse;function Vi(t){Be.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ji,this.L=this.M=!1}Kt(Vi,Be);var ji="",$i=/^https?$/i,zi=["POST","PUT"];function Bi(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,qi(t),Gi(t)}function qi(t){t.F||(t.F=!0,qe(t,"complete"),qe(t,"error"))}function Hi(t){if(t.h&&void 0!==Ft&&(!t.C[1]||4!=Wi(t)||2!=t.da()))if(t.v&&4==Wi(t))on(t.La,0,t);else if(qe(t,"readystatechange"),4==Wi(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===o){var r=String(t.I).match(Xn)[1]||null;!r&&Ut.self&&Ut.self.location&&(r=Ut.self.location.protocol.slice(0,-1)),i=!$i.test(r?r.toLowerCase():"")}n=i}if(n)qe(t,"complete"),qe(t,"success");else{t.m=6;try{var s=2<Wi(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",qi(t)}}finally{Gi(t)}}}function Gi(t,e){if(t.g){Ki(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||qe(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function Ki(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ut.clearTimeout(t.A),t.A=null)}function Wi(t){return t.g?t.g.readyState:0}function Qi(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case ji:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ji(t){let e="";return Ie(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Xi(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Ji(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ii(t,e,n))}function Yi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Zi(t){this.Ga=0,this.j=[],this.l=new pn,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Yi("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Yi("baseRetryDelayMs",5e3,t),this.hb=Yi("retryDelaySeedMs",1e4,t),this.eb=Yi("forwardChannelMaxRetries",2,t),this.xa=Yi("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new bi(t&&t.concurrentRequestLimit),this.Ja=new xi,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function tr(t){if(nr(t),3==t.H){var e=t.W++,n=Zn(t.I);if(ii(n,"SID",t.K),ii(n,"RID",e),ii(n,"TYPE","terminate"),sr(t,n),(e=new On(t,t.l,e)).L=2,e.A=ri(Zn(n)),n=!1,Ut.navigator&&Ut.navigator.sendBeacon)try{n=Ut.navigator.sendBeacon(e.A.toString(),"")}catch(t){}!n&&Ut.Image&&((new Image).src=e.A,n=!0),n||(e.g=vr(e.l,null),e.g.ha(e.A)),e.G=Date.now(),qn(e)}mr(t)}function er(t){t.g&&(lr(t),t.g.cancel(),t.g=null)}function nr(t){er(t),t.u&&(Ut.clearTimeout(t.u),t.u=null),ur(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Ut.clearTimeout(t.m),t.m=null)}function ir(t){if(!Ei(t.i)&&!t.m){t.m=!0;var e=t.Na;Ye||en(),Ze||(Ye(),Ze=!0),tn.add(e,t),t.C=0}}function rr(t,e){var n;n=e?e.m:t.W++;const i=Zn(t.I);ii(i,"SID",t.K),ii(i,"RID",n),ii(i,"AID",t.V),sr(t,i),t.o&&t.s&&Xi(i,t.o,t.s),n=new On(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=or(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Ci(t.i,n),Vn(n,i,e)}function sr(t,e){t.na&&Ie(t.na,(function(t,n){ii(e,n,t)})),t.h&&Jn({},(function(t,n){ii(e,n,t)}))}function or(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Ht(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=e,0>n)e=Math.max(0,r[o].g-100),s=!1;else try{Ri(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function ar(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ye||en(),Ze||(Ye(),Ze=!0),tn.add(e,t),t.A=0}}function cr(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Tn(Ht(t.Ma,t),pr(t,t.A)),t.A++,0))}function lr(t){null!=t.B&&(Ut.clearTimeout(t.B),t.B=null)}function hr(t){t.g=new On(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Zn(t.wa);ii(e,"RID","rpc"),ii(e,"SID",t.K),ii(e,"AID",t.V),ii(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ii(e,"TO",t.qa),ii(e,"TYPE","xmlhttp"),sr(t,e),t.o&&t.s&&Xi(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ri(Zn(e)),n.u=null,n.S=!0,jn(n,t)}function ur(t){null!=t.v&&(Ut.clearTimeout(t.v),t.v=null)}function dr(t,e){var n=null;if(t.g==e){ur(t),lr(t),t.g=null;var i=2}else{if(!Ii(t.i,e))return;n=e.F,Si(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;qe(i=vn(),new En(i,n)),ir(t)}else ar(t);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function(t,e){return!(Ti(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Tn(Ht(t.Na,t,e),pr(t,t.C)),t.C++,0)))}(t,e)||2==i&&cr(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:fr(t,5);break;case 4:fr(t,10);break;case 3:fr(t,6);break;default:fr(t,2)}}function pr(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function fr(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=Ht(t.pb,t);n||(n=new Yn("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||ti(n,"https"),ri(n)),function(t,e){const n=new pn;if(Ut.Image){const i=new Image;i.onload=Gt(Ni,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Gt(Ni,n,i,"TestLoadImage: error",!1,e),i.onabort=Gt(Ni,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Gt(Ni,n,i,"TestLoadImage: timeout",!1,e),Ut.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else _n(2);t.H=0,t.h&&t.h.za(e),mr(t),nr(t)}function mr(t){if(t.H=0,t.ma=[],t.h){const e=ki(t.i);0==e.length&&0==t.j.length||(Xt(t.ma,e),Xt(t.ma,t.j),t.i.i.length=0,Jt(t.j),t.j.length=0),t.h.ya()}}function gr(t,e,n){var i=n instanceof Yn?Zn(n):new Yn(n);if(""!=i.g)e&&(i.g=e+"."+i.g),ei(i,i.m);else{var r=Ut.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Yn(null);i&&ti(s,i),e&&(s.g=e),r&&ei(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&ii(i,n,e),ii(i,"VER",t.ra),sr(t,i),i}function vr(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new Vi(new Di({ob:n})):new Vi(t.va)).Oa(t.J),e}function yr(){}function wr(){if(ce&&!(10<=Number(ve)))throw Error("Environmental error: no available transport.")}function br(t,e){Be.call(this),this.g=new Zi(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!te(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!te(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Tr(this)}function _r(t){Nn.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Er(){Dn.call(this),this.status=1}function Tr(t){this.g=t}function Ir(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Cr(t,e,n){n||(n=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function Sr(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}(Ot=Vi.prototype).Oa=function(t){this.M=t},Ot.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xn.g(),this.C=this.u?kn(this.u):kn(xn),this.g.onreadystatechange=Ht(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void Bi(this,t)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=Ut.FormData&&t instanceof Ut.FormData,!(0<=Qt(zi,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ki(this),0<this.B&&((this.L=function(t){return ce&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ht(this.ua,this)):this.A=on(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Bi(this,t)}},Ot.ua=function(){void 0!==Ft&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qe(this,"timeout"),this.abort(8))},Ot.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,qe(this,"complete"),qe(this,"abort"),Gi(this))},Ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gi(this,!0)),Vi.$.N.call(this)},Ot.La=function(){this.s||(this.G||this.v||this.l?Hi(this):this.kb())},Ot.kb=function(){Hi(this)},Ot.isActive=function(){return!!this.g},Ot.da=function(){try{return 2<Wi(this)?this.g.status:-1}catch(t){return-1}},Ot.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Ot.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ui(e)}},Ot.Ia=function(){return this.m},Ot.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ot=Zi.prototype).ra=8,Ot.H=1,Ot.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new On(this,this.l,t);let s=this.s;if(this.U&&(s?(s=Ce(s),ke(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=or(this,r,e),ii(n=Zn(this.I),"RID",t),ii(n,"CVER",22),this.F&&ii(n,"X-HTTP-Session-Id",this.F),sr(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Ji(s)))+"&"+e:this.o&&Xi(n,this.o,s)),Ci(this.i,r),this.bb&&ii(n,"TYPE","init"),this.P?(ii(n,"$req",e),ii(n,"SID","null"),r.aa=!0,Vn(r,n,null)):Vn(r,n,e),this.H=2}}else 3==this.H&&(t?rr(this,t):0==this.j.length||Ei(this.i)||rr(this))},Ot.Ma=function(){if(this.u=null,hr(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Tn(Ht(this.jb,this),t)}},Ot.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,_n(10),er(this),hr(this))},Ot.ib=function(){null!=this.v&&(this.v=null,er(this),cr(this),_n(19))},Ot.pb=function(t){t?(this.l.info("Successfully pinged google.com"),_n(2)):(this.l.info("Failed to ping google.com"),_n(1))},Ot.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ot=yr.prototype).Ba=function(){},Ot.Aa=function(){},Ot.za=function(){},Ot.ya=function(){},Ot.isActive=function(){return!0},Ot.Va=function(){},wr.prototype.g=function(t,e){return new br(t,e)},Kt(br,Be),br.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;_n(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=gr(t,null,t.Y),ir(t)},br.prototype.close=function(){tr(this.g)},br.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Ge(t),t=n);e.j.push(new wi(e.fb++,t)),3==e.H&&ir(e)},br.prototype.N=function(){this.g.h=null,delete this.j,tr(this.g),delete this.g,br.$.N.call(this)},Kt(_r,Nn),Kt(Er,Dn),Kt(Tr,yr),Tr.prototype.Ba=function(){qe(this.g,"a")},Tr.prototype.Aa=function(t){qe(this.g,new _r(t))},Tr.prototype.za=function(t){qe(this.g,new Er)},Tr.prototype.ya=function(){qe(this.g,"b")},Kt(Ir,(function(){this.blockSize=-1})),Ir.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ir.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)Cr(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){Cr(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){Cr(this,i),r=0;break}}this.h=r,this.i+=e},Ir.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var kr={};function Ar(t){return-128<=t&&128>t?function(t,e){var n=kr;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new Sr([0|t],0>t?-1:0)}(t)}(t):new Sr([0|t],0>t?-1:0)}function xr(t){if(isNaN(t)||!isFinite(t))return Nr;if(0>t)return Pr(xr(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Rr;return new Sr(e,0)}var Rr=4294967296,Nr=Ar(0),Dr=Ar(1),Lr=Ar(16777216);function Or(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Mr(t){return-1==t.h}function Pr(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Sr(n,~t.h).add(Dr)}function Fr(t,e){return t.add(Pr(e))}function Ur(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Vr(t,e){this.g=t,this.h=e}function jr(t,e){if(Or(e))throw Error("division by zero");if(Or(t))return new Vr(Nr,Nr);if(Mr(t))return e=jr(Pr(t),e),new Vr(Pr(e.g),Pr(e.h));if(Mr(e))return e=jr(t,Pr(e)),new Vr(Pr(e.g),e.h);if(30<t.g.length){if(Mr(t)||Mr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Dr,i=e;0>=i.X(t);)n=$r(n),i=$r(i);var r=zr(n,1),s=zr(i,1);for(i=zr(i,2),n=zr(n,2);!Or(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=zr(i,1),n=zr(n,1)}return e=Fr(t,r.R(e)),new Vr(r,e)}for(r=Nr;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=xr(n)).R(e);Mr(o)||0<o.X(t);)o=(s=xr(n-=i)).R(e);Or(s)&&(s=Dr),r=r.add(s),t=Fr(t,o)}return new Vr(r,t)}function $r(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Sr(n,t.h)}function zr(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Sr(r,t.h)}(Ot=Sr.prototype).ea=function(){if(Mr(this))return-Pr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Rr+i)*e,e*=Rr}return t},Ot.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Or(this))return"0";if(Mr(this))return"-"+Pr(this).toString(t);for(var e=xr(Math.pow(t,6)),n=this,i="";;){var r=jr(n,e).g,s=((0<(n=Fr(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Or(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Ot.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Ot.X=function(t){return Mr(t=Fr(this,t))?-1:Or(t)?0:1},Ot.abs=function(){return Mr(this)?Pr(this):this},Ot.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Sr(n,-2147483648&n[n.length-1]?-1:0)},Ot.R=function(t){if(Or(this)||Or(t))return Nr;if(Mr(this))return Mr(t)?Pr(this).R(Pr(t)):Pr(Pr(this).R(t));if(Mr(t))return Pr(this.R(Pr(t)));if(0>this.X(Lr)&&0>t.X(Lr))return xr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,c=65535&t.D(r);n[2*i+2*r]+=o*c,Ur(n,2*i+2*r),n[2*i+2*r+1]+=s*c,Ur(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Ur(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Ur(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Sr(n,0)},Ot.gb=function(t){return jr(this,t).h},Ot.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Sr(n,this.h&t.h)},Ot.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Sr(n,this.h|t.h)},Ot.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Sr(n,this.h^t.h)},wr.prototype.createWebChannel=wr.prototype.g,br.prototype.send=br.prototype.u,br.prototype.open=br.prototype.m,br.prototype.close=br.prototype.close,In.NO_ERROR=0,In.TIMEOUT=8,In.HTTP_ERROR=6,Cn.COMPLETE="complete",An.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",Be.prototype.listen=Be.prototype.O,Vi.prototype.listenOnce=Vi.prototype.P,Vi.prototype.getLastError=Vi.prototype.Sa,Vi.prototype.getLastErrorCode=Vi.prototype.Ia,Vi.prototype.getStatus=Vi.prototype.da,Vi.prototype.getResponseJson=Vi.prototype.Wa,Vi.prototype.getResponseText=Vi.prototype.ja,Vi.prototype.send=Vi.prototype.ha,Vi.prototype.setWithCredentials=Vi.prototype.Oa,Ir.prototype.digest=Ir.prototype.l,Ir.prototype.reset=Ir.prototype.reset,Ir.prototype.update=Ir.prototype.j,Sr.prototype.add=Sr.prototype.add,Sr.prototype.multiply=Sr.prototype.R,Sr.prototype.modulo=Sr.prototype.gb,Sr.prototype.compare=Sr.prototype.X,Sr.prototype.toNumber=Sr.prototype.ea,Sr.prototype.toString=Sr.prototype.toString,Sr.prototype.getBits=Sr.prototype.D,Sr.fromNumber=xr,Sr.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return Pr(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=xr(Math.pow(n,8)),r=Nr,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=xr(Math.pow(n,o)),r=r.R(o).add(xr(a))):r=(r=r.R(i)).add(xr(a))}return r};var Br=Pt.createWebChannelTransport=function(){return new wr},qr=Pt.getStatEventTarget=function(){return vn()},Hr=Pt.ErrorCode=In,Gr=Pt.EventType=Cn,Kr=Pt.Event=mn,Wr=Pt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Qr=(Pt.FetchXmlHttpFactory=Di,Pt.WebChannel=An),Jr=Pt.XhrIo=Vi,Xr=Pt.Md5=Ir,Yr=Pt.Integer=Sr;const Zr="@firebase/firestore";class ts{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");let es="10.7.2";const ns=new z("@firebase/firestore");function is(){return ns.logLevel}function rs(t,...e){if(ns.logLevel<=F.DEBUG){const n=e.map(as);ns.debug(`Firestore (${es}): ${t}`,...n)}}function ss(t,...e){if(ns.logLevel<=F.ERROR){const n=e.map(as);ns.error(`Firestore (${es}): ${t}`,...n)}}function os(t,...e){if(ns.logLevel<=F.WARN){const n=e.map(as);ns.warn(`Firestore (${es}): ${t}`,...n)}}function as(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function cs(t="Unexpected state"){const e=`FIRESTORE (${es}) INTERNAL ASSERTION FAILED: `+t;throw ss(e),new Error(e)}function ls(t,e){t||cs()}function hs(t,e){return t}const us={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ds extends _{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ps{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class fs{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ms{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ts.UNAUTHENTICATED)))}shutdown(){}}class gs{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class vs{constructor(t){this.t=t,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new ps;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ps,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{rs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(rs("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ps)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(rs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(ls("string"==typeof e.accessToken),new fs(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ls(null===t||"string"==typeof t),new ts(t)}}class ys{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=ts.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ws{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new ys(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(ts.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bs{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _s{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&rs("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,rs("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{rs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):rs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(ls("string"==typeof t.token),this.R=t.token,new bs(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Es(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class Ts{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=Es(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function Is(t,e){return t<e?-1:t>e?1:0}function Cs(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class Ss{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ds(us.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ds(us.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ds(us.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ds(us.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ss.fromMillis(Date.now())}static fromDate(t){return Ss.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Ss(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Is(this.nanoseconds,t.nanoseconds):Is(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ks{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ks(t)}static min(){return new ks(new Ss(0,0))}static max(){return new ks(new Ss(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class As{constructor(t,e,n){void 0===e?e=0:e>t.length&&cs(),void 0===n?n=t.length-e:n>t.length-e&&cs(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===As.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof As?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class xs extends As{construct(t,e,n){return new xs(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new ds(us.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new xs(e)}static emptyPath(){return new xs([])}}const Rs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ns extends As{construct(t,e,n){return new Ns(t,e,n)}static isValidIdentifier(t){return Rs.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ns.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ns(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new ds(us.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new ds(us.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new ds(us.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new ds(us.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ns(e)}static emptyPath(){return new Ns([])}}class Ds{constructor(t){this.path=t}static fromPath(t){return new Ds(xs.fromString(t))}static fromName(t){return new Ds(xs.fromString(t).popFirst(5))}static empty(){return new Ds(xs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===xs.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return xs.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ds(new xs(t.slice()))}}function Ls(t){return new Os(t.readTime,t.key,-1)}class Os{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Os(ks.min(),Ds.empty(),-1)}static max(){return new Os(ks.max(),Ds.empty(),-1)}}function Ms(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Ds.comparator(t.documentKey,e.documentKey),0!==n?n:Is(t.largestBatchId,e.largestBatchId))}const Ps="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fs{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Us(t){if(t.code!==us.FAILED_PRECONDITION||t.message!==Ps)throw t;rs("LocalStore","Unexpectedly lost primary lease")}class Vs{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&cs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Vs(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Vs?e:Vs.resolve(e)}catch(t){return Vs.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Vs.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Vs.reject(e)}static resolve(t){return new Vs(((e,n)=>{e(t)}))}static reject(t){return new Vs(((e,n)=>{n(t)}))}static waitFor(t){return new Vs(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=Vs.resolve(!1);for(const n of t)e=e.next((t=>t?Vs.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Vs(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new Vs(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}class js{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new ps,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Bs(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=Ws(e.target.error);this.V.reject(new Bs(t,n))}}static open(t,e,n,i){try{return new js(e,t.transaction(i,n))}catch(t){throw new Bs(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(rs("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Hs(e)}}class $s{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===$s.S(w())&&ss("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return rs("SimpleDb","Removing database:",t),Gs(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!b())return!1;if($s.C())return!0;const t=w(),e=$s.S(t),n=0<e&&e<10,i=$s.v(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||(rs("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new Bs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new ds(us.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new ds(us.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Bs(t,i))},i.onupgradeneeded=t=>{rs("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,i.transaction,t.oldVersion,this.version).next((()=>{rs("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.O(t);const e=js.open(this.db,t,r?"readonly":"readwrite",n),s=i(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),Vs.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(rs("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class zs{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Gs(this.k.delete())}}class Bs extends ds{constructor(t,e){super(us.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function qs(t){return"IndexedDbTransactionError"===t.name}class Hs{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(rs("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(rs("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Gs(n)}add(t){return rs("SimpleDb","ADD",this.store.name,t,t),Gs(this.store.add(t))}get(t){return Gs(this.store.get(t)).next((e=>(void 0===e&&(e=null),rs("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return rs("SimpleDb","DELETE",this.store.name,t),Gs(this.store.delete(t))}count(){return rs("SimpleDb","COUNT",this.store.name),Gs(this.store.count())}W(t,e){const n=this.options(t,e),i=n.index?this.store.index(n.index):this.store;if("function"==typeof i.getAll){const t=i.getAll(n.range);return new Vs(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new Vs(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){rs("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const i=this.cursor(n);return this.G(i,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.G(i,e)}Z(t){const e=this.cursor({});return new Vs(((n,i)=>{e.onerror=t=>{const e=Ws(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}G(t,e){const n=[];return new Vs(((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new zs(r),o=e(r.primaryKey,r.value,s);if(o instanceof Vs){const t=o.catch((t=>(s.done(),Vs.reject(t))));n.push(t)}s.isDone?i():null===s.$?r.continue():r.continue(s.$)}})).next((()=>Vs.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Gs(t){return new Vs(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=Ws(t.target.error);n(e)}}))}let Ks=!1;function Ws(t){const e=$s.S(w());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new ds("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ks||(Ks=!0,setTimeout((()=>{throw t}),0)),t}}return t}class Qs{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function Js(t){return null==t}function Xs(t){return 0===t&&1/t==-1/0}Qs._e=-1;function Ys(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function to(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class eo{constructor(t,e){this.comparator=t,this.root=e||io.EMPTY}insert(t,e){return new eo(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,io.BLACK,null,null))}remove(t){return new eo(this.comparator,this.root.remove(t,this.comparator).copy(null,null,io.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new no(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new no(this.root,t,this.comparator,!1)}getReverseIterator(){return new no(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new no(this.root,t,this.comparator,!0)}}class no{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class io{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:io.RED,this.left=null!=i?i:io.EMPTY,this.right=null!=r?r:io.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new io(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return io.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return io.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,io.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,io.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw cs();if(this.right.isRed())throw cs();const t=this.left.check();if(t!==this.right.check())throw cs();return t+(this.isRed()?0:1)}}io.EMPTY=null,io.RED=!0,io.BLACK=!1,io.EMPTY=new class{constructor(){this.size=0}get key(){throw cs()}get value(){throw cs()}get color(){throw cs()}get left(){throw cs()}get right(){throw cs()}copy(t,e,n,i,r){return this}insert(t,e,n){return new io(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ro{constructor(t){this.comparator=t,this.data=new eo(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new so(this.data.getIterator())}getIteratorFrom(t){return new so(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof ro))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new ro(this.comparator);return e.data=t,e}}class so{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class oo{constructor(t){this.fields=t,t.sort(Ns.comparator)}static empty(){return new oo([])}unionWith(t){let e=new ro(Ns.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new oo(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Cs(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class ao extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class co{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new ao("Invalid base64 string: "+t):t}}(t);return new co(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new co(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Is(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}co.EMPTY_BYTE_STRING=new co("");const lo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ho(t){if(ls(!!t),"string"==typeof t){let e=0;const n=lo.exec(t);if(ls(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:uo(t.seconds),nanos:uo(t.nanos)}}function uo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function po(t){return"string"==typeof t?co.fromBase64String(t):co.fromUint8Array(t)}function fo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function mo(t){const e=t.mapValue.fields.__previous_value__;return fo(e)?mo(e):e}function go(t){const e=ho(t.mapValue.fields.__local_write_time__.timestampValue);return new Ss(e.seconds,e.nanos)}class vo{constructor(t,e,n,i,r,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class yo{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new yo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof yo&&t.projectId===this.projectId&&t.database===this.database}}const wo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fo(t)?4:Lo(t)?9007199254740991:10:cs()}function _o(t,e){if(t===e)return!0;const n=bo(t);if(n!==bo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return go(t).isEqual(go(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=ho(t.timestampValue),i=ho(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return po(t.bytesValue).isEqual(po(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return uo(t.geoPointValue.latitude)===uo(e.geoPointValue.latitude)&&uo(t.geoPointValue.longitude)===uo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return uo(t.integerValue)===uo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=uo(t.doubleValue),i=uo(e.doubleValue);return n===i?Xs(n)===Xs(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Cs(t.arrayValue.values||[],e.arrayValue.values||[],_o);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Ys(n)!==Ys(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!_o(n[t],i[t])))return!1;return!0}(t,e);default:return cs()}}function Eo(t,e){return void 0!==(t.values||[]).find((t=>_o(t,e)))}function To(t,e){if(t===e)return 0;const n=bo(t),i=bo(e);if(n!==i)return Is(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Is(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=uo(t.integerValue||t.doubleValue),i=uo(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return Io(t.timestampValue,e.timestampValue);case 4:return Io(go(t),go(e));case 5:return Is(t.stringValue,e.stringValue);case 6:return function(t,e){const n=po(t),i=po(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=Is(n[t],i[t]);if(0!==e)return e}return Is(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Is(uo(t.latitude),uo(e.latitude));return 0!==n?n:Is(uo(t.longitude),uo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=To(n[t],i[t]);if(e)return e}return Is(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===wo.mapValue&&e===wo.mapValue)return 0;if(t===wo.mapValue)return 1;if(e===wo.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let t=0;t<i.length&&t<s.length;++t){const e=Is(i[t],s[t]);if(0!==e)return e;const o=To(n[i[t]],r[s[t]]);if(0!==o)return o}return Is(i.length,s.length)}(t.mapValue,e.mapValue);default:throw cs()}}function Io(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Is(t,e);const n=ho(t),i=ho(e),r=Is(n.seconds,i.seconds);return 0!==r?r:Is(n.nanos,i.nanos)}function Co(t){return So(t)}function So(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=ho(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return po(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return Ds.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=So(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${So(t.fields[r])}`;return n+"}"}(t.mapValue):cs()}function ko(t){return!!t&&"integerValue"in t}function Ao(t){return!!t&&"arrayValue"in t}function xo(t){return!!t&&"nullValue"in t}function Ro(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function No(t){return!!t&&"mapValue"in t}function Do(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zs(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Do(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Do(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Lo(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Oo{constructor(t){this.value=t}static empty(){return new Oo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!No(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Do(e)}setAll(t){let e=Ns.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=Do(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());No(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return _o(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];No(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Zs(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new Oo(Do(this.value))}}function Mo(t){const e=[];return Zs(t.fields,((t,n)=>{const i=new Ns([t]);if(No(n)){const t=Mo(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new oo(e)}class Po{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Po(t,0,ks.min(),ks.min(),ks.min(),Oo.empty(),0)}static newFoundDocument(t,e,n,i){return new Po(t,1,e,ks.min(),n,i,0)}static newNoDocument(t,e){return new Po(t,2,e,ks.min(),ks.min(),Oo.empty(),0)}static newUnknownDocument(t,e){return new Po(t,3,e,ks.min(),ks.min(),Oo.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ks.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Oo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Oo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ks.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Po&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Po(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fo{constructor(t,e){this.position=t,this.inclusive=e}}function Uo(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?Ds.comparator(Ds.fromName(o.referenceValue),n.key):To(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Vo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_o(t.position[n],e.position[n]))return!1;return!0}class jo{constructor(t,e="asc"){this.field=t,this.dir=e}}function $o(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class zo{}class Bo extends zo{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Jo(t,e,n):"array-contains"===e?new ta(t,n):"in"===e?new ea(t,n):"not-in"===e?new na(t,n):"array-contains-any"===e?new ia(t,n):new Bo(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Xo(t,n):new Yo(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(To(e,this.value)):null!==e&&bo(this.value)===bo(e)&&this.matchesComparison(To(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return cs()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qo extends zo{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new qo(t,e)}matches(t){return Ho(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ho(t){return"and"===t.op}function Go(t){return function(t){for(const e of t.filters)if(e instanceof qo)return!1;return!0}(t)&&Ho(t)}function Ko(t){if(t instanceof Bo)return t.field.canonicalString()+t.op.toString()+Co(t.value);if(Go(t))return t.filters.map((t=>Ko(t))).join(",");{const e=t.filters.map((t=>Ko(t))).join(",");return`${t.op}(${e})`}}function Wo(t,e){return t instanceof Bo?function(t,e){return e instanceof Bo&&t.op===e.op&&t.field.isEqual(e.field)&&_o(t.value,e.value)}(t,e):t instanceof qo?function(t,e){return e instanceof qo&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Wo(n,e.filters[i])),!0)}(t,e):void cs()}function Qo(t){return t instanceof Bo?function(t){return`${t.field.canonicalString()} ${t.op} ${Co(t.value)}`}(t):t instanceof qo?function(t){return t.op.toString()+" {"+t.getFilters().map(Qo).join(" ,")+"}"}(t):"Filter"}class Jo extends Bo{constructor(t,e,n){super(t,e,n),this.key=Ds.fromName(n.referenceValue)}matches(t){const e=Ds.comparator(t.key,this.key);return this.matchesComparison(e)}}class Xo extends Bo{constructor(t,e){super(t,"in",e),this.keys=Zo(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Yo extends Bo{constructor(t,e){super(t,"not-in",e),this.keys=Zo(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Zo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Ds.fromName(t.referenceValue)))}class ta extends Bo{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Ao(e)&&Eo(e.arrayValue,this.value)}}class ea extends Bo{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Eo(this.value.arrayValue,e)}}class na extends Bo{constructor(t,e){super(t,"not-in",e)}matches(t){if(Eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Eo(this.value.arrayValue,e)}}class ia extends Bo{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Ao(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Eo(this.value.arrayValue,t)))}}class ra{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function sa(t,e=null,n=[],i=[],r=null,s=null,o=null){return new ra(t,e,n,i,r,s,o)}function oa(t){const e=hs(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Ko(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Js(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Co(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Co(t))).join(",")),e.ce=t}return e.ce}function aa(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$o(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Wo(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vo(t.startAt,e.startAt)&&Vo(t.endAt,e.endAt)}function ca(t){return Ds.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class la{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function ha(t){return new la(t)}function ua(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function da(t){const e=hs(t);if(null===e.le){e.le=[];const t=new Set;for(const n of e.explicitOrderBy)e.le.push(n),t.add(n.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new ro(Ns.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new jo(i,n))})),t.has(Ns.keyField().canonicalString())||e.le.push(new jo(Ns.keyField(),n))}return e.le}function pa(t){const e=hs(t);return e.he||(e.he=function(t,e){if("F"===t.limitType)return sa(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new jo(t.field,e)}));const n=t.endAt?new Fo(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Fo(t.startAt.position,t.startAt.inclusive):null;return sa(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}(e,da(t))),e.he}function fa(t,e,n){return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ma(t,e){return aa(pa(t),pa(e))&&t.limitType===e.limitType}function ga(t){return`${oa(pa(t))}|lt:${t.limitType}`}function va(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Qo(t))).join(", ")}]`),Js(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Co(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Co(t))).join(",")),`Target(${e})`}(pa(t))}; limitType=${t.limitType})`}function ya(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ds.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of da(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=Uo(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,da(t),e)||t.endAt&&!function(t,e,n){const i=Uo(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,da(t),e))}(t,e)}function wa(t){return(e,n)=>{let i=!1;for(const r of da(t)){const t=ba(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function ba(t,e,n){const i=t.field.isKeyField()?Ds.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?To(i,r):cs()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return cs()}}class _a{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Zs(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return to(this.inner)}size(){return this.innerSize}}const Ea=new eo(Ds.comparator);function Ta(){return Ea}const Ia=new eo(Ds.comparator);function Ca(...t){let e=Ia;for(const n of t)e=e.insert(n.key,n);return e}function Sa(t){let e=Ia;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ka(){return xa()}function Aa(){return xa()}function xa(){return new _a((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Ra=new eo(Ds.comparator),Na=new ro(Ds.comparator);function Da(...t){let e=Na;for(const n of t)e=e.add(n);return e}const La=new ro(Is);function Oa(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xs(e)?"-0":e}}function Ma(t){return{integerValue:""+t}}function Pa(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Xs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Ma(e):Oa(t,e)}class Fa{constructor(){this._=void 0}}function Ua(t,e,n){return t instanceof $a?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&fo(e)&&(e=mo(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof za?Ba(t,e):t instanceof qa?Ha(t,e):function(t,e){const n=ja(t,e),i=Ka(n)+Ka(t.Ie);return ko(n)&&ko(t.Ie)?Ma(i):Oa(t.serializer,i)}(t,e)}function Va(t,e,n){return t instanceof za?Ba(t,e):t instanceof qa?Ha(t,e):n}function ja(t,e){return t instanceof Ga?function(t){return ko(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class $a extends Fa{}class za extends Fa{constructor(t){super(),this.elements=t}}function Ba(t,e){const n=Wa(e);for(const e of t.elements)n.some((t=>_o(t,e)))||n.push(e);return{arrayValue:{values:n}}}class qa extends Fa{constructor(t){super(),this.elements=t}}function Ha(t,e){let n=Wa(e);for(const e of t.elements)n=n.filter((t=>!_o(t,e)));return{arrayValue:{values:n}}}class Ga extends Fa{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Ka(t){return uo(t.integerValue||t.doubleValue)}function Wa(t){return Ao(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Qa{constructor(t,e){this.version=t,this.transformResults=e}}class Ja{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ja}static exists(t){return new Ja(void 0,t)}static updateTime(t){return new Ja(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Xa(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Ya{}function Za(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new lc(t.key,Ja.none()):new rc(t.key,t.data,Ja.none());{const n=t.data,i=Oo.empty();let r=new ro(Ns.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new sc(t.key,i,new oo(r.toArray()),Ja.none())}}function tc(t,e,n){t instanceof rc?function(t,e,n){const i=t.value.clone(),r=ac(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof sc?function(t,e,n){if(!Xa(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=ac(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(oc(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ec(t,e,n,i){return t instanceof rc?function(t,e,n,i){if(!Xa(t.precondition,e))return n;const r=t.value.clone(),s=cc(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof sc?function(t,e,n,i){if(!Xa(t.precondition,e))return n;const r=cc(t.fieldTransforms,i,e),s=e.data;return s.setAll(oc(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return Xa(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function nc(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=ja(i.transform,t||null);null!=r&&(null===n&&(n=Oo.empty()),n.set(i.field,r))}return n||null}function ic(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Cs(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof za&&e instanceof za||t instanceof qa&&e instanceof qa?Cs(t.elements,e.elements,_o):t instanceof Ga&&e instanceof Ga?_o(t.Ie,e.Ie):t instanceof $a&&e instanceof $a}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rc extends Ya{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sc extends Ya{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function oc(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function ac(t,e,n){const i=new Map;ls(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Va(o,a,n[r]))}return i}function cc(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Ua(t,s,e))}return i}class lc extends Ya{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hc extends Ya{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class uc{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&tc(i,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=ec(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=ec(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Aa();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=Za(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(ks.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Da())}isEqual(t){return this.batchId===t.batchId&&Cs(this.mutations,t.mutations,((t,e)=>ic(t,e)))&&Cs(this.baseMutations,t.baseMutations,((t,e)=>ic(t,e)))}}class dc{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){ls(t.mutations.length===n.length);let i=Ra;const r=t.mutations;for(let t=0;t<r.length;t++)i=i.insert(r[t].key,n[t].version);return new dc(t,e,n,i)}}class pc{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class fc{constructor(t,e){this.count=t,this.unchangedNames=e}}var mc,gc;function vc(t){if(void 0===t)return ss("GRPC error has no .code"),us.UNKNOWN;switch(t){case mc.OK:return us.OK;case mc.CANCELLED:return us.CANCELLED;case mc.UNKNOWN:return us.UNKNOWN;case mc.DEADLINE_EXCEEDED:return us.DEADLINE_EXCEEDED;case mc.RESOURCE_EXHAUSTED:return us.RESOURCE_EXHAUSTED;case mc.INTERNAL:return us.INTERNAL;case mc.UNAVAILABLE:return us.UNAVAILABLE;case mc.UNAUTHENTICATED:return us.UNAUTHENTICATED;case mc.INVALID_ARGUMENT:return us.INVALID_ARGUMENT;case mc.NOT_FOUND:return us.NOT_FOUND;case mc.ALREADY_EXISTS:return us.ALREADY_EXISTS;case mc.PERMISSION_DENIED:return us.PERMISSION_DENIED;case mc.FAILED_PRECONDITION:return us.FAILED_PRECONDITION;case mc.ABORTED:return us.ABORTED;case mc.OUT_OF_RANGE:return us.OUT_OF_RANGE;case mc.UNIMPLEMENTED:return us.UNIMPLEMENTED;case mc.DATA_LOSS:return us.DATA_LOSS;default:return cs()}}(gc=mc||(mc={}))[gc.OK=0]="OK",gc[gc.CANCELLED=1]="CANCELLED",gc[gc.UNKNOWN=2]="UNKNOWN",gc[gc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gc[gc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gc[gc.NOT_FOUND=5]="NOT_FOUND",gc[gc.ALREADY_EXISTS=6]="ALREADY_EXISTS",gc[gc.PERMISSION_DENIED=7]="PERMISSION_DENIED",gc[gc.UNAUTHENTICATED=16]="UNAUTHENTICATED",gc[gc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gc[gc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gc[gc.ABORTED=10]="ABORTED",gc[gc.OUT_OF_RANGE=11]="OUT_OF_RANGE",gc[gc.UNIMPLEMENTED=12]="UNIMPLEMENTED",gc[gc.INTERNAL=13]="INTERNAL",gc[gc.UNAVAILABLE=14]="UNAVAILABLE",gc[gc.DATA_LOSS=15]="DATA_LOSS";const yc=new Yr([4294967295,4294967295],0);function wc(t){const e=(new TextEncoder).encode(t),n=new Xr;return n.update(e),new Uint8Array(n.digest())}function bc(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Yr([n,i],0),new Yr([r,s],0)]}class _c{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Ec(`Invalid padding: ${e}`);if(n<0)throw new Ec(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Ec(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Ec(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ee=Yr.fromNumber(this.Te)}de(t,e,n){let i=t.add(e.multiply(Yr.fromNumber(n)));return 1===i.compare(yc)&&(i=new Yr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=wc(t),[n,i]=bc(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,i,t);if(!this.Ae(e))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),s=new _c(r,i,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Te)return;const e=wc(t),[n,i]=bc(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,i,t);this.Re(e)}}Re(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tc{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,Ic.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Tc(ks.min(),i,new eo(Is),Ta(),Da())}}class Ic{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Ic(n,e,Da(),Da(),Da())}}class Cc{constructor(t,e,n,i){this.Ve=t,this.removedTargetIds=e,this.key=n,this.me=i}}class Sc{constructor(t,e){this.targetId=t,this.fe=e}}class kc{constructor(t,e,n=co.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Ac{constructor(){this.ge=0,this.pe=Nc(),this.ye=co.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=Da(),e=Da(),n=Da();return this.pe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:cs()}})),new Ic(this.ye,this.we,t,e,n)}Fe(){this.Se=!1,this.pe=Nc()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,ls(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class xc{constructor(t){this.Le=t,this.ke=new Map,this.qe=Ta(),this.Qe=Rc(),this.Ke=new eo(Is)}$e(t){for(const e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(const e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,(e=>{const n=this.ze(e);switch(t.state){case 0:this.je(e)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(e);break;case 3:this.je(e)&&(n.Be(),n.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),n.Ce(t.resumeToken));break;default:cs()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach(((t,n)=>{this.je(n)&&e(n)}))}Je(t){const e=t.targetId,n=t.fe.count,i=this.Ye(e);if(i){const r=i.target;if(ca(r))if(0===n){const t=new Ds(r.path);this.We(e,t,Po.newNoDocument(t,ks.min()))}else ls(1===n);else{const i=this.Ze(e);if(i!==n){const n=this.Xe(t),r=n?this.et(n,t,i):1;if(0!==r){this.He(e);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,t)}}}}}Xe(t){const e=t.fe.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=e;let s,o;try{s=po(n).toUint8Array()}catch(t){if(t instanceof ao)return os("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new _c(s,i,r)}catch(t){return os(t instanceof Ec?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Te?null:o}et(t,e,n){return e.fe.count===n-this.rt(t,e.targetId)?0:2}rt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const r=this.Le.nt(),s=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;t.mightContain(s)||(this.We(e,n,null),i++)})),i}it(t){const e=new Map;this.ke.forEach(((n,i)=>{const r=this.Ye(i);if(r){if(n.current&&ca(r.target)){const e=new Ds(r.target.path);null!==this.qe.get(e)||this.st(i,e)||this.We(i,e,Po.newNoDocument(e,t))}n.De&&(e.set(i,n.ve()),n.Fe())}}));let n=Da();this.Qe.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.Ye(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.qe.forEach(((e,n)=>n.setReadTime(t)));const i=new Tc(t,e,this.Ke,this.qe,n);return this.qe=Ta(),this.Qe=Rc(),this.Ke=new eo(Is),i}Ue(t,e){if(!this.je(t))return;const n=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,n),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,n){if(!this.je(t))return;const i=this.ze(t);this.st(t,e)?i.Me(e,1):i.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),n&&(this.qe=this.qe.insert(e,n))}removeTarget(t){this.ke.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new Ac,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new ro(Is),this.Qe=this.Qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||rs("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.ke.get(t);return e&&e.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Ac),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.We(t,e,null)}))}st(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Rc(){return new eo(Ds.comparator)}function Nc(){return new eo(Ds.comparator)}const Dc={asc:"ASCENDING",desc:"DESCENDING"},Lc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oc={and:"AND",or:"OR"};class Mc{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Pc(t,e){return t.useProto3Json||Js(e)?e:{value:e}}function Fc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uc(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Vc(t,e){return Fc(t,e.toTimestamp())}function jc(t){return ls(!!t),ks.fromTimestamp(function(t){const e=ho(t);return new Ss(e.seconds,e.nanos)}(t))}function $c(t,e){return zc(t,e).canonicalString()}function zc(t,e){const n=function(t){return new xs(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Bc(t){const e=xs.fromString(t);return ls(al(e)),e}function qc(t,e){return $c(t.databaseId,e.path)}function Hc(t,e){const n=Bc(e);if(n.get(1)!==t.databaseId.projectId)throw new ds(us.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ds(us.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ds(Wc(n))}function Gc(t,e){return $c(t.databaseId,e)}function Kc(t){return new xs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Wc(t){return ls(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Qc(t,e,n){return{name:qc(t,e),fields:n.value.mapValue.fields}}function Jc(t,e){return{documents:[Gc(t,e.path)]}}function Xc(t,e){const n={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Gc(t,r);const s=function(t){if(0!==t.length)return sl(qo.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:il(t.field),direction:tl(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Pc(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ut:n,parent:r}}function Yc(t){let e=function(t){const e=Bc(t);return 4===e.length?xs.emptyPath():Wc(e)}(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ls(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Zc(t);return e instanceof qo&&Go(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new jo(rl(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Js(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Fo(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new Fo(n,e)}(n.endAt)),function(t,e,n,i,r,s,o,a){return new la(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function Zc(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=rl(t.unaryFilter.field);return Bo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=rl(t.unaryFilter.field);return Bo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=rl(t.unaryFilter.field);return Bo.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=rl(t.unaryFilter.field);return Bo.create(r,"!=",{nullValue:"NULL_VALUE"});default:return cs()}}(t):void 0!==t.fieldFilter?function(t){return Bo.create(rl(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cs()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return qo.create(t.compositeFilter.filters.map((t=>Zc(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return cs()}}(t.compositeFilter.op))}(t):cs()}function tl(t){return Dc[t]}function el(t){return Lc[t]}function nl(t){return Oc[t]}function il(t){return{fieldPath:t.canonicalString()}}function rl(t){return Ns.fromServerFormat(t.fieldPath)}function sl(t){return t instanceof Bo?function(t){if("=="===t.op){if(Ro(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NAN"}};if(xo(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ro(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NAN"}};if(xo(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(t.field),op:el(t.op),value:t.value}}}(t):t instanceof qo?function(t){const e=t.getFilters().map((t=>sl(t)));return 1===e.length?e[0]:{compositeFilter:{op:nl(t.op),filters:e}}}(t):cs()}function ol(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function al(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class cl{constructor(t,e,n,i,r=ks.min(),s=ks.min(),o=co.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new cl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class ll{constructor(t){this.ct=t}}function hl(t){const e=Yc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?fa(e,e.limit,"L"):e}class ul{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(uo(t.integerValue));else if("doubleValue"in t){const n=uo(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),Xs(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At(`${n.seconds||""}`),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(po(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?Lo(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):cs()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const t of Object.keys(n))this.Rt(t,e),this.It(n[t],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const t of n)this.It(t,e)}gt(t,e){this.Et(e,37),Ds.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}ul.bt=new ul;class dl{constructor(){this._n=new pl}addToCollectionParentIndex(t,e){return this._n.add(e),Vs.resolve()}getCollectionParents(t,e){return Vs.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return Vs.resolve()}deleteFieldIndex(t,e){return Vs.resolve()}deleteAllFieldIndexes(t){return Vs.resolve()}createTargetIndexes(t,e){return Vs.resolve()}getDocumentsMatchingTarget(t,e){return Vs.resolve(null)}getIndexType(t,e){return Vs.resolve(0)}getFieldIndexes(t,e){return Vs.resolve([])}getNextCollectionGroupToUpdate(t){return Vs.resolve(null)}getMinOffset(t,e){return Vs.resolve(Os.min())}getMinOffsetFromCollectionGroup(t,e){return Vs.resolve(Os.min())}updateCollectionGroup(t,e,n){return Vs.resolve()}updateIndexEntries(t,e){return Vs.resolve()}}class pl{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new ro(xs.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new ro(xs.comparator)).toArray()}}new Uint8Array(0);class fl{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new fl(t,fl.DEFAULT_COLLECTION_PERCENTILE,fl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}fl.DEFAULT_COLLECTION_PERCENTILE=10,fl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fl.DEFAULT=new fl(41943040,fl.DEFAULT_COLLECTION_PERCENTILE,fl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fl.DISABLED=new fl(-1,0,0);class ml{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new ml(0)}static Bn(){return new ml(-1)}}class gl{constructor(){this.changes=new _a((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Po.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Vs.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class vl{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class yl{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&ec(n.mutation,t,oo.empty(),Ss.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Da()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Da()){const i=ka();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Ca();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=ka();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Da())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=Ta();const s=xa(),o=xa();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof sc)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),ec(o.mutation,e,o.mutation.getFieldMask(),Ss.now())):s.set(e.key,oo.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new vl(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=xa();let i=new eo(((t,e)=>t-e)),r=Da();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||oo.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Da()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Aa();c.forEach((t=>{if(!r.has(t)){const i=Za(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return Vs.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return Ds.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):Vs.resolve(ka());let o=-1,a=r;return s.next((e=>Vs.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?Vs.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,Da()))).next((t=>({batchId:o,changes:Sa(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ds(e)).next((t=>{let e=Ca();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=Ca();return this.indexManager.getCollectionParents(t,r).next((o=>Vs.forEach(o,(o=>{const a=function(t,e){return new la(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Po.newInvalidDocument(i)))}));let n=Ca();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&ec(s.mutation,i,oo.empty(),Ss.now()),ya(e,i)&&(n=n.insert(t,i))})),n}))}}class wl{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return Vs.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:jc(t.createTime)}}(e)),Vs.resolve()}getNamedQuery(t,e){return Vs.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:hl(t.bundledQuery),readTime:jc(t.readTime)}}(e)),Vs.resolve()}}class bl{constructor(){this.overlays=new eo(Ds.comparator),this.hr=new Map}getOverlay(t,e){return Vs.resolve(this.overlays.get(e))}getOverlays(t,e){const n=ka();return Vs.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ht(t,e,i)})),Vs.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),Vs.resolve()}getOverlaysForCollection(t,e,n){const i=ka(),r=e.length+1,s=new Ds(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Vs.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new eo(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=ka(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=ka(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return Vs.resolve(o)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new pc(e,n));let r=this.hr.get(e);void 0===r&&(r=Da(),this.hr.set(e,r)),this.hr.set(e,r.add(n.key))}}class _l{constructor(){this.Pr=new ro(El.Ir),this.Tr=new ro(El.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new El(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new El(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new Ds(new xs([])),n=new El(e,t),i=new El(e,t+1),r=[];return this.Tr.forEachInRange([n,i],(t=>{this.Ar(t),r.push(t.key)})),r}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new Ds(new xs([])),n=new El(e,t),i=new El(e,t+1);let r=Da();return this.Tr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new El(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class El{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return Ds.comparator(t.key,e.key)||Is(t.pr,e.pr)}static Er(t,e){return Is(t.pr,e.pr)||Ds.comparator(t.key,e.key)}}class Tl{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new ro(El.Ir)}checkEmpty(t){return Vs.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new uc(r,e,n,i);this.mutationQueue.push(s);for(const e of i)this.wr=this.wr.add(new El(e.key,r)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Vs.resolve(s)}lookupMutationBatch(t,e){return Vs.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.br(n),r=i<0?0:i;return Vs.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Vs.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return Vs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new El(e,0),i=new El(e,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(t=>{const e=this.Sr(t.pr);r.push(e)})),Vs.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ro(Is);return e.forEach((t=>{const e=new El(t,0),i=new El(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,i],(t=>{n=n.add(t.pr)}))})),Vs.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;Ds.isDocumentKey(r)||(r=r.child(""));const s=new El(new Ds(r),0);let o=new ro(Is);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.pr)),!0)}),s),Vs.resolve(this.Dr(o))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){ls(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Vs.forEach(e.mutations,(i=>{const r=new El(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new El(e,0),i=this.wr.firstAfterOrEqual(n);return Vs.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Vs.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Il{constructor(t){this.vr=t,this.docs=new eo(Ds.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Vs.resolve(n?n.document.mutableCopy():Po.newInvalidDocument(e))}getEntries(t,e){let n=Ta();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Po.newInvalidDocument(t))})),Vs.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=Ta();const s=e.path,o=new Ds(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||Ms(Ls(o),n)<=0||(i.has(o.key)||ya(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Vs.resolve(r)}getAllFromCollectionGroup(t,e,n,i){cs()}Fr(t,e){return Vs.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Cl(this)}getSize(t){return Vs.resolve(this.size)}}class Cl extends gl{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.ar.addEntry(t,i)):this.ar.removeEntry(n)})),Vs.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class Sl{constructor(t){this.persistence=t,this.Mr=new _a((t=>oa(t)),aa),this.lastRemoteSnapshotVersion=ks.min(),this.highestTargetId=0,this.Or=0,this.Nr=new _l,this.targetCount=0,this.Br=ml.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),Vs.resolve()}getLastRemoteSnapshotVersion(t){return Vs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Vs.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),Vs.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),Vs.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new ml(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,Vs.resolve()}updateTargetData(t,e){return this.qn(e),Vs.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,Vs.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Vs.waitFor(r).next((()=>i))}getTargetCount(t){return Vs.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return Vs.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),Vs.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),Vs.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),Vs.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return Vs.resolve(n)}containsKey(t,e){return Vs.resolve(this.Nr.containsKey(e))}}class kl{constructor(t,e){this.Lr={},this.overlays={},this.kr=new Qs(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Sl(this),this.indexManager=new dl,this.remoteDocumentCache=function(t){return new Il(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new ll(e),this.$r=new wl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new bl,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Lr[t.toKey()];return n||(n=new Tl(e,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){rs("MemoryPersistence","Starting transaction:",t);const i=new Al(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((t=>this.referenceDelegate.Wr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gr(t,e){return Vs.or(Object.values(this.Lr).map((n=>()=>n.containsKey(t,e))))}}class Al extends Fs{constructor(t){super(),this.currentSequenceNumber=t}}class xl{constructor(t){this.persistence=t,this.zr=new _l,this.jr=null}static Hr(t){return new xl(t)}get Jr(){if(this.jr)return this.jr;throw cs()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),Vs.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),Vs.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),Vs.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Vs.forEach(this.Jr,(n=>{const i=Ds.fromPath(n);return this.Yr(t,i).next((t=>{t||e.removeEntry(i,ks.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return Vs.or([()=>Vs.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class Rl{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=i}static Ki(t,e){let n=Da(),i=Da();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new Rl(t,e.fromCache,n,i)}}class Nl{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Dl{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){var t;const e=null===(t=f())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()||!navigator.userAgent.includes("Safari")||navigator.userAgent.includes("Chrome")?$s.v(w())>0?6:4:8}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ji(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.Hi(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new Nl;return this.Ji(t,e,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(t,e,n,i.size)}))})).next((()=>r.result))}Yi(t,e,n,i){return n.documentReadCount<this.Wi?(is()<=F.DEBUG&&rs("QueryEngine","SDK will not create cache indexes for query:",va(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Vs.resolve()):(is()<=F.DEBUG&&rs("QueryEngine","Query:",va(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(is()<=F.DEBUG&&rs("QueryEngine","The SDK decides to create cache indexes for query:",va(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,pa(e))):Vs.resolve())}ji(t,e){if(ua(e))return Vs.resolve(null);let n=pa(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=fa(e,null,"F"),n=pa(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=Da(...i);return this.zi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Zi(e,i);return this.Xi(e,s,r,n.readTime)?this.ji(t,fa(e,null,"F")):this.es(t,s,e,n)}))))})))))}Hi(t,e,n,i){return ua(e)||i.isEqual(ks.min())?Vs.resolve(null):this.zi.getDocuments(t,n).next((r=>{const s=this.Zi(e,r);return this.Xi(e,s,n,i)?Vs.resolve(null):(is()<=F.DEBUG&&rs("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),va(e)),this.es(t,s,e,function(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ks.fromTimestamp(1e9===i?new Ss(n+1,0):new Ss(n,i));return new Os(r,Ds.empty(),e)}(i,-1)).next((t=>t)))}))}Zi(t,e){let n=new ro(wa(t));return e.forEach(((e,i)=>{ya(t,i)&&(n=n.add(i))})),n}Xi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(t,e,n){return is()<=F.DEBUG&&rs("QueryEngine","Using full collection scan to execute query:",va(e)),this.zi.getDocumentsMatchingQuery(t,e,Os.min(),n)}es(t,e,n,i){return this.zi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Ll{constructor(t,e,n,i){this.persistence=t,this.ts=e,this.serializer=i,this.ns=new eo(Is),this.rs=new _a((t=>oa(t)),aa),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new yl(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}async function Ol(t,e){const n=hs(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=Da();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({us:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function Ml(t){const e=hs(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}function Pl(t,e){const n=hs(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function Fl(t,e,n){const i=hs(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!qs(t))throw t;rs("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)}function Ul(t,e,n){const i=hs(t);let r=ks.min(),s=Da();return i.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const i=hs(t),r=i.rs.get(n);return void 0!==r?Vs.resolve(i.ns.get(r)):i.Qr.getTargetData(e,n)}(i,t,pa(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.ts.getDocumentsMatchingQuery(t,e,n?r:ks.min(),n?s:Da()))).next((t=>(function(t,e,n){let i=t.ss.get(e)||ks.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.ss.set(e,i)}(i,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,hs:s})))))}class Vl{constructor(){this.activeTargetIds=La}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jl{constructor(){this.no=new Vl,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Vl,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class $l{io(t){}shutdown(){}}class zl{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){rs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){rs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Bl=null;function ql(){return null===Bl?Bl=268435456+Math.round(2147483648*Math.random()):Bl++,"0x"+Bl.toString(16)}const Hl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gl{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}const Kl="WebChannelConnection";class Wl extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po=`projects/${n}/databases/${i}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get wo(){return!1}So(t,e,n,i,r){const s=ql(),o=this.bo(t,e.toUriEncodedString());rs("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,i,r),this.Co(t,o,a,n).then((e=>(rs("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw os("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,i,r,s){return this.So(t,e,n,i,r)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+es,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=Hl[t];return`${this.fo}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,i){const r=ql();return new Promise(((s,o)=>{const a=new Jr;a.setWithCredentials(!0),a.listenOnce(Gr.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Hr.NO_ERROR:const e=a.getResponseJson();rs(Kl,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case Hr.TIMEOUT:rs(Kl,`RPC '${t}' ${r} timed out`),o(new ds(us.DEADLINE_EXCEEDED,"Request time out"));break;case Hr.HTTP_ERROR:const n=a.getStatus();if(rs(Kl,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(us).indexOf(e)>=0?e:us.UNKNOWN}(e.status);o(new ds(t,e.message))}else o(new ds(us.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ds(us.UNAVAILABLE,"Connection failed."));break;default:cs()}}finally{rs(Kl,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(i);rs(Kl,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",c,n,15)}))}Fo(t,e,n){const i=ql(),r=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Br(),o=qr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");rs(Kl,`Creating RPC '${t}' stream ${i}: ${l}`,a);const h=s.createWebChannel(l,a);let u=!1,d=!1;const p=new Gl({lo:e=>{d?rs(Kl,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(u||(rs(Kl,`Opening RPC '${t}' stream ${i} transport.`),h.open(),u=!0),rs(Kl,`RPC '${t}' stream ${i} sending:`,e),h.send(e))},ho:()=>h.close()}),f=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return f(h,Qr.EventType.OPEN,(()=>{d||rs(Kl,`RPC '${t}' stream ${i} transport opened.`)})),f(h,Qr.EventType.CLOSE,(()=>{d||(d=!0,rs(Kl,`RPC '${t}' stream ${i} transport closed`),p.Vo())})),f(h,Qr.EventType.ERROR,(e=>{d||(d=!0,os(Kl,`RPC '${t}' stream ${i} transport errored:`,e),p.Vo(new ds(us.UNAVAILABLE,"The operation could not be completed")))})),f(h,Qr.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];ls(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){rs(Kl,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=mc[t];if(void 0!==e)return vc(e)}(e),r=o.message;void 0===n&&(n=us.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,p.Vo(new ds(n,r)),h.close()}else rs(Kl,`RPC '${t}' stream ${i} received:`,r),p.mo(r)}})),f(o,Kr.STAT_EVENT,(e=>{e.stat===Wr.PROXY?rs(Kl,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===Wr.NOPROXY&&rs(Kl,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{p.Ro()}),0),p}}function Ql(){return"undefined"!=typeof document?document:null}function Jl(t){return new Mc(t,!0)}class Xl{constructor(t,e,n=1e3,i=1.5,r=6e4){this.oi=t,this.timerId=e,this.Mo=n,this.xo=i,this.Oo=r,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,e-n);i>0&&rs("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Lo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Yl{constructor(t,e,n,i,r,s,o,a){this.oi=t,this.$o=n,this.Uo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Xl(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===us.RESOURCE_EXHAUSTED?(ss(e.toString()),ss("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===us.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Wo===e&&this.o_(t,n)}),(e=>{t((()=>{const t=new ds(us.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return rs("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():(rs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Zl extends Yl{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}a_(t,e){return this.connection.Fo("Listen",t,e)}onMessage(t){this.jo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:cs()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(ls(void 0===e||"string"==typeof e),co.fromBase64String(e||"")):(ls(void 0===e||e instanceof Uint8Array),co.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?us.UNKNOWN:vc(t.code);return new ds(e,t.message||"")}(o);n=new kc(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Hc(t,i.document.name),s=jc(i.document.updateTime),o=i.document.createTime?jc(i.document.createTime):ks.min(),a=new Oo({mapValue:{fields:i.document.fields}}),c=Po.newFoundDocument(r,s,o,a),l=i.targetIds||[],h=i.removedTargetIds||[];n=new Cc(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Hc(t,i.document),s=i.readTime?jc(i.readTime):ks.min(),o=Po.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Cc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Hc(t,i.document),s=i.removedTargetIds||[];n=new Cc([],s,r,null)}else{if(!("filter"in e))return cs();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,s=new fc(i,r),o=t.targetId;n=new Sc(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ks.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?ks.min():e.readTime?jc(e.readTime):ks.min()}(t);return this.listener.u_(e,n)}c_(t){const e={};e.database=Kc(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=ca(i)?{documents:Jc(t,i)}:{query:Xc(t,i).ut},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Uc(t,e.resumeToken);const i=Pc(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(ks.min())>0){n.readTime=Fc(t,e.snapshotVersion.toTimestamp());const i=Pc(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return cs()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.t_(e)}l_(t){const e={};e.database=Kc(this.serializer),e.removeTarget=t,this.t_(e)}}class th extends Yl{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(ls(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=function(t,e){return t&&t.length>0?(ls(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?jc(t.updateTime):jc(e);return n.isEqual(ks.min())&&(n=jc(e)),new Qa(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=jc(t.commitTime);return this.listener.T_(n,e)}return ls(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=Kc(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof rc)n={update:Qc(t,e.key,e.value)};else if(e instanceof lc)n={delete:qc(t,e.key)};else if(e instanceof sc)n={update:Qc(t,e.key,e.data),updateMask:ol(e.fieldMask)};else{if(!(e instanceof hc))return cs();n={verify:qc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof $a)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof za)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof qa)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ga)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw cs()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Vc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:cs()}(t,e.precondition)),n}(this.serializer,t)))};this.t_(e)}}class eh extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new ds(us.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.So(t,zc(e,n),i,r,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===us.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ds(us.UNKNOWN,t.toString())}))}vo(t,e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(t,zc(e,n),i,s,o,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===us.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ds(us.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class nh{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ss(e),this.g_=!1):rs("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class ih{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io((t=>{n.enqueueAndForget((async()=>{dh(this)&&(rs("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=hs(t);e.v_.add(4),await sh(e),e.x_.set("Unknown"),e.v_.delete(4),await rh(e)}(this))}))})),this.x_=new nh(n,i)}}async function rh(t){if(dh(t))for(const e of t.F_)await e(!0)}async function sh(t){for(const e of t.F_)await e(!1)}function oh(t,e){const n=hs(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),uh(n)?hh(n):xh(n).Jo()&&ch(n,e))}function ah(t,e){const n=hs(t),i=xh(n);n.C_.delete(e),i.Jo()&&lh(n,e),0===n.C_.size&&(i.Jo()?i.Xo():dh(n)&&n.x_.set("Unknown"))}function ch(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ks.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xh(t).c_(e)}function lh(t,e){t.O_.Oe(e),xh(t).l_(e)}function hh(t){t.O_=new xc({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),xh(t).start(),t.x_.p_()}function uh(t){return dh(t)&&!xh(t).Ho()&&t.C_.size>0}function dh(t){return 0===hs(t).v_.size}function ph(t){t.O_=void 0}async function fh(t){t.C_.forEach(((e,n)=>{ch(t,e)}))}async function mh(t,e){ph(t),uh(t)?(t.x_.S_(e),hh(t)):t.x_.set("Unknown")}async function gh(t,e,n){if(t.x_.set("Online"),e instanceof kc&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.C_.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.C_.delete(i),t.O_.removeTarget(i))}(t,e)}catch(n){rs("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await vh(t,n)}else if(e instanceof Cc?t.O_.$e(e):e instanceof Sc?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(ks.min()))try{const e=await Ml(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.O_.it(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.C_.get(i);r&&t.C_.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t.C_.get(e);if(!i)return;t.C_.set(e,i.withResumeToken(co.EMPTY_BYTE_STRING,i.snapshotVersion)),lh(t,e);const r=new cl(i.target,e,n,i.sequenceNumber);ch(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){rs("RemoteStore","Failed to raise snapshot:",e),await vh(t,e)}}async function vh(t,e,n){if(!qs(e))throw e;t.v_.add(1),await sh(t),t.x_.set("Offline"),n||(n=()=>Ml(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{rs("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await rh(t)}))}function yh(t,e){return e().catch((n=>vh(t,n,e)))}async function wh(t){const e=hs(t),n=Rh(e);let i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;bh(e);)try{const t=await Pl(e.localStore,i);if(null===t){0===e.D_.length&&n.Xo();break}i=t.batchId,_h(e,t)}catch(t){await vh(e,t)}Eh(e)&&Th(e)}function bh(t){return dh(t)&&t.D_.length<10}function _h(t,e){t.D_.push(e);const n=Rh(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Eh(t){return dh(t)&&!Rh(t).Ho()&&t.D_.length>0}function Th(t){Rh(t).start()}async function Ih(t){Rh(t).d_()}async function Ch(t){const e=Rh(t);for(const n of t.D_)e.I_(n.mutations)}async function Sh(t,e,n){const i=t.D_.shift(),r=dc.from(i,e,n);await yh(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await wh(t)}async function kh(t,e){e&&Rh(t).P_&&await async function(t,e){if(function(t){return function(t){switch(t){default:return cs();case us.CANCELLED:case us.UNKNOWN:case us.DEADLINE_EXCEEDED:case us.RESOURCE_EXHAUSTED:case us.INTERNAL:case us.UNAVAILABLE:case us.UNAUTHENTICATED:return!1;case us.INVALID_ARGUMENT:case us.NOT_FOUND:case us.ALREADY_EXISTS:case us.PERMISSION_DENIED:case us.FAILED_PRECONDITION:case us.ABORTED:case us.OUT_OF_RANGE:case us.UNIMPLEMENTED:case us.DATA_LOSS:return!0}}(t)&&t!==us.ABORTED}(e.code)){const n=t.D_.shift();Rh(t).Zo(),await yh(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await wh(t)}}(t,e),Eh(t)&&Th(t)}async function Ah(t,e){const n=hs(t);n.asyncQueue.verifyOperationInProgress(),rs("RemoteStore","RemoteStore received new credentials");const i=dh(n);n.v_.add(3),await sh(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await rh(n)}function xh(t){return t.N_||(t.N_=function(t,e,n){const i=hs(t);return i.R_(),new Zl(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:fh.bind(null,t),To:mh.bind(null,t),u_:gh.bind(null,t)}),t.F_.push((async e=>{e?(t.N_.Zo(),uh(t)?hh(t):t.x_.set("Unknown")):(await t.N_.stop(),ph(t))}))),t.N_}function Rh(t){return t.B_||(t.B_=function(t,e,n){const i=hs(t);return i.R_(),new th(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:Ih.bind(null,t),To:kh.bind(null,t),E_:Ch.bind(null,t),T_:Sh.bind(null,t)}),t.F_.push((async e=>{e?(t.B_.Zo(),await wh(t)):(await t.B_.stop(),t.D_.length>0&&(rs("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}class Nh{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new Nh(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ds(us.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dh(t,e){if(ss("AsyncQueue",`${e}: ${t}`),qs(t))return new ds(us.UNAVAILABLE,`${e}: ${t}`);throw t}class Lh{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Ds.comparator(e.key,n.key):(t,e)=>Ds.comparator(t.key,e.key),this.keyedMap=Ca(),this.sortedSet=new eo(this.comparator)}static emptySet(t){return new Lh(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Lh))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Lh;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Oh{constructor(){this.L_=new eo(Ds.comparator)}track(t){const e=t.doc.key,n=this.L_.get(e);n?0!==t.type&&3===n.type?this.L_=this.L_.insert(e,t):3===t.type&&1!==n.type?this.L_=this.L_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.L_=this.L_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.L_=this.L_.remove(e):1===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):cs():this.L_=this.L_.insert(e,t)}k_(){const t=[];return this.L_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Mh{constructor(t,e,n,i,r,s,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Mh(t,e,Lh.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ma(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class Ph{constructor(){this.q_=void 0,this.Q_=[]}}class Fh{constructor(){this.queries=new _a((t=>ga(t)),ma),this.onlineState="Unknown",this.K_=new Set}}function Uh(t,e){const n=hs(t);let i=!1;for(const t of e){const e=t.query,r=n.queries.get(e);if(r){for(const e of r.Q_)e.W_(t)&&(i=!0);r.q_=t}}i&&jh(n)}function Vh(t,e,n){const i=hs(t),r=i.queries.get(e);if(r)for(const t of r.Q_)t.onError(n);i.queries.delete(e)}function jh(t){t.K_.forEach((t=>{t.next()}))}class $h{constructor(t,e,n){this.query=t,this.G_=e,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Mh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.z_?this.H_(t)&&(this.G_.next(t),e=!0):this.J_(t,this.onlineState)&&(this.Y_(t),e=!0),this.j_=t,e}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let e=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),e=!0),e}J_(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Z_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}H_(t){if(t.docChanges.length>0)return!0;const e=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Y_(t){t=Mh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}class zh{constructor(t){this.key=t}}class Bh{constructor(t){this.key=t}}class qh{constructor(t,e){this.query=t,this.oa=e,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Da(),this.mutatedKeys=Da(),this.ua=wa(t),this.ca=new Lh(this.ua)}get la(){return this.oa}ha(t,e){const n=e?e.Pa:new Oh,i=e?e.ca:this.ca;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const l=i.get(t),h=ya(this.query,e)?e:null,u=!!l&&this.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let p=!1;l&&h?l.data.isEqual(h.data)?u!==d&&(n.track({type:3,doc:h}),p=!0):this.Ia(l,h)||(n.track({type:2,doc:h}),p=!0,(a&&this.ua(h,a)>0||c&&this.ua(h,c)<0)&&(o=!0)):!l&&h?(n.track({type:0,doc:h}),p=!0):l&&!h&&(n.track({type:1,doc:l}),p=!0,(a||c)&&(o=!0)),p&&(h?(s=s.add(h),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{ca:s,Pa:n,Xi:o,mutatedKeys:r}}Ia(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const r=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const s=t.Pa.k_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cs()}};return n(t)-n(e)}(t.type,e.type)||this.ua(t.doc,e.doc))),this.Ta(n),i=null!=i&&i;const o=e&&!i?this.Ea():[],a=0===this.aa.size&&this.current&&!i?1:0,c=a!==this._a;return this._a=a,0!==s.length||c?{snapshot:new Mh(this.query,t.ca,r,s,t.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Oh,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach((t=>this.oa=this.oa.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.oa=this.oa.delete(t))),this.current=t.current)}Ea(){if(!this.current)return[];const t=this.aa;this.aa=Da(),this.ca.forEach((t=>{this.Aa(t.key)&&(this.aa=this.aa.add(t.key))}));const e=[];return t.forEach((t=>{this.aa.has(t)||e.push(new Bh(t))})),this.aa.forEach((n=>{t.has(n)||e.push(new zh(n))})),e}Ra(t){this.oa=t.hs,this.aa=Da();const e=this.ha(t.documents);return this.applyChanges(e,!0)}Va(){return Mh.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Hh{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Gh{constructor(t){this.key=t,this.ma=!1}}class Kh{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new _a((t=>ga(t)),ma),this.pa=new Map,this.ya=new Set,this.wa=new eo(Ds.comparator),this.Sa=new Map,this.ba=new _l,this.Da={},this.Ca=new Map,this.va=ml.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function Wh(t,e){const n=function(t){const e=hs(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hu.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yh.bind(null,e),e.fa.u_=Uh.bind(null,e.eventManager),e.fa.xa=Vh.bind(null,e.eventManager),e}(t);let i,r;const s=n.ga.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Va();else{const t=await function(t,e){const n=hs(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Qr.getTargetData(t,e).next((r=>r?(i=r,Vs.resolve(i)):n.Qr.allocateTargetId(t).next((r=>(i=new cl(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Qr.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.ns.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(t.targetId,t),n.rs.set(e,t.targetId)),t}))}(n.localStore,pa(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=await async function(t,e,n,i,r){t.Ma=(e,n,i)=>async function(t,e,n,i){let r=e.view.ha(n);r.Xi&&(r=await Ul(t.localStore,e.query,!1).then((({documents:t})=>e.view.ha(t,r))));const s=i&&i.targetChanges.get(e.targetId),o=i&&null!=i.targetMismatches.get(e.targetId),a=e.view.applyChanges(r,t.isPrimaryClient,s,o);return su(t,e.targetId,a.da),a.snapshot}(t,e,n,i);const s=await Ul(t.localStore,e,!0),o=new qh(e,s.hs),a=o.ha(s.documents),c=Ic.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),l=o.applyChanges(a,t.isPrimaryClient,c);su(t,n,l.da);const h=new Hh(e,n,o);return t.ga.set(e,h),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot}(n,e,i,"current"===s,t.resumeToken),n.isPrimaryClient&&oh(n.remoteStore,t)}return r}async function Qh(t,e){const n=hs(t),i=n.ga.get(e),r=n.pa.get(i.targetId);if(r.length>1)return n.pa.set(i.targetId,r.filter((t=>!ma(t,e)))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Fl(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),ah(n.remoteStore,i.targetId),iu(n,i.targetId)})).catch(Us)):(iu(n,i.targetId),await Fl(n.localStore,i.targetId,!0))}async function Jh(t,e){const n=hs(t);try{const t=await function(t,e){const n=hs(t),i=e.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const o=[];e.targetChanges.forEach(((s,a)=>{const c=r.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(t,s.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?l=l.withResumeToken(co.EMPTY_BYTE_STRING,ks.min()).withLastLimboFreeSnapshotVersion(ks.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,i)),r=r.insert(a,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(t,l))}));let a=Ta(),c=Da();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(function(t,e,n){let i=Da(),r=Da();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=Ta();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(ks.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):rs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:i,ls:r}}))}(t,s,e.documentUpdates).next((t=>{a=t.cs,c=t.ls}))),!i.isEqual(ks.min())){const e=n.Qr.getLastRemoteSnapshotVersion(t).next((e=>n.Qr.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return Vs.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.ns=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.Sa.get(e);i&&(ls(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.ma=!0:t.modifiedDocuments.size>0?ls(i.ma):t.removedDocuments.size>0&&(ls(i.ma),i.ma=!1))})),await cu(n,t,e)}catch(t){await Us(t)}}function Xh(t,e,n){const i=hs(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ga.forEach(((n,i)=>{const r=i.view.U_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=hs(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.Q_)t.U_(e)&&(i=!0)})),i&&jh(n)}(i.eventManager,e),t.length&&i.fa.u_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Yh(t,e,n){const i=hs(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Sa.get(e),s=r&&r.key;if(s){let t=new eo(Ds.comparator);t=t.insert(s,Po.newNoDocument(s,ks.min()));const n=Da().add(s),r=new Tc(ks.min(),new Map,new eo(Is),t,n);await Jh(i,r),i.wa=i.wa.remove(s),i.Sa.delete(e),au(i)}else await Fl(i.localStore,e,!1).then((()=>iu(i,e,n))).catch(Us)}async function Zh(t,e){const n=hs(t),i=e.batch.batchId;try{const t=await function(t,e){const n=hs(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Vs.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);ls(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Da();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);nu(n,i,null),eu(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await cu(n,t)}catch(t){await Us(t)}}async function tu(t,e,n){const i=hs(t);try{const t=await function(t,e){const n=hs(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(ls(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);nu(i,e,n),eu(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await cu(i,t)}catch(n){await Us(n)}}function eu(t,e){(t.Ca.get(e)||[]).forEach((t=>{t.resolve()})),t.Ca.delete(e)}function nu(t,e,n){const i=hs(t);let r=i.Da[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}function iu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.pa.get(e))t.ga.delete(i),n&&t.fa.xa(i,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach((e=>{t.ba.containsKey(e)||ru(t,e)}))}function ru(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(ah(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),au(t))}function su(t,e,n){for(const i of n)i instanceof zh?(t.ba.addReference(i.key,e),ou(t,i)):i instanceof Bh?(rs("SyncEngine","Document no longer in limbo: "+i.key),t.ba.removeReference(i.key,e),t.ba.containsKey(i.key)||ru(t,i.key)):cs()}function ou(t,e){const n=e.key,i=n.path.canonicalString();t.wa.get(n)||t.ya.has(i)||(rs("SyncEngine","New document in limbo: "+n),t.ya.add(i),au(t))}function au(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new Ds(xs.fromString(e)),i=t.va.next();t.Sa.set(i,new Gh(n)),t.wa=t.wa.insert(n,i),oh(t.remoteStore,new cl(pa(ha(n.path)),i,"TargetPurposeLimboResolution",Qs._e))}}async function cu(t,e,n){const i=hs(t),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach(((t,a)=>{o.push(i.Ma(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=Rl.Ki(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.fa.u_(r),await async function(t,e){const n=hs(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Vs.forEach(e,(e=>Vs.forEach(e.qi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Vs.forEach(e.Qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!qs(t))throw t;rs("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.ns.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(e,r)}}}(i.localStore,s))}async function lu(t,e){const n=hs(t);if(!n.currentUser.isEqual(e)){rs("SyncEngine","User change. New user:",e.toKey());const t=await Ol(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new ds(us.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ca.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await cu(n,t.us)}}function hu(t,e){const n=hs(t),i=n.Sa.get(e);if(i&&i.ma)return Da().add(i.key);{let t=Da();const i=n.pa.get(e);if(!i)return t;for(const e of i){const i=n.ga.get(e);t=t.unionWith(i.view.la)}return t}}function uu(t){const e=hs(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tu.bind(null,e),e}class du{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Jl(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,i){return new Ll(t,e,n,i)}(this.persistence,new Dl,t.initialUser,this.serializer)}createPersistence(t){return new kl(xl.Hr,this.serializer)}createSharedClientState(t){return new jl}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class pu{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Xh(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=lu.bind(null,this.syncEngine),await async function(t,e){const n=hs(t);e?(n.v_.delete(2),await rh(n)):e||(n.v_.add(2),await sh(n),n.x_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Fh}createDatastore(t){const e=Jl(t.databaseInfo.databaseId),n=function(t){return new Wl(t)}(t.databaseInfo);return function(t,e,n,i){return new eh(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new ih(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>Xh(this.syncEngine,t,0)),zl.D()?new zl:new $l)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new Kh(t,e,n,i,r,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=hs(t);rs("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await sh(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}class fu{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):ss("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class mu{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=ts.UNAUTHENTICATED,this.clientId=Ts.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{rs("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(rs("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ds(us.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Dh(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function gu(t,e){t.asyncQueue.verifyOperationInProgress(),rs("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await Ol(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function vu(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){rs("FirestoreClient","Using user provided OfflineComponentProvider");try{await gu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===us.FAILED_PRECONDITION||t.code===us.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;os("Error using user provided cache. Falling back to memory cache: "+n),await gu(t,new du)}}else rs("FirestoreClient","Using default OfflineComponentProvider"),await gu(t,new du);return t._offlineComponents}(t);rs("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>Ah(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Ah(e.remoteStore,n))),t._onlineComponents=e}async function yu(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(rs("FirestoreClient","Using user provided OnlineComponentProvider"),await vu(t,t._uninitializedComponentsProvider._online)):(rs("FirestoreClient","Using default OnlineComponentProvider"),await vu(t,new pu))),t._onlineComponents}async function wu(t){const e=await yu(t),n=e.eventManager;return n.onListen=Wh.bind(null,e.syncEngine),n.onUnlisten=Qh.bind(null,e.syncEngine),n}function bu(t,e,n={}){const i=new ps;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new fu({next:n=>{e.enqueueAndForget((()=>async function(t,e){const n=hs(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const t=s.Q_.indexOf(e);t>=0&&(s.Q_.splice(t,1),r=0===s.Q_.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}(t,o))),n.fromCache&&"server"===i.source?r.reject(new ds(us.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new $h(n,s,{includeMetadataChanges:!0,Z_:!0});return async function(t,e){const n=hs(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new Ph),r)try{s.q_=await n.onListen(i)}catch(t){const n=Dh(t,`Initialization of query '${va(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&jh(n)}(t,o)}(await wu(t),t.asyncQueue,e,n,i))),i.promise}function _u(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Eu=new Map;function Tu(t,e,n){if(!n)throw new ds(us.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Iu(t){if(!Ds.isDocumentKey(t))throw new ds(us.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cu(t){if(Ds.isDocumentKey(t))throw new ds(us.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Su(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":cs()}function ku(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ds(us.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Su(t);throw new ds(us.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Au{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new ds(us.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ds(us.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new ds(us.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_u(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new ds(us.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new ds(us.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new ds(us.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class xu{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Au({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ds(us.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new ds(us.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Au(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new ms;switch(t.type){case"firstParty":return new ws(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ds(us.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Eu.get(t);e&&(rs("ComponentProvider","Removing Datastore"),Eu.delete(t),e.terminate())}(this),Promise.resolve()}}class Ru{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Ru(this.firestore,t,this._query)}}class Nu{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Du(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Nu(this.firestore,t,this._key)}}class Du extends Ru{constructor(t,e,n){super(t,e,ha(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Nu(this.firestore,null,new Ds(t))}withConverter(t){return new Du(this.firestore,t,this._path)}}function Lu(t,e,...n){if(t=N(t),Tu("collection","path",e),t instanceof xu){const i=xs.fromString(e,...n);return Cu(i),new Du(t,null,i)}{if(!(t instanceof Nu||t instanceof Du))throw new ds(us.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(xs.fromString(e,...n));return Cu(i),new Du(t.firestore,null,i)}}function Ou(t,e,...n){if(t=N(t),1===arguments.length&&(e=Ts.newId()),Tu("doc","path",e),t instanceof xu){const i=xs.fromString(e,...n);return Iu(i),new Nu(t,null,new Ds(i))}{if(!(t instanceof Nu||t instanceof Du))throw new ds(us.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(xs.fromString(e,...n));return Iu(i),new Nu(t.firestore,t instanceof Du?t.converter:null,new Ds(i))}}class Mu{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Xl(this,"async_queue_retry"),this._u=()=>{const t=Ql();t&&rs("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=Ql();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const e=Ql();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise((()=>{}));const e=new ps;return this.uu((()=>this.tu&&this.su?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.eu.push(t),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!qs(t))throw t;rs("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(t){const e=this.Xa.then((()=>(this.iu=!0,t().catch((t=>{this.ru=t,this.iu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw ss("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.iu=!1,t))))));return this.Xa=e,e}enqueueAfterDelay(t,e,n){this.au(),this.ou.indexOf(t)>-1&&(e=0);const i=Nh.createAndSchedule(this,t,e,n,(t=>this.lu(t)));return this.nu.push(i),i}au(){this.ru&&cs()}verifyOperationInProgress(){}async hu(){let t;do{t=this.Xa,await t}while(t!==this.Xa)}Pu(t){for(const e of this.nu)if(e.timerId===t)return!0;return!1}Iu(t){return this.hu().then((()=>{this.nu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.nu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.hu()}))}Tu(t){this.ou.push(t)}lu(t){const e=this.nu.indexOf(t);this.nu.splice(e,1)}}class Pu extends xu{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new Mu,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Vu(this),this._firestoreClient.terminate()}}function Fu(t,e){const n="string"==typeof t?t:e||"(default)",i=gt("object"==typeof t?t:_t(),"firestore").getImmediate({identifier:n});if(!i._initialized){const t=(t=>{const e=m("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]})();t&&function(t,e,n,i={}){var r;const s=(t=ku(t,xu))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=ts.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new ds(us.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ts(s)}t._authCredentials=new gs(new fs(e,n))}}(i,...t)}return i}function Uu(t){return t._firestoreClient||Vu(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Vu(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new vo(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,_u(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new mu(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class ju{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ju(co.fromBase64String(t))}catch(t){throw new ds(us.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new ju(co.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class $u{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new ds(us.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ns(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class zu{constructor(t){this._methodName=t}}class Bu{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ds(us.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ds(us.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Is(this._lat,t._lat)||Is(this._long,t._long)}}const qu=/^__.*__$/;class Hu{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new sc(t,this.data,this.fieldMask,e,this.fieldTransforms):new rc(t,this.data,e,this.fieldTransforms)}}function Gu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cs()}}class Ku{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Eu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new Ku(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.mu(t),i}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return rd(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(0===t.length)throw this.pu("Document fields must not be empty");if(Gu(this.du)&&qu.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class Wu{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Jl(t)}Su(t,e,n,i=!1){return new Ku({du:t,methodName:e,wu:n,path:Ns.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qu(t){const e=t._freezeSettings(),n=Jl(t._databaseId);return new Wu(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ju(t,e,n,i,r,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,r);td("Data must be an object, but it was:",o,i);const a=Yu(i,o);let c,l;if(s.merge)c=new oo(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=ed(e,i,n);if(!o.contains(r))throw new ds(us.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);sd(t,r)||t.push(r)}c=new oo(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new Hu(new Oo(a),c,l)}function Xu(t,e){if(Zu(t=N(t)))return td("Unsupported field value:",e,t),Yu(t,e);if(t instanceof zu)return function(t,e){if(!Gu(e.du))throw e.pu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.pu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Xu(r,e.gu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=N(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Pa(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Ss.fromDate(t);return{timestampValue:Fc(e.serializer,n)}}if(t instanceof Ss){const n=new Ss(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Fc(e.serializer,n)}}if(t instanceof Bu)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ju)return{bytesValue:Uc(e.serializer,t._byteString)};if(t instanceof Nu){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.pu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:$c(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.pu(`Unsupported field value: ${Su(t)}`)}(t,e)}function Yu(t,e){const n={};return to(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zs(t,((t,i)=>{const r=Xu(i,e.Ru(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Zu(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ss||t instanceof Bu||t instanceof ju||t instanceof Nu||t instanceof zu)}function td(t,e,n){if(!Zu(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=Su(n);throw"an object"===i?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function ed(t,e,n){if((e=N(e))instanceof $u)return e._internalPath;if("string"==typeof e)return id(t,e);throw rd("Field path arguments must be of type string or ",t,!1,void 0,n)}const nd=new RegExp("[~\\*/\\[\\]]");function id(t,e,n){if(e.search(nd)>=0)throw rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $u(...e.split("."))._internalPath}catch(i){throw rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rd(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new ds(us.INVALID_ARGUMENT,a+t+c)}function sd(t,e){return t.some((t=>t.isEqual(e)))}class od{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Nu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new ad(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(cd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class ad extends od{data(){return super.data()}}function cd(t,e){return"string"==typeof e?id(t,e):e instanceof $u?e._internalPath:e._delegate._internalPath}class ld{convertValue(t,e="none"){switch(bo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return uo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(po(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw cs()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Zs(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new Bu(uo(t.latitude),uo(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=mo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(go(t));default:return null}}convertTimestamp(t){const e=ho(t);return new Ss(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=xs.fromString(t);ls(al(n));const i=new yo(n.get(1),n.get(3)),r=new Ds(n.popFirst(5));return i.isEqual(e)||ss(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}function hd(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class ud{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class dd extends od{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(cd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class pd extends dd{data(t={}){return super.data(t)}}class fd{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new ud(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new pd(this._firestore,this._userDataWriter,n.key,n,new ud(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ds(us.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new pd(t._firestore,t._userDataWriter,n.doc.key,n.doc,new ud(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new pd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new ud(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:md(e.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function md(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cs()}}class gd extends ld{constructor(t){super(),this.firestore=t}convertBytes(t){return new ju(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Nu(this.firestore,null,e)}}function vd(t){t=ku(t,Ru);const e=ku(t.firestore,Pu),n=Uu(e),i=new gd(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new ds(us.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),bu(n,t._query).then((n=>new fd(e,i,t,n)))}function yd(t,e){const n=ku(t.firestore,Pu),i=Ou(t),r=hd(t.converter,e);return wd(n,[Ju(Qu(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,Ja.exists(!1))]).then((()=>i))}function wd(t,e){return function(t,e){const n=new ps;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=uu(t);try{const t=await function(t,e){const n=hs(t),i=Ss.now(),r=e.reduce(((t,e)=>t.add(e.key)),Da());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Ta(),c=Da();return n.os.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=nc(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new sc(t.key,e,Mo(e.value.mapValue),Ja.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Sa(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Da[t.currentUser.toKey()];i||(i=new eo(Is)),i=i.insert(e,n),t.Da[t.currentUser.toKey()]=i}(i,t.batchId,n),await cu(i,t.changes),await wh(i.remoteStore)}catch(t){const e=Dh(t,"Failed to persist write");n.reject(e)}}(await function(t){return yu(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(Uu(t),e)}function bd(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}new WeakMap,function(t,e=!0){!function(t){es=t}(wt),mt(new D("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new Pu(new vs(t.getProvider("auth-internal")),new _s(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ds(us.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Et(Zr,"4.4.1",t),Et(Zr,"4.4.1","esm2017")}(),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const _d=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ed=new E("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Td=new z("@firebase/auth");function Id(t,...e){Td.logLevel<=F.ERROR&&Td.error(`Auth (${wt}): ${t}`,...e)}function Cd(t,...e){throw kd(t,...e)}function Sd(t,...e){return kd(t,...e)}function kd(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Ed.create(t,...e)}function Ad(t,e,...n){if(!t)throw kd(e,...n)}function xd(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Id(e),new Error(e)}function Rd(t,e){t||xd(e)}function Nd(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Dd(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Ld(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Dd()||"https:"===Dd()||function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Od{constructor(t,e){this.shortDelay=t,this.longDelay=e,Rd(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(w())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Ld()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Md(t,e){Rd(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Pd{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void xd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void xd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void xd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Fd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ud=new Od(3e4,6e4);function Vd(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function jd(t,e,n,i,r={}){return $d(t,r,(async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=S(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),Pd.fetch()(Bd(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},r))}))}async function $d(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Fd),e);try{const e=new Hd(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Gd(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Gd(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Gd(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw Gd(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(t,e,n){const i=Object.assign(Object.assign({},_d()),{[e]:n});return new E("auth","Firebase",i).create(e,{appName:t.name})}(t,a,o);Cd(t,a)}}catch(e){if(e instanceof _)throw e;Cd(t,"network-request-failed",{message:String(e)})}}async function zd(t,e,n,i,r={}){const s=await jd(t,e,n,i,r);return"mfaPendingCredential"in s&&Cd(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Bd(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Md(t.config,r):`${t.config.apiScheme}://${r}`}function qd(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hd{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(Sd(this.auth,"network-request-failed"))),Ud.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gd(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Sd(t,e,i);return r.customData._tokenResponse=n,r}function Kd(t){return void 0!==t&&void 0!==t.enterprise}class Wd{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return qd(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}}function Qd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function Jd(t){return 1e3*Number(t)}function Xd(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return Id("JWT malformed, contained fewer than 3 sections"),null;try{const t=p(n);return t?JSON.parse(t):(Id("Failed to decode base64 JWT payload"),null)}catch(t){return Id("Caught error parsing JWT payload as JSON",null==t?void 0:t.toString()),null}}async function Yd(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof _&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class Zd{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class tp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qd(this.lastLoginAt),this.creationTime=Qd(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ep(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Yd(t,async function(t,e){return jd(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));Ad(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=bd(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=t.providerData,l=o,[...c.filter((t=>!l.some((e=>e.providerId===t.providerId)))),...l]);var c,l;const h=t.isAnonymous,u=!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!h&&u,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new tp(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}class np{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ad(t.idToken,"internal-error"),Ad(void 0!==t.idToken,"internal-error"),Ad(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=Xd(t);return Ad(e,"internal-error"),Ad(void 0!==e.exp,"internal-error"),Ad(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return Ad(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await $d(t,{},(async()=>{const n=S({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=Bd(t,i,"/v1/token",`key=${r}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Pd.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new np;return n&&(Ad("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(Ad("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(Ad("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new np,this.toJSON())}_performRefresh(){return xd("not implemented")}}function ip(t,e){Ad("string"==typeof t||void 0===t,"internal-error",{appName:e})}class rp{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=bd(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new tp(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await Yd(this,this.stsTokenManager.getToken(this.auth,t));return Ad(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=N(t),i=await n.getIdToken(e),r=Xd(i);Ad(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Qd(Jd(r.auth_time)),issuedAtTime:Qd(Jd(r.iat)),expirationTime:Qd(Jd(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=N(t);await ep(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Ad(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new rp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Ad(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await ep(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Yd(this,async function(t,e){return jd(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,c,l;const h=null!==(n=e.displayName)&&void 0!==n?n:void 0,u=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=e.photoURL)&&void 0!==s?s:void 0,f=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=e.createdAt)&&void 0!==c?c:void 0,v=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=e;Ad(y&&E,t,"internal-error");const T=np.fromJSON(this.name,E);Ad("string"==typeof y,t,"internal-error"),ip(h,t.name),ip(u,t.name),Ad("boolean"==typeof w,t,"internal-error"),Ad("boolean"==typeof b,t,"internal-error"),ip(d,t.name),ip(p,t.name),ip(f,t.name),ip(m,t.name),ip(g,t.name),ip(v,t.name);const I=new rp({uid:y,auth:t,email:u,emailVerified:w,displayName:h,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:T,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(I.providerData=_.map((t=>Object.assign({},t)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(t,e,n=!1){const i=new np;i.updateFromServerResponse(e);const r=new rp({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await ep(r),r}}const sp=new Map;function op(t){Rd(t instanceof Function,"Expected a class definition");let e=sp.get(t);return e?(Rd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sp.set(t,e),e)}class ap{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}ap.type="NONE";const cp=ap;function lp(t,e,n){return`firebase:${t}:${e}:${n}`}class hp{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=lp(this.userKey,i.apiKey,r),this.fullPersistenceKey=lp("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?rp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new hp(op(cp),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||op(cp);const s=lp(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const i=rp._fromJSON(t,e);n!==r&&(o=i),r=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(t){}}))),new hp(r,t,n)):new hp(r,t,n)}}function up(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dp(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vp(e))return"Blackberry";if(yp(e))return"Webos";if(pp(e))return"Safari";if((e.includes("chrome/")||fp(e))&&!e.includes("edge/"))return"Chrome";if(gp(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function dp(t=w()){return/firefox\//i.test(t)}function pp(t=w()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fp(t=w()){return/crios\//i.test(t)}function mp(t=w()){return/iemobile/i.test(t)}function gp(t=w()){return/android/i.test(t)}function vp(t=w()){return/blackberry/i.test(t)}function yp(t=w()){return/webos/i.test(t)}function wp(t=w()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bp(t=w()){return wp(t)||gp(t)||yp(t)||vp(t)||/windows phone/i.test(t)||mp(t)}function _p(t,e=[]){let n;switch(t){case"Browser":n=up(w());break;case"Worker":n=`${up(w())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wt}/${i}`}class Ep{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(t){i(t)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(t){e.reverse();for(const t of e)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==t?void 0:t.message})}}}class Tp{constructor(t){var e,n,i,r;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=s.minPasswordLength)&&void 0!==e?e:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=t.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=t.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}class Ip{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sp(this),this.idTokenSubscription=new Sp(this),this.beforeStateQueue=new Ep(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ed,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=op(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await hp.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(t){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ad(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await ep(t)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?N(t):null;return e&&Ad(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Ad(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(op(t))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await async function(t,e={}){return jd(t,"GET","/v2/passwordPolicy",Vd(t,e))}(this),e=new Tp(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new E("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise(((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged((()=>{n(),t()}),e)}}))}async revokeAccessToken(t){if(this.currentUser){const e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(e.tenantId=this.tenantId),await async function(t,e){return jd(t,"POST","/v2/accounts:revokeToken",Vd(t,e))}(this,e)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&op(t)||this._popupRedirectResolver;Ad(e,this,"argument-error"),this.redirectPersistenceManager=await hp.create(this,[op(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ad(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"==typeof e){const r=t.addObserver(e,n,i);return()=>{s=!0,r()}}{const n=t.addObserver(e);return()=>{s=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ad(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=_p(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null==e?void 0:e.error)&&function(t,...e){Td.logLevel<=F.WARN&&Td.warn(`Auth (${wt}): ${t}`,...e)}(`Error while retrieving App Check token: ${e.error}`),null==e?void 0:e.token}}function Cp(t){return N(t)}class Sp{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new x(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return Ad(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function kp(t){return new Promise(((e,n)=>{const i=document.createElement("script");var r,s;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=Sd("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",(null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:document).appendChild(i)}))}function Ap(t){return`__${t}${Math.floor(1e6*Math.random())}`}class xp{constructor(t){this.type="recaptcha-enterprise",this.auth=Cp(t)}async verify(t="verify",e=!1){function n(e,n,i){const r=window.grecaptcha;Kd(r)?r.enterprise.ready((()=>{r.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((t,i)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{(async function(t,e){return jd(t,"GET","/v2/recaptchaConfig",Vd(t,e))})(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new Wd(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))})(this.auth).then((r=>{if(!e&&Kd(window.grecaptcha))n(r,t,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));kp("https://www.google.com/recaptcha/enterprise.js?render="+r).then((()=>{n(r,t,i)})).catch((t=>{i(t)}))}})).catch((t=>{i(t)}))}))}}async function Rp(t,e,n,i=!1){const r=new xp(t);let s;try{s=await r.verify(n)}catch(t){s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Np(t,e,n,i){var r;if(null===(r=t._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Rp(t,e,n,"getOobCode"===n);return i(t,r)}return i(t,e).catch((async r=>{if("auth/missing-recaptcha-token"===r.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const r=await Rp(t,e,n,"getOobCode"===n);return i(t,r)}return Promise.reject(r)}))}function Dp(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Lp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Op{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return xd("not implemented")}_getIdTokenResponse(t){return xd("not implemented")}_linkToIdToken(t,e){return xd("not implemented")}_getReauthenticationResolver(t){return xd("not implemented")}}async function Mp(t,e){return jd(t,"POST","/v1/accounts:signUp",e)}async function Pp(t,e){return zd(t,"POST","/v1/accounts:signInWithPassword",Vd(t,e))}class Fp extends Op{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Fp(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Fp(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return Np(t,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Pp);case"emailLink":return async function(t,e){return zd(t,"POST","/v1/accounts:signInWithEmailLink",Vd(t,e))}(t,{email:this._email,oobCode:this._password});default:Cd(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Np(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Mp);case"emailLink":return async function(t,e){return zd(t,"POST","/v1/accounts:signInWithEmailLink",Vd(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:Cd(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Up(t,e){return zd(t,"POST","/v1/accounts:signInWithIdp",Vd(t,e))}class Vp extends Op{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Vp(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Cd("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=bd(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Vp(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return Up(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Up(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Up(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=S(e)}return t}}const jp={USER_NOT_FOUND:"user-not-found"};class $p extends Op{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new $p({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new $p({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return zd(t,"POST","/v1/accounts:signInWithPhoneNumber",Vd(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await zd(t,"POST","/v1/accounts:signInWithPhoneNumber",Vd(t,e));if(n.temporaryProof)throw Gd(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return zd(t,"POST","/v1/accounts:signInWithPhoneNumber",Vd(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),jp)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new $p({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class zp{constructor(t){var e,n,i,r,s,o;const a=k(A(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Ad(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=k(A(t)).link,n=e?k(A(e)).deep_link_id:null,i=k(A(t)).deep_link_id;return(i?k(A(i)).link:null)||i||n||e||t}(t);try{return new zp(e)}catch(t){return null}}}class Bp{constructor(){this.providerId=Bp.PROVIDER_ID}static credential(t,e){return Fp._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=zp.parseLink(e);return Ad(n,"argument-error"),Fp._fromEmailAndCode(t,n.code,n.tenantId)}}Bp.PROVIDER_ID="password",Bp.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Bp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class qp{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Hp extends qp{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Gp extends Hp{constructor(){super("facebook.com")}static credential(t){return Vp._fromParams({providerId:Gp.PROVIDER_ID,signInMethod:Gp.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gp.credentialFromTaggedObject(t)}static credentialFromError(t){return Gp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Gp.credential(t.oauthAccessToken)}catch(t){return null}}}Gp.FACEBOOK_SIGN_IN_METHOD="facebook.com",Gp.PROVIDER_ID="facebook.com";class Kp extends Hp{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Vp._fromParams({providerId:Kp.PROVIDER_ID,signInMethod:Kp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Kp.credentialFromTaggedObject(t)}static credentialFromError(t){return Kp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return Kp.credential(e,n)}catch(t){return null}}}Kp.GOOGLE_SIGN_IN_METHOD="google.com",Kp.PROVIDER_ID="google.com";class Wp extends Hp{constructor(){super("github.com")}static credential(t){return Vp._fromParams({providerId:Wp.PROVIDER_ID,signInMethod:Wp.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wp.credentialFromTaggedObject(t)}static credentialFromError(t){return Wp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Wp.credential(t.oauthAccessToken)}catch(t){return null}}}Wp.GITHUB_SIGN_IN_METHOD="github.com",Wp.PROVIDER_ID="github.com";class Qp extends Hp{constructor(){super("twitter.com")}static credential(t,e){return Vp._fromParams({providerId:Qp.PROVIDER_ID,signInMethod:Qp.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Qp.credentialFromTaggedObject(t)}static credentialFromError(t){return Qp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Qp.credential(e,n)}catch(t){return null}}}Qp.TWITTER_SIGN_IN_METHOD="twitter.com",Qp.PROVIDER_ID="twitter.com";class Jp{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await rp._fromIdTokenResponse(t,n,i),s=Xp(n);return new Jp({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Xp(n);return new Jp({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Xp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Yp extends _{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Yp.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Yp(t,e,n,i)}}function Zp(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Yp._fromErrorAndOperation(t,n,e,i);throw n}))}new WeakMap;const tf="__sak";class ef{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(tf,"1"),this.storage.removeItem(tf),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class nf extends ef{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=w();return pp(t)||wp(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=bp(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);!function(){const t=w();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||10!==document.documentMode||r===t.newValue||t.newValue===t.oldValue?i():setTimeout(i,10)}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}nf.type="LOCAL";const rf=nf;class sf extends ef{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}sf.type="SESSION";const of=sf;class af{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new af(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function cf(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}af.receivers=[];class lf{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=cf("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function hf(){return window}function uf(){return void 0!==hf().WorkerGlobalScope&&"function"==typeof hf().importScripts}const df="firebaseLocalStorageDb",pf="firebaseLocalStorage",ff="fbase_key";class mf{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function gf(t,e){return t.transaction([pf],e?"readwrite":"readonly").objectStore(pf)}function vf(){const t=indexedDB.open(df,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(pf,{keyPath:ff})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(pf)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(df);return new mf(t).toPromise()}(),e(await vf()))}))}))}async function yf(t,e,n){const i=gf(t,!0).put({[ff]:e,value:n});return new mf(i).toPromise()}function wf(t,e){const n=gf(t,!0).delete(e);return new mf(n).toPromise()}class bf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await vf()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=af._getInstance(uf()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new lf(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await vf();return await yf(t,tf,"1"),await wf(t,tf),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>yf(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=gf(t,!1).get(e),i=await new mf(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>wf(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=gf(t,!1).getAll();return new mf(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}bf.type="LOCAL";const _f=bf;Ap("rcb"),new Od(3e4,6e4);class Ef{constructor(t){this.providerId=Ef.PROVIDER_ID,this.auth=Cp(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var i;const r=await n.verify();try{let s;if(Ad("string"==typeof r,t,"argument-error"),Ad("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){Ad("enroll"===e.type,t,"internal-error");const n=await function(t,e){return jd(t,"POST","/v2/accounts/mfaEnrollment:start",Vd(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{Ad("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;Ad(n,t,"missing-multi-factor-info");const o=await function(t,e){return jd(t,"POST","/v2/accounts/mfaSignIn:start",Vd(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return jd(t,"POST","/v1/accounts:sendVerificationCode",Vd(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}(this.auth,t,N(e))}static credential(t,e){return $p._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Ef.credentialFromTaggedObject(e)}static credentialFromError(t){return Ef.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?$p._fromTokenResponse(e,n):null}}Ef.PROVIDER_ID="phone",Ef.PHONE_SIGN_IN_METHOD="phone";class Tf extends Op{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Up(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Up(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Up(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function If(t){return async function(t,e,n=!1){const i="signIn",r=await Zp(t,i,e),s=await Jp._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}(t.auth,new Tf(t),t.bypassAuthState)}function Cf(t){const{auth:e,user:n}=t;return Ad(n,e,"internal-error"),async function(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await Yd(t,Zp(i,r,e,t),n);Ad(s.idToken,i,"internal-error");const o=Xd(s.idToken);Ad(o,i,"internal-error");const{sub:a}=o;return Ad(t.uid===a,i,"user-mismatch"),Jp._forOperation(t,r,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&Cd(i,"user-mismatch"),t}}(n,new Tf(t),t.bypassAuthState)}async function Sf(t){const{auth:e,user:n}=t;return Ad(n,e,"internal-error"),async function(t,e,n=!1){const i=await Yd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Jp._forOperation(t,"link",i)}(n,new Tf(t),t.bypassAuthState)}class kf{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return If;case"linkViaPopup":case"linkViaRedirect":return Sf;case"reauthViaPopup":case"reauthViaRedirect":return Cf;default:Cd(this.auth,"internal-error")}}resolve(t){Rd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Rd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Af=new Od(2e3,1e4);class xf extends kf{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,xf.currentPopupAction&&xf.currentPopupAction.cancel(),xf.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ad(t,this.auth,"internal-error"),t}async onExecution(){Rd(1===this.filter.length,"Popup operations only handle one event");const t=cf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(Sd(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Sd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xf.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Sd(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,Af.get())};t()}}xf.currentPopupAction=null;const Rf="pendingRedirect",Nf=new Map;class Df extends kf{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Nf.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return lp(Rf,t.config.apiKey,t.name)}(e),i=function(t){return op(t._redirectPersistence)}(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}Nf.set(this.auth._key(),t)}return this.bypassAuthState||Nf.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Lf(t,e){Nf.set(t._key(),e)}async function Of(t,e,n=!1){const i=Cp(t),r=function(t,e){return e?op(e):(Ad(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(i,e),s=new Df(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class Mf{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ff(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Ff(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(Sd(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pf(t))}saveEventToCache(t){this.cachedEventUids.add(Pf(t)),this.lastProcessedEventTime=Date.now()}}function Pf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Ff({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const Uf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vf=/^https?/;function jf(t){const e=Nd(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Vf.test(n))return!1;if(Uf.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const $f=new Od(3e4,6e4);function zf(){const t=hf().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let Bf=null;function qf(t){return Bf=Bf||function(t){return new Promise(((e,n)=>{var i,r,s;function o(){zf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zf(),n(Sd(t,"network-request-failed"))},timeout:$f.get()})}if(null===(r=null===(i=hf().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=hf().gapi)||void 0===s?void 0:s.load)){const e=Ap("iframefcb");return hf()[e]=()=>{gapi.load?o():n(Sd(t,"network-request-failed"))},kp(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw Bf=null,t}))}(t),Bf}const Hf=new Od(5e3,15e3),Gf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wf(t){const e=t.config;Ad(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Md(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:t.name,v:wt},r=Kf.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${S(i).slice(1)}`}const Qf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Jf{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}const Xf=encodeURIComponent("fac");async function Yf(t,e,n,i,r,s){Ad(t.config.authDomain,t,"auth-domain-config-required"),Ad(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:wt,eventId:r};if(e instanceof qp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof Hp){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];const c=await t._getAppCheckToken(),l=c?`#${Xf}=${encodeURIComponent(c)}`:"";return`${function({config:t}){return t.emulator?Md(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${S(a).slice(1)}${l}`}const Zf="webStorageSupport",tm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=of,this._completeRedirectFn=Of,this._overrideRedirectResult=Lf}async _openPopup(t,e,n,i){var r;return Rd(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(t,e,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Qf),{width:i.toString(),height:r.toString(),top:s,left:o}),l=w().toLowerCase();n&&(a=fp(l)?"_blank":n),dp(l)&&(e=e||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=w()){var e;return wp(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",a),new Jf(null);const u=window.open(e||"",a,h);Ad(u,t,"popup-blocked");try{u.focus()}catch(t){}return new Jf(u)}(t,await Yf(t,e,n,Nd(),i),cf())}async _openRedirect(t,e,n,i){return await this._originValidation(t),r=await Yf(t,e,n,Nd(),i),hf().location.href=r,new Promise((()=>{}));var r}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(Rd(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await qf(t),n=hf().gapi;return Ad(n,t,"internal-error"),e.open({where:document.body,url:Wf(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gf,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=Sd(t,"network-request-failed"),s=hf().setTimeout((()=>{i(r)}),Hf.get());function o(){hf().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}(t),n=new Mf(t);return e.register("authEvent",(e=>(Ad(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Zf,{type:Zf},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[Zf];void 0!==r&&e(!!r),Cd(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return jd(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(jf(t))return}catch(t){}Cd(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return bp()||pp()||wp()}};var em="@firebase/auth",nm="1.5.1";class im{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Ad(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const rm=v("authIdTokenMaxAge")||300;let sm=null;var om;om="Browser",mt(new D("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Ad(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:om,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_p(om)},c=new Ip(n,i,r,a);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(op);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(c,e),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),mt(new D("auth-internal",(t=>{return e=Cp(t.getProvider("auth").getImmediate()),new im(e);var e}),"PRIVATE").setInstantiationMode("EXPLICIT")),Et(em,nm,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(om)),Et(em,nm,"esm2017");var am=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const cm=bt({apiKey:"AIzaSyDKlhRev5ZTVC9nGqXyT4qBi0WxSqs1gHE",authDomain:"moviehub-ad4ef.firebaseapp.com",projectId:"moviehub-ad4ef",storageBucket:"moviehub-ad4ef.appspot.com",messagingSenderId:"15340906607",appId:"1:15340906607:web:3eeeaedde73256afea859a"}),lm=Fu(cm),hm=(function(t=_t()){const e=gt(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=gt(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(I(n.getOptions(),null!=e?e:{}))return t;Cd(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:tm,persistence:[_f,rf,of]}),i=v("authTokenSyncURL");if(i){const t=(r=i,async t=>{const e=t&&await t.getIdTokenResult(),n=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>rm)return;const i=null==e?void 0:e.token;sm!==i&&(sm=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(t,e,n){N(t).beforeAuthStateChanged(e,n)}(n,t,(()=>t(n.currentUser))),function(e,n,i,r){N(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}var r;const s=m("auth");s&&function(t,e,n){const i=Cp(t);Ad(i._canInitEmulator,i,"emulator-config-failed"),Ad(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=Dp(e),{host:o,port:a}=function(t){const e=Dp(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Lp(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Lp(e)}}}(e),c=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${s}`)}(cm),(t,e,n)=>am(void 0,void 0,void 0,(function*(){try{const i=Lu(Ou(lm,"users",t),"Favorites");yield function(t,e,n){t=ku(t,Nu);const i=ku(t.firestore,Pu),r=hd(t.converter,e,n);return wd(i,[Ju(Qu(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,Ja.none())])}(Ou(i,e),n),console.log('Película agregada exitosamente a la colección "Favorites" del usuario',t)}catch(e){console.error('Error al agregar película a la colección "Favorites" del usuario',t,e)}}))),um=t=>am(void 0,void 0,void 0,(function*(){try{const e=[],n=Lu(Ou(lm,"users",t),"Mylists");return(yield vd(n)).forEach((t=>{const n=t.data();e.push(Object.assign({id:t.id},n))})),console.log(e),e}catch(e){throw console.error("Error al obtener las listas de películas del usuario",t,e),e}}));um("8Ff0fUFnkPYot7FEJt8u");const dm=um;var pm=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const fm=t=>({action:"navigate",payload:t}),mm=t=>({action:"navigateCategory",payload:t}),gm=t=>({action:"SaveTitleCategory",payload:t}),vm=t=>({action:"SaveImageCategory",payload:t}),ym=()=>pm(void 0,void 0,void 0,(function*(){const e=yield function(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){try{const t=yield am(void 0,void 0,void 0,(function*(){const t=yield vd(Lu(lm,"movies")),e=[];return t.forEach((t=>{const n=t.data();e.push(Object.assign({id:t.id},n))})),e}));return console.log(t),t}catch(t){console.error(t)}}))}();return{action:t.GET,payload:e}})),wm=t=>pm(void 0,void 0,void 0,(function*(){const n=yield function(t){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){try{const e=yield(t=>am(void 0,void 0,void 0,(function*(){try{const e=Lu(Ou(lm,"users",t),"Favorites"),n=yield vd(e),i=[];return n.forEach((t=>{const e=t.data();i.push(Object.assign({id:t.id},e))})),i}catch(e){throw console.error("Error al obtener las películas favoritas del usuario",t,e),e}})))(t);return console.log(e),e}catch(t){console.error(t)}}))}(t);return{action:e.GET2,payload:n}})),bm=t=>pm(void 0,void 0,void 0,(function*(){const e=yield function(t){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){try{const e=yield dm(t);return console.log(e),e||[]}catch(t){return console.error(t),[]}}))}(t);return{action:i.GET3,payload:e}}));var _m,Em=n(925);!function(t){t.section_title="section_title",t.image="image",t.message="message",t.buttonlabel="buttonlabel"}(_m||(_m={}));class Tm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({section_title:null,image:null,message:null,buttonlabel:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){let t=`\n\t\t\t<section id="allbanner" style="background-image: url('${this.image||"https://pbs.twimg.com/media/GJ331yEWQAAtUzN.jpg "}');">\n            <custom-navbar></custom-navbar>\n            <section>\n                <section>\n        `;this.section_title&&(t+=`<h1>${this.section_title}</h1>`),this.message&&(t+=`<h1>${this.message}</h1>`),t+="\n                </section>\n        ",this.buttonlabel&&(t+=`<button type="button" id="accountButton">${this.buttonlabel}</button>`),t+="\n            </section>\n        ",this.shadowRoot.innerHTML=t}const e=this.ownerDocument.createElement("style");e.innerHTML=Em.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-banner",Tm);var Im=n(682);const Cm=[{name:"Classics",category:"classics",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/rr7E0NoGKxvbkb89eR1GwfoYjpA.jpg"},{name:"Popular",category:"popular",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/s5R6kTMfOxkGit96A8lqcDL4uVk.jpg"},{name:"On-cinema",category:"cinema",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/rron9HAuS9s7zBF8iCX1tsafxUo.jpg"},{name:"Trending",category:"trending",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/iAyr7VEFGJoHDIHIxjEb3TskQW4.jpg"},{name:"Action",category:"action",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/d9sMIwulLtwRHowmDk2INm0ugmP.jpg"},{name:"Sci-fi",category:"sci-fi",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/cNffd3wkuIYZMelbPRAZ23E5HBT.jpg"},{name:"Romance",category:"romance",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/nofXR1TN1vgGjdfnwGQwFaAWBaY.jpg"},{name:"Comedy",category:"comedy",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/qdIMHd4sEfJSckfVJfKQvisL02a.jpg"},{name:"Thriller",category:"thriller",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/bneUTWFAcVCdsb0O5UwZbJd8xqZ.jpg"},{name:"Drama",category:"drama",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/pcWxKfFNCznTKYy0E8M9nG1cwL4.jpg"},{name:"Animated",category:"animated",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/sRvXNDItGlWCqtO3j6wks52FmbD.jpg"},{name:"Documental",category:"documental",image:"https://media.vogue.es/photos/605dcd126503a651df3ce9ef/master/w_1600%2Cc_limit/Seapiracy-vogue-credit-Netflix-7.jpg"},{name:"Psychological",category:"psychological",image:"https://media.themoviedb.org/t/p/w533_and_h300_bestv2/fGe1ej335XbqN1j9teoDpofpbLX.jpg"}];class Sm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),c(this)}connectedCallback(){var t,e,n,i;this.render();const r=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".pages a.navigate-list");r&&r.addEventListener("click",(()=>{a(fm("MYLISTS"))}));const s=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#signin");s&&s.addEventListener("click",(()=>{a(fm("SIGNIN"))}));const o=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#login");o&&o.addEventListener("click",(()=>{a(fm("LOGIN"))}));const c=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#home");c&&c.addEventListener("click",(()=>{a(fm("DASHBOARD"))}))}render(){if(this.shadowRoot){const t=document.createElement("nav"),e=document.createElement("section");e.className="search-bar";const n=document.createElement("section");n.className="icon";const i=document.createElement("img");i.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4xIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTQxNiAyMDhjMCA0NS45LTE0LjkgODguMy00MCAxMjIuN0w1MDIuNiA0NTcuNGMxMi41IDEyLjUgMTIuNSAzMi44IDAgNDUuM3MtMzIuOCAxMi41LTQ1LjMgMEwzMzAuNyAzNzZjLTM0LjQgMjUuMi03Ni44IDQwLTEyMi43IDQwQzkzLjEgNDE2IDAgMzIyLjkgMCAyMDhTOTMuMSAwIDIwOCAwUzQxNiA5My4xIDQxNiAyMDh6TTIwOCAzNTJhMTQ0IDE0NCAwIDEgMCAwLTI4OCAxNDQgMTQ0IDAgMSAwIDAgMjg4eiIvPjwvc3ZnPg==",i.alt="search logo",n.appendChild(i);const r=document.createElement("input");r.className="barra",r.type="text",e.appendChild(n),e.appendChild(r);const s=document.createElement("section");s.className="pages";const o=document.createElement("a");o.href="#",o.textContent="home",o.id="home",s.appendChild(o);const c=document.createElement("a");c.href="#",c.textContent="films",s.appendChild(c);const l=document.createElement("a");l.href="#",l.textContent="profile",s.appendChild(l),l.addEventListener("click",(()=>{a(fm("PROFILE"))}));const h=document.createElement("div");h.className="menu-desplegable",c.addEventListener("click",(()=>{h&&(h.classList.contains("menu-desplegableDisplayed")?h.classList.remove("menu-desplegableDisplayed"):h.classList.add("menu-desplegableDisplayed"))})),Cm.forEach((t=>{const e=document.createElement("p");e.textContent=t.name,h.appendChild(e),e.addEventListener("click",(()=>{a(fm("CATEGORIES")),a(mm(t.category)),a(gm(t.name)),a(vm(t.image))}))}));const u=document.createElement("a");u.className="navigate-list",u.href="#",u.textContent="lists";const d=document.createElement("a");d.id="login",d.href="#",d.textContent="log in";const p=document.createElement("a");p.id="signin",p.href="#",p.textContent="create account",s.appendChild(h),s.appendChild(u),s.appendChild(d),s.appendChild(p),t.appendChild(e),t.appendChild(s),this.shadowRoot.innerHTML="",this.shadowRoot.appendChild(t);const f=document.createElement("style");f.innerHTML=Im.A,this.shadowRoot.appendChild(f)}}}customElements.define("custom-navbar",Sm);var km,Am=n(931),xm=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};!function(t){t.image="image",t.uid="uid",t.categories="categories",t.utitle="utitle",t.director="director",t.release_date="release_date",t.cast="cast",t.crew="crew",t.image_sec="image_sec",t.description="description",t.catch_phrase="catch_phrase"}(km||(km={}));class Rm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.isLiked=!0}static get observedAttributes(){return Object.keys({image:null,uid:null,categories:null,utitle:null,director:null,release_date:null,cast:null,crew:null,image_sec:null,description:null,catch_phrase:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n            <div class="container" data-uid="${this.uid}" data-image="${this.image}" data-categories="${this.categories}" data-title="${this.utitle}" data-director="${this.director}" data-release="${this.release_date}" data-cast="${this.cast}" data-crew="${this.crew}" data-imgbanner="${this.image_sec}" data-description="${this.description}" data-phrase="${this.catch_phrase}">\n                <img class="poster" src="${this.image}" alt="This a poster of the movie named ${this.utitle}" ></img>\n                <section class="content">\n                    <section class="viewdetails">\n                        <a class="link">\n                            <img class="details"src="https://img.icons8.com/ios-glyphs/30/FFFFFF/visible--v1.png" alt="eye icon"/></a>\n                        <p>View details</p>\n                    </section>\n                    <img class="dislike"  src="https://img.icons8.com/ios/50/FFFFFF/like--v1.png" alt="hear icon empty"/>\n                    <img class="like"  src="https://img.icons8.com/ios-filled/50/FFFFFF/like--v1.png" alt="heart icon full"/>\n                    <p>Like</p>\n                </section>\n            </div>\n        `;const t=this.shadowRoot.querySelector(".viewdetails");null==t||t.addEventListener("click",(()=>{a(fm("FILMPAGE")),a({action:"SaveMovieId",payload:this.uid}),a({action:"SaveMovieImage",payload:this.image}),a((t=>({action:"SaveMovieCategories",payload:this.categories}))()),a({action:"SaveMovieTitle",payload:this.utitle}),a({action:"SaveMovieDirector",payload:this.director}),a({action:"SaveMovieReleaseDate",payload:this.release_date}),a({action:"SaveMovieCast",payload:this.cast}),a({action:"SaveMovieCrew",payload:this.crew}),a({action:"SaveMovieImageSec",payload:this.image_sec}),a((t=>({action:"SaveMovieDescription",payload:this.description}))()),a({action:"SaveMovieCatchPhrase",payload:this.catch_phrase})}));const e=this.shadowRoot.querySelector(".like"),n=this.shadowRoot.querySelector(".dislike"),i=s.favlist.some((t=>t.id===this.uid));e.style.display=i?"inline":"none",n.style.display=i?"none":"inline",e.addEventListener("click",(()=>xm(this,void 0,void 0,(function*(){try{yield(t="8Ff0fUFnkPYot7FEJt8u",i=this.uid||"",am(void 0,void 0,void 0,(function*(){try{const n=Lu(Ou(Fu(),"users",t),"Favorites");yield(e=Ou(n,i),wd(ku(e.firestore,Pu),[new lc(e._key,Ja.none())]))}catch(t){throw t}var e}))),console.log("Película eliminada de Favorites")}catch(t){console.error("Error al eliminar la película de Favorites",t)}var t,i;e.style.display="none",n.style.display="inline"})))),n.addEventListener("click",(()=>xm(this,void 0,void 0,(function*(){try{yield hm("8Ff0fUFnkPYot7FEJt8u",this.uid?this.uid:"",{id:this.uid||"",image:this.image||"",categories:this.categories?this.categories.split(","):[],title:this.utitle||"",director:this.director||"",release_date:this.release_date||"",cast:this.cast||"",crew:this.crew||"",image_sec:this.image_sec||"",description:this.description||"",catch_phrase:this.catch_phrase||""}),console.log("Película guardada en Favorites")}catch(t){console.error("Error al guardar la película en Favorites",t)}e.style.display="inline",n.style.display="none"}))))}const e=this.ownerDocument.createElement("style");e.innerHTML=Am.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("movie-card",Rm);var Nm,Dm=n(213);!function(t){t.name="name",t.category="category",t.image="image"}(Nm||(Nm={}));class Lm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({name:null,category:null,image:null})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){this[t]=n,this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=s.movielist.filter((t=>{var e;return null===(e=t.categories)||void 0===e?void 0:e.includes(null!=this.category?this.category:"undefined")})),e=document.createElement("style");e.textContent=Dm.A,this.shadowRoot.innerHTML=`\n                <h1 id="titlecategory">${this.name||""}</h1>\n\t\t\t\t<section id="cards">\n\t\t\t\t\t${t.map((t=>`\n\t\t\t\t\t\t<movie-card image="${t.image}" uid="${t.id}" categories="${t.categories}" utitle="${t.title}" director="${t.director}" release_date="${t.release_date}" cast="${t.cast}" crew="${t.crew}" image_sec="${t.image_sec}" description="${t.description}" catch_phrase="${t.catch_phrase}"></movie-card>\n\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n            `;const n=this.shadowRoot.querySelector("#titlecategory");null==n||n.addEventListener("click",(()=>{a(fm("CATEGORIES")),a(mm(this.category)),a(gm(this.name)),a(vm(this.image))})),this.shadowRoot.appendChild(e)}}))}}customElements.define("category-section",Lm);var Om=n(583),Mm=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const Pm={title:"",image:"",categories:[],director:"",release_date:"",cast:"",crew:"",image_sec:"",description:"",catch_phrase:""};class Fm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}changeTitle(t){var e;Pm.title=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeImage(t){var e;Pm.image=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCategories(t){var e;Pm.categories=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeDirector(t){var e;Pm.director=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeRelease(t){var e;Pm.release_date=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCast(t){var e;Pm.cast=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCrew(t){var e;Pm.crew=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeImageSec(t){var e;Pm.image_sec=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeDescription(t){var e;Pm.description=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCatchPhrase(t){var e;Pm.catch_phrase=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}render(){return Mm(this,void 0,void 0,(function*(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML='\n\t\t\t\t<section class= "container">\n\n\t\t\t\t\t<button id = "ButtonModal">+</button>\n\t\t</section>\n\t\t\t\t<section class="modalContainer" style="display: none;">\n    <div class="modal-overlay">\n\t\t\t\t<section class="modal-content">\n\t\t\t\t\t<form class="my-form">\n\t\t\t\t\t<section id="header">\n\t\t\t\t\t\t<span class = "close"><img src="https://img.icons8.com/ios-filled/50/FB953C/delete-sign--v1.png" alt="delete-sign--v1"/></span>\n\t\t\t\t\t\t\t<h2>Add a movie</h2>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t<label for="fname">Name movie</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="fname" name="fname" placeholder="Pearl"><br><br>\n\t\t\t\t\t\t\t\t<label for="director">Director</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="directorMovie" name="director" placeholder="Ti West"><br><br>\n\t\t\t\t\t\t\t\t<label for="date">Release date</label><br>\n\t\t\t\t\t\t\t\t<input type="date" id="datemovie" name="date" ><br><br>\n\t\t\t\t\t\t\t\t<label for="catch">Catch-Phrase</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="catchMovie" name="catch" placeholder="An X-traordinary Origin Story"><br><br>\n\t\t\t\t\t\t\t\t<label for="description">Description</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="descriptionMovie" name="description" placeholder="Pearl (subtitled An X-traordinary Origin Story) is a 2022 American horror film directed by Ti West, co-written by West and Mia Goth, who reprises her role as the title character, and featuring David Corenswet, Tandi Wright, Matthew Sunderland and Emma Jenkins-Purro in supporting roles. A prequel to X (2022) and the second installment in the X film series, it serves as an origin story for the title villain, whose fervent aspiration to become a movie star led her to committing violent acts on her family\'s Texas homestead in 1918."><br><br>\n\t\t\t\t\t\t\t\t<label for="cast">Cast</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="castMovie" name="cast" placeholder="Mia Goth, David Corenswet, Alistair Sewell, Emma Jenkins, Matthew Sunderland, Tandi Wright"><br><br>\n\t\t\t\t\t\t\t\t<label for="crew">Crew</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="crewMovie" name="crew" placeholder="Mia Goth, David Corenswet, Alistair Sewell, Emma Jenkins, Matthew Sunderland, Tandi Wright"><br><br>\n\t\t\t\t\t\t\t\t<label for="poster">Enter movie poster url</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="movieposter" name="poster" placeholder="https://pics.filmaffinity.com/Pearl-745024740-large.jpg"><br><br>\n\t\t\t\t\t\t\t\t<label for="image">Enter secondary image url</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="movieimage" name="image" placeholder="https://pics.filmaffinity.com/Pearl-745024740-large.jpg"><br><br>\n\t\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t\t\t\t<label for="crew">Genres</label><br>\n\t\t\t\t\t\t\t\t\t\t<section id="checkboxes">\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="romance" value="romance" />\n\t\t\t\t\t\t\t\t\t\t<label for="romance">Romance</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="action" value="action" />\n\t\t\t\t\t\t\t\t\t\t<label for="action">Action</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="comedy" value="comedy" />\n\t\t\t\t\t\t\t\t\t\t<label for="comedy">Comedy</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="Thriller" value="thriller" />\n\t\t\t\t\t\t\t\t\t\t<label for="thriller">Thriller</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="sci-fi" value="sci-fi" />\n\t\t\t\t\t\t\t\t\t\t<label for="sci-fi">Sci-Fi</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="drama" value="drama" />\n\t\t\t\t\t\t\t\t\t\t<label for="drama">Drama</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="animated" value="animated" />\n\t\t\t\t\t\t\t\t\t\t<label for="animated">Animated</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="classic" value="classics" />\n\t\t\t\t\t\t\t\t\t\t<label for="classic">Classics</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="documental" value="documental" />\n\t\t\t\t\t\t\t\t\t\t<label for="documental">Documental</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="psychological" value="psychological" />\n\t\t\t\t\t\t\t\t\t\t<label for="psychological">Psychological</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t<button type="submit">Submit</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t</section>\n\t\t</section>\n      ';const e=this.ownerDocument.createElement("style");e.innerHTML=Om.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e);const n=this.shadowRoot.querySelector(".modalContainer");this.shadowRoot.querySelector(".close").addEventListener("click",(()=>{n.style.display="none"})),window.addEventListener("click",(t=>{t.target==n&&(n.style.display="none")})),this.shadowRoot.querySelector("#ButtonModal").addEventListener("click",(t=>{n.style.display="block"})),this.shadowRoot.querySelector("#fname").addEventListener("change",this.changeTitle),this.shadowRoot.querySelector("#directorMovie").addEventListener("change",this.changeDirector),this.shadowRoot.querySelector("#datemovie").addEventListener("change",this.changeRelease),this.shadowRoot.querySelector("#descriptionMovie").addEventListener("change",this.changeDescription),this.shadowRoot.querySelector("#castMovie").addEventListener("change",this.changeCast),this.shadowRoot.querySelector("#crewMovie").addEventListener("change",this.changeCrew),this.shadowRoot.querySelector("#movieposter").addEventListener("change",this.changeImage),this.shadowRoot.querySelector("#movieimage").addEventListener("change",this.changeImageSec),this.shadowRoot.querySelector("#catchMovie").addEventListener("change",this.changeCatchPhrase),this.shadowRoot.querySelectorAll('input[type="checkbox"]').forEach((t=>{t.addEventListener("change",(e=>{if(t.checked)Pm.categories.push(t.value);else{const e=Pm.categories.indexOf(t.value);-1!==e&&Pm.categories.splice(e,1)}console.log("Arreglo de categorías actualizado:",Pm.categories)}))})),this.shadowRoot.querySelector(".my-form").addEventListener("submit",(t=>Mm(this,void 0,void 0,(function*(){var e,i,r,s,o,a,c,l,h,u,d,p;t.preventDefault(),n.style.display="none",yield(p=Pm,am(void 0,void 0,void 0,(function*(){try{const t=Lu(lm,"movies");yield yd(t,p),console.log("se añadió con éxito")}catch(t){console.error(t)}}))),(null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("fname")).value="",(null===(i=this.shadowRoot)||void 0===i?void 0:i.getElementById("directorMovie")).value="",(null===(r=this.shadowRoot)||void 0===r?void 0:r.getElementById("datemovie")).value="",(null===(s=this.shadowRoot)||void 0===s?void 0:s.getElementById("catchMovie")).value="",(null===(o=this.shadowRoot)||void 0===o?void 0:o.getElementById("descriptionMovie")).value="",(null===(a=this.shadowRoot)||void 0===a?void 0:a.getElementById("castMovie")).value="",(null===(c=this.shadowRoot)||void 0===c?void 0:c.getElementById("crewMovie")).value="",(null===(l=this.shadowRoot)||void 0===l?void 0:l.getElementById("movieposter")).value="",(null===(h=this.shadowRoot)||void 0===h?void 0:h.getElementById("movieimage")).value="",(null===(u=this.shadowRoot)||void 0===u?void 0:u.getElementById("catchMovie")).value="";const f=null===(d=this.shadowRoot)||void 0===d?void 0:d.querySelectorAll('input[type="checkbox"]');null==f||f.forEach((t=>{t.checked=!1})),Pm.categories=[],console.log("Formulario enviado y campos limpiados")}))))}}))}}customElements.define("modal-movie",Fm);var Um,Vm=n(679);!function(t){t.buttonlabel="buttonlabel"}(Um||(Um={}));class jm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({buttonlabel:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t      <button type="button">${this.buttonlabel}</button>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Vm.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-button",jm);var $m,zm=n(167);!function(t){t.icon_url="icon_url",t.label="label",t.description_icon="description_icon"}($m||($m={}));class Bm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({icon_url:null,label:null,description_icon:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n<a><p>${this.label}</p> <img src="${this.icon_url}" alt="${this.description_icon}"></a>\n      `;const e=this.ownerDocument.createElement("style");e.innerHTML=zm.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}}customElements.define("my-actionandicon",Bm);var qm,Hm=n(909);!function(t){t.label="label"}(qm||(qm={}));class Gm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({label:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n      <section>\n      <label for="crew">${this.label}</label><br>\n      <section id="checkboxes">\n      <section class="label-chechbox">\n      <input type="checkbox" id="romance" value="first-checkbox" />\n      <label for="romance">Romance</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="action" value="second-checkbox" />\n      <label for="action">Action</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="comedy" value="thirth-checkbox" />\n      <label for="comedy">Comedy</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="Thriller" value="fourth-checkbox" />\n      <label for="thriller">Thriller</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="sci-fi" value="fifth-checkbox" />\n      <label for="sci-fi">Sci-Fi</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="drama" value="sixth-checkbox" />\n      <label for="drama">Drama</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="animated" value="seventh-checkbox" />\n      <label for="animated">Animated</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="classic" value="eighth-checkbox" />\n      <label for="classic">Classics</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="documental" value="ninth-checkbox" />\n      <label for="documental">Documental</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="psychological" value="second-checkbox" />\n      <label for="psychological">Psychological</label>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Hm.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-filters",Gm);var Km,Wm=n(83);!function(t){t.poster="poster",t.director="director",t.utitle="utitle",t.release_date="release_date"}(Km||(Km={}));class Qm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({poster:null,director:null,utitle:null,release_date:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section id="figure">\n<img src="${this.poster}" alt="This a poster of the movie named ${this.utitle} ">\n<h1>${this.utitle}</h1>\n<section id="directoranddate">\n<p>Directed by <b> ${this.director} </b></p>\n<p>Release date:<b> ${this.release_date}</b></p>\n</section>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Wm.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-figuremovie",Qm);var Jm,Xm=n(775);!function(t){t.catch_phrase="catch_phrase",t.description="description"}(Jm||(Jm={}));class Ym extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({description:null,catch_phrase:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n\t\t\t<b><p>${this.catch_phrase||""}</p></b>\n<p id="description">${this.description}</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Xm.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-descriptionmovie",Ym);var Zm,tg=n(191);!function(t){t.section_title="section_title",t.content="content"}(Zm||(Zm={}));class eg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({section_title:null,content:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n      <h2>${this.section_title}</h2>\n      <hr></hr>\n<p>${this.content}</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=tg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-extrainfo",eg);var ng,ig=n(791);!function(t){t.utitle="utitle",t.your_name="your_name",t.mobile_number="mobile_number",t.email="email",t.emailornumber="emailornumber",t.password="password",t.re_password="re_password"}(ng||(ng={}));class rg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({utitle:null,your_name:null,mobile_number:null,email:null,emailornumber:null,password:null,re_password:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){var t;this.render();const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".close");e&&e.addEventListener("click",(()=>{a(fm("DASHBOARD"))}))}render(){var t;if(this.shadowRoot){let t=`\n              <section id="header">\n                  <span class="close"><img src="https://img.icons8.com/ios-filled/50/FB953C/delete-sign--v1.png" alt="delete-sign--v1"/></span>\n                  <h1>${this.utitle}</h1>\n              </section>\n          `;this.your_name&&(t+=`\n                  <label for="name">${this.your_name}</label><br>\n                  <input type="text" class="space" name="name" placeholder="First and last name"><br><br>\n              `),this.mobile_number&&(t+=`\n                  <label for="mobile">${this.mobile_number}</label><br>\n                  <input type="text" class="space" name="mobile" placeholder="Don't forget your country code"><br><br>\n              `),this.email&&(t+=`\n                  <label for="email">${this.email}</label><br>\n                  <input type="text" class="space" name="email" placeholder="johndoe@movie.com"><br><br>\n              `),this.emailornumber&&(t+=`\n                  <label for="emailornumber">${this.emailornumber}</label><br>\n                  <input type="text" class="space" name="emailornumber"><br><br>\n              `),this.password&&(t+=`\n                  <label for="password">${this.password}</label><br>\n                  <input type="text" class="space" name="password" placeholder="At least 8 characters"><br><br>\n              `),this.re_password&&(t+=`\n                  <label for="re_password">${this.re_password}</label><br>\n                  <input type="text" class="space" name="re_password" placeholder="Confirm your password"><br><br>\n              `),t+="</section>",this.shadowRoot.innerHTML=t}const e=this.ownerDocument.createElement("style");e.innerHTML=ig.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-sessionform",rg);var sg,og=n(633);!function(t){t.btn_text="btn_text",t.message="message",t.btn_type="btn_type"}(sg||(sg={}));class ag extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({btn_text:null,btn_type:null,message:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n      <button type="${this.btn_type}" id="send">${this.btn_text}</button>\n      <p>${this.message}<a href="https://en.wikipedia.org/wiki/Terms_of_service"> Our Conditions of Use and Privacy Notice</a>.</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=og.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-submitandterms",ag);var cg,lg=n(163);!function(t){t.image="image",t.uid="uid",t.categories="categories",t.utitle="utitle",t.director="director",t.release_date="release_date",t.cast="cast",t.crew="crew",t.image_sec="image_sec",t.description="description",t.catch_phrase="catch_phrase"}(cg||(cg={}));class hg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.isLiked=!1}static get observedAttributes(){return Object.keys({image:null,uid:null,categories:null,utitle:null,director:null,release_date:null,cast:null,crew:null,image_sec:null,description:null,catch_phrase:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t,e;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n                <div class="container" data-uid="${this.uid}" data-image="${this.image}" data-categories="${this.categories}" data-title="${this.utitle}" data-director="${this.director}" data-release="${this.release_date}" data-cast="${this.cast}" data-crew="${this.crew}" data-imgbanner="${this.image_sec}" data-description="${this.description}" data-phrase="${this.catch_phrase}">\n                    <img class="poster" src="${this.image}" alt="This a poster of the movie named ${this.utitle}" ></img>\n                    <section class="content">\n                        <button id="LikeButton">${this.isLiked?"-":"+"}</button>\n                    </section>\n                </div>\n            `);const n=this.ownerDocument.createElement("style");n.innerHTML=lg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(n);const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#LikeButton");i.addEventListener("click",(()=>function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){this.isLiked=!this.isLiked,i.textContent=this.isLiked?"-":"+";const t={id:this.uid||"",image:this.image||"",categories:this.categories?this.categories.split(","):[],title:this.utitle||"",director:this.director||"",release_date:this.release_date||"",cast:this.cast||"",crew:this.crew||"",image_sec:this.image_sec||"",description:this.description||"",catch_phrase:this.catch_phrase||""},e=s.currentnewlistid;e&&Object.values(t).every((t=>""!==t))?yield((t,e,n)=>am(void 0,void 0,void 0,(function*(){try{const i=Lu(Ou(lm,"users",t,"Mylists",e),"content");yield yd(i,n),console.log("Película agregada exitosamente a la lista",e)}catch(t){throw console.error("Error al agregar la película a la lista",e,t),t}})))("8Ff0fUFnkPYot7FEJt8u",e,t):alert("Please select a list and make sure all movie data is available.")}))))}}customElements.define("my-moviecardadd",hg);var ug=n(675),dg=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};class pg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return dg(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=document.createElement("section");t.classList.add("modal-new-list");const e=document.createElement("span");e.classList.add("close"),e.addEventListener("click",(()=>{this.style.display="none"}));const n=document.createElement("img");n.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0iIzAwMDAwMCIgdmlld0JveD0iMCAwIDI1NiAyNTYiPjxwYXRoIGQ9Ik0yMDUuNjYsMTk0LjM0YTgsOCwwLDAsMS0xMS4zMiwxMS4zMkwxMjgsMTM5LjMxLDYxLjY2LDIwNS42NmE4LDgsMCwwLDEtMTEuMzItMTEuMzJMMTE2LjY5LDEyOCw1MC4zNCw2MS42NkE4LDgsMCwwLDEsNjEuNjYsNTAuMzRMMTI4LDExNi42OWw2Ni4zNC02Ni4zNWE4LDgsMCwwLDEsMTEuMzIsMTEuMzJMMTM5LjMxLDEyOFoiPjwvcGF0aD48L3N2Zz4=",n.alt="Close",e.appendChild(n);const i=document.createElement("h1");i.classList.add("title-list"),i.textContent="New list";const r=document.createElement("form");r.classList.add("info-list");const o=document.createElement("label");o.htmlFor="name-list",o.textContent="Name";const c=document.createElement("input");c.type="text",c.id="name-list",c.name="name-list",c.placeholder="Enter the list name";const l=document.createElement("label");l.htmlFor="url-list",l.textContent="URL list image";const h=document.createElement("input");h.type="text",h.id="url-list",h.name="url-list",h.placeholder="Enter the URL of the image list";const u=document.createElement("section"),d=document.createElement("button");d.type="submit",d.textContent="ADD FILMS",u.appendChild(d),r.appendChild(o),r.appendChild(c),r.appendChild(l),r.appendChild(h),r.appendChild(u),t.appendChild(e),t.appendChild(i),t.appendChild(r),this.shadowRoot.appendChild(t);const p=this.ownerDocument.createElement("style");p.innerHTML=ug.A,this.shadowRoot.appendChild(p),d.addEventListener("click",(t=>dg(this,void 0,void 0,(function*(){var e,n,i,r;t.preventDefault(),a(fm("NEWLIST"));const o=(null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#name-list")).value,c=(null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#url-list")).value;if(""!==o.trim()&&""!==c.trim()){a({action:"SaveCurrentNewListName",payload:o}),console.log("namelist",s.currentnewlistname),a({action:"SaveCurrentNewListImage",payload:c}),console.log("imagelist",s.currentnewlistimage);const t=yield((t,e,n,i)=>am(void 0,void 0,void 0,(function*(){try{const r=Lu(Ou(lm,"users",t),"Mylists"),s=yield yd(r,{name:e,image:n}),o=s.id;console.log("Lista agregada exitosamente para el usuario",t,"con ID:",o);const a=Lu(s,"content");return yield yd(a,{}),yield Promise.all(i.map((t=>am(void 0,void 0,void 0,(function*(){yield yd(a,t)}))))),o}catch(e){throw console.error("Error al agregar lista para el usuario",t,e),e}})))("8Ff0fUFnkPYot7FEJt8u",o,c,[]);console.log("New List ID:",t),a({action:"SaveCurrentNewListId",payload:t}),console.log("idlist",s.currentnewlistid),(null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#name-list")).value="",(null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector("#url-list")).value=""}else alert("Please fill in all fields.")}))))}}))}}customElements.define("my-modal-list",pg);var fg,mg=n(721);!function(t){t.image_profile="image_profile",t.name_profile="name_profile",t.comment="comment"}(fg||(fg={}));class gg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({image_profile:null,name_profile:null,comment:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section class = "comment-section">\n\t\t\t<div class = "user-image">\n\t\t\t\t<img src="${this.image_profile}" alt="Image profile">\n\t\t\t</div>\n\t\t\t\t<div class = "right-side">\n\t\t\t\t<div class = "info-user">\n\t\t\t\t\t<span><h3>${this.name_profile}</h3> made a review</span>\n\t\t\t\t\t<span class="rating">★★★★★</span>\n\t\t\t\t</div>\n\t\t\t\t<div class = "info-comment">\n\t\t\t\t\t<p>${this.comment}</p>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=mg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-comment-section",gg);var vg=n(267);class yg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=s.favlist,e=document.createElement("style");e.textContent=vg.A,this.shadowRoot.innerHTML=`\n\t\t\t\t<section id="favoriteMovies">\n\t\t\t\t\t${t.map((t=>`\n\t\t\t\t\t\t\t\t<movie-card\n\t\t\t\t\t\t\t\t\timage="${t.image}"\n\t\t\t\t\t\t\t\t\tuid="${t.id}"\n\t\t\t\t\t\t\t\t\tcategories="${t.categories}"\n\t\t\t\t\t\t\t\t\tutitle="${t.title}"\n\t\t\t\t\t\t\t\t\tdirector="${t.director}"\n\t\t\t\t\t\t\t\t\trelease_date="${t.release_date}"\n\t\t\t\t\t\t\t\t\tcast="${t.cast}"\n\t\t\t\t\t\t\t\t\tcrew="${t.crew}"\n\t\t\t\t\t\t\t\t\timage_sec="${t.image_sec}"\n\t\t\t\t\t\t\t\t\tdescription="${t.description}"\n\t\t\t\t\t\t\t\t\tcatch_phrase="${t.catch_phrase}">\n\t\t\t\t\t\t\t\t</movie-card>\n\t\t\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\t\t\t`,this.shadowRoot.appendChild(e)}}))}}customElements.define("my-favoritemovies",yg);var wg=n(779);class bg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n    <section class="container">\n      <section class="profile">\n        <div class = "profile-image">\n          <img src="https://i.pinimg.com/564x/89/c8/c5/89c8c501627cac554a35242923c33ece.jpg"  alt="Profile Picture">\n        </div>\n      </section>\n      <form class="form" method="post" action="/submit-form">\n        <section class="form-group">\n          <label for="name">Name</label>\n          <br>\n          <input type="text" id="name" name="name"  value=" John Dae" >\n        </section>\n\n        <section class="form-group">\n          <label for="mobile">Mobile Number</label>\n          <br>\n          <input type="tel" id="mobile" name="mobile" value=" +57 3015476756">\n        </section>\n\n        <section class="form-group">\n          <label for="email">Email</label>\n          <br>\n          <input type="email" id="email" name="email" value="johndoe@gmail.com">\n        </section>\n\n        <section class="form-group">\n          <label for="password">Password</label>\n          <br>\n          <input type="password" id="password" name="password" value="••••••••">\n        </section>\n\n        <section class="form-actions">\n          <br>\n          <button type="submit" class="edit-profile">Edit</button>\n        </section>\n    </form>\n  </section>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=wg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-profile",bg);var _g=n(14);class Eg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=s.favlist,e=document.createElement("style");e.textContent=_g.A,this.shadowRoot.innerHTML=`\n\t\t\t\t<section id="listMovies">\n\t\t\t\t\t${t.map((t=>`\n\t\t\t\t\t\t\t\t<my-moviecardadd\n\t\t\t\t\t\t\t\t\timage="${t.image}"\n\t\t\t\t\t\t\t\t\tuid="${t.id}"\n\t\t\t\t\t\t\t\t\tcategories="${t.categories}"\n\t\t\t\t\t\t\t\t\tutitle="${t.title}"\n\t\t\t\t\t\t\t\t\tdirector="${t.director}"\n\t\t\t\t\t\t\t\t\trelease_date="${t.release_date}"\n\t\t\t\t\t\t\t\t\tcast="${t.cast}"\n\t\t\t\t\t\t\t\t\tcrew="${t.crew}"\n\t\t\t\t\t\t\t\t\timage_sec="${t.image_sec}"\n\t\t\t\t\t\t\t\t\tdescription="${t.description}"\n\t\t\t\t\t\t\t\t\tcatch_phrase="${t.catch_phrase}">\n\t\t\t\t\t\t\t\t</my-moviecardadd>\n\t\t\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\t\t\t`,this.shadowRoot.appendChild(e)}}))}}customElements.define("my-cardaddsection",Eg);var Tg=n(989);class Ig extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(this.shadowRoot){const t=s.movielist,e=document.createElement("style");e.textContent=Tg.A,this.shadowRoot.innerHTML=`\n                <section id="cards">\n                    ${t.map((t=>`\n                            <my-moviecardadd image="${t.image}" uid="${t.id}" categories="${t.categories}" utitle="${t.title}" director="${t.director}" release_date="${t.release_date}" cast="${t.cast}" crew="${t.crew}" image_sec="${t.image_sec}" description="${t.description}" catch_phrase="${t.catch_phrase}"></my-moviecardadd>\n                        `)).join("")}\n                </section>\n            `,this.shadowRoot.appendChild(e)}}))}}customElements.define("my-addmovietolist",Ig);var Cg=n(9);class Sg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){var t,e;this.render();const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("my-banner");if(n){const t=null===(e=n.shadowRoot)||void 0===e?void 0:e.querySelector("#accountButton");null==t||t.addEventListener("click",(()=>{a(fm("SIGNIN"))}))}}))}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<body>\n      <my-banner message="Track films you\'ve watched. Save those you want to see. Tell your friends what\'s good."\n\t\t\tbuttonlabel="GET AN ACCOUNT, IT\'S FREE"></my-banner>\n\t\t\t<category-section name="Popular films in the community" category="popular" image="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/s5R6kTMfOxkGit96A8lqcDL4uVk.jpg"></category-section>\n\t\t\t\t<category-section name="On-cinema right now" category="cinema" image="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/rron9HAuS9s7zBF8iCX1tsafxUo.jpg"></category-section>\n\t\t\t\t<category-section name="Trending this week" category="trending" image="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/iAyr7VEFGJoHDIHIxjEb3TskQW4.jpg"></category-section>\n\t\t\t\t<category-section name="Classics" category="classics" image="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/rr7E0NoGKxvbkb89eR1GwfoYjpA.jpg"></category-section>\n\t\t\t\t<modal-movie></modal-movie>\n\t\t\t\t</body>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=Cg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-dashboard",Sg);var kg=n(809);class Ag extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<my-banner section_title=${s.titlecategory} image=${s.imagecategory}></my-banner>\n\t\t\t<category-section category=${s.currentcategory}></category-section>\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=kg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-categories",Ag);const xg=[{id:1,name:"John",image:"https://i.pinimg.com/564x/72/d6/96/72d69624326a417824f5d96e36ebf4eb.jpg",comment:"may thy racket chip and shatter"},{id:2,name:"sydney",image:"https://i.pinimg.com/736x/3a/e5/0e/3ae50eb0d74405a95fa5865988b9ba3c.jpg",comment:"god can thomas brodie sangster have more american roles"},{id:3,name:"ccaitlinnm",image:"https://i.pinimg.com/564x/5f/22/e5/5f22e519b409fe620193ca47f3724b83.jpg",comment:"ngl i thought bubba gumps came before this film and the writers spent like half the movie building up to a punchline"},{id:4,name:"DirkH",image:"https://i.pinimg.com/564x/9b/11/77/9b1177aebfc5f7ea7c3124e30e809970.jpg",comment:"nobody likes getting the most out of a vowel quite like james stewart"}];var Rg=n(207);class Ng extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\n\t\t\t<my-banner image="${s.movieimagesec}" id="banner"></my-banner>\n<section id="content">\n\t\t\t<my-figuremovie id="figure"  poster=${s.movieimage} utitle="${s.movietitle}" director="${s.moviedirector}" release_date=${s.moviereleasedate}></my-figuremovie>\n<section id="info">\n\t\t\t<my-descriptionmovie catch_phrase="${s.moviecatchphrase}" description="${s.moviedescription}"></my-descriptionmovie>\n\t\t\t<my-extrainfo section_title="Cast" content="${s.moviecast}"></my-extrainfo>\n\t\t\t<my-extrainfo section_title="Crew" content="${s.moviecrew}"></my-extrainfo>\n\t\t\t<my-extrainfo section_title="Genres" content="${s.moviecategories}"></my-extrainfo>\n\t\t\t</section>\n\t\t\t\x3c!-- <section id="actions">\n\t\t\t<my-actionandicon label="Like" icon_url="https://img.icons8.com/ios/30/FFFFFF/like--v1.png" description_icon="heart icon"></my-actionandicon>\n\t\t\t<my-actionandicon label="Edit film" icon_url="https://img.icons8.com/material/24/FFFFFF/pencil--v2.png" description_icon="pencil icon"></my-actionandicon>\n\t\t\t<my-actionandicon label="Add to a list" icon_url="https://img.icons8.com/ios-glyphs/30/FFFFFF/bookmark-ribbon.png" description_icon="bookmark icon"></my-actionandicon>\n\t\t\t<my-actionandicon label="Share" icon_url="https://img.icons8.com/ios-glyphs/30/FFFFFF/share--v1.png" description_icon="share icon"></my-actionandicon>\n\t\t\t</section> --\x3e\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h1>POPULAR REVIEWS</h1>\n\t\t\t\t<section class = "comment-section">\n\t\t\t\t\t${xg.map((t=>`\n\t\t\t\t\t\t\t<my-comment-section image_profile = "${t.image}"\n\t\t\t\t\t\t\tname_profile = "${t.name}"\n\t\t\t\t\t\t\tcomment = "${t.comment}">\n\t\t\t\t\t\t\t</my-comment-section>\n\t\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\t\t\t</section>\n\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=Rg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-filmpage",Ng);var Dg=n(858);class Lg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var t,e,n,i,r;this.render();const s=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#navigatetosignin");null==s||s.addEventListener("click",(()=>{a(fm("SIGNIN"))}));const o=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("my-submitandterms");if(o){const t=null===(n=o.shadowRoot)||void 0===n?void 0:n.querySelector("#send");null==t||t.addEventListener("click",(()=>{a(fm("DASHBOARD"))}))}const c=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("my-sessionform");if(c){const t=null===(r=c.shadowRoot)||void 0===r?void 0:r.querySelector(".close");null==t||t.addEventListener("click",(()=>{a(fm("DASHBOARD"))}))}}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<section>\n\t\t\t<section id="form">\n     <my-sessionform utitle="LOG IN" password="Password" emailornumber="Mobile number or email"></my-sessionform>\n\t\t <my-submitandterms btn_text="Continue" message="By using our services you agree to" btn_type="submit"></my-submitandterms>\n\t\t </section>\n\t\t <section id="extrainfo">\n\t\t <section id="extrainfo-content">\n\t\t <hr><p>New to this website</p><hr>\n\t\t </section>\n\t\t <button id="navigatetosignin">Create your account</button>\n\t\t </section>\n\t\t </section>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=Dg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-login",Lg);var Og=n(868);class Mg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t,e,n,i,r;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n\t\t\t\t${this}\n\t\t\t\t<section class="container">\n\t\t\t\t\t<my-banner section_title="My Lists"></my-banner>\n\t\t\t\t\t<button id="modal-button">Create new list</button>\n\t\t\t\t\t<my-modal-list id="open"></my-modal-list>\n\t\t\t\t\t<button id="favorites">Favorites</button>\n\t\t\t\t\t<section id="lists"></section>\n\t\t\t\t</section>\n\t\t\t`;const o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#modal-button"),c=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#open");c.style.display="none",null==o||o.addEventListener("click",(()=>{c.style.display="flex"}));const l=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#favorites");null==l||l.addEventListener("click",(()=>{a(fm("FAVORITES"))}));const h=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#lists");(s.usermovielists||[]).forEach((t=>{const e=document.createElement("button");e.textContent=t.name,e.style.backgroundImage=`url(${t.image})`;const n=e.dataset.id=t.id;e.addEventListener("click",(()=>{a({action:"SaveCurrentNewListName",payload:t.name}),a({action:"SaveCurrentNewListImage",payload:t.image}),a({action:"SaveCurrentNewListId",payload:n}),console.log("idlist",s.currentnewlistid),console.log("listname",s.currentnewlistname),console.log("listimage",s.currentnewlistimage),a(fm("LISTCONTENT"))})),null==h||h.appendChild(e)}));const u=this.ownerDocument.createElement("style");u.innerHTML=Og.A,null===(r=this.shadowRoot)||void 0===r||r.appendChild(u)}}}customElements.define("app-mylists",Mg);var Pg=n(375);class Fg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<my-banner section_title=${s.currentnewlistname} image=${s.currentnewlistimage}></my-banner>\n\t\t\t<my-addmovietolist></my-addmovietolist>\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=Pg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-newlist",Fg);var Ug=n(82);class Vg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML+="\n\t\t\t<custom-navbar><custom-navbar>\n\t\t\t",this.shadowRoot.innerHTML+="\n\t\t\t\t<my-profile></my-profile>\n\t\t\t");const e=this.ownerDocument.createElement("style");e.innerHTML=Ug.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),yield am(void 0,void 0,void 0,(function*(){const t=yield vd(Lu(lm,"users")),e=[];return t.forEach((t=>{const n=t.data();e.push(Object.assign({id:t.id},n))})),e}))}))}}customElements.define("app-profile",Vg);var jg=n(307);class $g extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var t,e,n;this.render();const i=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#loginpage");null==i||i.addEventListener("click",(()=>{a(fm("LOGIN"))}));const r=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("my-submitandterms");if(r){const t=null===(n=r.shadowRoot)||void 0===n?void 0:n.querySelector("#send");null==t||t.addEventListener("click",(()=>{a(fm("DASHBOARD"))}))}}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<body>\n\t\t\t<section>\n     <my-sessionform utitle="SIGN IN" email="Email" your_name="Your name" mobile_number="Mobile number" re_password="Re-enter password" password="Password" ></my-sessionform>\n\t\t <my-submitandterms btn_text="Create account" message="By creating an account, you agree to" btn_type="submit"></my-submitandterms>\n\t\t <hr>\n\t\t <p>Already have an account? <a id="loginpage">Log in</a></p>\n\t\t </section>\n\t\t</body>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=jg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-signin",$g);var zg=n(466);class Bg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<my-banner section_title="Favorites"></my-banner>\n\t\t\t<my-favoritemovies></my-favoritemovies>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=zg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-favorites",Bg);class qg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<my-banner section_title=${s.currentnewlistname} image=${s.currentnewlistimage}></my-banner>\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=Pg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-listcontent",qg);class Hg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),c(this)}connectedCallback(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){const t=yield ym();a(t);const e=yield wm("8Ff0fUFnkPYot7FEJt8u");a(e),console.log("favorites",s.favlist),this.render();const n=yield bm("8Ff0fUFnkPYot7FEJt8u");a(n),console.log("listas",s.usermovielists),this.render()}))}render(){var t,e,n,i,r,o,a,c,l,h;switch(this.shadowRoot&&(this.shadowRoot.innerHTML=""),s.screen){case"LOGIN":const s=this.ownerDocument.createElement("app-login");null===(t=this.shadowRoot)||void 0===t||t.appendChild(s);break;case"DASHBOARD":const u=this.ownerDocument.createElement("app-dashboard");null===(e=this.shadowRoot)||void 0===e||e.appendChild(u);break;case"SIGNIN":const d=this.ownerDocument.createElement("app-signin");null===(n=this.shadowRoot)||void 0===n||n.appendChild(d);break;case"CATEGORIES":const p=this.ownerDocument.createElement("app-categories");null===(i=this.shadowRoot)||void 0===i||i.appendChild(p);break;case"FILMPAGE":const f=this.ownerDocument.createElement("app-filmpage");null===(r=this.shadowRoot)||void 0===r||r.appendChild(f);break;case"MYLISTS":const m=this.ownerDocument.createElement("app-mylists");null===(o=this.shadowRoot)||void 0===o||o.appendChild(m);break;case"NEWLIST":const g=this.ownerDocument.createElement("app-newlist");null===(a=this.shadowRoot)||void 0===a||a.appendChild(g);break;case"FAVORITES":const v=this.ownerDocument.createElement("app-favorites");null===(c=this.shadowRoot)||void 0===c||c.appendChild(v);break;case"PROFILE":const y=this.ownerDocument.createElement("app-profile");null===(l=this.shadowRoot)||void 0===l||l.appendChild(y);break;case"LISTCONTENT":const w=this.ownerDocument.createElement("app-listcontent");null===(h=this.shadowRoot)||void 0===h||h.appendChild(w)}}}customElements.define("app-container",Hg)})()})();