/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={167:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"",""]);const a=o},925:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos para el componente de banner */\n:host {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tbackground-image: url('https://pbs.twimg.com/media/GJ331yEWQAAtUzN.jpg');\n\tbackground-size: cover;\n\tbackground-position: center top 30%;\n\tmargin: 0;\n\tpadding: 10%;\n\tcolor: white;\n\theight: 43vh;\n}\n\n/* Agregar un velo solo sobre la imagen de fondo */\n:host::before {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(30, 21, 22, 0.01);\n\tz-index: 1;\n}\n\nsection {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tposition: relative;\n\tz-index: 2;\n}\n\n/* Estilos para el componente personalizado de la barra de navegación */\ncustom-navbar {\n\twidth: 100%; /* Ocupar el 100% del banner */\n\tposition: absolute; /* Para posicionarlo */\n\ttop: 0; /* En la parte superior */\n\tz-index: 3; /* Z-index para estar por encima de otros elementos */\n}\n\nh1 {\n\twidth: 45%;\n\theight: auto; /* Cambia la altura a automática */\n\tmargin-top: 30%;\n\tmargin-bottom: 3vh; /* Espacio entre el mensaje y el botón */\n\tfont-size: 200%;\n\ttext-align: center; /* Centrar horizontalmente */\n\tfont-family: 'Domine', serif;\n}\n\nbutton {\n\twidth: 20%; /* Modifica el ancho del botón */\n\theight: 50px;\n\tbackground-color: rgba(251, 149, 60, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 10px;\n\tfont-size: 80%;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\nbutton:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n\tcursor: pointer;\n}\n\nbutton span {\n\tdisplay: inline-block;\n\twidth: 100%;\n\ttext-align: center;\n}\n\n/* Media queries para dispositivos móviles */\n@media screen and (max-width: 767px) {\n\t:host {\n\t\theight: auto; /* Altura automática para adaptarse a dispositivos móviles */\n\t}\n\n\th1 {\n\t\twidth: 80%;\n\t\tmargin-top: 40%;\n\t\tmargin-bottom: 3vh;\n\t\tfont-size: 6vw;\n\t}\n\n\tbutton {\n\t\twidth: 60%;\n\t\theight: 10vw;\n\t\tfont-size: 4vw;\n\t}\n}\n",""]);const a=o},682:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Reset de estilos */\n* {\n\tmargin: 0;\n\tpadding: 0;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\n/* Estilos generales de la barra de navegación */\nnav {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 3%;\n\tjustify-content: space-around;\n\talign-items: center;\n\tbackground: none;\n\tjustify-content: space-between; /* Alinear elementos al centro horizontalmente */\n}\n\n/* Estilos para la sección de búsqueda */\nnav .search-bar,\nnav .pages {\n\tflex: 1; /* Distribuir el espacio disponible */\n}\n\n/* Agrega un espacio del 5% entre .search-bar y .pages */\nnav .search-bar {\n\tmargin-right: 5%;\n}\n\n/* Ajustes adicionales para la barra de búsqueda */\n.search-bar {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\theight: 30px;\n\tbox-sizing: border-box;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tborder-radius: 5px;\n\tmax-width: 600px;\n}\n\n.search-bar input {\n\tflex: 1; /* Para que el input ocupe el espacio restante */\n\tpadding: 0 5px;\n\theight: 100%;\n\tborder: none;\n\toutline: none;\n\tbackground-color: transparent; /* Eliminar el color de fondo */\n\tcolor: white;\n}\n\n.icon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.icon img {\n\twidth: 20px;\n\tpadding: 0 10px;\n}\n\n/* Estilos para la sección de páginas */\n.pages {\n\tdisplay: flex;\n\tjustify-content: center; /* Centra los elementos horizontalmente */\n\tmargin-right: 0;\n}\n\n.pages a {\n\tmargin-right: 15%; /* Espacio entre los elementos */\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n\tcolor: white;\n\tfont-size: 14px;\n}\n\n.pages a:hover {\n\tcolor: rgba(251, 149, 60, 1);\n\tcursor: pointer;\n\ttransition: color 0.1s ease;\n}\n\n.pages {\n\tposition: relative;\n}\n\n/* Estilos para el menú desplegable */\n.pages .menu-desplegable {\n\tdisplay: none; /* controla que no se muestre */\n\tposition: absolute;\n\ttop: 100%;\n\tleft: 0;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tpadding: 10px;\n\tborder-radius: 5px;\n\tlist-style-type: none;\n}\n.pages .menu-desplegable a {\n\ttext-transform: none;\n\tdisplay: block;\n\tpadding: 5px 0;\n}\n.pages .menu-desplegable a:hover {\n\tcolor: rgba(233, 13, 90, 1);\n}\n\n/* controla que se muestre el menu desplegable */\na:focus + .menu-desplegable {\n\tdisplay: block;\n}\n\n/* media queries */\n@media screen and (max-width: 767px) {\n\tnav {\n\t\tflex-direction: row;\n\t\tpadding: 3%;\n\t}\n\n\tnav .search-bar {\n\t\tmargin-right: 10px;\n\t\tmargin-bottom: 0px;\n\t\twidth: 50%;\n\t\theight: 50%;\n\t}\n\n\t.icon {\n\t\twidth: 20%;\n\t\theight: 20%;\n\t}\n\t.pages a {\n\t\tmargin-right: 6px;\n\t\tfont-size: 10px;\n\t}\n}\n",""]);const a=o},679:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"button {\n\twidth: 20%; /* Modifica el ancho del botón */\n\theight: 50px;\n\tbackground-color: rgba(251, 149, 60, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 10px;\n\tfont-size: 80%;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\nbutton:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\nbutton span {\n\tdisplay: inline-block;\n\twidth: 100%;\n\ttext-align: center;\n}\n",""]);const a=o},191:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"",""]);const a=o},83:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"",""]);const a=o},909:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"",""]);const a=o},163:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"",""]);const a=o},931:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos globales del componente */\n* {\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\n/* Estilos para el contenedor de la tarjeta de película */\n.container {\n\tposition: relative;\n\tobject-fit: cover;\n\tdisplay: flex;\n\theight: 100%;\n\twidth: 100%;\n}\n\n/* Estilos para el póster/imagen principal de la película */\n.poster {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n/* Añade estilos para el contenido */\n.content {\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.6); /* Fondo semitransparente */\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-direction: column;\n\topacity: 0; /* Inicialmente oculto */\n\ttransition: opacity 0.6s; /* Transición suave al mostrar */\n\tobject-fit: cover;\n}\n\n.container:hover .content {\n\topacity: 1; /* Mostrar contenido al pasar el mouse por encima de .container */\n}\n\np {\n\tcolor: white;\n\tfont-size: 100%;\n}\n\n.content img,\n.content p {\n\tmargin: 5px; /* Ajusta el margen entre elementos */\n\ttext-align: center;\n}\n\n.content img {\n\twidth: 28%;\n\theight: auto;\n\tcursor: pointer; /* Cambia el cursor al pasar sobre el botón */\n}\n\nimg.details {\n\theight: auto;\n\twidth: 30%;\n}\n\n.link {\n\tdisplay: flex;\n\twidth: 100%; /* Ancho del 50% */\n\theight: 25%;\n\tjustify-content: center; /* Centra horizontalmente */\n\talign-items: center; /* Centra verticalmente */\n\tmargin: 5px;\n\tpadding: 0px;\n}\n\n.dislike,\n.like {\n\tdisplay: none; /* Inicialmente oculto */\n}\n\n@media screen and (max-width: 767px) {\n\t.content img,\n\t.content p {\n\t\tmargin: 3px;\n\t}\n\n\t.content img {\n\t\twidth: 35%;\n\t}\n\n\timg.details {\n\t\twidth: 50%;\n\t}\n\n\t.link {\n\t\twidth: 70%;\n\t}\n}\n",""]);const a=o},791:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"input {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-bottom: 0;\n\tborder: none;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #fff;\n\tborder-radius: 5px;\n\tbox-sizing: border-box; /* Modelo de caja */\n}\n\n::placeholder {\n\tcolor: rgba(30, 21, 22, 1);\n}\n\n#header .close {\n\tfloat: right; /* Se alinea a la derecha */\n\tcursor: pointer;\n}\n\nh1 {\n\tfont-size: 300%;\n\tmargin-top: 0;\n}\n",""]);const a=o},633:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"a {\n\tcolor: rgba(250, 149, 59, 1);\n}\n\nbutton {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-top: 20px;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tcursor: pointer; /* Cambio de cursor */\n\tfont-family: 'Noto Traditional Nushu', serif;\n\tfont-size: 110%;\n}\n\nbutton:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n",""]);const a=o},583:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"/* Estilos para el botón flotante de abrir el modal */\n#ButtonModal {\n\tposition: fixed;\n\tz-index: 1; /* Se coloca por encima de otros elementos */\n\tbottom: 20px;\n\tright: 20px;\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: white;\n\tfont-size: 35px;\n\twidth: 55px;\n\theight: 55px;\n\tborder-radius: 50%;\n\tborder: 0px;\n\tcursor: pointer;\n}\n\n/* Estilos para el botón de cerrar el modal */\n.modalContainer .close {\n\tfloat: right; /* Se alinea a la derecha */\n\tcursor: pointer;\n}\n\n::placeholder {\n\tcolor: rgba(30, 21, 22, 1);\n}\n/* Estilos del formulario dentro del modal */\n.my-form {\n\tposition: fixed; /* Se fija el formulario en una posición específica */\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%); /* Centrado horizontal y vertical */\n\tbackground-color: rgba(30, 21, 22, 1);\n\tz-index: 2; /* Colocado por encima del modal */\n\tpadding: 20px;\n\tbox-shadow: 0 0 20px #000000; /* Sombra */\n\tborder-radius: 2rem;\n\theight: 80vh; /* Altura del 80% de la ventana */\n\twidth: 50%; /* Ancho del 50% de la ventana */\n\toverflow-x: hidden; /* Oculta el desbordamiento horizontal */\n\toverflow-y: auto; /* Habilita el desplazamiento vertical */\n}\n\n/*oculta la scrollbar */\n.my-form::-webkit-scrollbar {\n\tdisplay: none;\n}\n\n.modalContainer {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 9999;\n}\n\n/* Crea el velo detras del modal*/\n.modal-overlay {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.7);\n\tz-index: -1;\n}\n\n/*Responsive */\n@media screen and (max-width: 767px) {\n\t#ButtonModal {\n\t\twidth: 60px;\n\t\theight: 60px;\n\t\tfont-size: 40px;\n\t}\n\n\t.modal-content {\n\t\tpadding: 10px;\n\t}\n\n\t.my-form {\n\t\tpadding: 10px;\n\t}\n\n\t.my-form input[type='text'],\n\t.my-form input[type='date'] {\n\t\tpadding: 8px;\n\t\tfont-size: 14px;\n\t}\n\n\t.my-form button {\n\t\tpadding: 8px;\n\t\tfont-size: 14px;\n\t}\n}\n\n/* Estilos del contenido del modal */\n.modal-content {\n\tcolor: #fff;\n\tpadding: 20px;\n\tborder-radius: 10px;\n\tposition: relative;\n\tz-index: 10000; /* Colocado por encima de todos los elementos */\n\toverflow: hidden; /* Oculta el desbordamiento */\n\tdisplay: flex;\n\tjustify-content: center; /* Centrado horizontal */\n\talign-items: center; /* Centrado vertical */\n\tfont-family: 'Cairo', sans-serif;\n\tfont-size: 80%;\n\theight: 80vh; /* Altura del 80% de la ventana */\n}\n\n.my-form label {\n\tcolor: #fff;\n}\n\n/* Estilos para los campos de entrada de texto y fecha */\n.my-form input[type='text'],\n.my-form input[type='date'] {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-bottom: 0;\n\tborder: none;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #fff;\n\tborder-radius: 5px;\n\tbox-sizing: border-box; /* Modelo de caja */\n}\n\n/* Estilos para los checkboxes */\n.my-form input[type='checkbox'] {\n\tmargin-right: 5px;\n}\n\n/* Estilos para el botón de submit */\n.my-form button {\n\twidth: 100%;\n\tpadding: 10px;\n\tmargin-top: 20px;\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tcursor: pointer; /* Cambio de cursor */\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\n/* Estilos cuando se pasa el cursor sobre el botón */\n.my-form button:hover {\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\n/* Estilos para los checkboxes de género */\n#checkboxes label {\n\tmargin-right: 10px;\n}\n\n#checkboxes {\n\tdisplay: grid; /* Se muestra como grid */\n\tgrid-template-rows: repeat(2, 1fr); /* Se repite la plantilla de filas */\n\tgrid-auto-flow: column; /* Se muestran en columnas */\n}\n\n/* Estilos para la imagen de cerrar el modal, el icono de x */\n.close img {\n\twidth: 70%;\n\theight: auto;\n\tcursor: pointer; /* Cambia el cursor al pasar sobre el botón */\n}\n",""]);const a=o},775:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"",""]);const a=o},213:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tpadding: 5%;\n}\n\n#cards {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: space-between;\n\tgap: 2%; /* Agregamos un espacio entre las columnas */\n}\n\nmovie-card {\n\twidth: calc((100% / 6) - 2%); /* Calculamos el ancho deseado considerando el espacio entre las columnas */\n\tmargin-bottom: 20px; /* Espacio entre las filas */\n\n\t/* Ajustes para pantallas de tamaño pequeño */\n\t@media (max-width: 576px) {\n\t\twidth: calc((100% / 2) - 2%); /* Ancho para mostrar dos columnas */\n\t\tmargin-bottom: 4%; /* Espacio máximo entre las filas */\n\t}\n}\n\nh1 {\n\ttext-transform: uppercase;\n\tcolor: white;\n\tfont-family: 'Cairo', sans-serif;\n\t@media (max-width: 576px) {\n\t\tfont-size: 5vw; /* Tamaño de fuente más grande para pantallas pequeñas */\n\t}\n}\n\na {\n\ttext-transform: uppercase;\n\ttext-decoration: none;\n}\n\nh1:hover {\n\tcolor: rgba(233, 13, 90, 1);\n}\n",""]);const a=o},9:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,":host {\n\tdisplay: block;\n\tbackground-color: rgba(30, 21, 22, 1);\n\tmargin: 0;\n\tpadding: 0;\n}\n",""]);const a=o},858:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(601),r=n.n(i),s=n(314),o=n.n(s),a=n(417),c=n.n(a),l=new URL(n(528),n.b),h=o()(r()),u=c()(l);h.push([t.id,`* {\n\tcolor: #fff;\n\tfont-family: 'Cairo', sans-serif;\n}\n\n#form {\n\tposition: fixed;\n\ttop: 40%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%); /* Centrado horizontal y vertical */\n\tbackground-color: rgba(30, 21, 22, 1);\n\tpadding: 3%;\n\tbox-shadow: 0 0 20px #000000; /* Sombra */\n\tborder-radius: 2rem;\n\theight: auto;\n\twidth: auto;\n\toverflow-x: hidden; /* Oculta el desbordamiento horizontal */\n\toverflow-y: auto; /* Habilita el desplazamiento vertical */\n\tcolor: #fff;\n\tfont-family: 'Cairo', sans-serif;\n}\n\na {\n\tcolor: rgba(250, 149, 59, 1);\n}\n\n#extrainfo {\n\tposition: fixed;\n\tbottom: 10%; /* Ajusta esta cantidad según el espacio que quieras entre #form y #extrainfo */\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\twidth: 100%;\n\ttext-align: center; /* Alinea el contenido al centro */\n}\n\n#extrainfo-content {\n\twidth: 100%;\n}\n\n#extrainfo-content hr {\n\tdisplay: inline-block;\n\twidth: 30%; /* Ajusta este valor según el ancho deseado */\n\tmargin: 0 10px; /* Espacio entre elementos */\n\tborder-top: 1px solid rgba(255, 255, 255, 0.5); /* Cambia el color y estilo según lo necesario */\n\tvertical-align: middle; /* Alinea verticalmente */\n}\n\n#extrainfo-content p {\n\tdisplay: inline-block;\n\tmargin: 0 10px; /* Espacio entre elementos */\n}\n\nbutton {\n\tdisplay: inline-block;\n\tbackground-color: rgba(233, 13, 90, 1);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 5px;\n\tpadding: 10px 20px;\n\tcursor: pointer;\n\tfont-size: 16px;\n\tmargin: 10px;\n\tfont-family: 'Noto Traditional Nushu', serif;\n}\n\nbutton:hover {\n\tbackground-color: rgba(250, 149, 59, 1);\n\tcolor: rgba(255, 255, 255, 1);\n}\n\n:host {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tbackground-image: url(${u});\n\tbackground-size: cover;\n\tbackground-position: center top 30%;\n\tmargin: 0;\n\tpadding: 10%;\n\tcolor: white;\n\theight: 100%;\n\tz-index: -1;\n}\n`,""]);const d=h},307:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(601),r=n.n(i),s=n(314),o=n.n(s),a=n(417),c=n.n(a),l=new URL(n(528),n.b),h=o()(r()),u=c()(l);h.push([t.id,`section {\n\tposition: fixed;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%); /* Centrado horizontal y vertical */\n\tbackground-color: rgba(30, 21, 22, 1);\n\tpadding: 3%;\n\tbox-shadow: 0 0 20px #000000; /* Sombra */\n\tborder-radius: 2rem;\n\theight: auto;\n\twidth: auto;\n\toverflow-x: hidden; /* Oculta el desbordamiento horizontal */\n\toverflow-y: auto; /* Habilita el desplazamiento vertical */\n\tcolor: #fff;\n\tfont-family: 'Cairo', sans-serif;\n\tz-index: 2;\n}\n\na {\n\tcolor: rgba(250, 149, 59, 1);\n\tcursor: pointer;\n}\n\n:host {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tbackground-image: url(${u});\n\tbackground-size: cover;\n\tbackground-position: center top 30%;\n\tmargin: 0;\n\tpadding: 10%;\n\tcolor: white;\n\theight: 100%;\n}\n`,""]);const d=h},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);i&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),e.push(h))}},e}},417:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{t.exports=function(t){return t[1]}},528:(t,e,n)=>{t.exports=n.p+"5fa3712916bc3774d951.png"}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,exports:{}};return t[i](s,s.exports,n),s.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,(()=>{let t={screen:"DASHBOARD"},e=[];const i=n=>{const i=JSON.parse(JSON.stringify(t));t=((t,e)=>{const{action:n,payload:i}=t;return"navigate"===n&&(e.screen=i),e})(n,i),e.forEach((t=>t.render()))},r=t=>({action:"navigate",payload:t});var s,o=n(925);!function(t){t.section_title="section_title",t.image="image",t.message="message",t.buttonlabel="buttonlabel"}(s||(s={}));class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({section_title:null,image:null,message:null,buttonlabel:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){let t="\n            <custom-navbar></custom-navbar>\n            <section>\n                <section>\n        ";this.section_title&&(t+=`<h1>${this.section_title}</h1>`),this.message&&(t+=`<h1>${this.message}</h1>`),t+="\n                </section>\n        ",this.buttonlabel&&(t+=`<button type="button" id="accountButton">${this.buttonlabel}</button>`),t+="\n            </section>\n        ",this.shadowRoot.innerHTML=t}const e=this.ownerDocument.createElement("style");e.innerHTML=o.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-banner",a);var c=n(682);class l extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){if(this.shadowRoot){this.shadowRoot.innerHTML='\n\t\t\t\t\t\t<nav>\n                <section class="search-bar">\n                    <section class="icon">\n                        <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4xIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTQxNiAyMDhjMCA0NS45LTE0LjkgODguMy00MCAxMjIuN0w1MDIuNiA0NTcuNGMxMi41IDEyLjUgMTIuNSAzMi44IDAgNDUuM3MtMzIuOCAxMi41LTQ1LjMgMEwzMzAuNyAzNzZjLTM0LjQgMjUuMi03Ni44IDQwLTEyMi43IDQwQzkzLjEgNDE2IDAgMzIyLjkgMCAyMDhTOTMuMSAwIDIwOCAwUzQxNiA5My4xIDQxNiAyMDh6TTIwOCAzNTJhMTQ0IDE0NCAwIDEgMCAwLTI4OCAxNDQgMTQ0IDAgMSAwIDAgMjg4eiIvPjwvc3ZnPg==" alt="search logo" draggable="false" />\n                    </section>\n\t\t\t\t\t\t\t\t\t\t<input class="barra" type="text" placeholder="Enter movie name" >\n                </section>\n\t\t\t\t\t\t\t\t\t\t<section class="pages">\n\t\t\t\t\t\t\t\t\t\t<a href="#">films</a> \x3c!-- aparece siempre de numero 1 --\x3e\n\t\t\t\t\t\t\t\t\t\t<ul class = "menu-desplegable">\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="#">Classics</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="">Popular</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="">On cinema</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="">Trending</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="">Action</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="">Sci-fi</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="">Romance</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="">Comedy</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="">Thriller</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="">Drama</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="">Animated</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="">Documental</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li><a href="">Psychological</a></li>\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\x3c!--<a href="#">lists</a>  aparece cuando se esta logueado de numero 2 --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!--<a href="#">profile</a>  aparece cuando se esta logueado de numero 3 --\x3e\n                    <a href="#" id="login">log in</a> \x3c!-- aparece cuando NO se esta logueado de numero 2 --\x3e\n                    <a href="#" id="signin">create account</a> \x3c!-- aparece cuando NO se esta logueado de numero 3 --\x3e\n\t\t\t\t\t\t\t\t\t\t</section>\n\n                </nav>\n            ';const t=document.createElement("style");t.innerHTML=c.A,this.shadowRoot.appendChild(t)}}}customElements.define("custom-navbar",l);var h,u=n(931);!function(t){t.image="image"}(h||(h={}));class d extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.isLiked=!0}static get observedAttributes(){return Object.keys({image:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n\t\t\t<div class="container">\n\t\t\t<img class="poster" src="${this.image}" >\n\t\t\t<section class="content">\n\t\t\t\t<a href="https://myflixerz.to/" class="link">\n\t\t\t\t\t<img class="details"src="https://img.icons8.com/ios-glyphs/30/FFFFFF/visible--v1.png" alt="visible--v1"/>\n\t\t\t\t</a>\n\t\t\t\t<p>View details</p>\n\t\t\t\t<img class="dislike"  src="https://img.icons8.com/ios/50/FFFFFF/like--v1.png" alt="like--v1"/>\n\t\t\t\t<img class="like"  src="https://img.icons8.com/ios-filled/50/FFFFFF/like--v1.png" alt="like--v1"/>\n\t\t\t\t<p>Like</p>\n\t\t\t\t</section>\n\t\t</div>\n\t\t\t`;const t=this.shadowRoot.querySelector(".like"),e=this.shadowRoot.querySelector(".dislike");t.addEventListener("click",(()=>{this.isLiked=!0,t.style.display="none",e.style.display="inline"})),e.addEventListener("click",(()=>{this.isLiked=!1,e.style.display="none",t.style.display="inline"})),t.style.display=this.isLiked?"none":"inline",e.style.display=this.isLiked?"inline":"none"}const e=this.ownerDocument.createElement("style");e.innerHTML=u.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("movie-card",d);const p=[{id:1,image:"https://pics.filmaffinity.com/Pearl-745024740-large.jpg",categories:["popular"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:2,image:"https://prod-ripcut-delivery.disney-plus.net/v1/variant/star/AC3DD9EACA5CD19BC1124D9FDD9E5C8947DEE0A71559CB21A3D3B49CE35DD990/scale?width=506&aspectRatio=2.00&format=jpeg",categories:["popular"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:3,image:"https://pics.filmaffinity.com/Pulp_Fiction-210382116-mmed.jpg",categories:["popular"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:4,image:"https://m.media-amazon.com/images/M/MV5BMmEzNTkxYjQtZTc0MC00YTVjLTg5ZTEtZWMwOWVlYzY0NWIwXkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_.jpg",categories:["popular"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:5,image:"https://m.media-amazon.com/images/M/MV5BNDQ1YmNmNDctMTZiZS00OGU3LWIyN2YtMWIwMmVhNDQ0MjY5XkEyXkFqcGdeQXVyMjQ0NzE0MQ@@._V1_.jpg",categories:["popular"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:6,image:"https://pics.filmaffinity.com/Paraasitos-406070218-large.jpg",categories:["popular"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:7,image:"https://tecolotito.elsiglodetorreon.com.mx/blogs/163304/2020/02/5e3cb25189f7a.jpg",categories:["popular"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:8,image:"https://pics.filmaffinity.com/Raequiem_por_un_sueano-174867645-large.jpg",categories:["popular"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:9,image:"https://m.media-amazon.com/images/S/pv-target-images/2d0c9e38968936e6711c7fb2bc7895b82d8bb9178b5a854e14dffa4b17b88487.jpg",categories:["popular"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:10,image:"https://upload.wikimedia.org/wikipedia/en/b/b8/Mysterious_skin.jpg",categories:["popular"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:11,image:"https://http2.mlstatic.com/D_NQ_NP_768674-MLU70355009620_072023-O.webp",categories:["popular"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:12,image:"https://m.media-amazon.com/images/I/91+6LJTjUYL._AC_UF894,1000_QL80_.jpg",categories:["popular"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:13,image:"https://images.cdn1.buscalibre.com/fit-in/360x360/c3/23/c3237208ecb81d0d0ea3a27ed387c923.jpg",categories:["cinema"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:14,image:"https://hips.hearstapps.com/hmg-prod/images/poster-vidas-pasadas-6540c5a06cbed.jpg?resize=980:*",categories:["cinema"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:15,image:"https://pics.filmaffinity.com/Old_Boy-588574486-large.jpg",categories:["cinema"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:16,image:"https://archivos-cms.cinecolombia.com/images/6/4/9/1/51946-1-esl-CO/e7f541ce3904-zoi_cineco_pstr-dskp_480x670.png",categories:["cinema"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:17,image:"https://cl2.buscafs.com/www.tomatazos.com/public/uploads/images/424439/424439.jpg",categories:["cinema"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:18,image:"https://www.procinal.com/uploads/PELICULAS/Img_movies/Img_360x500/poster-anatomia-de-una-caida.jpg",categories:["cinema"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:19,image:"https://m.media-amazon.com/images/S/pv-target-images/249b60dcd65e4ba17882d43310dcaa8f30b1840ea7bc2d7e0089e5a5398aa55f.jpg",categories:["trending"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:20,image:"https://m.media-amazon.com/images/S/pv-target-images/b8accbc09fd8615ddb6fa39e8eb76cbf86f03e4bde3a4ceb4629f681083f5d39.jpg  ",categories:["trending"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:21,image:"https://play-lh.googleusercontent.com/M18KWgpMAQUUzF2nIcGkMOe08O5jvT4z4mhn_LBVHrmkDWhy9poipiQTwdCxEtl6FChj9A",categories:["trending"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:22,image:"https://www.atomcomics.pl/environment/cache/images/0_0_productGfx_234928/c15ba70f8752a972cf60dea25c6c325b.jpg",categories:["trending"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:23,image:"https://m.media-amazon.com/images/M/MV5BNWI5ODc4MTAtN2U2NC00ZDk3LWE3NjAtNjIyODE2YTlhYjYwXkEyXkFqcGdeQXVyOTA3ODI3NDA@._V1_.jpg",categories:["trending"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:24,image:"https://pics.filmaffinity.com/Juno-964259078-large.jpg",categories:["trending"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:25,image:"https://es.web.img3.acsta.net/pictures/14/04/15/10/46/568345.jpg",categories:["classics"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:26,image:"https://images.cdn1.buscalibre.com/fit-in/360x360/81/22/812252fdfa443853ac4f0c38d89a9690.jpg",categories:["classics"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:27,image:"https://musicart.xboxlive.com/7/2fb15000-0000-0000-0000-000000000002/504/image.jpg?w=1920&h=1080",categories:["classics"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:28,image:"https://es.web.img3.acsta.net/medias/nmedia/18/92/13/82/20182449.jpg",categories:["classics"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:29,image:"https://es.web.img3.acsta.net/c_310_420/pictures/14/05/27/12/07/438875.jpg",categories:["classics"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:30,image:"https://es.web.img2.acsta.net/pictures/14/04/01/10/42/226928.jpg",categories:["classics"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:31,image:"https://pics.filmaffinity.com/El_gran_Gatsby-737648170-large.jpg",categories:["classics"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:32,image:"https://mx.web.img2.acsta.net/c_310_420/medias/nmedia/18/67/61/01/20070878.jpg",categories:["classics"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:33,image:"https://pics.filmaffinity.com/Shrek-903764423-large.jpg",categories:["classics"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:34,image:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhDCocdzcNgJ76xzG8WDxq8IcVeHL_8JBaUCOtps6mCB0htT-wyulkV5HveyvAZCP8QtyZ7lhI7uLQpa7Qqt55rLlF3StkAnn5SgFC1FJEs79sCbIDBBOHNWbvU75k5vsS8-K4GSQkKuDQk/s1600/Intocables.jpg",categories:["classics"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:35,image:"https://www.ulima.edu.pe/sites/default/files/styles/225x333/public/movie/image/leon-the-professional-md-web.jpg?itok=0g3NGZTq",categories:["classics"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""},{id:36,image:"https://pics.filmaffinity.com/Juno-964259078-large.jpg",categories:["classics"],title:"",director:"",release_date:"",cast:"",crew:"",image_sec:""}];var f,m=n(213);!function(t){t.name="name",t.category="category",t.link="link"}(f||(f={}));class g extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({name:null,category:null,link:null})}connectedCallback(){this.render()}filterData(t){this.moviesData=p.filter((e=>e.categories.includes(t)))}attributeChangedCallback(t,e,n){this[t]=n,this.filterData(this.category),this.render()}render(){if(this.shadowRoot){const t=document.createElement("style");t.textContent=m.A;const e=null!=this.moviesData?this.moviesData:[];console.log(e),this.shadowRoot.innerHTML=`\n                <a href="${this.link}"><h1>${this.name}</h1></a>\n\t\t\t\t<section id="cards">\n\t\t\t\t\t${e.map((t=>`\n\t\t\t\t\t\t<movie-card image="${t.image}"></movie-card>\n\t\t\t\t\t`)).join("")}\n\t\t\t\t</section>\n\n            `,this.shadowRoot.appendChild(t)}}}customElements.define("category-section",g);var v=n(583);const y=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=r>>2,h=(3&r)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(u=64)),i.push(n[l],n[h],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(y(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const r=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==r||null==s||null==o||null==a)throw new w;const c=r<<2|s>>4;if(i.push(c),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class w extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E=function(t){return function(t){const e=y(t);return b.encodeByteArray(e,!0)}(t).replace(/\./g,"")},_=function(t){try{return b.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},I=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&_(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},T=t=>{var e,n;return null===(n=null===(e=I())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},S=()=>{var t;return null===(t=I())||void 0===t?void 0:t.config},C=t=>{var e;return null===(e=I())||void 0===e?void 0:e[`_${t}`]};class k{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function A(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function R(){try{return"object"==typeof indexedDB}catch(t){return!1}}class N extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D.prototype.create)}}class D{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(x,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new N(i,o,n)}}const x=/\{\$([^}]+)}/g;function O(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(L(n)&&L(s)){if(!O(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function L(t){return null!==t&&"object"==typeof t}function P(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function M(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function U(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class F{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=V),void 0===i.error&&(i.error=V),void 0===i.complete&&(i.complete=V);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function V(){}function j(t){return t&&t._delegate?t._delegate:t}class B{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const z="[DEFAULT]";class H{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new k;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:z})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=z){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=z){return this.instances.has(t)}getOptions(t=z){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===z?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=z){return this.component?this.component.multipleInstances?t:z:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ${constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new H(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const q=[];var G;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(G||(G={}));const K={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},W=G.INFO,Q={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},X=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=Q[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class J{constructor(t){this.name=t,this._logLevel=W,this._logHandler=X,this._userLogHandler=null,q.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in G))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?K[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...t),this._logHandler(this,G.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...t),this._logHandler(this,G.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,G.INFO,...t),this._logHandler(this,G.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,G.WARN,...t),this._logHandler(this,G.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...t),this._logHandler(this,G.ERROR,...t)}}const Y=(t,e)=>e.some((e=>t instanceof e));let Z,tt;const et=new WeakMap,nt=new WeakMap,it=new WeakMap,rt=new WeakMap,st=new WeakMap;let ot={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return nt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||it.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ct(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function at(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(tt||(tt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(lt(this),t),ct(et.get(this))}:function(...t){return ct(e.apply(lt(this),t))}:function(t,...n){const i=e.call(lt(this),t,...n);return it.set(i,t.sort?t.sort():[t]),ct(i)}:(t instanceof IDBTransaction&&function(t){if(nt.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));nt.set(t,e)}(t),Y(t,Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,ot):t);var e}function ct(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(ct(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&et.set(e,t)})).catch((()=>{})),st.set(e,t),e}(t);if(rt.has(t))return rt.get(t);const e=at(t);return e!==t&&(rt.set(t,e),st.set(e,t)),e}const lt=t=>st.get(t),ht=["get","getKey","getAll","getAllKeys","count"],ut=["put","add","delete","clear"],dt=new Map;function pt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(dt.get(e))return dt.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=ut.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!ht.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return dt.set(e,s),s}var ft;ft=ot,ot={...ft,get:(t,e,n)=>pt(t,e)||ft.get(t,e,n),has:(t,e)=>!!pt(t,e)||ft.has(t,e)};class mt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const gt="@firebase/app",vt="0.9.26",yt=new J("@firebase/app"),bt="[DEFAULT]",wt={[gt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Et=new Map,_t=new Map;function It(t,e){try{t.container.addComponent(e)}catch(n){yt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tt(t){const e=t.name;if(_t.has(e))return yt.debug(`There were multiple attempts to register component ${e}.`),!1;_t.set(e,t);for(const e of Et.values())It(e,t);return!0}function St(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Ct=new D("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new B("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ct.create("app-deleted",{appName:this._name})}}const At="10.7.2";function Rt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:bt,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw Ct.create("bad-app-name",{appName:String(r)});if(n||(n=S()),!n)throw Ct.create("no-options");const s=Et.get(r);if(s){if(O(n,s.options)&&O(i,s.config))return s;throw Ct.create("duplicate-app",{appName:r})}const o=new $(r);for(const t of _t.values())o.addComponent(t);const a=new kt(n,i,o);return Et.set(r,a),a}function Nt(t=bt){const e=Et.get(t);if(!e&&t===bt&&S())return Rt();if(!e)throw Ct.create("no-app",{appName:t});return e}function Dt(t,e,n){var i;let r=null!==(i=wt[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void yt.warn(t.join(" "))}Tt(new B(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const xt="firebase-heartbeat-database",Ot=1,Lt="firebase-heartbeat-store";let Pt=null;function Mt(){return Pt||(Pt=function(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=ct(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(ct(o.result),t.oldVersion,t.newVersion,ct(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(xt,Ot,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Lt)}catch(t){console.warn(t)}}}).catch((t=>{throw Ct.create("idb-open",{originalErrorMessage:t.message})}))),Pt}async function Ut(t,e){try{const n=(await Mt()).transaction(Lt,"readwrite"),i=n.objectStore(Lt);await i.put(e,Ft(t)),await n.done}catch(t){if(t instanceof N)yt.warn(t.message);else{const e=Ct.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});yt.warn(e.message)}}}function Ft(t){return`${t.name}!${t.options.appId}`}class Vt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Bt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=jt();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=jt(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),zt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),zt(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=E(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function jt(){return(new Date).toISOString().substring(0,10)}class Bt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!R()&&new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await Mt();return await e.transaction(Lt).objectStore(Lt).get(Ft(t))}catch(t){if(t instanceof N)yt.warn(t.message);else{const e=Ct.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});yt.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ut(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ut(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function zt(t){return E(JSON.stringify({version:2,heartbeats:t})).length}Tt(new B("platform-logger",(t=>new mt(t)),"PRIVATE")),Tt(new B("heartbeat",(t=>new Vt(t)),"PRIVATE")),Dt(gt,vt,""),Dt(gt,vt,"esm2017"),Dt("fire-js",""),Dt("firebase","10.7.2","app");var Ht,$t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},qt={},Gt=Gt||{},Kt=$t||self;function Wt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Qt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Xt="closure_uid_"+(1e9*Math.random()>>>0),Jt=0;function Yt(t,e,n){return t.call.apply(t.bind,arguments)}function Zt(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function te(t,e,n){return(te=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yt:Zt).apply(null,arguments)}function ee(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ne(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function ie(){this.s=this.s,this.o=this.o}ie.prototype.s=!1,ie.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Xt)&&t[Xt]||(t[Xt]=++Jt))},ie.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const re=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function se(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function oe(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(Wt(n)){const e=t.length||0,i=n.length||0;t.length=e+i;for(let r=0;r<i;r++)t[e+r]=n[r]}else t.push(n)}}function ae(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!Kt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};Kt.addEventListener("test",t,e),Kt.removeEventListener("test",t,e)}catch(t){}return t}();function le(t){return/^[\s\xa0]*$/.test(t)}function he(){var t=Kt.navigator;return t&&(t=t.userAgent)?t:""}function ue(t){return-1!=he().indexOf(t)}function de(t){return de[" "](t),t}de[" "]=function(){};var pe,fe,me,ge=ue("Opera"),ve=ue("Trident")||ue("MSIE"),ye=ue("Edge"),be=ye||ve,we=ue("Gecko")&&!(-1!=he().toLowerCase().indexOf("webkit")&&!ue("Edge"))&&!(ue("Trident")||ue("MSIE"))&&!ue("Edge"),Ee=-1!=he().toLowerCase().indexOf("webkit")&&!ue("Edge");function _e(){var t=Kt.document;return t?t.documentMode:void 0}t:{var Ie="",Te=(fe=he(),we?/rv:([^\);]+)(\)|;)/.exec(fe):ye?/Edge\/([\d\.]+)/.exec(fe):ve?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(fe):Ee?/WebKit\/(\S+)/.exec(fe):ge?/(?:Version)[ \/]?(\S+)/.exec(fe):void 0);if(Te&&(Ie=Te?Te[1]:""),ve){var Se=_e();if(null!=Se&&Se>parseFloat(Ie)){pe=String(Se);break t}}pe=Ie}Kt.document&&ve?me=_e()||parseInt(pe,10)||void 0:me=void 0;var Ce=me;function ke(t,e){if(ae.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(we){t:{try{de(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ae[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ke.$.h.call(this)}}ne(ke,ae);var Ae={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Re="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function De(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++Ne,this.fa=this.ia=!1}function xe(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Oe(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function Le(t){const e={};for(const n in t)e[n]=t[n];return e}const Pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Me(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<Pe.length;e++)n=Pe[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Ue(t){this.src=t,this.g={},this.h=0}function Fe(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=re(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(xe(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ve(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}Ue.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Ve(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new De(e,this.src,s,!!i,r)).ia=n,t.push(e)),e};var je="closure_lm_"+(1e6*Math.random()|0),Be={};function ze(t,e,n,i,r){if(i&&i.once)return $e(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ze(t,e[s],n,i,r);return null}return n=Je(n),t&&t[Re]?t.O(e,n,Qt(i)?!!i.capture:!!i,r):He(t,e,n,!1,i,r)}function He(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=Qt(r)?!!r.capture:!!r,a=Qe(t);if(a||(t[je]=a=new Ue(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){const t=We;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)ce||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Ke(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function $e(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)$e(t,e[s],n,i,r);return null}return n=Je(n),t&&t[Re]?t.P(e,n,Qt(i)?!!i.capture:!!i,r):He(t,e,n,!0,i,r)}function qe(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)qe(t,e[s],n,i,r);else i=Qt(i)?!!i.capture:!!i,n=Je(n),t&&t[Re]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Ve(s=t.g[e],n,i,r))&&(xe(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Qe(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ve(e,n,i,r)),(n=-1<t?e[t]:null)&&Ge(n))}function Ge(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Re])Fe(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Ke(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Qe(e))?(Fe(n,t),0==n.h&&(n.src=null,e[je]=null)):xe(t)}}}function Ke(t){return t in Be?Be[t]:Be[t]="on"+t}function We(t,e){if(t.fa)t=!0;else{e=new ke(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Ge(t),t=n.call(i,e)}return t}function Qe(t){return(t=t[je])instanceof Ue?t:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Je(t){return"function"==typeof t?t:(t[Xe]||(t[Xe]=function(e){return t.handleEvent(e)}),t[Xe])}function Ye(){ie.call(this),this.i=new Ue(this),this.S=this,this.J=null}function Ze(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"==typeof e)e=new ae(e,t);else if(e instanceof ae)e.target=e.target||t;else{var r=e;Me(e=new ae(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=tn(o,i,!0,e)&&r}if(r=tn(o=e.g=t,i,!0,e)&&r,r=tn(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=tn(o=e.g=n[s],i,!1,e)&&r}function tn(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Fe(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}ne(Ye,ie),Ye.prototype[Re]=!0,Ye.prototype.removeEventListener=function(t,e,n,i){qe(this,t,e,n,i)},Ye.prototype.N=function(){if(Ye.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)xe(n[i]);delete e.g[t],e.h--}}this.J=null},Ye.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Ye.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var en=Kt.JSON.stringify;function nn(){var t=hn;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var rn=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new sn),(t=>t.reset()));class sn{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function on(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function an(t){Kt.setTimeout((()=>{throw t}),0)}let cn,ln=!1,hn=new class{constructor(){this.h=this.g=null}add(t,e){const n=rn.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},un=()=>{const t=Kt.Promise.resolve(void 0);cn=()=>{t.then(dn)}};var dn=()=>{for(var t;t=nn();){try{t.h.call(t.g)}catch(t){an(t)}var e=rn;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ln=!1};function pn(t,e){Ye.call(this),this.h=t||1,this.g=e||Kt,this.j=te(this.qb,this),this.l=Date.now()}function fn(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function mn(t,e,n){if("function"==typeof t)n&&(t=te(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=te(t.handleEvent,t)}return 2147483647<Number(e)?-1:Kt.setTimeout(t,e||0)}function gn(t){t.g=mn((()=>{t.g=null,t.i&&(t.i=!1,gn(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}ne(pn,Ye),(Ht=pn.prototype).ga=!1,Ht.T=null,Ht.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ze(this,"tick"),this.ga&&(fn(this),this.start()))}},Ht.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ht.N=function(){pn.$.N.call(this),fn(this),delete this.g};class vn extends ie{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:gn(this)}N(){super.N(),this.g&&(Kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(t){ie.call(this),this.h=t,this.g={}}ne(yn,ie);var bn=[];function wn(t,e,n,i){Array.isArray(n)||(n&&(bn[0]=n.toString()),n=bn);for(var r=0;r<n.length;r++){var s=ze(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function En(t){Oe(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Ge(t)}),t),t.g={}}function _n(){this.g=!0}function In(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return en(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}yn.prototype.N=function(){yn.$.N.call(this),En(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_n.prototype.Ea=function(){this.g=!1},_n.prototype.info=function(){};var Tn={},Sn=null;function Cn(){return Sn=Sn||new Ye}function kn(t){ae.call(this,Tn.Ta,t)}function An(t){const e=Cn();Ze(e,new kn(e))}function Rn(t,e){ae.call(this,Tn.STAT_EVENT,t),this.stat=e}function Nn(t){const e=Cn();Ze(e,new Rn(e,t))}function Dn(t,e){ae.call(this,Tn.Ua,t),this.size=e}function xn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Kt.setTimeout((function(){t()}),e)}Tn.Ta="serverreachability",ne(kn,ae),Tn.STAT_EVENT="statevent",ne(Rn,ae),Tn.Ua="timingevent",ne(Dn,ae);var On={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ln={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Pn(){}function Mn(t){return t.h||(t.h=t.i())}function Un(){}Pn.prototype.h=null;var Fn,Vn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jn(){ae.call(this,"d")}function Bn(){ae.call(this,"c")}function zn(){}function Hn(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new yn(this),this.P=qn,t=be?125:void 0,this.V=new pn(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new $n}function $n(){this.i=null,this.g="",this.h=!1}ne(jn,ae),ne(Bn,ae),ne(zn,Pn),zn.prototype.g=function(){return new XMLHttpRequest},zn.prototype.i=function(){return{}},Fn=new zn;var qn=45e3,Gn={},Kn={};function Wn(t,e,n){t.L=1,t.A=pi(ci(e)),t.u=n,t.S=!0,Qn(t,null)}function Qn(t,e){t.G=Date.now(),Zn(t),t.B=ci(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),Ci(n.i,"t",i),t.o=0,n=t.l.J,t.h=new $n,t.g=Cr(t.l,n?e:null,!t.u),0<t.O&&(t.M=new vn(te(t.Pa,t,t.g),t.O)),wn(t.U,t.g,"readystatechange",t.nb),e=t.I?Le(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),An(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var h=l[0];l=l[1];var u=h.split("_");o=2<=u.length&&"type"==u[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function Xn(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function Jn(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=Yn(t,n),i==Kn){4==e&&(t.s=4,Nn(14),r=!1),In(t.j,t.m,null,"[Incomplete Response]");break}if(i==Gn){t.s=4,Nn(15),In(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}In(t.j,t.m,i,null),ri(t,i)}Xn(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Nn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),yr(e),e.M=!0,Nn(11))):(In(t.j,t.m,n,"[Invalid Chunked Response]"),ii(t),ni(t))}function Yn(t,e){var n=t.o,i=e.indexOf("\n",n);return-1==i?Kn:(n=Number(e.substring(n,i)),isNaN(n)?Gn:(i+=1)+n>e.length?Kn:(e=e.slice(i,i+n),t.o=i+n,e))}function Zn(t){t.Y=Date.now()+t.P,ti(t,t.P)}function ti(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=xn(te(t.lb,t),e)}function ei(t){t.C&&(Kt.clearTimeout(t.C),t.C=null)}function ni(t){0==t.l.H||t.J||Er(t.l,t)}function ii(t){ei(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,fn(t.V),En(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ri(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Oi(n.i,t)))if(!t.K&&Oi(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;wr(n),hr(n)}vr(n),Nn(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=xn(te(n.ib,n),6e3));if(1>=xi(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else Ir(n,11)}else if((t.K||n.g==t)&&wr(n),!le(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const e=l[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=l[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Li(s,s.h),s.h=null))}if(i.F){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,di(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((i=n).wa=Sr(i,i.J?i.pa:null,i.Y),o.K){Pi(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(ei(a),Zn(a)),i.g=o}else gr(i);0<n.j.length&&dr(n)}else"stop"!=l[0]&&"close"!=l[0]||Ir(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Ir(n,7):lr(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}An()}catch(t){}}function si(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Wt(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(Wt(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Wt(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(Ht=Hn.prototype).setTimeout=function(t){this.P=t},Ht.nb=function(t){t=t.target;const e=this.M;e&&3==ir(t)?e.l():this.Pa(t)},Ht.Pa=function(t){try{if(t==this.g)t:{const h=ir(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||be||this.g&&(this.h.h||this.g.ja()||rr(this.g)))){this.J||4!=h||7==e||An(),ei(this);var n=this.g.da();this.ca=n;e:if(Xn(this)){var i=rr(this.g);t="";var r=i.length,s=4==ir(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ii(this),ni(this);var o="";break e}this.h.i=new Kt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!le(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.s=3,Nn(12),ii(this),ni(this);break t}In(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ri(this,n)}this.S?(Jn(this,h,o),be&&this.i&&3==h&&(wn(this.U,this.V,"tick",this.mb),this.V.start())):(In(this.j,this.m,o,null),ri(this,o)),4==h&&ii(this),this.i&&!this.J&&(4==h?Er(this.l,this):(this.i=!1,Zn(this)))}else(function(t){const e={};t=(t.g&&2<=ir(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(le(t[i]))continue;var n=on(t[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Nn(12)):(this.s=0,Nn(13)),ii(this),ni(this)}}}catch(t){}},Ht.mb=function(){if(this.g){var t=ir(this.g),e=this.g.ja();this.o<e.length&&(ei(this),Jn(this,t,e),this.i&&4!=t&&Zn(this))}},Ht.cancel=function(){this.J=!0,ii(this)},Ht.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(An(),Nn(17)),ii(this),this.s=2,ni(this)):ti(this,this.Y-t)};var oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ai(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ai){this.h=t.h,li(this,t.j),this.s=t.s,this.g=t.g,hi(this,t.m),this.l=t.l;var e=t.i,n=new _i;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ui(this,n),this.o=t.o}else t&&(e=String(t).match(oi))?(this.h=!1,li(this,e[1]||"",!0),this.s=fi(e[2]||""),this.g=fi(e[3]||"",!0),hi(this,e[4]),this.l=fi(e[5]||"",!0),ui(this,e[6]||"",!0),this.o=fi(e[7]||"")):(this.h=!1,this.i=new _i(null,this.h))}function ci(t){return new ai(t)}function li(t,e,n){t.j=n?fi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function hi(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ui(t,e,n){e instanceof _i?(t.i=e,function(t,e){e&&!t.j&&(Ii(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ti(this,e),Ci(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=mi(e,wi)),t.i=new _i(e,t.h))}function di(t,e,n){t.i.set(e,n)}function pi(t){return di(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function fi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function mi(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,gi),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function gi(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ai.prototype.toString=function(){var t=[],e=this.j;e&&t.push(mi(e,vi,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(mi(e,vi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(mi(n,"/"==n.charAt(0)?bi:yi,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",mi(n,Ei)),t.join("")};var vi=/[#\/\?@]/g,yi=/[#\?:]/g,bi=/[#\?]/g,wi=/[#\?@]/g,Ei=/#/g;function _i(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ii(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ti(t,e){Ii(t),e=ki(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Si(t,e){return Ii(t),e=ki(t,e),t.g.has(e)}function Ci(t,e,n){Ti(t,e),0<n.length&&(t.i=null,t.g.set(ki(t,e),se(n)),t.h+=n.length)}function ki(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Ht=_i.prototype).add=function(t,e){Ii(this),this.i=null,t=ki(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Ht.forEach=function(t,e){Ii(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},Ht.ta=function(){Ii(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},Ht.Z=function(t){Ii(this);let e=[];if("string"==typeof t)Si(this,t)&&(e=e.concat(this.g.get(ki(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Ht.set=function(t,e){return Ii(this),this.i=null,Si(this,t=ki(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ht.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Ht.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var Ai=class{constructor(t,e){this.g=t,this.map=e}};function Ri(t){this.l=t||Ni,t=Kt.PerformanceNavigationTiming?0<(t=Kt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Kt.g&&Kt.g.Ka&&Kt.g.Ka()&&Kt.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ni=10;function Di(t){return!!t.h||!!t.g&&t.g.size>=t.j}function xi(t){return t.h?1:t.g?t.g.size:0}function Oi(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Li(t,e){t.g?t.g.add(e):t.h=e}function Pi(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Mi(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return se(t.i)}Ri.prototype.cancel=function(){if(this.i=Mi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Ui=class{stringify(t){return Kt.JSON.stringify(t,void 0)}parse(t){return Kt.JSON.parse(t,void 0)}};function Fi(){this.g=new Ui}function Vi(t,e,n){const i=n||"";try{si(t,(function(t,n){let r=t;Qt(t)&&(r=en(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function ji(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function Bi(t){this.l=t.ec||null,this.j=t.ob||!1}function zi(t,e){Ye.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Hi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ne(Bi,Pn),Bi.prototype.g=function(){return new zi(this.l,this.j)},Bi.prototype.i=function(t){return function(){return t}}({}),ne(zi,Ye);var Hi=0;function $i(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function qi(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Gi(t)}function Gi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ht=zi.prototype).open=function(t,e){if(this.readyState!=Hi)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Gi(this)},Ht.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Kt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ht.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qi(this)),this.readyState=Hi},Ht.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Gi(this)),this.g&&(this.readyState=3,Gi(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Kt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$i(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Ht.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?qi(this):Gi(this),3==this.readyState&&$i(this)}},Ht.Za=function(t){this.g&&(this.response=this.responseText=t,qi(this))},Ht.Ya=function(t){this.g&&(this.response=t,qi(this))},Ht.ka=function(){this.g&&qi(this)},Ht.setRequestHeader=function(t,e){this.v.append(t,e)},Ht.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ht.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Ki=Kt.JSON.parse;function Wi(t){Ye.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Qi,this.L=this.M=!1}ne(Wi,Ye);var Qi="",Xi=/^https?$/i,Ji=["POST","PUT"];function Yi(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Zi(t),er(t)}function Zi(t){t.F||(t.F=!0,Ze(t,"complete"),Ze(t,"error"))}function tr(t){if(t.h&&void 0!==Gt&&(!t.C[1]||4!=ir(t)||2!=t.da()))if(t.v&&4==ir(t))mn(t.La,0,t);else if(Ze(t,"readystatechange"),4==ir(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===o){var r=String(t.I).match(oi)[1]||null;!r&&Kt.self&&Kt.self.location&&(r=Kt.self.location.protocol.slice(0,-1)),i=!Xi.test(r?r.toLowerCase():"")}n=i}if(n)Ze(t,"complete"),Ze(t,"success");else{t.m=6;try{var s=2<ir(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",Zi(t)}}finally{er(t)}}}function er(t,e){if(t.g){nr(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ze(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function nr(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Kt.clearTimeout(t.A),t.A=null)}function ir(t){return t.g?t.g.readyState:0}function rr(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Qi:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function sr(t){let e="";return Oe(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function or(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=sr(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):di(t,e,n))}function ar(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function cr(t){this.Ga=0,this.j=[],this.l=new _n,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ar("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ar("baseRetryDelayMs",5e3,t),this.hb=ar("retryDelaySeedMs",1e4,t),this.eb=ar("forwardChannelMaxRetries",2,t),this.xa=ar("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Ri(t&&t.concurrentRequestLimit),this.Ja=new Fi,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function lr(t){if(ur(t),3==t.H){var e=t.W++,n=ci(t.I);if(di(n,"SID",t.K),di(n,"RID",e),di(n,"TYPE","terminate"),fr(t,n),(e=new Hn(t,t.l,e)).L=2,e.A=pi(ci(n)),n=!1,Kt.navigator&&Kt.navigator.sendBeacon)try{n=Kt.navigator.sendBeacon(e.A.toString(),"")}catch(t){}!n&&Kt.Image&&((new Image).src=e.A,n=!0),n||(e.g=Cr(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Zn(e)}Tr(t)}function hr(t){t.g&&(yr(t),t.g.cancel(),t.g=null)}function ur(t){hr(t),t.u&&(Kt.clearTimeout(t.u),t.u=null),wr(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Kt.clearTimeout(t.m),t.m=null)}function dr(t){if(!Di(t.i)&&!t.m){t.m=!0;var e=t.Na;cn||un(),ln||(cn(),ln=!0),hn.add(e,t),t.C=0}}function pr(t,e){var n;n=e?e.m:t.W++;const i=ci(t.I);di(i,"SID",t.K),di(i,"RID",n),di(i,"AID",t.V),fr(t,i),t.o&&t.s&&or(i,t.o,t.s),n=new Hn(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=mr(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Li(t.i,n),Wn(n,i,e)}function fr(t,e){t.na&&Oe(t.na,(function(t,n){di(e,n,t)})),t.h&&si({},(function(t,n){di(e,n,t)}))}function mr(t,e,n){n=Math.min(t.j.length,n);var i=t.h?te(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=e,0>n)e=Math.max(0,r[o].g-100),s=!1;else try{Vi(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function gr(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;cn||un(),ln||(cn(),ln=!0),hn.add(e,t),t.A=0}}function vr(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=xn(te(t.Ma,t),_r(t,t.A)),t.A++,0))}function yr(t){null!=t.B&&(Kt.clearTimeout(t.B),t.B=null)}function br(t){t.g=new Hn(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=ci(t.wa);di(e,"RID","rpc"),di(e,"SID",t.K),di(e,"AID",t.V),di(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&di(e,"TO",t.qa),di(e,"TYPE","xmlhttp"),fr(t,e),t.o&&t.s&&or(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=pi(ci(e)),n.u=null,n.S=!0,Qn(n,t)}function wr(t){null!=t.v&&(Kt.clearTimeout(t.v),t.v=null)}function Er(t,e){var n=null;if(t.g==e){wr(t),yr(t),t.g=null;var i=2}else{if(!Oi(t.i,e))return;n=e.F,Pi(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;Ze(i=Cn(),new Dn(i,n)),dr(t)}else gr(t);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function(t,e){return!(xi(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=xn(te(t.Na,t,e),_r(t,t.C)),t.C++,0)))}(t,e)||2==i&&vr(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Ir(t,5);break;case 4:Ir(t,10);break;case 3:Ir(t,6);break;default:Ir(t,2)}}function _r(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ir(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=te(t.pb,t);n||(n=new ai("//www.google.com/images/cleardot.gif"),Kt.location&&"http"==Kt.location.protocol||li(n,"https"),pi(n)),function(t,e){const n=new _n;if(Kt.Image){const i=new Image;i.onload=ee(ji,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ee(ji,n,i,"TestLoadImage: error",!1,e),i.onabort=ee(ji,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ee(ji,n,i,"TestLoadImage: timeout",!1,e),Kt.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else Nn(2);t.H=0,t.h&&t.h.za(e),Tr(t),ur(t)}function Tr(t){if(t.H=0,t.ma=[],t.h){const e=Mi(t.i);0==e.length&&0==t.j.length||(oe(t.ma,e),oe(t.ma,t.j),t.i.i.length=0,se(t.j),t.j.length=0),t.h.ya()}}function Sr(t,e,n){var i=n instanceof ai?ci(n):new ai(n);if(""!=i.g)e&&(i.g=e+"."+i.g),hi(i,i.m);else{var r=Kt.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new ai(null);i&&li(s,i),e&&(s.g=e),r&&hi(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&di(i,n,e),di(i,"VER",t.ra),fr(t,i),i}function Cr(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new Wi(new Bi({ob:n})):new Wi(t.va)).Oa(t.J),e}function kr(){}function Ar(){if(ve&&!(10<=Number(Ce)))throw Error("Environmental error: no available transport.")}function Rr(t,e){Ye.call(this),this.g=new cr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!le(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!le(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new xr(this)}function Nr(t){jn.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Dr(){Bn.call(this),this.status=1}function xr(t){this.g=t}function Or(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Lr(t,e,n){n||(n=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function Pr(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}(Ht=Wi.prototype).Oa=function(t){this.M=t},Ht.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Fn.g(),this.C=this.u?Mn(this.u):Mn(Fn),this.g.onreadystatechange=te(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void Yi(this,t)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=Kt.FormData&&t instanceof Kt.FormData,!(0<=re(Ji,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{nr(this),0<this.B&&((this.L=function(t){return ve&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=te(this.ua,this)):this.A=mn(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Yi(this,t)}},Ht.ua=function(){void 0!==Gt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ze(this,"timeout"),this.abort(8))},Ht.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ze(this,"complete"),Ze(this,"abort"),er(this))},Ht.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),er(this,!0)),Wi.$.N.call(this)},Ht.La=function(){this.s||(this.G||this.v||this.l?tr(this):this.kb())},Ht.kb=function(){tr(this)},Ht.isActive=function(){return!!this.g},Ht.da=function(){try{return 2<ir(this)?this.g.status:-1}catch(t){return-1}},Ht.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Ht.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ki(e)}},Ht.Ia=function(){return this.m},Ht.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ht=cr.prototype).ra=8,Ht.H=1,Ht.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new Hn(this,this.l,t);let s=this.s;if(this.U&&(s?(s=Le(s),Me(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=mr(this,r,e),di(n=ci(this.I),"RID",t),di(n,"CVER",22),this.F&&di(n,"X-HTTP-Session-Id",this.F),fr(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(sr(s)))+"&"+e:this.o&&or(n,this.o,s)),Li(this.i,r),this.bb&&di(n,"TYPE","init"),this.P?(di(n,"$req",e),di(n,"SID","null"),r.aa=!0,Wn(r,n,null)):Wn(r,n,e),this.H=2}}else 3==this.H&&(t?pr(this,t):0==this.j.length||Di(this.i)||pr(this))},Ht.Ma=function(){if(this.u=null,br(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=xn(te(this.jb,this),t)}},Ht.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Nn(10),hr(this),br(this))},Ht.ib=function(){null!=this.v&&(this.v=null,hr(this),vr(this),Nn(19))},Ht.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Nn(2)):(this.l.info("Failed to ping google.com"),Nn(1))},Ht.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ht=kr.prototype).Ba=function(){},Ht.Aa=function(){},Ht.za=function(){},Ht.ya=function(){},Ht.isActive=function(){return!0},Ht.Va=function(){},Ar.prototype.g=function(t,e){return new Rr(t,e)},ne(Rr,Ye),Rr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Nn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Sr(t,null,t.Y),dr(t)},Rr.prototype.close=function(){lr(this.g)},Rr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=en(t),t=n);e.j.push(new Ai(e.fb++,t)),3==e.H&&dr(e)},Rr.prototype.N=function(){this.g.h=null,delete this.j,lr(this.g),delete this.g,Rr.$.N.call(this)},ne(Nr,jn),ne(Dr,Bn),ne(xr,kr),xr.prototype.Ba=function(){Ze(this.g,"a")},xr.prototype.Aa=function(t){Ze(this.g,new Nr(t))},xr.prototype.za=function(t){Ze(this.g,new Dr)},xr.prototype.ya=function(){Ze(this.g,"b")},ne(Or,(function(){this.blockSize=-1})),Or.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Or.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)Lr(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){Lr(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){Lr(this,i),r=0;break}}this.h=r,this.i+=e},Or.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var Mr={};function Ur(t){return-128<=t&&128>t?function(t,e){var n=Mr;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new Pr([0|t],0>t?-1:0)}(t)}(t):new Pr([0|t],0>t?-1:0)}function Fr(t){if(isNaN(t)||!isFinite(t))return jr;if(0>t)return qr(Fr(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Vr;return new Pr(e,0)}var Vr=4294967296,jr=Ur(0),Br=Ur(1),zr=Ur(16777216);function Hr(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function $r(t){return-1==t.h}function qr(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Pr(n,~t.h).add(Br)}function Gr(t,e){return t.add(qr(e))}function Kr(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Wr(t,e){this.g=t,this.h=e}function Qr(t,e){if(Hr(e))throw Error("division by zero");if(Hr(t))return new Wr(jr,jr);if($r(t))return e=Qr(qr(t),e),new Wr(qr(e.g),qr(e.h));if($r(e))return e=Qr(t,qr(e)),new Wr(qr(e.g),e.h);if(30<t.g.length){if($r(t)||$r(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Br,i=e;0>=i.X(t);)n=Xr(n),i=Xr(i);var r=Jr(n,1),s=Jr(i,1);for(i=Jr(i,2),n=Jr(n,2);!Hr(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Jr(i,1),n=Jr(n,1)}return e=Gr(t,r.R(e)),new Wr(r,e)}for(r=jr;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=Fr(n)).R(e);$r(o)||0<o.X(t);)o=(s=Fr(n-=i)).R(e);Hr(s)&&(s=Br),r=r.add(s),t=Gr(t,o)}return new Wr(r,t)}function Xr(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Pr(n,t.h)}function Jr(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Pr(r,t.h)}(Ht=Pr.prototype).ea=function(){if($r(this))return-qr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Vr+i)*e,e*=Vr}return t},Ht.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Hr(this))return"0";if($r(this))return"-"+qr(this).toString(t);for(var e=Fr(Math.pow(t,6)),n=this,i="";;){var r=Qr(n,e).g,s=((0<(n=Gr(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Hr(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Ht.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Ht.X=function(t){return $r(t=Gr(this,t))?-1:Hr(t)?0:1},Ht.abs=function(){return $r(this)?qr(this):this},Ht.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Pr(n,-2147483648&n[n.length-1]?-1:0)},Ht.R=function(t){if(Hr(this)||Hr(t))return jr;if($r(this))return $r(t)?qr(this).R(qr(t)):qr(qr(this).R(t));if($r(t))return qr(this.R(qr(t)));if(0>this.X(zr)&&0>t.X(zr))return Fr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,c=65535&t.D(r);n[2*i+2*r]+=o*c,Kr(n,2*i+2*r),n[2*i+2*r+1]+=s*c,Kr(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Kr(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Kr(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Pr(n,0)},Ht.gb=function(t){return Qr(this,t).h},Ht.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Pr(n,this.h&t.h)},Ht.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Pr(n,this.h|t.h)},Ht.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Pr(n,this.h^t.h)},Ar.prototype.createWebChannel=Ar.prototype.g,Rr.prototype.send=Rr.prototype.u,Rr.prototype.open=Rr.prototype.m,Rr.prototype.close=Rr.prototype.close,On.NO_ERROR=0,On.TIMEOUT=8,On.HTTP_ERROR=6,Ln.COMPLETE="complete",Un.EventType=Vn,Vn.OPEN="a",Vn.CLOSE="b",Vn.ERROR="c",Vn.MESSAGE="d",Ye.prototype.listen=Ye.prototype.O,Wi.prototype.listenOnce=Wi.prototype.P,Wi.prototype.getLastError=Wi.prototype.Sa,Wi.prototype.getLastErrorCode=Wi.prototype.Ia,Wi.prototype.getStatus=Wi.prototype.da,Wi.prototype.getResponseJson=Wi.prototype.Wa,Wi.prototype.getResponseText=Wi.prototype.ja,Wi.prototype.send=Wi.prototype.ha,Wi.prototype.setWithCredentials=Wi.prototype.Oa,Or.prototype.digest=Or.prototype.l,Or.prototype.reset=Or.prototype.reset,Or.prototype.update=Or.prototype.j,Pr.prototype.add=Pr.prototype.add,Pr.prototype.multiply=Pr.prototype.R,Pr.prototype.modulo=Pr.prototype.gb,Pr.prototype.compare=Pr.prototype.X,Pr.prototype.toNumber=Pr.prototype.ea,Pr.prototype.toString=Pr.prototype.toString,Pr.prototype.getBits=Pr.prototype.D,Pr.fromNumber=Fr,Pr.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return qr(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=Fr(Math.pow(n,8)),r=jr,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=Fr(Math.pow(n,o)),r=r.R(o).add(Fr(a))):r=(r=r.R(i)).add(Fr(a))}return r};var Yr=qt.createWebChannelTransport=function(){return new Ar},Zr=qt.getStatEventTarget=function(){return Cn()},ts=qt.ErrorCode=On,es=qt.EventType=Ln,ns=qt.Event=Tn,is=qt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},rs=(qt.FetchXmlHttpFactory=Bi,qt.WebChannel=Un),ss=qt.XhrIo=Wi,os=(qt.Md5=Or,qt.Integer=Pr);const as="@firebase/firestore";class cs{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}cs.UNAUTHENTICATED=new cs(null),cs.GOOGLE_CREDENTIALS=new cs("google-credentials-uid"),cs.FIRST_PARTY=new cs("first-party-uid"),cs.MOCK_USER=new cs("mock-user");let ls="10.7.2";const hs=new J("@firebase/firestore");function us(){return hs.logLevel}function ds(t,...e){if(hs.logLevel<=G.DEBUG){const n=e.map(ms);hs.debug(`Firestore (${ls}): ${t}`,...n)}}function ps(t,...e){if(hs.logLevel<=G.ERROR){const n=e.map(ms);hs.error(`Firestore (${ls}): ${t}`,...n)}}function fs(t,...e){if(hs.logLevel<=G.WARN){const n=e.map(ms);hs.warn(`Firestore (${ls}): ${t}`,...n)}}function ms(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function gs(t="Unexpected state"){const e=`FIRESTORE (${ls}) INTERNAL ASSERTION FAILED: `+t;throw ps(e),new Error(e)}function vs(t,e){t||gs()}function ys(t,e){return t}const bs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ws extends N{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Es{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class _s{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Is{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(cs.UNAUTHENTICATED)))}shutdown(){}}class Ts{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Ss{constructor(t){this.t=t,this.currentUser=cs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new Es;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Es,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{ds("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(ds("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Es)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(ds("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(vs("string"==typeof e.accessToken),new _s(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return vs(null===t||"string"==typeof t),new cs(t)}}class Cs{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=cs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ks{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Cs(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(cs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class As{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rs{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&ds("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,ds("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{ds("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):ds("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(vs("string"==typeof t.token),this.R=t.token,new As(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ns(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class Ds{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=Ns(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function xs(t,e){return t<e?-1:t>e?1:0}function Os(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class Ls{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ws(bs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ws(bs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ws(bs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ws(bs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ls.fromMillis(Date.now())}static fromDate(t){return Ls.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Ls(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?xs(this.nanoseconds,t.nanoseconds):xs(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ps{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ps(t)}static min(){return new Ps(new Ls(0,0))}static max(){return new Ps(new Ls(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ms{constructor(t,e,n){void 0===e?e=0:e>t.length&&gs(),void 0===n?n=t.length-e:n>t.length-e&&gs(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Ms.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ms?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Us extends Ms{construct(t,e,n){return new Us(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new ws(bs.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Us(e)}static emptyPath(){return new Us([])}}const Fs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vs extends Ms{construct(t,e,n){return new Vs(t,e,n)}static isValidIdentifier(t){return Fs.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vs.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vs(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new ws(bs.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new ws(bs.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new ws(bs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new ws(bs.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Vs(e)}static emptyPath(){return new Vs([])}}class js{constructor(t){this.path=t}static fromPath(t){return new js(Us.fromString(t))}static fromName(t){return new js(Us.fromString(t).popFirst(5))}static empty(){return new js(Us.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Us.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Us.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new js(new Us(t.slice()))}}function Bs(t){return new zs(t.readTime,t.key,-1)}class zs{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new zs(Ps.min(),js.empty(),-1)}static max(){return new zs(Ps.max(),js.empty(),-1)}}function Hs(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=js.comparator(t.documentKey,e.documentKey),0!==n?n:xs(t.largestBatchId,e.largestBatchId))}const $s="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qs{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Gs(t){if(t.code!==bs.FAILED_PRECONDITION||t.message!==$s)throw t;ds("LocalStore","Unexpectedly lost primary lease")}class Ks{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&gs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Ks(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Ks?e:Ks.resolve(e)}catch(t){return Ks.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Ks.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Ks.reject(e)}static resolve(t){return new Ks(((e,n)=>{e(t)}))}static reject(t){return new Ks(((e,n)=>{n(t)}))}static waitFor(t){return new Ks(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=Ks.resolve(!1);for(const n of t)e=e.next((t=>t?Ks.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Ks(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new Ks(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}class Ws{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new Es,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Js(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=no(e.target.error);this.V.reject(new Js(t,n))}}static open(t,e,n,i){try{return new Ws(e,t.transaction(i,n))}catch(t){throw new Js(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(ds("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Zs(e)}}class Qs{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===Qs.S(A())&&ps("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return ds("SimpleDb","Removing database:",t),to(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!R())return!1;if(Qs.C())return!0;const t=A(),e=Qs.S(t),n=0<e&&e<10,i=Qs.v(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||(ds("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new Js(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new ws(bs.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new ws(bs.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Js(t,i))},i.onupgradeneeded=t=>{ds("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,i.transaction,t.oldVersion,this.version).next((()=>{ds("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.O(t);const e=Ws.open(this.db,t,r?"readonly":"readwrite",n),s=i(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),Ks.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(ds("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Xs{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return to(this.k.delete())}}class Js extends ws{constructor(t,e){super(bs.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Ys(t){return"IndexedDbTransactionError"===t.name}class Zs{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(ds("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ds("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),to(n)}add(t){return ds("SimpleDb","ADD",this.store.name,t,t),to(this.store.add(t))}get(t){return to(this.store.get(t)).next((e=>(void 0===e&&(e=null),ds("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return ds("SimpleDb","DELETE",this.store.name,t),to(this.store.delete(t))}count(){return ds("SimpleDb","COUNT",this.store.name),to(this.store.count())}W(t,e){const n=this.options(t,e),i=n.index?this.store.index(n.index):this.store;if("function"==typeof i.getAll){const t=i.getAll(n.range);return new Ks(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new Ks(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){ds("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const i=this.cursor(n);return this.G(i,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.G(i,e)}Z(t){const e=this.cursor({});return new Ks(((n,i)=>{e.onerror=t=>{const e=no(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}G(t,e){const n=[];return new Ks(((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new Xs(r),o=e(r.primaryKey,r.value,s);if(o instanceof Ks){const t=o.catch((t=>(s.done(),Ks.reject(t))));n.push(t)}s.isDone?i():null===s.$?r.continue():r.continue(s.$)}})).next((()=>Ks.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function to(t){return new Ks(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=no(t.target.error);n(e)}}))}let eo=!1;function no(t){const e=Qs.S(A());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new ws("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eo||(eo=!0,setTimeout((()=>{throw t}),0)),t}}return t}class io{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function ro(t){return null==t}function so(t){return 0===t&&1/t==-1/0}io._e=-1;function oo(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function co(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class lo{constructor(t,e){this.comparator=t,this.root=e||uo.EMPTY}insert(t,e){return new lo(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,uo.BLACK,null,null))}remove(t){return new lo(this.comparator,this.root.remove(t,this.comparator).copy(null,null,uo.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ho(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ho(this.root,t,this.comparator,!1)}getReverseIterator(){return new ho(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ho(this.root,t,this.comparator,!0)}}class ho{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class uo{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:uo.RED,this.left=null!=i?i:uo.EMPTY,this.right=null!=r?r:uo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new uo(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return uo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return uo.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,uo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,uo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gs();if(this.right.isRed())throw gs();const t=this.left.check();if(t!==this.right.check())throw gs();return t+(this.isRed()?0:1)}}uo.EMPTY=null,uo.RED=!0,uo.BLACK=!1,uo.EMPTY=new class{constructor(){this.size=0}get key(){throw gs()}get value(){throw gs()}get color(){throw gs()}get left(){throw gs()}get right(){throw gs()}copy(t,e,n,i,r){return this}insert(t,e,n){return new uo(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class po{constructor(t){this.comparator=t,this.data=new lo(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new fo(this.data.getIterator())}getIteratorFrom(t){return new fo(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof po))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new po(this.comparator);return e.data=t,e}}class fo{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class mo{constructor(t){this.fields=t,t.sort(Vs.comparator)}static empty(){return new mo([])}unionWith(t){let e=new po(Vs.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new mo(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Os(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class go extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vo{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new go("Invalid base64 string: "+t):t}}(t);return new vo(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new vo(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xs(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}vo.EMPTY_BYTE_STRING=new vo("");const yo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bo(t){if(vs(!!t),"string"==typeof t){let e=0;const n=yo.exec(t);if(vs(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wo(t.seconds),nanos:wo(t.nanos)}}function wo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Eo(t){return"string"==typeof t?vo.fromBase64String(t):vo.fromUint8Array(t)}function _o(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Io(t){const e=t.mapValue.fields.__previous_value__;return _o(e)?Io(e):e}function To(t){const e=bo(t.mapValue.fields.__local_write_time__.timestampValue);return new Ls(e.seconds,e.nanos)}class So{constructor(t,e,n,i,r,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Co{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Co("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Co&&t.projectId===this.projectId&&t.database===this.database}}const ko={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_o(t)?4:Vo(t)?9007199254740991:10:gs()}function Ro(t,e){if(t===e)return!0;const n=Ao(t);if(n!==Ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return To(t).isEqual(To(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=bo(t.timestampValue),i=bo(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Eo(t.bytesValue).isEqual(Eo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return wo(t.geoPointValue.latitude)===wo(e.geoPointValue.latitude)&&wo(t.geoPointValue.longitude)===wo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return wo(t.integerValue)===wo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=wo(t.doubleValue),i=wo(e.doubleValue);return n===i?so(n)===so(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Os(t.arrayValue.values||[],e.arrayValue.values||[],Ro);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(oo(n)!==oo(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!Ro(n[t],i[t])))return!1;return!0}(t,e);default:return gs()}}function No(t,e){return void 0!==(t.values||[]).find((t=>Ro(t,e)))}function Do(t,e){if(t===e)return 0;const n=Ao(t),i=Ao(e);if(n!==i)return xs(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return xs(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=wo(t.integerValue||t.doubleValue),i=wo(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return xo(t.timestampValue,e.timestampValue);case 4:return xo(To(t),To(e));case 5:return xs(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Eo(t),i=Eo(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=xs(n[t],i[t]);if(0!==e)return e}return xs(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=xs(wo(t.latitude),wo(e.latitude));return 0!==n?n:xs(wo(t.longitude),wo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=Do(n[t],i[t]);if(e)return e}return xs(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===ko.mapValue&&e===ko.mapValue)return 0;if(t===ko.mapValue)return 1;if(e===ko.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let t=0;t<i.length&&t<s.length;++t){const e=xs(i[t],s[t]);if(0!==e)return e;const o=Do(n[i[t]],r[s[t]]);if(0!==o)return o}return xs(i.length,s.length)}(t.mapValue,e.mapValue);default:throw gs()}}function xo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return xs(t,e);const n=bo(t),i=bo(e),r=xs(n.seconds,i.seconds);return 0!==r?r:xs(n.nanos,i.nanos)}function Oo(t){return Lo(t)}function Lo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=bo(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Eo(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return js.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Lo(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${Lo(t.fields[r])}`;return n+"}"}(t.mapValue):gs()}function Po(t){return!!t&&"integerValue"in t}function Mo(t){return!!t&&"arrayValue"in t}function Uo(t){return!!t&&"mapValue"in t}function Fo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ao(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Fo(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Vo(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class jo{constructor(t){this.value=t}static empty(){return new jo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Uo(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Fo(e)}setAll(t){let e=Vs.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=Fo(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());Uo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ro(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Uo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){ao(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new jo(Fo(this.value))}}function Bo(t){const e=[];return ao(t.fields,((t,n)=>{const i=new Vs([t]);if(Uo(n)){const t=Bo(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new mo(e)}class zo{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new zo(t,0,Ps.min(),Ps.min(),Ps.min(),jo.empty(),0)}static newFoundDocument(t,e,n,i){return new zo(t,1,e,Ps.min(),n,i,0)}static newNoDocument(t,e){return new zo(t,2,e,Ps.min(),Ps.min(),jo.empty(),0)}static newUnknownDocument(t,e){return new zo(t,3,e,Ps.min(),Ps.min(),jo.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ps.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=jo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=jo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ps.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof zo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ho{constructor(t,e){this.position=t,this.inclusive=e}}function $o(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?js.comparator(js.fromName(o.referenceValue),n.key):Do(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function qo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ro(t.position[n],e.position[n]))return!1;return!0}class Go{constructor(t,e="asc"){this.field=t,this.dir=e}}function Ko(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Wo{}class Qo extends Wo{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new na(t,e,n):"array-contains"===e?new oa(t,n):"in"===e?new aa(t,n):"not-in"===e?new ca(t,n):"array-contains-any"===e?new la(t,n):new Qo(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new ia(t,n):new ra(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Do(e,this.value)):null!==e&&Ao(this.value)===Ao(e)&&this.matchesComparison(Do(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return gs()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xo extends Wo{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new Xo(t,e)}matches(t){return Jo(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Jo(t){return"and"===t.op}function Yo(t){return function(t){for(const e of t.filters)if(e instanceof Xo)return!1;return!0}(t)&&Jo(t)}function Zo(t){if(t instanceof Qo)return t.field.canonicalString()+t.op.toString()+Oo(t.value);if(Yo(t))return t.filters.map((t=>Zo(t))).join(",");{const e=t.filters.map((t=>Zo(t))).join(",");return`${t.op}(${e})`}}function ta(t,e){return t instanceof Qo?function(t,e){return e instanceof Qo&&t.op===e.op&&t.field.isEqual(e.field)&&Ro(t.value,e.value)}(t,e):t instanceof Xo?function(t,e){return e instanceof Xo&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&ta(n,e.filters[i])),!0)}(t,e):void gs()}function ea(t){return t instanceof Qo?function(t){return`${t.field.canonicalString()} ${t.op} ${Oo(t.value)}`}(t):t instanceof Xo?function(t){return t.op.toString()+" {"+t.getFilters().map(ea).join(" ,")+"}"}(t):"Filter"}class na extends Qo{constructor(t,e,n){super(t,e,n),this.key=js.fromName(n.referenceValue)}matches(t){const e=js.comparator(t.key,this.key);return this.matchesComparison(e)}}class ia extends Qo{constructor(t,e){super(t,"in",e),this.keys=sa(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class ra extends Qo{constructor(t,e){super(t,"not-in",e),this.keys=sa(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function sa(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>js.fromName(t.referenceValue)))}class oa extends Qo{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Mo(e)&&No(e.arrayValue,this.value)}}class aa extends Qo{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&No(this.value.arrayValue,e)}}class ca extends Qo{constructor(t,e){super(t,"not-in",e)}matches(t){if(No(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!No(this.value.arrayValue,e)}}class la extends Qo{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Mo(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>No(this.value.arrayValue,t)))}}class ha{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function ua(t,e=null,n=[],i=[],r=null,s=null,o=null){return new ha(t,e,n,i,r,s,o)}function da(t){const e=ys(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Zo(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),ro(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Oo(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Oo(t))).join(",")),e.ce=t}return e.ce}function pa(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ko(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ta(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qo(t.startAt,e.startAt)&&qo(t.endAt,e.endAt)}class fa{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function ma(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function ga(t){const e=ys(t);if(null===e.le){e.le=[];const t=new Set;for(const n of e.explicitOrderBy)e.le.push(n),t.add(n.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new po(Vs.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new Go(i,n))})),t.has(Vs.keyField().canonicalString())||e.le.push(new Go(Vs.keyField(),n))}return e.le}function va(t){const e=ys(t);return e.he||(e.he=function(t,e){if("F"===t.limitType)return ua(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new Go(t.field,e)}));const n=t.endAt?new Ho(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ho(t.startAt.position,t.startAt.inclusive):null;return ua(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}(e,ga(t))),e.he}function ya(t,e,n){return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ba(t,e){return pa(va(t),va(e))&&t.limitType===e.limitType}function wa(t){return`${da(va(t))}|lt:${t.limitType}`}function Ea(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>ea(t))).join(", ")}]`),ro(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Oo(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Oo(t))).join(",")),`Target(${e})`}(va(t))}; limitType=${t.limitType})`}function _a(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):js.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of ga(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=$o(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,ga(t),e)||t.endAt&&!function(t,e,n){const i=$o(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,ga(t),e))}(t,e)}function Ia(t,e,n){const i=t.field.isKeyField()?js.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?Do(i,r):gs()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return gs()}}class Ta{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ao(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return co(this.inner)}size(){return this.innerSize}}const Sa=new lo(js.comparator);function Ca(){return Sa}const ka=new lo(js.comparator);function Aa(...t){let e=ka;for(const n of t)e=e.insert(n.key,n);return e}function Ra(t){let e=ka;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Na(){return xa()}function Da(){return xa()}function xa(){return new Ta((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Oa=new lo(js.comparator),La=new po(js.comparator);function Pa(...t){let e=La;for(const n of t)e=e.add(n);return e}const Ma=new po(xs);function Ua(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:so(e)?"-0":e}}function Fa(t){return{integerValue:""+t}}function Va(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!so(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Fa(e):Ua(t,e)}class ja{constructor(){this._=void 0}}function Ba(t,e,n){return t instanceof $a?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&_o(e)&&(e=Io(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof qa?Ga(t,e):t instanceof Ka?Wa(t,e):function(t,e){const n=Ha(t,e),i=Xa(n)+Xa(t.Ie);return Po(n)&&Po(t.Ie)?Fa(i):Ua(t.serializer,i)}(t,e)}function za(t,e,n){return t instanceof qa?Ga(t,e):t instanceof Ka?Wa(t,e):n}function Ha(t,e){return t instanceof Qa?function(t){return Po(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class $a extends ja{}class qa extends ja{constructor(t){super(),this.elements=t}}function Ga(t,e){const n=Ja(e);for(const e of t.elements)n.some((t=>Ro(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Ka extends ja{constructor(t){super(),this.elements=t}}function Wa(t,e){let n=Ja(e);for(const e of t.elements)n=n.filter((t=>!Ro(t,e)));return{arrayValue:{values:n}}}class Qa extends ja{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Xa(t){return wo(t.integerValue||t.doubleValue)}function Ja(t){return Mo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Ya{constructor(t,e){this.version=t,this.transformResults=e}}class Za{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Za}static exists(t){return new Za(void 0,t)}static updateTime(t){return new Za(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function tc(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class ec{}function nc(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new dc(t.key,Za.none()):new ac(t.key,t.data,Za.none());{const n=t.data,i=jo.empty();let r=new po(Vs.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new cc(t.key,i,new mo(r.toArray()),Za.none())}}function ic(t,e,n){t instanceof ac?function(t,e,n){const i=t.value.clone(),r=hc(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof cc?function(t,e,n){if(!tc(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=hc(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(lc(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function rc(t,e,n,i){return t instanceof ac?function(t,e,n,i){if(!tc(t.precondition,e))return n;const r=t.value.clone(),s=uc(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof cc?function(t,e,n,i){if(!tc(t.precondition,e))return n;const r=uc(t.fieldTransforms,i,e),s=e.data;return s.setAll(lc(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return tc(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function sc(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Ha(i.transform,t||null);null!=r&&(null===n&&(n=jo.empty()),n.set(i.field,r))}return n||null}function oc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Os(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof qa&&e instanceof qa||t instanceof Ka&&e instanceof Ka?Os(t.elements,e.elements,Ro):t instanceof Qa&&e instanceof Qa?Ro(t.Ie,e.Ie):t instanceof $a&&e instanceof $a}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ac extends ec{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cc extends ec{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function lc(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function hc(t,e,n){const i=new Map;vs(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,za(o,a,n[r]))}return i}function uc(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Ba(t,s,e))}return i}class dc extends ec{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pc extends ec{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fc{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&ic(i,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=rc(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=rc(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Da();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=nc(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Ps.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Pa())}isEqual(t){return this.batchId===t.batchId&&Os(this.mutations,t.mutations,((t,e)=>oc(t,e)))&&Os(this.baseMutations,t.baseMutations,((t,e)=>oc(t,e)))}}class mc{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){vs(t.mutations.length===n.length);let i=Oa;const r=t.mutations;for(let t=0;t<r.length;t++)i=i.insert(r[t].key,n[t].version);return new mc(t,e,n,i)}}class gc{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var vc,yc;(yc=vc||(vc={}))[yc.OK=0]="OK",yc[yc.CANCELLED=1]="CANCELLED",yc[yc.UNKNOWN=2]="UNKNOWN",yc[yc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yc[yc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yc[yc.NOT_FOUND=5]="NOT_FOUND",yc[yc.ALREADY_EXISTS=6]="ALREADY_EXISTS",yc[yc.PERMISSION_DENIED=7]="PERMISSION_DENIED",yc[yc.UNAUTHENTICATED=16]="UNAUTHENTICATED",yc[yc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yc[yc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yc[yc.ABORTED=10]="ABORTED",yc[yc.OUT_OF_RANGE=11]="OUT_OF_RANGE",yc[yc.UNIMPLEMENTED=12]="UNIMPLEMENTED",yc[yc.INTERNAL=13]="INTERNAL",yc[yc.UNAVAILABLE=14]="UNAVAILABLE",yc[yc.DATA_LOSS=15]="DATA_LOSS",new os([4294967295,4294967295],0),Error;class bc{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function wc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ec(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _c(t,e){return wc(t,e.toTimestamp())}function Ic(t){return vs(!!t),Ps.fromTimestamp(function(t){const e=bo(t);return new Ls(e.seconds,e.nanos)}(t))}function Tc(t,e){return Sc(t,e).canonicalString()}function Sc(t,e){const n=function(t){return new Us(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Cc(t,e){return Tc(t.databaseId,e.path)}function kc(t){const e=function(t){const e=Us.fromString(t);return vs(function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}(e)),e}(t);return 4===e.length?Us.emptyPath():function(t){return vs(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}(e)}function Ac(t,e,n){return{name:Cc(t,e),fields:n.value.mapValue.fields}}function Rc(t){let e=kc(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){vs(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Nc(t);return e instanceof Xo&&Yo(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new Go(Dc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,ro(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Ho(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new Ho(n,e)}(n.endAt)),function(t,e,n,i,r,s,o,a){return new fa(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function Nc(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Dc(t.unaryFilter.field);return Qo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Dc(t.unaryFilter.field);return Qo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Dc(t.unaryFilter.field);return Qo.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Dc(t.unaryFilter.field);return Qo.create(r,"!=",{nullValue:"NULL_VALUE"});default:return gs()}}(t):void 0!==t.fieldFilter?function(t){return Qo.create(Dc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gs()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Xo.create(t.compositeFilter.filters.map((t=>Nc(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return gs()}}(t.compositeFilter.op))}(t):gs()}function Dc(t){return Vs.fromServerFormat(t.fieldPath)}function xc(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}class Oc{constructor(t){this.ct=t}}function Lc(t){const e=Rc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ya(e,e.limit,"L"):e}class Pc{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(wo(t.integerValue));else if("doubleValue"in t){const n=wo(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),so(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At(`${n.seconds||""}`),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(Eo(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?Vo(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):gs()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const t of Object.keys(n))this.Rt(t,e),this.It(n[t],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const t of n)this.It(t,e)}gt(t,e){this.Et(e,37),js.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}Pc.bt=new Pc;class Mc{constructor(){this._n=new Uc}addToCollectionParentIndex(t,e){return this._n.add(e),Ks.resolve()}getCollectionParents(t,e){return Ks.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return Ks.resolve()}deleteFieldIndex(t,e){return Ks.resolve()}deleteAllFieldIndexes(t){return Ks.resolve()}createTargetIndexes(t,e){return Ks.resolve()}getDocumentsMatchingTarget(t,e){return Ks.resolve(null)}getIndexType(t,e){return Ks.resolve(0)}getFieldIndexes(t,e){return Ks.resolve([])}getNextCollectionGroupToUpdate(t){return Ks.resolve(null)}getMinOffset(t,e){return Ks.resolve(zs.min())}getMinOffsetFromCollectionGroup(t,e){return Ks.resolve(zs.min())}updateCollectionGroup(t,e,n){return Ks.resolve()}updateIndexEntries(t,e){return Ks.resolve()}}class Uc{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new po(Us.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new po(Us.comparator)).toArray()}}new Uint8Array(0);class Fc{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Fc(t,Fc.DEFAULT_COLLECTION_PERCENTILE,Fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Fc.DEFAULT_COLLECTION_PERCENTILE=10,Fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fc.DEFAULT=new Fc(41943040,Fc.DEFAULT_COLLECTION_PERCENTILE,Fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fc.DISABLED=new Fc(-1,0,0);class Vc{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Vc(0)}static Bn(){return new Vc(-1)}}class jc{constructor(){this.changes=new Ta((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,zo.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Ks.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Bc{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class zc{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&rc(n.mutation,t,mo.empty(),Ls.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Pa()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Pa()){const i=Na();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Aa();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Na();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Pa())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=Ca();const s=xa(),o=xa();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof cc)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),rc(o.mutation,e,o.mutation.getFieldMask(),Ls.now())):s.set(e.key,mo.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Bc(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=xa();let i=new lo(((t,e)=>t-e)),r=Pa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||mo.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Pa()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Da();c.forEach((t=>{if(!r.has(t)){const i=nc(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return Ks.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return js.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):Ks.resolve(Na());let o=-1,a=r;return s.next((e=>Ks.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?Ks.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,Pa()))).next((t=>({batchId:o,changes:Ra(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new js(e)).next((t=>{let e=Aa();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=Aa();return this.indexManager.getCollectionParents(t,r).next((o=>Ks.forEach(o,(o=>{const a=function(t,e){return new fa(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,zo.newInvalidDocument(i)))}));let n=Aa();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&rc(s.mutation,i,mo.empty(),Ls.now()),_a(e,i)&&(n=n.insert(t,i))})),n}))}}class Hc{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return Ks.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Ic(t.createTime)}}(e)),Ks.resolve()}getNamedQuery(t,e){return Ks.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:Lc(t.bundledQuery),readTime:Ic(t.readTime)}}(e)),Ks.resolve()}}class $c{constructor(){this.overlays=new lo(js.comparator),this.hr=new Map}getOverlay(t,e){return Ks.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Na();return Ks.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ht(t,e,i)})),Ks.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),Ks.resolve()}getOverlaysForCollection(t,e,n){const i=Na(),r=e.length+1,s=new js(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Ks.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new lo(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=Na(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Na(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return Ks.resolve(o)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new gc(e,n));let r=this.hr.get(e);void 0===r&&(r=Pa(),this.hr.set(e,r)),this.hr.set(e,r.add(n.key))}}class qc{constructor(){this.Pr=new po(Gc.Ir),this.Tr=new po(Gc.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new Gc(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new Gc(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new js(new Us([])),n=new Gc(e,t),i=new Gc(e,t+1),r=[];return this.Tr.forEachInRange([n,i],(t=>{this.Ar(t),r.push(t.key)})),r}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new js(new Us([])),n=new Gc(e,t),i=new Gc(e,t+1);let r=Pa();return this.Tr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new Gc(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Gc{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return js.comparator(t.key,e.key)||xs(t.pr,e.pr)}static Er(t,e){return xs(t.pr,e.pr)||js.comparator(t.key,e.key)}}class Kc{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new po(Gc.Ir)}checkEmpty(t){return Ks.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new fc(r,e,n,i);this.mutationQueue.push(s);for(const e of i)this.wr=this.wr.add(new Gc(e.key,r)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Ks.resolve(s)}lookupMutationBatch(t,e){return Ks.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.br(n),r=i<0?0:i;return Ks.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Ks.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return Ks.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Gc(e,0),i=new Gc(e,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(t=>{const e=this.Sr(t.pr);r.push(e)})),Ks.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new po(xs);return e.forEach((t=>{const e=new Gc(t,0),i=new Gc(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,i],(t=>{n=n.add(t.pr)}))})),Ks.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;js.isDocumentKey(r)||(r=r.child(""));const s=new Gc(new js(r),0);let o=new po(xs);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.pr)),!0)}),s),Ks.resolve(this.Dr(o))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){vs(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Ks.forEach(e.mutations,(i=>{const r=new Gc(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new Gc(e,0),i=this.wr.firstAfterOrEqual(n);return Ks.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ks.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Wc{constructor(t){this.vr=t,this.docs=new lo(js.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Ks.resolve(n?n.document.mutableCopy():zo.newInvalidDocument(e))}getEntries(t,e){let n=Ca();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():zo.newInvalidDocument(t))})),Ks.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=Ca();const s=e.path,o=new js(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||Hs(Bs(o),n)<=0||(i.has(o.key)||_a(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Ks.resolve(r)}getAllFromCollectionGroup(t,e,n,i){gs()}Fr(t,e){return Ks.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Qc(this)}getSize(t){return Ks.resolve(this.size)}}class Qc extends jc{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.ar.addEntry(t,i)):this.ar.removeEntry(n)})),Ks.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class Xc{constructor(t){this.persistence=t,this.Mr=new Ta((t=>da(t)),pa),this.lastRemoteSnapshotVersion=Ps.min(),this.highestTargetId=0,this.Or=0,this.Nr=new qc,this.targetCount=0,this.Br=Vc.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),Ks.resolve()}getLastRemoteSnapshotVersion(t){return Ks.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ks.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),Ks.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),Ks.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new Vc(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,Ks.resolve()}updateTargetData(t,e){return this.qn(e),Ks.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,Ks.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Ks.waitFor(r).next((()=>i))}getTargetCount(t){return Ks.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return Ks.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),Ks.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),Ks.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),Ks.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return Ks.resolve(n)}containsKey(t,e){return Ks.resolve(this.Nr.containsKey(e))}}class Jc{constructor(t,e){this.Lr={},this.overlays={},this.kr=new io(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Xc(this),this.indexManager=new Mc,this.remoteDocumentCache=function(t){return new Wc(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new Oc(e),this.$r=new Hc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new $c,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Lr[t.toKey()];return n||(n=new Kc(e,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){ds("MemoryPersistence","Starting transaction:",t);const i=new Yc(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((t=>this.referenceDelegate.Wr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gr(t,e){return Ks.or(Object.values(this.Lr).map((n=>()=>n.containsKey(t,e))))}}class Yc extends qs{constructor(t){super(),this.currentSequenceNumber=t}}class Zc{constructor(t){this.persistence=t,this.zr=new qc,this.jr=null}static Hr(t){return new Zc(t)}get Jr(){if(this.jr)return this.jr;throw gs()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),Ks.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),Ks.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),Ks.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ks.forEach(this.Jr,(n=>{const i=js.fromPath(n);return this.Yr(t,i).next((t=>{t||e.removeEntry(i,Ps.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return Ks.or([()=>Ks.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class tl{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=i}static Ki(t,e){let n=Pa(),i=Pa();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new tl(t,e.fromCache,n,i)}}class el{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class nl{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){var t;const e=null===(t=I())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()||!navigator.userAgent.includes("Safari")||navigator.userAgent.includes("Chrome")?Qs.v(A())>0?6:4:8}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ji(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.Hi(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new el;return this.Ji(t,e,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(t,e,n,i.size)}))})).next((()=>r.result))}Yi(t,e,n,i){return n.documentReadCount<this.Wi?(us()<=G.DEBUG&&ds("QueryEngine","SDK will not create cache indexes for query:",Ea(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ks.resolve()):(us()<=G.DEBUG&&ds("QueryEngine","Query:",Ea(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(us()<=G.DEBUG&&ds("QueryEngine","The SDK decides to create cache indexes for query:",Ea(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,va(e))):Ks.resolve())}ji(t,e){if(ma(e))return Ks.resolve(null);let n=va(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=ya(e,null,"F"),n=va(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=Pa(...i);return this.zi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Zi(e,i);return this.Xi(e,s,r,n.readTime)?this.ji(t,ya(e,null,"F")):this.es(t,s,e,n)}))))})))))}Hi(t,e,n,i){return ma(e)||i.isEqual(Ps.min())?Ks.resolve(null):this.zi.getDocuments(t,n).next((r=>{const s=this.Zi(e,r);return this.Xi(e,s,n,i)?Ks.resolve(null):(us()<=G.DEBUG&&ds("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ea(e)),this.es(t,s,e,function(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Ps.fromTimestamp(1e9===i?new Ls(n+1,0):new Ls(n,i));return new zs(r,js.empty(),e)}(i,-1)).next((t=>t)))}))}Zi(t,e){let n=new po(function(t){return(e,n)=>{let i=!1;for(const r of ga(t)){const t=Ia(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}(t));return e.forEach(((e,i)=>{_a(t,i)&&(n=n.add(i))})),n}Xi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(t,e,n){return us()<=G.DEBUG&&ds("QueryEngine","Using full collection scan to execute query:",Ea(e)),this.zi.getDocumentsMatchingQuery(t,e,zs.min(),n)}es(t,e,n,i){return this.zi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class il{constructor(t,e,n,i){this.persistence=t,this.ts=e,this.serializer=i,this.ns=new lo(xs),this.rs=new Ta((t=>da(t)),pa),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new zc(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}async function rl(t,e){const n=ys(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=Pa();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({us:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function sl(t,e){const n=ys(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}class ol{constructor(){this.activeTargetIds=Ma}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class al{constructor(){this.no=new ol,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new ol,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class cl{io(t){}shutdown(){}}class ll{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ds("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){ds("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let hl=null;function ul(){return null===hl?hl=268435456+Math.round(2147483648*Math.random()):hl++,"0x"+hl.toString(16)}const dl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pl{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}const fl="WebChannelConnection";class ml extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po=`projects/${n}/databases/${i}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get wo(){return!1}So(t,e,n,i,r){const s=ul(),o=this.bo(t,e.toUriEncodedString());ds("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,i,r),this.Co(t,o,a,n).then((e=>(ds("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw fs("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,i,r,s){return this.So(t,e,n,i,r)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+ls,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=dl[t];return`${this.fo}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,i){const r=ul();return new Promise(((s,o)=>{const a=new ss;a.setWithCredentials(!0),a.listenOnce(es.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ts.NO_ERROR:const e=a.getResponseJson();ds(fl,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case ts.TIMEOUT:ds(fl,`RPC '${t}' ${r} timed out`),o(new ws(bs.DEADLINE_EXCEEDED,"Request time out"));break;case ts.HTTP_ERROR:const n=a.getStatus();if(ds(fl,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(bs).indexOf(e)>=0?e:bs.UNKNOWN}(e.status);o(new ws(t,e.message))}else o(new ws(bs.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ws(bs.UNAVAILABLE,"Connection failed."));break;default:gs()}}finally{ds(fl,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(i);ds(fl,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",c,n,15)}))}Fo(t,e,n){const i=ul(),r=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Yr(),o=Zr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");ds(fl,`Creating RPC '${t}' stream ${i}: ${l}`,a);const h=s.createWebChannel(l,a);let u=!1,d=!1;const p=new pl({lo:e=>{d?ds(fl,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(u||(ds(fl,`Opening RPC '${t}' stream ${i} transport.`),h.open(),u=!0),ds(fl,`RPC '${t}' stream ${i} sending:`,e),h.send(e))},ho:()=>h.close()}),f=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return f(h,rs.EventType.OPEN,(()=>{d||ds(fl,`RPC '${t}' stream ${i} transport opened.`)})),f(h,rs.EventType.CLOSE,(()=>{d||(d=!0,ds(fl,`RPC '${t}' stream ${i} transport closed`),p.Vo())})),f(h,rs.EventType.ERROR,(e=>{d||(d=!0,fs(fl,`RPC '${t}' stream ${i} transport errored:`,e),p.Vo(new ws(bs.UNAVAILABLE,"The operation could not be completed")))})),f(h,rs.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];vs(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){ds(fl,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=vc[t];if(void 0!==e)return function(t){if(void 0===t)return ps("GRPC error has no .code"),bs.UNKNOWN;switch(t){case vc.OK:return bs.OK;case vc.CANCELLED:return bs.CANCELLED;case vc.UNKNOWN:return bs.UNKNOWN;case vc.DEADLINE_EXCEEDED:return bs.DEADLINE_EXCEEDED;case vc.RESOURCE_EXHAUSTED:return bs.RESOURCE_EXHAUSTED;case vc.INTERNAL:return bs.INTERNAL;case vc.UNAVAILABLE:return bs.UNAVAILABLE;case vc.UNAUTHENTICATED:return bs.UNAUTHENTICATED;case vc.INVALID_ARGUMENT:return bs.INVALID_ARGUMENT;case vc.NOT_FOUND:return bs.NOT_FOUND;case vc.ALREADY_EXISTS:return bs.ALREADY_EXISTS;case vc.PERMISSION_DENIED:return bs.PERMISSION_DENIED;case vc.FAILED_PRECONDITION:return bs.FAILED_PRECONDITION;case vc.ABORTED:return bs.ABORTED;case vc.OUT_OF_RANGE:return bs.OUT_OF_RANGE;case vc.UNIMPLEMENTED:return bs.UNIMPLEMENTED;case vc.DATA_LOSS:return bs.DATA_LOSS;default:return gs()}}(e)}(e),r=o.message;void 0===n&&(n=bs.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,p.Vo(new ws(n,r)),h.close()}else ds(fl,`RPC '${t}' stream ${i} received:`,r),p.mo(r)}})),f(o,ns.STAT_EVENT,(e=>{e.stat===is.PROXY?ds(fl,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===is.NOPROXY&&ds(fl,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{p.Ro()}),0),p}}function gl(){return"undefined"!=typeof document?document:null}function vl(t){return new bc(t,!0)}class yl{constructor(t,e,n=1e3,i=1.5,r=6e4){this.oi=t,this.timerId=e,this.Mo=n,this.xo=i,this.Oo=r,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,e-n);i>0&&ds("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Lo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class bl{constructor(t,e,n,i,r,s,o,a){this.oi=t,this.$o=n,this.Uo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new yl(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===bs.RESOURCE_EXHAUSTED?(ps(e.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===bs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Wo===e&&this.o_(t,n)}),(e=>{t((()=>{const t=new ws(bs.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return ds("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():(ds("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wl extends bl{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(vs(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=function(t,e){return t&&t.length>0?(vs(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Ic(t.updateTime):Ic(e);return n.isEqual(Ps.min())&&(n=Ic(e)),new Ya(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Ic(t.commitTime);return this.listener.T_(n,e)}return vs(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=function(t){return new Us(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof ac)n={update:Ac(t,e.key,e.value)};else if(e instanceof dc)n={delete:Cc(t,e.key)};else if(e instanceof cc)n={update:Ac(t,e.key,e.data),updateMask:xc(e.fieldMask)};else{if(!(e instanceof pc))return gs();n={verify:Cc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof $a)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof qa)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ka)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qa)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw gs()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:_c(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:gs()}(t,e.precondition)),n}(this.serializer,t)))};this.t_(e)}}class El extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new ws(bs.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.So(t,Sc(e,n),i,r,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===bs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ws(bs.UNKNOWN,t.toString())}))}vo(t,e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(t,Sc(e,n),i,s,o,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===bs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ws(bs.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class _l{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ps(e),this.g_=!1):ds("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Il{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io((t=>{n.enqueueAndForget((async()=>{Cl(this)&&(ds("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=ys(t);e.v_.add(4),await Sl(e),e.x_.set("Unknown"),e.v_.delete(4),await Tl(e)}(this))}))})),this.x_=new _l(n,i)}}async function Tl(t){if(Cl(t))for(const e of t.F_)await e(!0)}async function Sl(t){for(const e of t.F_)await e(!1)}function Cl(t){return 0===ys(t).v_.size}async function kl(t,e,n){if(!Ys(e))throw e;t.v_.add(1),await Sl(t),t.x_.set("Offline"),n||(n=()=>function(t){const e=ys(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ds("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Tl(t)}))}function Al(t,e){return e().catch((n=>kl(t,n,e)))}async function Rl(t){const e=ys(t),n=Vl(e);let i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Nl(e);)try{const t=await sl(e.localStore,i);if(null===t){0===e.D_.length&&n.Xo();break}i=t.batchId,Dl(e,t)}catch(t){await kl(e,t)}xl(e)&&Ol(e)}function Nl(t){return Cl(t)&&t.D_.length<10}function Dl(t,e){t.D_.push(e);const n=Vl(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function xl(t){return Cl(t)&&!Vl(t).Ho()&&t.D_.length>0}function Ol(t){Vl(t).start()}async function Ll(t){Vl(t).d_()}async function Pl(t){const e=Vl(t);for(const n of t.D_)e.I_(n.mutations)}async function Ml(t,e,n){const i=t.D_.shift(),r=mc.from(i,e,n);await Al(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Rl(t)}async function Ul(t,e){e&&Vl(t).P_&&await async function(t,e){if(function(t){return function(t){switch(t){default:return gs();case bs.CANCELLED:case bs.UNKNOWN:case bs.DEADLINE_EXCEEDED:case bs.RESOURCE_EXHAUSTED:case bs.INTERNAL:case bs.UNAVAILABLE:case bs.UNAUTHENTICATED:return!1;case bs.INVALID_ARGUMENT:case bs.NOT_FOUND:case bs.ALREADY_EXISTS:case bs.PERMISSION_DENIED:case bs.FAILED_PRECONDITION:case bs.ABORTED:case bs.OUT_OF_RANGE:case bs.UNIMPLEMENTED:case bs.DATA_LOSS:return!0}}(t)&&t!==bs.ABORTED}(e.code)){const n=t.D_.shift();Vl(t).Zo(),await Al(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Rl(t)}}(t,e),xl(t)&&Ol(t)}async function Fl(t,e){const n=ys(t);n.asyncQueue.verifyOperationInProgress(),ds("RemoteStore","RemoteStore received new credentials");const i=Cl(n);n.v_.add(3),await Sl(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Tl(n)}function Vl(t){return t.B_||(t.B_=function(t,e,n){const i=ys(t);return i.R_(),new wl(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:Ll.bind(null,t),To:Ul.bind(null,t),E_:Pl.bind(null,t),T_:Ml.bind(null,t)}),t.F_.push((async e=>{e?(t.B_.Zo(),await Rl(t)):(await t.B_.stop(),t.D_.length>0&&(ds("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}class jl{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new jl(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ws(bs.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bl(t,e){if(ps("AsyncQueue",`${e}: ${t}`),Ys(t))return new ws(bs.UNAVAILABLE,`${e}: ${t}`);throw t}class zl{constructor(){this.queries=new Ta((t=>wa(t)),ba),this.onlineState="Unknown",this.K_=new Set}}class Hl{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Ta((t=>wa(t)),ba),this.pa=new Map,this.ya=new Set,this.wa=new lo(js.comparator),this.Sa=new Map,this.ba=new qc,this.Da={},this.Ca=new Map,this.va=Vc.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function $l(t,e,n){const i=ys(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ga.forEach(((n,i)=>{const r=i.view.U_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=ys(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.Q_)t.U_(e)&&(i=!0)})),i&&function(t){t.K_.forEach((t=>{t.next()}))}(n)}(i.eventManager,e),t.length&&i.fa.u_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ql(t,e){const n=ys(t),i=e.batch.batchId;try{const t=await function(t,e){const n=ys(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Ks.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);vs(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Pa();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);Wl(n,i,null),Kl(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ql(n,t)}catch(t){await Gs(t)}}async function Gl(t,e,n){const i=ys(t);try{const t=await function(t,e){const n=ys(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(vs(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);Wl(i,e,n),Kl(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ql(i,t)}catch(n){await Gs(n)}}function Kl(t,e){(t.Ca.get(e)||[]).forEach((t=>{t.resolve()})),t.Ca.delete(e)}function Wl(t,e,n){const i=ys(t);let r=i.Da[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}async function Ql(t,e,n){const i=ys(t),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach(((t,a)=>{o.push(i.Ma(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=tl.Ki(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.fa.u_(r),await async function(t,e){const n=ys(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Ks.forEach(e,(e=>Ks.forEach(e.qi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Ks.forEach(e.Qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Ys(t))throw t;ds("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.ns.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(e,r)}}}(i.localStore,s))}async function Xl(t,e){const n=ys(t);if(!n.currentUser.isEqual(e)){ds("SyncEngine","User change. New user:",e.toKey());const t=await rl(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new ws(bs.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ca.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Ql(n,t.us)}}function Jl(t){const e=ys(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ql.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gl.bind(null,e),e}class Yl{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=vl(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,i){return new il(t,e,n,i)}(this.persistence,new nl,t.initialUser,this.serializer)}createPersistence(t){return new Jc(Zc.Hr,this.serializer)}createSharedClientState(t){return new al}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Zl{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>$l(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xl.bind(null,this.syncEngine),await async function(t,e){const n=ys(t);e?(n.v_.delete(2),await Tl(n)):e||(n.v_.add(2),await Sl(n),n.x_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new zl}createDatastore(t){const e=vl(t.databaseInfo.databaseId),n=function(t){return new ml(t)}(t.databaseInfo);return function(t,e,n,i){return new El(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new Il(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>$l(this.syncEngine,t,0)),ll.D()?new ll:new cl)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new Hl(t,e,n,i,r,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=ys(t);ds("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await Sl(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}class th{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=cs.UNAUTHENTICATED,this.clientId=Ds.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{ds("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(ds("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ws(bs.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Bl(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function eh(t,e){t.asyncQueue.verifyOperationInProgress(),ds("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await rl(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function nh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ds("FirestoreClient","Using user provided OfflineComponentProvider");try{await eh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===bs.FAILED_PRECONDITION||t.code===bs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;fs("Error using user provided cache. Falling back to memory cache: "+n),await eh(t,new Yl)}}else ds("FirestoreClient","Using default OfflineComponentProvider"),await eh(t,new Yl);return t._offlineComponents}(t);ds("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>Fl(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Fl(e.remoteStore,n))),t._onlineComponents=e}function ih(t){return async function(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ds("FirestoreClient","Using user provided OnlineComponentProvider"),await nh(t,t._uninitializedComponentsProvider._online)):(ds("FirestoreClient","Using default OnlineComponentProvider"),await nh(t,new Zl))),t._onlineComponents}(t).then((t=>t.syncEngine))}function rh(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const sh=new Map;function oh(t,e,n){if(!n)throw new ws(bs.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ah(t){if(!js.isDocumentKey(t))throw new ws(bs.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ch(t){if(js.isDocumentKey(t))throw new ws(bs.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":gs()}function hh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ws(bs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lh(t);throw new ws(bs.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class uh{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new ws(bs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ws(bs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new ws(bs.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rh(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new ws(bs.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new ws(bs.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new ws(bs.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class dh{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ws(bs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new ws(bs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uh(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Is;switch(t.type){case"firstParty":return new ks(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ws(bs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=sh.get(t);e&&(ds("ComponentProvider","Removing Datastore"),sh.delete(t),e.terminate())}(this),Promise.resolve()}}class ph{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new ph(this.firestore,t,this._query)}}class fh{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new fh(this.firestore,t,this._key)}}class mh extends ph{constructor(t,e,n){super(t,e,function(t){return new fa(t)}(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fh(this.firestore,null,new js(t))}withConverter(t){return new mh(this.firestore,t,this._path)}}class gh{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new yl(this,"async_queue_retry"),this._u=()=>{const t=gl();t&&ds("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=gl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const e=gl();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise((()=>{}));const e=new Es;return this.uu((()=>this.tu&&this.su?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.eu.push(t),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!Ys(t))throw t;ds("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(t){const e=this.Xa.then((()=>(this.iu=!0,t().catch((t=>{this.ru=t,this.iu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw ps("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.iu=!1,t))))));return this.Xa=e,e}enqueueAfterDelay(t,e,n){this.au(),this.ou.indexOf(t)>-1&&(e=0);const i=jl.createAndSchedule(this,t,e,n,(t=>this.lu(t)));return this.nu.push(i),i}au(){this.ru&&gs()}verifyOperationInProgress(){}async hu(){let t;do{t=this.Xa,await t}while(t!==this.Xa)}Pu(t){for(const e of this.nu)if(e.timerId===t)return!0;return!1}Iu(t){return this.hu().then((()=>{this.nu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.nu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.hu()}))}Tu(t){this.ou.push(t)}lu(t){const e=this.nu.indexOf(t);this.nu.splice(e,1)}}class vh extends dh{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new gh,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||yh(this),this._firestoreClient.terminate()}}function yh(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new So(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,rh(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new th(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class bh{constructor(t){this._byteString=t}static fromBase64String(t){try{return new bh(vo.fromBase64String(t))}catch(t){throw new ws(bs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new bh(vo.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class wh{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new ws(bs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vs(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Eh{constructor(t){this._methodName=t}}class _h{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ws(bs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ws(bs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return xs(this._lat,t._lat)||xs(this._long,t._long)}}const Ih=/^__.*__$/;class Th{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new cc(t,this.data,this.fieldMask,e,this.fieldTransforms):new ac(t,this.data,e,this.fieldTransforms)}}function Sh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gs()}}class Ch{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Eu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new Ch(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.mu(t),i}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return Mh(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(0===t.length)throw this.pu("Document fields must not be empty");if(Sh(this.du)&&Ih.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class kh{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||vl(t)}Su(t,e,n,i=!1){return new Ch({du:t,methodName:e,wu:n,path:Vs.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(t){const e=t._freezeSettings(),n=vl(t._databaseId);return new kh(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rh(t,e,n,i,r,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,r);Oh("Data must be an object, but it was:",o,i);const a=Dh(i,o);let c,l;if(s.merge)c=new mo(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=Lh(e,i,n);if(!o.contains(r))throw new ws(bs.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Uh(t,r)||t.push(r)}c=new mo(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new Th(new jo(a),c,l)}function Nh(t,e){if(xh(t=j(t)))return Oh("Unsupported field value:",e,t),Dh(t,e);if(t instanceof Eh)return function(t,e){if(!Sh(e.du))throw e.pu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.pu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Nh(r,e.gu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=j(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Va(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Ls.fromDate(t);return{timestampValue:wc(e.serializer,n)}}if(t instanceof Ls){const n=new Ls(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wc(e.serializer,n)}}if(t instanceof _h)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bh)return{bytesValue:Ec(e.serializer,t._byteString)};if(t instanceof fh){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.pu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Tc(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.pu(`Unsupported field value: ${lh(t)}`)}(t,e)}function Dh(t,e){const n={};return co(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ao(t,((t,i)=>{const r=Nh(i,e.Ru(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function xh(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ls||t instanceof _h||t instanceof bh||t instanceof fh||t instanceof Eh)}function Oh(t,e,n){if(!xh(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=lh(n);throw"an object"===i?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function Lh(t,e,n){if((e=j(e))instanceof wh)return e._internalPath;if("string"==typeof e)return function(t,e,n){if(e.search(Ph)>=0)throw Mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wh(...e.split("."))._internalPath}catch(i){throw Mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e);throw Mh("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ph=new RegExp("[~\\*/\\[\\]]");function Mh(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new ws(bs.INVALID_ARGUMENT,a+t+c)}function Uh(t,e){return t.some((t=>t.isEqual(e)))}function Fh(t,e){const n=hh(t.firestore,vh),i=function(t,e,...n){if(t=j(t),1===arguments.length&&(e=Ds.newId()),oh("doc","path",e),t instanceof dh){const i=Us.fromString(e,...n);return ah(i),new fh(t,null,new js(i))}{if(!(t instanceof fh||t instanceof mh))throw new ws(bs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Us.fromString(e,...n));return ah(i),new fh(t.firestore,t instanceof mh?t.converter:null,new js(i))}}(t),r=function(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}(t.converter,e);return function(t,e){return function(t,e){const n=new Es;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=Jl(t);try{const t=await function(t,e){const n=ys(t),i=Ls.now(),r=e.reduce(((t,e)=>t.add(e.key)),Pa());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Ca(),c=Pa();return n.os.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=sc(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new cc(t.key,e,Bo(e.value.mapValue),Za.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Ra(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Da[t.currentUser.toKey()];i||(i=new lo(xs)),i=i.insert(e,n),t.Da[t.currentUser.toKey()]=i}(i,t.batchId,n),await Ql(i,t.changes),await Rl(i.remoteStore)}catch(t){const e=Bl(t,"Failed to persist write");n.reject(e)}}(await ih(t),e,n))),n.promise}(function(t){return t._firestoreClient||yh(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(t),e)}(n,[Rh(Ah(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,Za.exists(!1))]).then((()=>i))}function Vh(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}new WeakMap,function(t,e=!0){!function(t){ls=t}(At),Tt(new B("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new vh(new Ss(t.getProvider("auth-internal")),new Rs(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ws(bs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Dt(as,"4.4.1",t),Dt(as,"4.4.1","esm2017")}(),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const jh=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Bh=new D("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),zh=new J("@firebase/auth");function Hh(t,...e){zh.logLevel<=G.ERROR&&zh.error(`Auth (${At}): ${t}`,...e)}function $h(t,...e){throw Gh(t,...e)}function qh(t,...e){return Gh(t,...e)}function Gh(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Bh.create(t,...e)}function Kh(t,e,...n){if(!t)throw Gh(e,...n)}function Wh(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hh(e),new Error(e)}function Qh(t,e){t||Wh(e)}function Xh(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Jh(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Yh(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Jh()||"https:"===Jh()||function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Zh{constructor(t,e){this.shortDelay=t,this.longDelay=e,Qh(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(A())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Yh()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tu(t,e){Qh(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class eu{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Wh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Wh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Wh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nu={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},iu=new Zh(3e4,6e4);function ru(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function su(t,e,n,i,r={}){return ou(t,r,(async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=P(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),eu.fetch()(cu(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},r))}))}async function ou(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},nu),e);try{const e=new hu(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw uu(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw uu(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw uu(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw uu(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(t,e,n){const i=Object.assign(Object.assign({},jh()),{[e]:n});return new D("auth","Firebase",i).create(e,{appName:t.name})}(t,a,o);$h(t,a)}}catch(e){if(e instanceof N)throw e;$h(t,"network-request-failed",{message:String(e)})}}async function au(t,e,n,i,r={}){const s=await su(t,e,n,i,r);return"mfaPendingCredential"in s&&$h(t,"multi-factor-auth-required",{_serverResponse:s}),s}function cu(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?tu(t.config,r):`${t.config.apiScheme}://${r}`}function lu(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hu{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(qh(this.auth,"network-request-failed"))),iu.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function uu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=qh(t,e,i);return r.customData._tokenResponse=n,r}function du(t){return void 0!==t&&void 0!==t.enterprise}class pu{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return lu(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}}function fu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function mu(t){return 1e3*Number(t)}function gu(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return Hh("JWT malformed, contained fewer than 3 sections"),null;try{const t=_(n);return t?JSON.parse(t):(Hh("Failed to decode base64 JWT payload"),null)}catch(t){return Hh("Caught error parsing JWT payload as JSON",null==t?void 0:t.toString()),null}}async function vu(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof N&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class yu{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class bu{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function wu(t){var e;const n=t.auth,i=await t.getIdToken(),r=await vu(t,async function(t,e){return su(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));Kh(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=Vh(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=t.providerData,l=o,[...c.filter((t=>!l.some((e=>e.providerId===t.providerId)))),...l]);var c,l;const h=t.isAnonymous,u=!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!h&&u,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bu(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}class Eu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Kh(t.idToken,"internal-error"),Kh(void 0!==t.idToken,"internal-error"),Kh(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=gu(t);return Kh(e,"internal-error"),Kh(void 0!==e.exp,"internal-error"),Kh(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return Kh(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await ou(t,{},(async()=>{const n=P({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=cu(t,i,"/v1/token",`key=${r}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",eu.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new Eu;return n&&(Kh("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(Kh("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(Kh("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Eu,this.toJSON())}_performRefresh(){return Wh("not implemented")}}function _u(t,e){Kh("string"==typeof t||void 0===t,"internal-error",{appName:e})}class Iu{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=Vh(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new bu(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await vu(this,this.stsTokenManager.getToken(this.auth,t));return Kh(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=j(t),i=await n.getIdToken(e),r=gu(i);Kh(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:fu(mu(r.auth_time)),issuedAtTime:fu(mu(r.iat)),expirationTime:fu(mu(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=j(t);await wu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Kh(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Iu(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Kh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await wu(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await vu(this,async function(t,e){return su(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,c,l;const h=null!==(n=e.displayName)&&void 0!==n?n:void 0,u=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=e.photoURL)&&void 0!==s?s:void 0,f=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=e.createdAt)&&void 0!==c?c:void 0,v=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:E,stsTokenManager:_}=e;Kh(y&&_,t,"internal-error");const I=Eu.fromJSON(this.name,_);Kh("string"==typeof y,t,"internal-error"),_u(h,t.name),_u(u,t.name),Kh("boolean"==typeof b,t,"internal-error"),Kh("boolean"==typeof w,t,"internal-error"),_u(d,t.name),_u(p,t.name),_u(f,t.name),_u(m,t.name),_u(g,t.name),_u(v,t.name);const T=new Iu({uid:y,auth:t,email:u,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:I,createdAt:g,lastLoginAt:v});return E&&Array.isArray(E)&&(T.providerData=E.map((t=>Object.assign({},t)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(t,e,n=!1){const i=new Eu;i.updateFromServerResponse(e);const r=new Iu({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await wu(r),r}}const Tu=new Map;function Su(t){Qh(t instanceof Function,"Expected a class definition");let e=Tu.get(t);return e?(Qh(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tu.set(t,e),e)}class Cu{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Cu.type="NONE";const ku=Cu;function Au(t,e,n){return`firebase:${t}:${e}:${n}`}class Ru{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Au(this.userKey,i.apiKey,r),this.fullPersistenceKey=Au("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Iu._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new Ru(Su(ku),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||Su(ku);const s=Au(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const i=Iu._fromJSON(t,e);n!==r&&(o=i),r=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(t){}}))),new Ru(r,t,n)):new Ru(r,t,n)}}function Nu(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lu(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Du(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mu(e))return"Blackberry";if(Uu(e))return"Webos";if(xu(e))return"Safari";if((e.includes("chrome/")||Ou(e))&&!e.includes("edge/"))return"Chrome";if(Pu(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Du(t=A()){return/firefox\//i.test(t)}function xu(t=A()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ou(t=A()){return/crios\//i.test(t)}function Lu(t=A()){return/iemobile/i.test(t)}function Pu(t=A()){return/android/i.test(t)}function Mu(t=A()){return/blackberry/i.test(t)}function Uu(t=A()){return/webos/i.test(t)}function Fu(t=A()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Vu(t=A()){return Fu(t)||Pu(t)||Uu(t)||Mu(t)||/windows phone/i.test(t)||Lu(t)}function ju(t,e=[]){let n;switch(t){case"Browser":n=Nu(A());break;case"Worker":n=`${Nu(A())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${At}/${i}`}class Bu{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(t){i(t)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(t){e.reverse();for(const t of e)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==t?void 0:t.message})}}}class zu{constructor(t){var e,n,i,r;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=s.minPasswordLength)&&void 0!==e?e:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=t.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=t.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}class Hu{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qu(this),this.idTokenSubscription=new qu(this),this.beforeStateQueue=new Bu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Su(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Ru.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(t){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Kh(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await wu(t)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?j(t):null;return e&&Kh(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Kh(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Su(t))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await async function(t,e={}){return su(t,"GET","/v2/passwordPolicy",ru(t,e))}(this),e=new zu(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new D("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise(((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged((()=>{n(),t()}),e)}}))}async revokeAccessToken(t){if(this.currentUser){const e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(e.tenantId=this.tenantId),await async function(t,e){return su(t,"POST","/v2/accounts:revokeToken",ru(t,e))}(this,e)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Su(t)||this._popupRedirectResolver;Kh(e,this,"argument-error"),this.redirectPersistenceManager=await Ru.create(this,[Su(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Kh(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"==typeof e){const r=t.addObserver(e,n,i);return()=>{s=!0,r()}}{const n=t.addObserver(e);return()=>{s=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Kh(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=ju(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null==e?void 0:e.error)&&function(t,...e){zh.logLevel<=G.WARN&&zh.warn(`Auth (${At}): ${t}`,...e)}(`Error while retrieving App Check token: ${e.error}`),null==e?void 0:e.token}}function $u(t){return j(t)}class qu{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new F(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return Kh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Gu(t){return new Promise(((e,n)=>{const i=document.createElement("script");var r,s;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=qh("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",(null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:document).appendChild(i)}))}function Ku(t){return`__${t}${Math.floor(1e6*Math.random())}`}class Wu{constructor(t){this.type="recaptcha-enterprise",this.auth=$u(t)}async verify(t="verify",e=!1){function n(e,n,i){const r=window.grecaptcha;du(r)?r.enterprise.ready((()=>{r.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((t,i)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{(async function(t,e){return su(t,"GET","/v2/recaptchaConfig",ru(t,e))})(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new pu(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))})(this.auth).then((r=>{if(!e&&du(window.grecaptcha))n(r,t,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));Gu("https://www.google.com/recaptcha/enterprise.js?render="+r).then((()=>{n(r,t,i)})).catch((t=>{i(t)}))}})).catch((t=>{i(t)}))}))}}async function Qu(t,e,n,i=!1){const r=new Wu(t);let s;try{s=await r.verify(n)}catch(t){s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Xu(t,e,n,i){var r;if(null===(r=t._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Qu(t,e,n,"getOobCode"===n);return i(t,r)}return i(t,e).catch((async r=>{if("auth/missing-recaptcha-token"===r.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const r=await Qu(t,e,n,"getOobCode"===n);return i(t,r)}return Promise.reject(r)}))}function Ju(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Yu(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Zu{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Wh("not implemented")}_getIdTokenResponse(t){return Wh("not implemented")}_linkToIdToken(t,e){return Wh("not implemented")}_getReauthenticationResolver(t){return Wh("not implemented")}}async function td(t,e){return su(t,"POST","/v1/accounts:signUp",e)}async function ed(t,e){return au(t,"POST","/v1/accounts:signInWithPassword",ru(t,e))}class nd extends Zu{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new nd(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new nd(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return Xu(t,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ed);case"emailLink":return async function(t,e){return au(t,"POST","/v1/accounts:signInWithEmailLink",ru(t,e))}(t,{email:this._email,oobCode:this._password});default:$h(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Xu(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",td);case"emailLink":return async function(t,e){return au(t,"POST","/v1/accounts:signInWithEmailLink",ru(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:$h(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function id(t,e){return au(t,"POST","/v1/accounts:signInWithIdp",ru(t,e))}class rd extends Zu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new rd(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):$h("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=Vh(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new rd(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return id(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,id(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,id(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=P(e)}return t}}const sd={USER_NOT_FOUND:"user-not-found"};class od extends Zu{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new od({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new od({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return au(t,"POST","/v1/accounts:signInWithPhoneNumber",ru(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await au(t,"POST","/v1/accounts:signInWithPhoneNumber",ru(t,e));if(n.temporaryProof)throw uu(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return au(t,"POST","/v1/accounts:signInWithPhoneNumber",ru(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),sd)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new od({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class ad{constructor(t){var e,n,i,r,s,o;const a=M(U(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Kh(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=M(U(t)).link,n=e?M(U(e)).deep_link_id:null,i=M(U(t)).deep_link_id;return(i?M(U(i)).link:null)||i||n||e||t}(t);try{return new ad(e)}catch(t){return null}}}class cd{constructor(){this.providerId=cd.PROVIDER_ID}static credential(t,e){return nd._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=ad.parseLink(e);return Kh(n,"argument-error"),nd._fromEmailAndCode(t,n.code,n.tenantId)}}cd.PROVIDER_ID="password",cd.EMAIL_PASSWORD_SIGN_IN_METHOD="password",cd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ld{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class hd extends ld{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class ud extends hd{constructor(){super("facebook.com")}static credential(t){return rd._fromParams({providerId:ud.PROVIDER_ID,signInMethod:ud.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ud.credentialFromTaggedObject(t)}static credentialFromError(t){return ud.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ud.credential(t.oauthAccessToken)}catch(t){return null}}}ud.FACEBOOK_SIGN_IN_METHOD="facebook.com",ud.PROVIDER_ID="facebook.com";class dd extends hd{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return rd._fromParams({providerId:dd.PROVIDER_ID,signInMethod:dd.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return dd.credentialFromTaggedObject(t)}static credentialFromError(t){return dd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return dd.credential(e,n)}catch(t){return null}}}dd.GOOGLE_SIGN_IN_METHOD="google.com",dd.PROVIDER_ID="google.com";class pd extends hd{constructor(){super("github.com")}static credential(t){return rd._fromParams({providerId:pd.PROVIDER_ID,signInMethod:pd.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return pd.credentialFromTaggedObject(t)}static credentialFromError(t){return pd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pd.credential(t.oauthAccessToken)}catch(t){return null}}}pd.GITHUB_SIGN_IN_METHOD="github.com",pd.PROVIDER_ID="github.com";class fd extends hd{constructor(){super("twitter.com")}static credential(t,e){return rd._fromParams({providerId:fd.PROVIDER_ID,signInMethod:fd.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return fd.credentialFromTaggedObject(t)}static credentialFromError(t){return fd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return fd.credential(e,n)}catch(t){return null}}}fd.TWITTER_SIGN_IN_METHOD="twitter.com",fd.PROVIDER_ID="twitter.com";class md{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await Iu._fromIdTokenResponse(t,n,i),s=gd(n);return new md({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=gd(n);return new md({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function gd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class vd extends N{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,vd.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new vd(t,e,n,i)}}function yd(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw vd._fromErrorAndOperation(t,n,e,i);throw n}))}new WeakMap;const bd="__sak";class wd{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ed extends wd{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=A();return xu(t)||Fu(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Vu(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);!function(){const t=A();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||10!==document.documentMode||r===t.newValue||t.newValue===t.oldValue?i():setTimeout(i,10)}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Ed.type="LOCAL";const _d=Ed;class Id extends wd{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Id.type="SESSION";const Td=Id;class Sd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Sd(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Cd(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}Sd.receivers=[];class kd{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=Cd("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Ad(){return window}function Rd(){return void 0!==Ad().WorkerGlobalScope&&"function"==typeof Ad().importScripts}const Nd="firebaseLocalStorageDb",Dd="firebaseLocalStorage",xd="fbase_key";class Od{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function Ld(t,e){return t.transaction([Dd],e?"readwrite":"readonly").objectStore(Dd)}function Pd(){const t=indexedDB.open(Nd,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(Dd,{keyPath:xd})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(Dd)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(Nd);return new Od(t).toPromise()}(),e(await Pd()))}))}))}async function Md(t,e,n){const i=Ld(t,!0).put({[xd]:e,value:n});return new Od(i).toPromise()}function Ud(t,e){const n=Ld(t,!0).delete(e);return new Od(n).toPromise()}class Fd{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Pd()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rd()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sd._getInstance(Rd()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new kd(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Pd();return await Md(t,bd,"1"),await Ud(t,bd),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>Md(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=Ld(t,!1).get(e),i=await new Od(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>Ud(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=Ld(t,!1).getAll();return new Od(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Fd.type="LOCAL";const Vd=Fd;Ku("rcb"),new Zh(3e4,6e4);class jd{constructor(t){this.providerId=jd.PROVIDER_ID,this.auth=$u(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var i;const r=await n.verify();try{let s;if(Kh("string"==typeof r,t,"argument-error"),Kh("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){Kh("enroll"===e.type,t,"internal-error");const n=await function(t,e){return su(t,"POST","/v2/accounts/mfaEnrollment:start",ru(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{Kh("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;Kh(n,t,"missing-multi-factor-info");const o=await function(t,e){return su(t,"POST","/v2/accounts/mfaSignIn:start",ru(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return su(t,"POST","/v1/accounts:sendVerificationCode",ru(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}(this.auth,t,j(e))}static credential(t,e){return od._fromVerification(t,e)}static credentialFromResult(t){const e=t;return jd.credentialFromTaggedObject(e)}static credentialFromError(t){return jd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?od._fromTokenResponse(e,n):null}}jd.PROVIDER_ID="phone",jd.PHONE_SIGN_IN_METHOD="phone";class Bd extends Zu{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return id(t,this._buildIdpRequest())}_linkToIdToken(t,e){return id(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return id(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function zd(t){return async function(t,e,n=!1){const i="signIn",r=await yd(t,i,e),s=await md._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}(t.auth,new Bd(t),t.bypassAuthState)}function Hd(t){const{auth:e,user:n}=t;return Kh(n,e,"internal-error"),async function(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await vu(t,yd(i,r,e,t),n);Kh(s.idToken,i,"internal-error");const o=gu(s.idToken);Kh(o,i,"internal-error");const{sub:a}=o;return Kh(t.uid===a,i,"user-mismatch"),md._forOperation(t,r,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&$h(i,"user-mismatch"),t}}(n,new Bd(t),t.bypassAuthState)}async function $d(t){const{auth:e,user:n}=t;return Kh(n,e,"internal-error"),async function(t,e,n=!1){const i=await vu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return md._forOperation(t,"link",i)}(n,new Bd(t),t.bypassAuthState)}class qd{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return zd;case"linkViaPopup":case"linkViaRedirect":return $d;case"reauthViaPopup":case"reauthViaRedirect":return Hd;default:$h(this.auth,"internal-error")}}resolve(t){Qh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Qh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gd=new Zh(2e3,1e4);class Kd extends qd{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Kd.currentPopupAction&&Kd.currentPopupAction.cancel(),Kd.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Kh(t,this.auth,"internal-error"),t}async onExecution(){Qh(1===this.filter.length,"Popup operations only handle one event");const t=Cd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(qh(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(qh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kd.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(qh(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,Gd.get())};t()}}Kd.currentPopupAction=null;const Wd="pendingRedirect",Qd=new Map;class Xd extends qd{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Qd.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return Au(Wd,t.config.apiKey,t.name)}(e),i=function(t){return Su(t._redirectPersistence)}(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}Qd.set(this.auth._key(),t)}return this.bypassAuthState||Qd.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Jd(t,e){Qd.set(t._key(),e)}async function Yd(t,e,n=!1){const i=$u(t),r=function(t,e){return e?Su(e):(Kh(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(i,e),s=new Xd(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class Zd{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ep(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!ep(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(qh(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tp(t))}saveEventToCache(t){this.cachedEventUids.add(tp(t)),this.lastProcessedEventTime=Date.now()}}function tp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function ep({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const np=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ip=/^https?/;function rp(t){const e=Xh(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!ip.test(n))return!1;if(np.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const sp=new Zh(3e4,6e4);function op(){const t=Ad().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let ap=null;function cp(t){return ap=ap||function(t){return new Promise(((e,n)=>{var i,r,s;function o(){op(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{op(),n(qh(t,"network-request-failed"))},timeout:sp.get()})}if(null===(r=null===(i=Ad().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Ad().gapi)||void 0===s?void 0:s.load)){const e=Ku("iframefcb");return Ad()[e]=()=>{gapi.load?o():n(qh(t,"network-request-failed"))},Gu(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw ap=null,t}))}(t),ap}const lp=new Zh(5e3,15e3),hp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},up=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dp(t){const e=t.config;Kh(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?tu(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:t.name,v:At},r=up.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${P(i).slice(1)}`}const pp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fp{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}const mp=encodeURIComponent("fac");async function gp(t,e,n,i,r,s){Kh(t.config.authDomain,t,"auth-domain-config-required"),Kh(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:At,eventId:r};if(e instanceof ld){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof hd){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];const c=await t._getAppCheckToken(),l=c?`#${mp}=${encodeURIComponent(c)}`:"";return`${function({config:t}){return t.emulator?tu(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${P(a).slice(1)}${l}`}const vp="webStorageSupport",yp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Td,this._completeRedirectFn=Yd,this._overrideRedirectResult=Jd}async _openPopup(t,e,n,i){var r;return Qh(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(t,e,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},pp),{width:i.toString(),height:r.toString(),top:s,left:o}),l=A().toLowerCase();n&&(a=Ou(l)?"_blank":n),Du(l)&&(e=e||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=A()){var e;return Fu(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",a),new fp(null);const u=window.open(e||"",a,h);Kh(u,t,"popup-blocked");try{u.focus()}catch(t){}return new fp(u)}(t,await gp(t,e,n,Xh(),i),Cd())}async _openRedirect(t,e,n,i){return await this._originValidation(t),r=await gp(t,e,n,Xh(),i),Ad().location.href=r,new Promise((()=>{}));var r}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(Qh(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await cp(t),n=Ad().gapi;return Kh(n,t,"internal-error"),e.open({where:document.body,url:dp(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hp,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=qh(t,"network-request-failed"),s=Ad().setTimeout((()=>{i(r)}),lp.get());function o(){Ad().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}(t),n=new Zd(t);return e.register("authEvent",(e=>(Kh(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(vp,{type:vp},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[vp];void 0!==r&&e(!!r),$h(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return su(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(rp(t))return}catch(t){}$h(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Vu()||xu()||Fu()}};var bp="@firebase/auth",wp="1.5.1";class Ep{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Kh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const _p=C("authIdTokenMaxAge")||300;let Ip=null;var Tp;Tp="Browser",Tt(new B("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Kh(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:Tp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ju(Tp)},c=new Hu(n,i,r,a);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Su);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(c,e),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),Tt(new B("auth-internal",(t=>{return e=$u(t.getProvider("auth").getImmediate()),new Ep(e);var e}),"PRIVATE").setInstantiationMode("EXPLICIT")),Dt(bp,wp,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Tp)),Dt(bp,wp,"esm2017");const Sp=Rt({apiKey:"AIzaSyDKlhRev5ZTVC9nGqXyT4qBi0WxSqs1gHE",authDomain:"moviehub-ad4ef.firebaseapp.com",projectId:"moviehub-ad4ef",storageBucket:"moviehub-ad4ef.appspot.com",messagingSenderId:"15340906607",appId:"1:15340906607:web:3eeeaedde73256afea859a"}),Cp=function(t,e){const n="string"==typeof t?t:"(default)",i=St("object"==typeof t?t:Nt(),"firestore").getImmediate({identifier:n});if(!i._initialized){const t=(t=>{const e=T("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]})();t&&function(t,e,n,i={}){var r;const s=(t=hh(t,dh))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=cs.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[E(JSON.stringify({alg:"none",type:"JWT"})),E(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new ws(bs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new cs(s)}t._authCredentials=new Ts(new _s(e,n))}}(i,...t)}return i}(Sp),kp=(function(t=Nt()){const e=St(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=St(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(O(n.getOptions(),null!=e?e:{}))return t;$h(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:yp,persistence:[Vd,_d,Td]}),i=C("authTokenSyncURL");if(i){const t=(r=i,async t=>{const e=t&&await t.getIdTokenResult(),n=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>_p)return;const i=null==e?void 0:e.token;Ip!==i&&(Ip=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(t,e,n){j(t).beforeAuthStateChanged(e,n)}(n,t,(()=>t(n.currentUser))),function(e,n,i,r){j(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}var r;const s=T("auth");s&&function(t,e,n){const i=$u(t);Kh(i._canInitEmulator,i,"emulator-config-failed"),Kh(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=Ju(e),{host:o,port:a}=function(t){const e=Ju(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Yu(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Yu(e)}}}(e),c=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${s}`)}(Sp),t=>function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(void 0,void 0,void 0,(function*(){try{const e=function(t,e,...n){if(t=j(t),oh("collection","path",e),t instanceof dh){const i=Us.fromString(e,...n);return ch(i),new mh(t,null,i)}{if(!(t instanceof fh||t instanceof mh))throw new ws(bs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Us.fromString(e,...n));return ch(i),new mh(t.firestore,null,i)}}(Cp,"movies");yield Fh(e,t),console.log("se añadió con éxito")}catch(t){console.error(t)}})));var Ap=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const Rp={title:"",image:"",categories:[],director:"",release_date:"",cast:"",crew:"",image_sec:"",description:"",catch_phrase:""};class Np extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}changeTitle(t){var e;Rp.title=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeImage(t){var e;Rp.image=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCategories(t){var e;Rp.categories=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeDirector(t){var e;Rp.director=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeRelease(t){var e;Rp.release_date=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCast(t){var e;Rp.cast=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCrew(t){var e;Rp.crew=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeImageSec(t){var e;Rp.image_sec=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeDescription(t){var e;Rp.description=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCatchPhrase(t){var e;Rp.catch_phrase=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}render(){return Ap(this,void 0,void 0,(function*(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML='\n\t\t\t\t<section class= "container">\n\n\t\t\t\t\t<button id = "ButtonModal">+</button>\n\t\t</section>\n\t\t\t\t<section class="modalContainer" style="display: none;">\n    <div class="modal-overlay">\n\t\t\t\t<section class="modal-content">\n\t\t\t\t\t<form class="my-form">\n\t\t\t\t\t<section id="header">\n\t\t\t\t\t\t<span class = "close"><img src="https://img.icons8.com/ios-filled/50/FB953C/delete-sign--v1.png" alt="delete-sign--v1"/></span>\n\t\t\t\t\t\t\t<h2>Add a movie</h2>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t<label for="fname">Name movie</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="fname" name="fname" placeholder="Pearl"><br><br>\n\t\t\t\t\t\t\t\t<label for="director">Director</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="directorMovie" name="director" placeholder="Ti West"><br><br>\n\t\t\t\t\t\t\t\t<label for="date">Release date</label><br>\n\t\t\t\t\t\t\t\t<input type="date" id="datemovie" name="date" ><br><br>\n\t\t\t\t\t\t\t\t<label for="catch">Catch-Phrase</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="catchMovie" name="catch" placeholder="An X-traordinary Origin Story"><br><br>\n\t\t\t\t\t\t\t\t<label for="description">Description</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="descriptionMovie" name="description" placeholder="Pearl (subtitled An X-traordinary Origin Story) is a 2022 American horror film directed by Ti West, co-written by West and Mia Goth, who reprises her role as the title character, and featuring David Corenswet, Tandi Wright, Matthew Sunderland and Emma Jenkins-Purro in supporting roles. A prequel to X (2022) and the second installment in the X film series, it serves as an origin story for the title villain, whose fervent aspiration to become a movie star led her to committing violent acts on her family\'s Texas homestead in 1918."><br><br>\n\t\t\t\t\t\t\t\t<label for="cast">Cast</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="castMovie" name="cast" placeholder="Mia Goth, David Corenswet, Alistair Sewell, Emma Jenkins, Matthew Sunderland, Tandi Wright"><br><br>\n\t\t\t\t\t\t\t\t<label for="crew">Crew</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="crewMovie" name="crew" placeholder="Mia Goth, David Corenswet, Alistair Sewell, Emma Jenkins, Matthew Sunderland, Tandi Wright"><br><br>\n\t\t\t\t\t\t\t\t<label for="poster">Enter movie poster url</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="movieposter" name="poster" placeholder="https://pics.filmaffinity.com/Pearl-745024740-large.jpg"><br><br>\n\t\t\t\t\t\t\t\t<label for="image">Enter secondary image url</label><br>\n\t\t\t\t\t\t\t\t<input type="text" id="movieimage" name="image" placeholder="https://pics.filmaffinity.com/Pearl-745024740-large.jpg"><br><br>\n\t\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t\t\t\t<label for="crew">Genres</label><br>\n\t\t\t\t\t\t\t\t\t\t<section id="checkboxes">\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="romance" value="romance" />\n\t\t\t\t\t\t\t\t\t\t<label for="romance">Romance</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="action" value="action" />\n\t\t\t\t\t\t\t\t\t\t<label for="action">Action</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="comedy" value="comedy" />\n\t\t\t\t\t\t\t\t\t\t<label for="comedy">Comedy</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="Thriller" value="thriller" />\n\t\t\t\t\t\t\t\t\t\t<label for="thriller">Thriller</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="sci-fi" value="sci-fi" />\n\t\t\t\t\t\t\t\t\t\t<label for="sci-fi">Sci-Fi</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="drama" value="drama" />\n\t\t\t\t\t\t\t\t\t\t<label for="drama">Drama</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="animated" value="animated" />\n\t\t\t\t\t\t\t\t\t\t<label for="animated">Animated</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="classic" value="classics" />\n\t\t\t\t\t\t\t\t\t\t<label for="classic">Classics</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="documental" value="documental" />\n\t\t\t\t\t\t\t\t\t\t<label for="documental">Documental</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t<section class="label-chechbox">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="psychological" value="psychological" />\n\t\t\t\t\t\t\t\t\t\t<label for="psychological">Psychological</label>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t<button type="submit">Submit</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t</section>\n\t\t</section>\n      ';const e=this.ownerDocument.createElement("style");e.innerHTML=v.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e);const n=this.shadowRoot.querySelector(".modalContainer");this.shadowRoot.querySelector(".close").addEventListener("click",(()=>{n.style.display="none"})),window.addEventListener("click",(t=>{t.target==n&&(n.style.display="none")})),this.shadowRoot.querySelector("#ButtonModal").addEventListener("click",(t=>{n.style.display="block"})),this.shadowRoot.querySelector("#fname").addEventListener("change",this.changeTitle),this.shadowRoot.querySelector("#directorMovie").addEventListener("change",this.changeDirector),this.shadowRoot.querySelector("#datemovie").addEventListener("change",this.changeRelease),this.shadowRoot.querySelector("#descriptionMovie").addEventListener("change",this.changeDescription),this.shadowRoot.querySelector("#castMovie").addEventListener("change",this.changeCast),this.shadowRoot.querySelector("#crewMovie").addEventListener("change",this.changeCrew),this.shadowRoot.querySelector("#movieposter").addEventListener("change",this.changeImage),this.shadowRoot.querySelector("#movieimage").addEventListener("change",this.changeImageSec),this.shadowRoot.querySelector("#catchMovie").addEventListener("change",this.changeCatchPhrase),this.shadowRoot.querySelectorAll('input[type="checkbox"]').forEach((t=>{t.addEventListener("change",(e=>{if(t.checked)Rp.categories.push(t.value);else{const e=Rp.categories.indexOf(t.value);-1!==e&&Rp.categories.splice(e,1)}console.log("Arreglo de categorías actualizado:",Rp.categories)}))})),this.shadowRoot.querySelector(".my-form").addEventListener("submit",(t=>Ap(this,void 0,void 0,(function*(){var e,i,r,s,o,a,c,l,h,u,d;t.preventDefault(),n.style.display="none",yield kp(Rp),(null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("fname")).value="",(null===(i=this.shadowRoot)||void 0===i?void 0:i.getElementById("directorMovie")).value="",(null===(r=this.shadowRoot)||void 0===r?void 0:r.getElementById("datemovie")).value="",(null===(s=this.shadowRoot)||void 0===s?void 0:s.getElementById("catchMovie")).value="",(null===(o=this.shadowRoot)||void 0===o?void 0:o.getElementById("descriptionMovie")).value="",(null===(a=this.shadowRoot)||void 0===a?void 0:a.getElementById("castMovie")).value="",(null===(c=this.shadowRoot)||void 0===c?void 0:c.getElementById("crewMovie")).value="",(null===(l=this.shadowRoot)||void 0===l?void 0:l.getElementById("movieposter")).value="",(null===(h=this.shadowRoot)||void 0===h?void 0:h.getElementById("movieimage")).value="",(null===(u=this.shadowRoot)||void 0===u?void 0:u.getElementById("catchMovie")).value="";const p=null===(d=this.shadowRoot)||void 0===d?void 0:d.querySelectorAll('input[type="checkbox"]');null==p||p.forEach((t=>{t.checked=!1})),Rp.categories=[],console.log("Formulario enviado y campos limpiados")}))))}}))}}customElements.define("modal-movie",Np);var Dp,xp=n(679);!function(t){t.buttonlabel="buttonlabel"}(Dp||(Dp={}));class Op extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({buttonlabel:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t      <button type="button">${this.buttonlabel}</button>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=xp.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-button",Op);var Lp,Pp=n(167);!function(t){t.icon_url="icon_url",t.label="label",t.link="link",t.description_icon="description_icon"}(Lp||(Lp={}));class Mp extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({icon_url:null,label:null,link:null,description_icon:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n<a href="${this.link}"><p>${this.label}</p> <img src="${this.icon_url}" alt="${this.description_icon}"></a>\n      `;const e=this.ownerDocument.createElement("style");e.innerHTML=Pp.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}}customElements.define("my-actionandicon",Mp);var Up,Fp=n(909);!function(t){t.label="label"}(Up||(Up={}));class Vp extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({label:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n      <section>\n      <label for="crew">${this.label}</label><br>\n      <section id="checkboxes">\n      <section class="label-chechbox">\n      <input type="checkbox" id="romance" value="first-checkbox" />\n      <label for="romance">Romance</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="action" value="second-checkbox" />\n      <label for="action">Action</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="comedy" value="thirth-checkbox" />\n      <label for="comedy">Comedy</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="Thriller" value="fourth-checkbox" />\n      <label for="thriller">Thriller</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="sci-fi" value="fifth-checkbox" />\n      <label for="sci-fi">Sci-Fi</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="drama" value="sixth-checkbox" />\n      <label for="drama">Drama</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="animated" value="seventh-checkbox" />\n      <label for="animated">Animated</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="classic" value="eighth-checkbox" />\n      <label for="classic">Classics</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="documental" value="ninth-checkbox" />\n      <label for="documental">Documental</label>\n      </section>\n      <section class="label-chechbox">\n      <input type="checkbox" id="psychological" value="second-checkbox" />\n      <label for="psychological">Psychological</label>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Fp.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-filters",Vp);var jp,Bp=n(83);!function(t){t.poster="poster",t.director="director",t.utitle="utitle",t.release_year="release_year"}(jp||(jp={}));class zp extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({poster:null,director:null,utitle:null,release_year:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n<img src="${this.poster}">\n<h1>${this.utitle}</h1>\n<p>Directed by ${this.director} - ${this.release_year}</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Bp.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-figuremovie",zp);var Hp,$p=n(775);!function(t){t.description="description"}(Hp||(Hp={}));class qp extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({description:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n<p>${this.description}</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=$p.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-descriptionmovie",qp);var Gp,Kp=n(191);!function(t){t.section_title="section_title",t.content="content"}(Gp||(Gp={}));class Wp extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({section_title:null,content:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n      <h4>${this.section_title}</h4>\n      <hr></hr>\n<p>${this.content}</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Kp.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-extrainfo",Wp);var Qp,Xp=n(791);!function(t){t.utitle="utitle",t.your_name="your_name",t.mobile_number="mobile_number",t.email="email",t.emailornumber="emailornumber",t.password="password",t.re_password="re_password"}(Qp||(Qp={}));class Jp extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({utitle:null,your_name:null,mobile_number:null,email:null,emailornumber:null,password:null,re_password:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){let t=`\n              <section id="header">\n                  <span class="close"><img src="https://img.icons8.com/ios-filled/50/FB953C/delete-sign--v1.png" alt="delete-sign--v1"/></span>\n                  <h1>${this.utitle}</h1>\n              </section>\n          `;this.your_name&&(t+=`\n                  <label for="name">${this.your_name}</label><br>\n                  <input type="text" class="space" name="name" placeholder="First and last name"><br><br>\n              `),this.mobile_number&&(t+=`\n                  <label for="mobile">${this.mobile_number}</label><br>\n                  <input type="text" class="space" name="mobile" placeholder="Don't forget your country code"><br><br>\n              `),this.email&&(t+=`\n                  <label for="email">${this.email}</label><br>\n                  <input type="text" class="space" name="email" placeholder="johndoe@movie.com"><br><br>\n              `),this.emailornumber&&(t+=`\n                  <label for="emailornumber">${this.emailornumber}</label><br>\n                  <input type="text" class="space" name="emailornumber"><br><br>\n              `),this.password&&(t+=`\n                  <label for="password">${this.password}</label><br>\n                  <input type="text" class="space" name="password" placeholder="At least 8 characters"><br><br>\n              `),this.re_password&&(t+=`\n                  <label for="re_password">${this.re_password}</label><br>\n                  <input type="text" class="space" name="re_password" placeholder="Confirm your password"><br><br>\n              `),t+="</section>",this.shadowRoot.innerHTML=t}const e=this.ownerDocument.createElement("style");e.innerHTML=Xp.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-sessionform",Jp);var Yp,Zp=n(633);!function(t){t.btn_text="btn_text",t.message="message",t.btn_type="btn_type"}(Yp||(Yp={}));class tf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({btn_text:null,btn_type:null,message:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section>\n      <button type="${this.btn_type}" id="send">${this.btn_text}</button>\n      <p>${this.message}<a href="https://en.wikipedia.org/wiki/Terms_of_service"> Our Conditions of Use and Privacy Notice</a>.</p>\n      </section>\n      `);const e=this.ownerDocument.createElement("style");e.innerHTML=Zp.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-submitandterms",tf);var ef,nf=n(163);!function(t){t.image="image"}(ef||(ef={}));class rf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({image:null})}attributeChangedCallback(t,e,n){this[t]=n,this.render()}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section class="container">\n\t\t\t<img class="poster" src="${this.image}" >\n\t\t</section>\n    <button id ="AddButton">+</button>\n\t\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=nf.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-moviecardadd",rf);var sf=n(9);class of extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var t,e,n,s,o,a,c,l;this.render();const h=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("my-banner");if(h){const t=null===(e=h.shadowRoot)||void 0===e?void 0:e.querySelector("#accountButton");null==t||t.addEventListener("click",(()=>{i(r("SIGNIN"))}))}const u=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("my-banner");if(u){const t=null===(s=u.shadowRoot)||void 0===s?void 0:s.querySelector("custom-navbar"),e=null===(o=null==t?void 0:t.shadowRoot)||void 0===o?void 0:o.querySelector("#login");e&&e.addEventListener("click",(()=>{i(r("LOGIN"))}))}const d=null===(a=this.shadowRoot)||void 0===a?void 0:a.querySelector("my-banner");if(d){const t=null===(c=d.shadowRoot)||void 0===c?void 0:c.querySelector("custom-navbar"),e=null===(l=null==t?void 0:t.shadowRoot)||void 0===l?void 0:l.querySelector("#signin");e&&e.addEventListener("click",(()=>{i(r("SIGNIN"))}))}}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<body>\n      <my-banner message="Track films you\'ve watched. Save those you want to see. Tell your friends what\'s good."\n\t\t\tbuttonlabel="GET AN ACCOUNT, IT\'S FREE"></my-banner>\n\t\t\t<category-section name="Popular films in the community" category="popular" link="https://myflixerz.to/movie"></category-section>\n\t\t\t\t<category-section name="On cinema right now" category="cinema"></category-section>\n\t\t\t\t<category-section name="Trending this week" category="trending"></category-section>\n\t\t\t\t<category-section name="classics" category="classics"></category-section>\n\t\t\t\t<modal-movie></modal-movie>\n\t\t\t\t</body>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=sf.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-dashboard",of);class af extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML="\n\t\t\t<h1>CATEGORIES</h1>\n\t\t\t")}}customElements.define("app-categories",af);class cf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML="\n\t\t\t<h1>FilmPage</h1>\n\t\t\t")}}customElements.define("app-filmpage",cf);var lf=n(858);class hf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var t,e,n,s,o;this.render();const a=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#navigatetosignin");null==a||a.addEventListener("click",(()=>{i(r("SIGNIN"))}));const c=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("my-submitandterms");if(c){const t=null===(n=c.shadowRoot)||void 0===n?void 0:n.querySelector("#send");null==t||t.addEventListener("click",(()=>{i(r("DASHBOARD"))}))}const l=null===(s=this.shadowRoot)||void 0===s?void 0:s.querySelector("my-sessionform");if(l){const t=null===(o=l.shadowRoot)||void 0===o?void 0:o.querySelector(".close");null==t||t.addEventListener("click",(()=>{i(r("DASHBOARD"))}))}}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<section>\n\t\t\t<section id="form">\n     <my-sessionform utitle="LOG IN" password="Password" emailornumber="Mobile number or email"></my-sessionform>\n\t\t <my-submitandterms btn_text="Continue" message="By using our services you agree to" btn_type="submit"></my-submitandterms>\n\t\t </section>\n\t\t <section id="extrainfo">\n\t\t <section id="extrainfo-content">\n\t\t <hr><p>New to this website</p><hr>\n\t\t </section>\n\t\t <button id="navigatetosignin">Create your account</button>\n\t\t </section>\n\t\t </section>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=lf.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-login",hf);class uf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML="\n\t\t\t<h1>MyLists</h1>\n\t\t\t")}}customElements.define("app-mylists",uf);class df extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML="\n\t\t\t<h1>NewList</h1>\n\t\t\t")}}customElements.define("app-newlist",df);class pf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML="\n\t\t\t<h1>PROFILE</h1>\n\t\t\t")}}customElements.define("app-profile",pf);var ff=n(307);class mf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var t,e,n,s,o;this.render();const a=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#loginpage");null==a||a.addEventListener("click",(()=>{i(r("LOGIN"))}));const c=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("my-submitandterms");if(c){const t=null===(n=c.shadowRoot)||void 0===n?void 0:n.querySelector("#send");null==t||t.addEventListener("click",(()=>{i(r("DASHBOARD"))}))}const l=null===(s=this.shadowRoot)||void 0===s?void 0:s.querySelector("my-sessionform");if(l){const t=null===(o=l.shadowRoot)||void 0===o?void 0:o.querySelector(".close");null==t||t.addEventListener("click",(()=>{i(r("DASHBOARD"))}))}}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML='\n\t\t\t<body>\n\t\t\t<section>\n     <my-sessionform utitle="SIGN IN" email="Email" your_name="Your name" mobile_number="Mobile number" re_password="Re-enter password" password="Password" ></my-sessionform>\n\t\t <my-submitandterms btn_text="Create account" message="By creating an account, you agree to" btn_type="submit"></my-submitandterms>\n\t\t <hr>\n\t\t <p>Already have an account? <a id="loginpage">Log in</a></p>\n\t\t </section>\n\t\t</body>\n\t\t\t');const e=this.ownerDocument.createElement("style");e.innerHTML=ff.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-signin",mf);class gf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),e=[...e,this]}connectedCallback(){this.render()}render(){var e,n,i,r,s,o,a,c;switch(this.shadowRoot&&(this.shadowRoot.innerHTML=""),t.screen){case"LOGIN":const t=this.ownerDocument.createElement("app-login");null===(e=this.shadowRoot)||void 0===e||e.appendChild(t);break;case"DASHBOARD":const l=this.ownerDocument.createElement("app-dashboard");null===(n=this.shadowRoot)||void 0===n||n.appendChild(l);break;case"SIGNIN":const h=this.ownerDocument.createElement("app-signin");null===(i=this.shadowRoot)||void 0===i||i.appendChild(h);break;case"CATEGORIES":const u=this.ownerDocument.createElement("app-categories");null===(r=this.shadowRoot)||void 0===r||r.appendChild(u);break;case"FILMPAGE":const d=this.ownerDocument.createElement("app-filmpage");null===(s=this.shadowRoot)||void 0===s||s.appendChild(d);break;case"MYLISTS":const p=this.ownerDocument.createElement("app-mylists");null===(o=this.shadowRoot)||void 0===o||o.appendChild(p);break;case"NEWLIST":const f=this.ownerDocument.createElement("app-newlist");null===(a=this.shadowRoot)||void 0===a||a.appendChild(f);break;case"PROFILE":const m=this.ownerDocument.createElement("app-profile");null===(c=this.shadowRoot)||void 0===c||c.appendChild(m)}}}customElements.define("app-container",gf)})()})();